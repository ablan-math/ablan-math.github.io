<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงูุฏุฑุณ ูค-ูก: ุญู ุงููุชุจุงููุงุช ุจุงูุฌูุน ูุงูุทุฑุญ | ููุตุฉ ุงูุฑูุงุถูุงุช ุงูุชูุงุนููุฉ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; }
        .hidden { display: none; }
        .step-box { border-right: 4px solid #1d4ed8; }
        .vocab-term { background-color: #ffefc5; padding: 2px 6px; border-radius: 4px; font-weight: bold; }
        .option-label { display: block; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; cursor: pointer; transition: all 0.2s ease-in-out; }
        .option-label:hover { border-color: #3b82f6; background-color: #eff6ff; }
        input[type="radio"]:checked + .option-label { border-color: #2563eb; background-color: #dbeafe; box-shadow: 0 0 0 2px #bfdbfe; }
        input[type="radio"] { display: none; }
        .feedback-correct { color: #16a34a; }
        .feedback-incorrect { color: #dc2626; }
        .highlight-change { color: #ef4444; font-weight: bold; }
        .math-eq { font-family: "Courier New", monospace; font-size: 1.2rem; font-weight: bold; color: #4338ca; background-color: #f3f4f6; border: 1px solid #d1d5db; padding: 2px 8px; border-radius: 6px; display: inline-block; vertical-align: middle; }
        .num-highlight {
            background-color: #fef9c3; /* yellow-100 */
            color: #ca8a04; /* yellow-600 */
            padding: 1px 6px;
            border-radius: 4px;
            border: 1px solid #facc15; /* yellow-400 */
            font-weight: bold;
            display: inline-block;
            vertical-align: middle;
        }
        .fraction { display: inline-flex; flex-direction: column; text-align: center; vertical-align: middle; margin: 0 0.2em; }
        .fraction > span { display: block; padding: 0 0.4em; }
        .fraction > .frac-bar { border-top: 2px solid #4338ca; }
        .step-interactive { display: none; opacity: 0; transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out; transform: translateY(10px); }
        .step-interactive.active { display: block; opacity: 1; transform: translateY(0); }
        .number-line-container {
            padding: 1rem;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 80px;
        }
    </style>
</head>
<body class="bg-gray-100">
    <div id="app-container" class="grid grid-template-rows: auto 1fr auto; min-height: 100vh;">
        <header id="main-header" class="bg-white shadow-md sticky top-0 z-50"></header>
        <main class="container mx-auto max-w-5xl my-8">
            <div class="p-6 bg-white rounded-xl shadow-lg">
                <header class="flex justify-between items-center mb-8 border-b pb-4 border-gray-200">
                    <h1 id="lesson-title" class="text-3xl font-bold text-blue-800">ุงูุฏุฑุณ ูค-ูก: ุญู ุงููุชุจุงููุงุช ุจุงูุฌูุน ูุงูุทุฑุญ</h1>
                    <a href="../index.html" target="_top" class="text-sm text-blue-600 hover:underline">&larr; ุงูุนูุฏุฉ ุฅูู ุงูููุฑุณ</a>
                </header>
                <section class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">๐ก ุฃููุงู: ุงูููููู ุงูุฃุณุงุณู</h2>
                    <div class="p-4 bg-blue-50 rounded-lg space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h3 class="text-xl font-semibold text-blue-700 mb-2">ุฎุงุตูุฉ ุงูุฌูุน ูููุชุจุงููุงุช</h3>
                                <p>ุฅุฐุง ุฃูุถูู ุงูุนุฏุฏ ููุณู ุฅูู ูู ูู ุทุฑูู ูุชุจุงููุฉ ุตุญูุญุฉุ ูุฅู ุงููุชุจุงููุฉ ุงููุงุชุฌุฉ ุชุจูู ุตุญูุญุฉ.</p>
                                <div class="mt-4 p-4 bg-white rounded-lg border">
                                     <p class="text-center my-2 p-3 bg-indigo-50 rounded-md text-lg md:text-xl math-eq">
                                          ุฅุฐุง ูุงู ุฃ > ุจุ<br> ูุฅู ุฃ + <span class="text-red-600">ุฌ</span> > ุจ + <span class="text-red-600">ุฌ</span>
                                     </p>
                                </div>
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold text-blue-700 mb-2">ุฎุงุตูุฉ ุงูุทุฑุญ ูููุชุจุงููุงุช</h3>
                                <p>ุฅุฐุง ุทูุฑุญ ุงูุนุฏุฏ ููุณู ูู ูู ูู ุทุฑูู ูุชุจุงููุฉ ุตุญูุญุฉุ ูุฅู ุงููุชุจุงููุฉ ุงููุงุชุฌุฉ ุชุจูู ุตุญูุญุฉ.</p>
                                 <div class="mt-4 p-4 bg-white rounded-lg border">
                                     <p class="text-center my-2 p-3 bg-indigo-50 rounded-md text-lg md:text-xl math-eq">
                                          ุฅุฐุง ูุงู ุฃ > ุจุ<br> ูุฅู ุฃ - <span class="text-red-600">ุฌ</span> > ุจ - <span class="text-red-600">ุฌ</span>
                                     </p>
                                 </div>
                            </div>
                        </div>
                         <div>
                            <h3 class="text-xl font-semibold text-blue-700 mb-2">ุงูููุฑุฏุงุช ุงูุฌุฏูุฏุฉ</h3>
                            <p><span class="vocab-term">ุงููุฌููุนุฉ:</span> ูู ุชุฌูุน ูู ุงูุฃุดูุงุก ุฃู ุงูุฃุนุฏุงุฏ ุงููุชููุฒุฉ.</p>
                            <p class="mt-2"><span class="vocab-term">ุงูุตูุฉ ุงููููุฒุฉ ูููุฌููุนุฉ:</span> ุทุฑููุฉ ูุฎุชุตุฑุฉ ููุตู ูุฌููุนุฉ ุงูุญูููุ ูุซู: <span class="math-eq">{ุณ | ุณ > ูฅ}</span> ูุชูุฑุฃ "ูุฌููุนุฉ ูู ุงูุฃุนุฏุงุฏ ุณ ุญูุซ ุณ ุฃูุจุฑ ูู ูฅ".</p>
                        </div>
                    </div>
                </section>
                <section class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">๐ฏ ุซุงููุงู: ุฃูุซูุฉ ุชูุงุนููุฉ</h2>
                    <div class="p-6 bg-gray-50 rounded-lg">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <!-- ุงููุซุงู ุงูุฃูู -->
                            <div id="interactive-container-1" class="p-4 bg-white rounded-lg shadow">
                                <p class="text-lg font-semibold mb-4">ูุซุงู ูก: ุญู ูุชุจุงููุฉ ุจุงุณุชุนูุงู ุงูุฌูุน <span class="math-eq">ุณ - ูกูข โฅ ูจ</span></p>
                                <div class="steps-container space-y-4 min-h-[200px]">
                                    <div class="interactive-placeholder text-center text-gray-500 p-4"><p>ุงุถุบุท "ุงูุชุงูู" ูุจุฏุก ุฎุทูุงุช ุงูุญู</p></div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box">
                                        <h4 class="font-bold">ุงูุฎุทูุฉ 1: ุฅุถุงูุฉ ูกูข ููุทุฑููู</h4>
                                        <p>ููุชุฎูุต ูู (-ูกูข) ุจุฌุงูุจ ุงููุชุบูุฑ ุณุ ูุถูู <span class="highlight-change">ูกูข</span> ููุทุฑููู.</p>
                                        <p class="mt-2 text-center"><span class="math-eq">ุณ - ูกูข <span class="highlight-change">+ ูกูข</span> โฅ ูจ <span class="highlight-change">+ ูกูข</span></span></p>
                                    </div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box">
                                        <h4 class="font-bold">ุงูุฎุทูุฉ 2: ุชุจุณูุท ุงููุชุจุงููุฉ</h4>
                                        <p>ุจุฌูุน ุงูุฃุฑูุงู ูู ูู ุทุฑูุ ูุญุตู ุนูู ุงูุญู.</p>
                                        <p class="mt-2 text-center"><span class="math-eq">ุณ โฅ ูขู</span></p>
                                    </div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box">
                                        <h4 class="font-bold">ุงูุฎุทูุฉ 3: ุงูุญู ุงูููุงุฆู</h4>
                                        <p>ูุฌููุนุฉ ุงูุญู ูู ูู ุงูุฃุนุฏุงุฏ ุงูุฃูุจุฑ ูู ุฃู ุชุณุงูู ูขู.</p>
                                        <p class="mt-2 text-center"><span class="math-eq">{ุณ | ุณ โฅ ูขู}</span></p>
                                    </div>
                                    <div class="step-interactive p-4 bg-green-200 rounded-lg step-box border-green-600">
                                        <h4 class="font-bold">ุงูุฎุทูุฉ ุงูุฃุฎูุฑุฉ: ุงูุชูุซูู ุงูุจูุงูู</h4>
                                        <p>ูุฑุณู ุฏุงุฆุฑุฉ ูุบููุฉ ุนูุฏ ูขู ููุชุฌู ููููุงู.</p>
                                        <div id="nl-1" class="number-line-container" data-nldata='{"value": 20, "type": "gte"}'></div>
                                    </div>
                                </div>
                                <div class="flex justify-between mt-6">
                                    <button data-example="1" class="prev-btn bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed">ุฑุฌูุน</button>
                                    <div>
                                        <button data-example="1" class="next-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">ุงูุชุงูู</button>
                                        <button data-example="1" class="reset-btn hidden bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700">ุฅุนุงุฏุฉ</button>
                                    </div>
                                </div>
                            </div>
                            <!-- ุงููุซุงู ุงูุซุงูู -->
                            <div id="interactive-container-2" class="p-4 bg-white rounded-lg shadow">
                                <p class="text-lg font-semibold mb-4">ูุซุงู ูข: ุญู ูุชุจุงููุฉ ุจุงุณุชุนูุงู ุงูุทุฑุญ <span class="math-eq">ู + ูกูฉ > ูฅูฆ</span></p>
                                <div class="steps-container space-y-4 min-h-[200px]">
                                    <div class="interactive-placeholder text-center text-gray-500 p-4"><p>ุงุถุบุท "ุงูุชุงูู" ูุจุฏุก ุฎุทูุงุช ุงูุญู</p></div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box">
                                        <h4 class="font-bold">ุงูุฎุทูุฉ 1: ุทุฑุญ ูกูฉ ูู ุงูุทุฑููู</h4>
                                        <p>ููุชุฎูุต ูู (+ูกูฉ) ุจุฌุงูุจ ุงููุชุบูุฑ ูุ ูุทุฑุญ <span class="highlight-change">ูกูฉ</span> ูู ุงูุทุฑููู.</p>
                                        <p class="mt-2 text-center"><span class="math-eq">ู + ูกูฉ <span class="highlight-change">- ูกูฉ</span> > ูฅูฆ <span class="highlight-change">- ูกูฉ</span></span></p>
                                    </div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box">
                                        <h4 class="font-bold">ุงูุฎุทูุฉ 2: ุชุจุณูุท ุงููุชุจุงููุฉ</h4>
                                        <p>ุจุทุฑุญ ุงูุฃุฑูุงู ูู ูู ุทุฑูุ ูุญุตู ุนูู ุงูุญู.</p>
                                        <p class="mt-2 text-center"><span class="math-eq">ู > ูฃูง</span></p>
                                    </div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box">
                                        <h4 class="font-bold">ุงูุฎุทูุฉ 3: ุงูุญู ุงูููุงุฆู</h4>
                                        <p>ูุฌููุนุฉ ุงูุญู ูู ูู ุงูุฃุนุฏุงุฏ ุงูุฃูุจุฑ ูู ูฃูง.</p>
                                        <p class="mt-2 text-center"><span class="math-eq">{ู | ู > ูฃูง}</span></p>
                                    </div>
                                    <div class="step-interactive p-4 bg-green-200 rounded-lg step-box border-green-600">
                                        <h4 class="font-bold">ุงูุฎุทูุฉ ุงูุฃุฎูุฑุฉ: ุงูุชูุซูู ุงูุจูุงูู</h4>
                                        <p>ูุฑุณู ุฏุงุฆุฑุฉ ููุฑุบุฉ ุนูุฏ ูฃูง ููุชุฌู ููููุงู.</p>
                                        <div id="nl-2" class="number-line-container" data-nldata='{"value": 37, "type": "gt"}'></div>
                                    </div>
                                </div>
                                <div class="flex justify-between mt-6">
                                    <button data-example="2" class="prev-btn bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed">ุฑุฌูุน</button>
                                    <div>
                                        <button data-example="2" class="next-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">ุงูุชุงูู</button>
                                        <button data-example="2" class="reset-btn hidden bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700">ุฅุนุงุฏุฉ</button>
                                    </div>
                                </div>
                            </div>
                            <!-- ุงููุซุงู ุงูุซุงูุซ -->
                            <div id="interactive-container-3" class="p-4 bg-white rounded-lg shadow">
                                <p class="text-lg font-semibold mb-4">ูุซุงู ูฃ: ูุชุบูุฑ ูู ุทุฑูู ุงููุชุจุงููุฉ <span class="math-eq">ูฅู - ูก < ูคู + ูฆ</span></p>
                                <div class="steps-container space-y-4 min-h-[200px]">
                                    <div class="interactive-placeholder text-center text-gray-500 p-4"><p>ุงุถุบุท "ุงูุชุงูู" ูุจุฏุก ุฎุทูุงุช ุงูุญู</p></div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box">
                                        <h4 class="font-bold">ุงูุฎุทูุฉ 1: ุฌูุน ุงููุชุบูุฑุงุช ูู ุทุฑู</h4>
                                        <p>ูุทุฑุญ <span class="highlight-change">ูคู</span> ูู ุงูุทุฑููู ูุฌูุน ุงููุชุบูุฑุงุช ูู ุงูุทุฑู ุงูุฃููู.</p>
                                        <p class="mt-2 text-center"><span class="math-eq">ูฅู <span class="highlight-change">- ูคู</span> - ูก < ูคู <span class="highlight-change">- ูคู</span> + ูฆ</span></p>
                                        <p class="mt-2 text-center"><span class="math-eq">ู - ูก < ูฆ</span></p>
                                    </div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box">
                                        <h4 class="font-bold">ุงูุฎุทูุฉ 2: ุฌูุน ุงูุฃุนุฏุงุฏ ูู ุงูุทุฑู ุงูุขุฎุฑ</h4>
                                        <p>ูุถูู <span class="highlight-change">ูก</span> ููุทุฑููู ูุนุฒู ุงููุชุบูุฑ.</p>
                                        <p class="mt-2 text-center"><span class="math-eq">ู - ูก <span class="highlight-change">+ ูก</span> < ูฆ <span class="highlight-change">+ ูก</span></span></p>
                                    </div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box">
                                        <h4 class="font-bold">ุงูุฎุทูุฉ 3: ุงูุญู ุงูููุงุฆู</h4>
                                        <p>ูุฌููุนุฉ ุงูุญู ูู ูู ุงูุฃุนุฏุงุฏ ุงูุฃุตุบุฑ ูู ูง.</p>
                                        <p class="mt-2 text-center"><span class="math-eq">{ู | ู < ูง}</span></p>
                                    </div>
                                    <div class="step-interactive p-4 bg-green-200 rounded-lg step-box border-green-600">
                                        <h4 class="font-bold">ุงูุฎุทูุฉ ุงูุฃุฎูุฑุฉ: ุงูุชูุซูู ุงูุจูุงูู</h4>
                                        <p>ูุฑุณู ุฏุงุฆุฑุฉ ููุฑุบุฉ ุนูุฏ ูง ููุชุฌู ูุณุงุฑุงู.</p>
                                        <div id="nl-3" class="number-line-container" data-nldata='{"value": 7, "type": "lt"}'></div>
                                    </div>
                                </div>
                                <div class="flex justify-between mt-6">
                                    <button data-example="3" class="prev-btn bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed">ุฑุฌูุน</button>
                                    <div>
                                        <button data-example="3" class="next-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">ุงูุชุงูู</button>
                                        <button data-example="3" class="reset-btn hidden bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700">ุฅุนุงุฏุฉ</button>
                                    </div>
                                </div>
                            </div>
                            <!-- ุงููุซุงู ุงูุฑุงุจุน -->
                            <div id="interactive-container-4" class="p-4 bg-white rounded-lg shadow">
                                <p class="text-lg font-semibold mb-4">ูุซุงู ูค: ูุชุบูุฑ ูู ุทุฑูู ุงููุชุจุงููุฉ <span class="math-eq">ูฃุณ + ูฆ โค ูขุณ + ูจ</span></p>
                                <div class="steps-container space-y-4 min-h-[200px]">
                                    <div class="interactive-placeholder text-center text-gray-500 p-4"><p>ุงุถุบุท "ุงูุชุงูู" ูุจุฏุก ุฎุทูุงุช ุงูุญู</p></div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box">
                                        <h4 class="font-bold">ุงูุฎุทูุฉ 1: ุฌูุน ุงููุชุบูุฑุงุช ูู ุทุฑู</h4>
                                        <p>ูุทุฑุญ <span class="highlight-change">ูขุณ</span> ูู ุงูุทุฑููู ูุฌูุน ุงููุชุบูุฑุงุช ูู ุงูุทุฑู ุงูุฃููู.</p>
                                        <p class="mt-2 text-center"><span class="math-eq">ูฃุณ <span class="highlight-change">- ูขุณ</span> + ูฆ โค ูขุณ <span class="highlight-change">- ูขุณ</span> + ูจ</span></p>
                                        <p class="mt-2 text-center"><span class="math-eq">ุณ + ูฆ โค ูจ</span></p>
                                    </div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box">
                                        <h4 class="font-bold">ุงูุฎุทูุฉ 2: ุฌูุน ุงูุฃุนุฏุงุฏ ูู ุงูุทุฑู ุงูุขุฎุฑ</h4>
                                        <p>ูุทุฑุญ <span class="highlight-change">ูฆ</span> ูู ุงูุทุฑููู ูุนุฒู ุงููุชุบูุฑ.</p>
                                        <p class="mt-2 text-center"><span class="math-eq">ุณ + ูฆ <span class="highlight-change">- ูฆ</span> โค ูจ <span class="highlight-change">- ูฆ</span></span></p>
                                    </div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box">
                                        <h4 class="font-bold">ุงูุฎุทูุฉ 3: ุงูุญู ุงูููุงุฆู</h4>
                                        <p>ูุฌููุนุฉ ุงูุญู ูู ูู ุงูุฃุนุฏุงุฏ ุงูุฃุตุบุฑ ูู ุฃู ุชุณุงูู ูข.</p>
                                        <p class="mt-2 text-center"><span class="math-eq">{ุณ | ุณ โค ูข}</span></p>
                                    </div>
                                    <div class="step-interactive p-4 bg-green-200 rounded-lg step-box border-green-600">
                                        <h4 class="font-bold">ุงูุฎุทูุฉ ุงูุฃุฎูุฑุฉ: ุงูุชูุซูู ุงูุจูุงูู</h4>
                                        <p>ูุฑุณู ุฏุงุฆุฑุฉ ูุบููุฉ ุนูุฏ ูข ููุชุฌู ูุณุงุฑุงู.</p>
                                        <div id="nl-4" class="number-line-container" data-nldata='{"value": 2, "type": "lte"}'></div>
                                    </div>
                                </div>
                                <div class="flex justify-between mt-6">
                                    <button data-example="4" class="prev-btn bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed">ุฑุฌูุน</button>
                                    <div>
                                        <button data-example="4" class="next-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">ุงูุชุงูู</button>
                                        <button data-example="4" class="reset-btn hidden bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700">ุฅุนุงุฏุฉ</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <section class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">๐ ุซุงูุซุงู: ุงููุณุงุฆู ุงูููุธูุฉ</h2>
                    <div class="p-6 bg-gray-50 rounded-lg space-y-8">
                        <div>
                            <h3 class="text-xl font-semibold text-gray-700 mb-4">ููุฎุต ุงูููููู: ุงูุนุจุงุฑุงุช ุงูุชู ุชุฏู ุนูู ุงููุชุจุงููุงุช</h3>
                            <div class="overflow-x-auto">
                                <table class="w-full text-center border-collapse">
                                    <thead><tr class="bg-blue-600 text-white"><th class="p-3 border border-blue-400">&lt;</th><th class="p-3 border border-blue-400">&gt;</th><th class="p-3 border border-blue-400">โค</th><th class="p-3 border border-blue-400">โฅ</th></tr></thead>
                                    <tbody class="bg-white"><tr><td class="p-3 border">ุฃูู ูู<br>ุฃุตุบุฑ ูู</td><td class="p-3 border">ุฃูุจุฑ ูู<br>ุฃูุซุฑ ูู</td><td class="p-3 border">ุฃูู ูู ุฃู ูุณุงูู<br>ุนูู ุงูุฃูุซุฑ<br>ูุง ูุฒูุฏ ุนูู</td><td class="p-3 border">ุฃูุจุฑ ูู ุฃู ูุณุงูู<br>ุนูู ุงูุฃูู<br>ูุง ููู ุนู</td></tr></tbody>
                                </table>
                            </div>
                        </div>
                        <div class="mt-8">
                             <h3 class="text-xl font-semibold text-gray-700 mb-4 border-t pt-4">ู) ุชุฏุฑูุจุงุช ุนูู ูุชุงุจุฉ ุงููุชุจุงููุงุช (ุฏูู ุญู)</h3>
                             <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="p-4 bg-white rounded-lg border"><p class="mb-2">ูก. ูุฌุจ ุฃู ูููู ุนูุฑู <span class="math-eq">ุน</span> <span class="font-bold text-red-600">ุฃูุจุฑ ูู</span> <span class="num-highlight">ูกูจ</span> ุนุงูุงู ููุชุตููุช.</p><p class="text-center mt-2 solution-set"><span class="math-eq">ุน > ูกูจ</span></p></div>
                                <div class="p-4 bg-white rounded-lg border"><p class="mb-2">ูข. ูุฌุจ ุฃู ุชููู ุฏุฑุฌุฉ ุญุฑุงุฑุฉ ุงูุชุฌูุฏ <span class="math-eq">ุฏ</span> <span class="font-bold text-red-600">ุฃูู ูู</span> <span class="num-highlight">ู</span> ุฏุฑุฌุฉ ูุฆููุฉ.</p><p class="text-center mt-2 solution-set"><span class="math-eq">ุฏ < ู</span></p></div>
                                <div class="p-4 bg-white rounded-lg border"><p class="mb-2">ูฃ. ูุฌุจ ุฃู ูููู ูุนู <span class="math-eq">ู</span> ูู ุงููุงู <span class="font-bold text-red-600">ุนูู ุงูุฃูู</span> <span class="num-highlight">ูฅ</span> ุฑูุงูุงุช ูุฏุฎูู ุงูุญุฏููุฉ.</p><p class="text-center mt-2 solution-set"><span class="math-eq">ู โฅ ูฅ</span></p></div>
                                <div class="p-4 bg-white rounded-lg border"><p class="mb-2">ูค. ุณุนุฉ ุฎุฒุงู ุงููููุฏ <span class="math-eq">ุณ</span> <span class="font-bold text-red-600">ูุง ุชุฒูุฏ ุนูู</span> <span class="num-highlight">ูฅู</span> ูุชุฑุงู.</p><p class="text-center mt-2 solution-set"><span class="math-eq">ุณ โค ูฅู</span></p></div>
                                <div class="p-4 bg-white rounded-lg border"><p class="mb-2">ูฅ. ูุงุชุฌ <span class="font-bold text-red-600">ุฌูุน</span> ุนุฏุฏ <span class="math-eq">ุณ</span> ุฅูู <span class="num-highlight">ูจ</span> ูู <span class="font-bold text-red-600">ุฃุตุบุฑ ูู</span> <span class="num-highlight">ูขู</span>.</p><p class="text-center mt-2 solution-set"><span class="math-eq">ุณ + ูจ < ูขู</span></p></div>
                                <div class="p-4 bg-white rounded-lg border"><p class="mb-2">ูฆ. ูุงุชุฌ <span class="font-bold text-red-600">ุทุฑุญ</span> <span class="num-highlight">ูฆ</span> ูู ุนุฏุฏ <span class="math-eq">ุต</span> ูู <span class="font-bold text-red-600">ุฃูุจุฑ ูู</span> <span class="num-highlight">ูกู</span>.</p><p class="text-center mt-2 solution-set"><span class="math-eq">ุต - ูฆ > ูกู</span></p></div>
                             </div>
                        </div>
                        <div class="mt-8">
                            <h3 class="text-xl font-semibold text-gray-700 mb-4 border-t pt-4">ุฒ) ูุณุงุฆู ููุธูุฉ (ุฃูุซูุฉ ูุญูููุฉ)</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                <!-- ุงููุซุงู ุงูููุธู ุงูุฃูู -->
                                <div id="interactive-container-5" class="p-4 bg-white rounded-lg shadow">
                                    <p class="text-lg font-semibold mb-4">ุงููุณุฃูุฉ ุงูุฃููู:<br>ูุน ุฎุงูุฏ <span class="num-highlight">ูกูฉูฅ</span> ุฑูุงูุงู ููุฑูุฏ ุฃู ูููููุง. ุงุดุชุฑู ูููุตุงู ุจู <span class="num-highlight">ูงูฅ</span> ุฑูุงูุงูุ ููุฑูุฏ ุดุฑุงุก ุจูุทุงู. ูุง ุงููุจูุบ ุงูุฐู ูููู ุฃู ูุฏูุนู ููุจูุทุงูุ</p>
                                    <div class="steps-container space-y-4 min-h-[200px]">
                                        <div class="interactive-placeholder text-center text-gray-500 p-4"><p>ุงุถุบุท "ุงูุชุงูู" ูุจุฏุก ุฎุทูุงุช ุงูุญู</p></div>
                                        <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 1: ูุชุงุจุฉ ุงููุชุจุงููุฉ</h4><p>ูููุฑุถ ุฃู ุณุนุฑ ุงูุจูุทุงู ูู <span class="math-eq">ุจ</span>. ูุฌุจ ุฃู ูููู ูุฌููุน ูุง ุฃูููู (ูงูฅ + ุจ) ูุง ูุฒูุฏ ุนูู (โค) ูกูฉูฅ.</p><p class="mt-2 text-center"><span class="math-eq">ูงูฅ + ุจ โค ูกูฉูฅ</span></p></div>
                                        <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 2: ุญู ุงููุชุจุงููุฉ</h4><p>ูุทุฑุญ <span class="highlight-change">ูงูฅ</span> ูู ุงูุทุฑููู.</p><p class="mt-2 text-center"><span class="math-eq">ุจ โค ูกูขู</span></p></div>
                                        <div class="step-interactive p-4 bg-green-200 rounded-lg step-box border-green-600"><h4 class="font-bold">ุงูุฎุทูุฉ ุงูุฃุฎูุฑุฉ: ุงูุญู ุงูููุงุฆู</h4><p>ูุฌุจ ุฃู ูููู ุณุนุฑ ุงูุจูุทุงู ูกูขู ุฑูุงูุงู ุฃู ุฃูู.</p><p class="mt-2 text-center"><span class="math-eq">{ุจ | ุจ โค ูกูขู}</span></p></div>
                                    </div>
                                    <div class="flex justify-between mt-6">
                                        <button data-example="5" class="prev-btn bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed">ุฑุฌูุน</button>
                                        <div><button data-example="5" class="next-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">ุงูุชุงูู</button><button data-example="5" class="reset-btn hidden bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700">ุฅุนุงุฏุฉ</button></div>
                                    </div>
                                </div>
                                <!-- ุงููุซุงู ุงูููุธู ุงูุซุงูู -->
                                <div id="interactive-container-6" class="p-4 bg-white rounded-lg shadow">
                                    <p class="text-lg font-semibold mb-4">ุงููุณุฃูุฉ ุงูุซุงููุฉ:<br>ุชุฑูุฏ ุณุงุฑุฉ ุฃู ุชุฏุฎุฑ <span class="num-highlight">ูฅูู</span> ุฑูุงู ุนูู ุงูุฃูู. ุฅุฐุง ูุงู ูุฏููุง <span class="num-highlight">ูขูกู</span> ุฑูุงูุงุชุ ููุง ุงููุจูุบ ุงูุฅุถุงูู ุงูุฐู ูุฌุจ ุฃู ุชุฏุฎุฑูุ</p>
                                    <div class="steps-container space-y-4 min-h-[200px]">
                                        <div class="interactive-placeholder text-center text-gray-500 p-4"><p>ุงุถุบุท "ุงูุชุงูู" ูุจุฏุก ุฎุทูุงุช ุงูุญู</p></div>
                                        <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 1: ูุชุงุจุฉ ุงููุชุจุงููุฉ</h4><p>ูููุฑุถ ุฃู ุงููุจูุบ ุงูุฅุถุงูู ูู <span class="math-eq">ุณ</span>. ูุฌุจ ุฃู ูููู ูุฌููุน ูุง ูุฏููุง (ูขูกู + ุณ) ุนูู ุงูุฃูู (โฅ) ูฅูู.</p><p class="mt-2 text-center"><span class="math-eq">ูขูกู + ุณ โฅ ูฅูู</span></p></div>
                                        <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 2: ุญู ุงููุชุจุงููุฉ</h4><p>ูุทุฑุญ <span class="highlight-change">ูขูกู</span> ูู ุงูุทุฑููู.</p><p class="mt-2 text-center"><span class="math-eq">ุณ โฅ ูขูฉู</span></p></div>
                                        <div class="step-interactive p-4 bg-green-200 rounded-lg step-box border-green-600"><h4 class="font-bold">ุงูุฎุทูุฉ ุงูุฃุฎูุฑุฉ: ุงูุญู ุงูููุงุฆู</h4><p>ูุฌุจ ุฃู ุชุฏุฎุฑ ูขูฉู ุฑูุงูุงู ุฃู ุฃูุซุฑ.</p><p class="mt-2 text-center"><span class="math-eq">{ุณ | ุณ โฅ ูขูฉู}</span></p></div>
                                    </div>
                                    <div class="flex justify-between mt-6">
                                        <button data-example="6" class="prev-btn bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed">ุฑุฌูุน</button>
                                        <div><button data-example="6" class="next-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">ุงูุชุงูู</button><button data-example="6" class="reset-btn hidden bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700">ุฅุนุงุฏุฉ</button></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <section class="mt-12">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-2xl font-bold text-gray-800">โ๏ธ ุฑุงุจุนุงู: ุญุงู ุฏูุฑู! ุงุฎุชุจุฑ ูููู</h2>
                        <div id="attempts-counter" class="text-sm font-bold text-gray-600"></div>
                    </div>
                    <form id="quizForm" class="p-6 bg-gray-50 rounded-lg space-y-8"></form>
                    <div id="quiz-results" class="hidden mt-6 p-4 rounded-lg text-center">
                        <h3 class="text-xl font-bold">ูุชูุฌุชู ุงูููุงุฆูุฉ</h3>
                        <p id="quiz-score" class="text-4xl font-bold my-2"></p>
                        <div id="save-status" class="mt-4 text-sm font-semibold"></div>
                        <button id="retake-quiz-btn" class="hidden mt-4 bg-blue-600 text-white font-medium py-2 px-6 rounded-lg hover:bg-blue-700">ุฅุนุงุฏุฉ ุงูุงุฎุชุจุงุฑ</button>
                    </div>
                </section>
            </div>
        </main>
        <footer id="main-footer" class="bg-gray-200 py-4"></footer>
    </div>
    <div id="explanationModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50"><div class="bg-white rounded-lg shadow-2xl p-6 max-w-lg w-full"><div class="flex justify-between items-center mb-4"><h3 class="text-xl font-bold">๐ก ุดุฑุญ ุงูุฅุฌุงุจุฉ</h3><button id="closeModalBtn" class="p-2 -m-2 rounded-full hover:bg-gray-200"><svg class="h-6 w-6 text-gray-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg></button></div><div id="explanationText" class="text-gray-700 max-h-[60vh] overflow-y-auto"></div></div></div>
    <div id="smartExplanationModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50"><div class="bg-white rounded-lg shadow-2xl p-6 max-w-lg w-full border-t-4 border-purple-500"><div class="flex justify-between items-center mb-4"><h3 class="text-xl font-bold text-purple-800">๐ง ุงูุญู ุงูุฐูู</h3><button id="closeSmartModalBtn" class="p-2 -m-2 rounded-full hover:bg-gray-200"><svg class="h-6 w-6 text-gray-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg></button></div><div id="smartExplanationText" class="text-gray-700 max-h-[60vh] overflow-y-auto"></div></div></div>
    <script>
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzrf1-At3Pq7i39bGV3F1iD3-b0G-WWyRi5cgpKeQjyn_N5fh2EmGhoyRKUsbLd-F_UJQ/exec";
    const MAX_ATTEMPTS = 3;
    let currentQuestions = []; 
    function getStudentFromStorage() { const studentDataString = localStorage.getItem('currentStudent'); if (studentDataString) { try { return JSON.parse(studentDataString); } catch (e) { return null; } } return null; }
    function buildHeader(studentData, lessonTitle = null) { const headerContainer = document.getElementById('main-header'); if (!headerContainer) return; let titleHtml; if (lessonTitle) { titleHtml = `<div><h2 class="text-sm text-gray-500 leading-tight">ููุตุฉ ุงูุฑูุงุถูุงุช ุงูุชูุงุนููุฉ</h2><h1 class="text-xl font-bold text-indigo-700 leading-tight">${lessonTitle}</h1></div>`; } else { titleHtml = `<a href="../index.html" target="_top"><h1 class="text-2xl font-bold text-blue-800">ููุตุฉ ุงูุฑูุงุถูุงุช ุงูุชูุงุนููุฉ</h1></a>`; } let userInfoHtml = ''; if (studentData) { userInfoHtml = `<div class="flex items-center gap-4"><span class="font-semibold">ุฃููุงูุ ${studentData.name}</span><a href="../index.html" target="_top" id="logout-link" class="bg-red-500 text-white py-1 px-3 rounded-lg hover:bg-red-600">ุฎุฑูุฌ</a></div>`; } else { userInfoHtml = `<p class="text-lg text-gray-600">ุฒุงุฆุฑ</p>`; } headerContainer.innerHTML = `<div class="container mx-auto px-6 py-4 flex justify-between items-center">${titleHtml}${userInfoHtml}</div>`; const logoutLink = headerContainer.querySelector('#logout-link'); if(logoutLink) { logoutLink.addEventListener('click', () => { localStorage.removeItem('currentStudent'); }); } }
    function buildFooter() { const footerContainer = document.getElementById('main-footer'); if (!footerContainer) return; footerContainer.innerHTML = `<div class="container mx-auto px-6"><p class="text-center text-gray-600 text-sm">ยฉ 2024 ุฌููุน ุงูุญููู ูุญููุธุฉ | ุชุตููู ูุชุทููุฑ: ุฃ. ุนุจุฏุงูุนุฒูุฒ ุฎุงูุฏ ุงูุนุจูุงู</p></div>`; }
    function initializeQuiz(lessonId, questions, studentData) { currentQuestions = questions; const quizForm = document.getElementById('quizForm'); if (!quizForm) return; if (questions.length === 0) { quizForm.innerHTML = `<p class="text-center text-gray-600">ูุง ุชูุฌุฏ ุฃุณุฆูุฉ ูุชุงุญุฉ ููุฐุง ุงูุฏุฑุณ ุญุงููุงู.</p>`; return; } let attemptsLeft; if (studentData) { const studentLessonData = studentData.lessons?.[lessonId] || { attempts: 0 }; attemptsLeft = MAX_ATTEMPTS - studentLessonData.attempts; } else { attemptsLeft = 1; } const attemptsCounter = document.getElementById('attempts-counter'); if (attemptsCounter) { attemptsCounter.innerHTML = `ุงููุญุงููุงุช ุงููุชุจููุฉ: <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full">${attemptsLeft}</span>`; } const quizHtml = questions.map((q, index) => { const optionsHTML = q.options.map((opt, optIndex) => `<div><input type="radio" name="q${index}" value="${opt.value}" id="q${index}_opt${optIndex}" class="hidden"><label for="q${index}_opt${optIndex}" class="option-label">${opt.display}</label></div>`).join(''); const smartButtonHTML = q.smartExplanation ? `<button type="button" id="smart-explain-btn-${index}" class="hidden mt-2 text-xs text-purple-600 hover:underline font-semibold">๐ง ุงูุญู ุงูุฐูู</button>` : ''; return `<div class="p-4 border-2 border-gray-200 rounded-lg"><p class="font-bold">${index + 1}. <span class="text-yellow-500">${q.level}</span> ${q.text}</p><div class="grid grid-cols-1 sm:grid-cols-2 gap-3 mt-3">${optionsHTML}</div><div id="feedback-q${index}" class="mt-2 text-sm font-bold"></div><div class="flex items-center space-x-4 space-x-reverse">${smartButtonHTML}<button type="button" id="explain-btn-${index}" class="hidden mt-2 text-xs text-blue-600 hover:underline">ุงุนุฑู ููุงุฐุงุ</button></div></div>`; }).join(''); quizForm.innerHTML = quizHtml + `<button type="submit" id="submit-quiz-btn" class="w-full text-white bg-green-600 hover:bg-green-700 font-medium rounded-lg text-lg px-5 py-3 mt-8">ุชุญูู ูู ุฅุฌุงุจุงุชู</button>`; questions.forEach((q, index) => { const explainBtn = document.getElementById(`explain-btn-${index}`); if(explainBtn) explainBtn.addEventListener('click', () => showExplanation(index)); if (q.smartExplanation) { const smartExplainBtn = document.getElementById(`smart-explain-btn-${index}`); if(smartExplainBtn) smartExplainBtn.addEventListener('click', () => showSmartExplanation(index)); } }); if (attemptsLeft <= 0) { const submitBtn = quizForm.querySelector('#submit-quiz-btn'); submitBtn.disabled = true; submitBtn.textContent = 'ูุง ุชูุฌุฏ ูุญุงููุงุช ูุชุจููุฉ'; submitBtn.classList.add('bg-gray-400', 'hover:bg-gray-400'); } quizForm.onsubmit = (e) => { e.preventDefault(); let score = 0; questions.forEach((q, index) => { const userAnswer = e.target.elements[`q${index}`]?.value; const feedbackEl = document.getElementById(`feedback-q${index}`); if (userAnswer === q.correct) { score++; feedbackEl.textContent = 'โ ุฅุฌุงุจุฉ ุตุญูุญุฉ!'; feedbackEl.className = 'mt-2 text-sm font-bold text-green-600'; } else { feedbackEl.textContent = `โ ุฅุฌุงุจุฉ ุฎุงุทุฆุฉ.`; feedbackEl.className = 'mt-2 text-sm font-bold text-red-600'; } document.getElementById(`explain-btn-${index}`).classList.remove('hidden'); if (q.smartExplanation) { document.getElementById(`smart-explain-btn-${index}`).classList.remove('hidden'); } }); const finalGrade = Math.round((score / questions.length) * 10); const resultsDiv = document.getElementById('quiz-results'); resultsDiv.classList.remove('hidden'); document.getElementById('quiz-score').textContent = `${finalGrade} / 10`; if (studentData) { saveGrade(lessonId, finalGrade, studentData.id); if (attemptsLeft - 1 > 0) { document.getElementById('retake-quiz-btn').classList.remove('hidden'); } } else { document.getElementById('save-status').textContent = 'ุชู ุนุฑุถ ูุชูุฌุชู. ุณุฌู ุงูุฏุฎูู ูุญูุธ ุชูุฏูู.'; } e.target.querySelector('#submit-quiz-btn').disabled = true; }; }
    function saveGrade(lessonId, grade, studentId) { if (!studentId) return; const saveStatus = document.getElementById('save-status'); saveStatus.textContent = 'ุฌุงุฑู ุญูุธ ูุชูุฌุชู...'; const url = `${SCRIPT_URL}?action=saveGrade&studentId=${studentId}&lessonId=${lessonId}&grade=${grade}`; fetch(url) .then(res => res.json()) .then(result => { if (result.status === 'success') { saveStatus.textContent = 'โ ุชู ุญูุธ ูุชูุฌุชู ุจูุฌุงุญ! ุณุชุธูุฑ ูู ููุญุฉ ุงูุชุญูู ุนูุฏ ุงูุนูุฏุฉ.'; const studentData = JSON.parse(localStorage.getItem('currentStudent')); if (!studentData.lessons) studentData.lessons = {}; if (!studentData.lessons[lessonId] || studentData.lessons[lessonId].grade < grade) { studentData.lessons[lessonId] = { grade: grade, attempts: (studentData.lessons[lessonId]?.attempts || 0) + 1 }; } else { studentData.lessons[lessonId].attempts++; } localStorage.setItem('currentStudent', JSON.stringify(studentData)); } else { throw new Error(result.message); } }) .catch(error => { saveStatus.textContent = 'โ ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุญูุธ ุงูุฏุฑุฌุฉ.'; console.error("Save Grade Error:", error); }); }
    function showExplanation(questionIndex) { const modal = document.getElementById('explanationModal'); const explanationText = document.getElementById('explanationText'); if(modal && explanationText && currentQuestions[questionIndex] && currentQuestions[questionIndex].explanation) { explanationText.innerHTML = currentQuestions[questionIndex].explanation; modal.classList.remove('hidden'); } }
    function closeModal() { const modal = document.getElementById('explanationModal'); if(modal) modal.classList.add('hidden'); }
    function showSmartExplanation(questionIndex) { const modal = document.getElementById('smartExplanationModal'); const explanationText = document.getElementById('smartExplanationText'); if(modal && explanationText && currentQuestions[questionIndex] && currentQuestions[questionIndex].smartExplanation) { explanationText.innerHTML = currentQuestions[questionIndex].smartExplanation; modal.classList.remove('hidden'); } }
    function closeSmartModal() { const modal = document.getElementById('smartExplanationModal'); if(modal) modal.classList.add('hidden'); }
    const LESSON_ID = 'c4_l1'; 
    function generateQuiz() { const questionBank = [
            { type: 'mcq', level: 'โญ', text: `ุญู ุงููุชุจุงููุฉ ุงูุชุงููุฉ: <span class="math-eq">ุณ + ูค < ูฉ</span>`, options: [ { display: 'ุณ < ูฅ', value: 'A' }, { display: 'ุณ > ูฅ', value: 'B' }, { display: 'ุณ < ูกูฃ', value: 'C' }, { display: 'ุณ > ูกูฃ', value: 'D' } ], correct: 'A', explanation: `<p>ูุญู ุงููุชุจุงููุฉ <span class="math-eq">ุณ + ูค < ูฉ</span>ุ ูุทุฑุญ ูค ูู ุงูุทุฑููู.</p><p><span class="math-eq">ุณ + ูค - ูค < ูฉ - ูค</span></p><p>ุฅุฐูุ ุงูุญู ูู <span class="math-eq">ุณ < ูฅ</span>.</p>`, smartExplanation: `<p><b>ุญู ุฐููู:</b> ูุง ูู ุงูุนุฏุฏ ุงูุฐู ุฅุฐุง ุฃุถูุช ูู 4 ูุตุจุญ ุฃูู ูู 9ุ ุจุงูุชุฃููุฏ ูู ุฃู ุนุฏุฏ ุฃุตุบุฑ ูู 5.</p>` },
            { type: 'mcq', level: 'โญ', text: `ุญู ุงููุชุจุงููุฉ ุงูุชุงููุฉ: <span class="math-eq">ุต - ูฃ โฅ ูง</span>`, options: [ { display: 'ุต โฅ ูค', value: 'A' }, { display: 'ุต โค ูค', value: 'B' }, { display: 'ุต โฅ ูกู', value: 'C' }, { display: 'ุต โค ูกู', value: 'D' } ], correct: 'C', explanation: `<p>ูุญู ุงููุชุจุงููุฉ <span class="math-eq">ุต - ูฃ โฅ ูง</span>ุ ูุถูู ูฃ ุฅูู ุงูุทุฑููู.</p><p><span class="math-eq">ุต - ูฃ + ูฃ โฅ ูง + ูฃ</span></p><p>ุฅุฐูุ ุงูุญู ูู <span class="math-eq">ุต โฅ ูกู</span>.</p>`, smartExplanation: `<p><b>ุญู ุฐููู:</b> ูุง ูู ุงูุนุฏุฏ ุงูุฐู ุฅุฐุง ุทุฑุญุช ููู 3 ูุชุจูู 7 ุฃู ุฃูุซุฑุ ุจุงูุชุฃููุฏ ูู 10 ุฃู ุฃู ุนุฏุฏ ุฃูุจุฑ ููู.</p>` },
            { type: 'mcq', level: 'โญโญ', text: `ุญู ุงููุชุจุงููุฉ ุงูุชุงููุฉ: <span class="math-eq">ูจ โค ู + ูกูฃ</span>`, options: [ { display: 'ู โฅ -ูฅ', value: 'A' }, { display: 'ู โค -ูฅ', value: 'B' }, { display: 'ู โฅ ูขูก', value: 'C' }, { display: 'ู โค ูขูก', value: 'D' } ], correct: 'A', explanation: `<p>ูุญู ุงููุชุจุงููุฉ <span class="math-eq">ูจ โค ู + ูกูฃ</span>ุ ูุทุฑุญ ูกูฃ ูู ุงูุทุฑููู.</p><p><span class="math-eq">ูจ - ูกูฃ โค ู + ูกูฃ - ูกูฃ</span></p><p>ูุจุณุท: <span class="math-eq">-ูฅ โค ู</span>ุ ูุงูุชู ุชูุงูุฆ <span class="math-eq">ู โฅ -ูฅ</span>.</p>`, smartExplanation: `<p><b>ุงุณุชุจุนุงุฏ ุงูุฎูุงุฑุงุช:</b> ุงููุชุบูุฑ 'ู' ูุฌููุน ูุน ุนุฏุฏ ููุฌุจ ูุงููุงุชุฌ ุนุฏุฏ ููุฌุจ ุฃุตุบุฑุ ูุฐุง ูุฌุจ ุฃู ุชููู ูููุฉ 'ู' ุณุงูุจุฉ. ูุฐุง ูุณุชุจุนุฏ ุงูุฎูุงุฑูู (ุฌ) ู (ุฏ).</p>` },
            { type: 'mcq', level: 'โญโญ', text: `ูุง ูู ุงููุชุจุงููุฉ ุงูุชู ุชุนุจุฑ ุนู ุงูุฌููุฉ "ูุงุชุฌ ุฌูุน ุนุฏุฏ ู <span class="num-highlight">ูง</span> ุฃูุจุฑ ูู <span class="num-highlight">ูกูฅ</span>"ุ`, options: [ { display: 'ุณ + ูง < ูกูฅ', value: 'A' }, { display: 'ุณ + ูง โค ูกูฅ', value: 'B' }, { display: 'ุณ + ูง > ูกูฅ', value: 'C' }, { display: 'ุณ + ูง โฅ ูกูฅ', value: 'D' } ], correct: 'C', explanation: `<p>ุงูุฌููุฉ "ูุงุชุฌ ุฌูุน ุนุฏุฏ ู ูง" ุชุชุฑุฌู ุฅูู <span class="math-eq">ุณ + ูง</span>.</p><p>ุนูุงูุฉ "ุฃูุจุฑ ูู" ูู <span class="math-eq">></span>.</p><p>ุฅุฐูุ ุงููุชุจุงููุฉ ุงููุงููุฉ ูู <span class="math-eq">ุณ + ูง > ูกูฅ</span>.</p>`, smartExplanation: `<p><b>ุงููููุงุช ุงูููุชุงุญูุฉ:</b> ูููุฉ 'ุฌูุน' ุชุนูู (+)ุ ููููุฉ 'ุฃูุจุฑ ูู' ุชุนูู (>). ุงูุฎูุงุฑ ุงููุญูุฏ ุงูุฐู ูุทุงุจู ูู (ุฌ).</p>` },
            { type: 'mcq', level: 'โญโญโญ', text: `ุญู ุงููุชุจุงููุฉ ุงูุชุงููุฉ: <span class="math-eq">ูฉู - ูก > ูกูู</span>`, options: [ { display: 'ู < -ูก', value: 'A' }, { display: 'ู > -ูก', value: 'B' }, { display: 'ู < ูก', value: 'C' }, { display: 'ู > ูก', value: 'D' } ], correct: 'A', explanation: `<p><b>1. ุงููุชุจุงููุฉ ุงูุฃุตููุฉ:</b> <span class="math-eq">ูฉู - ูก > ูกูู</span>.</p><p><b>2. ูุทุฑุญ ูฉู ูู ุงูุทุฑููู:</b> <span class="math-eq">ูฉู - ูฉู - ูก > ูกูู - ูฉู</span>.</p><p><b>3. ูุจุณุท:</b> <span class="math-eq">-ูก > ู</span>.</p><p><b>4. ุฅุนุงุฏุฉ ุงูุชุฑุชูุจ:</b> <span class="math-eq">ู < -ูก</span>.</p>`, smartExplanation: `<p><b>ููู ุงููุชุบูุฑ ุงูุฃุตุบุฑ:</b> ุงููู ูฉู (ุงูุฃุตุบุฑ) ุฅูู ุงูุทุฑู ุงูุขุฎุฑ ูุชุฌูุจ ุงููุณูุฉ ุนูู ุณุงูุจ. ุชุตุจุญ ุงููุชุจุงููุฉ <span class="math-eq">-ูก > ู</span>ุ ูุงูุชู ุชุนูู ุฃู <span class="math-eq">ู < -ูก</span>.</p>` },
            { type: 'mcq', level: 'โญโญ', text: `ุฃู ูู ุงูุฃุนุฏุงุฏ ุงูุชุงููุฉ ููุชูู ููุฌููุนุฉ ุญู ุงููุชุจุงููุฉ <span class="math-eq">ู - ูฉ โค -ูค</span>ุ`, options: [ { display: 'ูฆ', value: 'A' }, { display: 'ูง', value: 'B' }, { display: 'ูจ', value: 'C' }, { display: 'ูฅ', value: 'D' } ], correct: 'D', explanation: `<p><b>1. ูุญู ุงููุชุจุงููุฉ ุฃููุงู:</b> <span class="math-eq">ู - ูฉ โค -ูค</span>.</p><p><b>2. ูุถูู ูฉ ููุทุฑููู:</b> <span class="math-eq">ู - ูฉ + ูฉ โค -ูค + ูฉ</span>.</p><p><b>3. ูุจุณุท:</b> <span class="math-eq">ู โค ูฅ</span>.</p><p><b>4. ูุชุญูู ูู ุงูุฎูุงุฑุงุช:</b> ุงูุนุฏุฏ ุงููุญูุฏ ุงูุฐู ูุญูู ุงูุดุฑุท "ุฃุตุบุฑ ูู ุฃู ูุณุงูู ูฅ" ูู ุงูุนุฏุฏ ูฅ.</p>`, smartExplanation: `<p><b>ุงูุชุนููุถ ุงูุณุฑูุน:</b> ุนูุถ ุจุงูุฎูุงุฑุงุช ูู ุงููุชุจุงููุฉ. ููุจุฏุฃ ุจุงูุฎูุงุฑ (ุฏ): <span class="math-eq">ูฅ - ูฉ = -ูค</span>. ูู <span class="math-eq">-ูค โค -ูค</span>ุ ูุนู. ุฅุฐู ูู ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ.</p>` },
            { type: 'mcq', level: 'โญโญโญ', text: `ุญู ุงููุชุจุงููุฉ ุงูุชุงููุฉ: <span class="math-eq">ูฅูู + ูข โค ูคูู - ูก</span>`, options: [ { display: 'ูู โค -ูฃ', value: 'A' }, { display: 'ูู โฅ -ูฃ', value: 'B' }, { display: 'ูู โค ูก', value: 'C' }, { display: 'ูู โฅ ูก', value: 'D' } ], correct: 'A', explanation: `<p><b>1. ุงููุชุจุงููุฉ ุงูุฃุตููุฉ:</b> <span class="math-eq">ูฅูู + ูข โค ูคูู - ูก</span>.</p><p><b>2. ูุทุฑุญ ูคูู ูู ุงูุทุฑููู:</b> <span class="math-eq">ูฅูู - ูคูู + ูข โค ูคูู - ูคูู - ูก</span>.</p><p><b>3. ูุจุณุท:</b> <span class="math-eq">ูู + ูข โค -ูก</span>.</p><p><b>4. ูุทุฑุญ ูข ูู ุงูุทุฑููู:</b> <span class="math-eq">ูู + ูข - ูข โค -ูก - ูข</span>.</p><p><b>5. ุงูุญู ุงูููุงุฆู:</b> <span class="math-eq">ูู โค -ูฃ</span>.</p>`, smartExplanation: `<p><b>ุงูููู ุงูุณุฑูุน:</b> ุงููู ูคูู ุฅูู ุงููุณุงุฑ (ุชุตุจุญ -ูคูู) ูุงููู ูข ุฅูู ุงููููู (ุชุตุจุญ -ูข). ุงููุชุจุงููุฉ ุชุตุจุญ <span class="math-eq">ูู โค -ูฃ</span>.</p>` },
            { type: 'mcq', level: 'โญโญ', text: `ูุงุชุฌ ุทุฑุญ <span class="num-highlight">ูฅ</span> ูู ุนุฏุฏ ูุงุ ูู ุนูู ุงูุฃูู <span class="num-highlight">ูกูข</span>. ุงูุชุจ ุงููุชุจุงููุฉ ุงูุชู ุชูุซู ูุฐู ุงูุฌููุฉ.`, options: [ { display: 'ุณ - ูฅ โฅ ูกูข', value: 'A' }, { display: 'ุณ - ูฅ โค ูกูข', value: 'B' }, { display: 'ูฅ - ุณ โฅ ูกูข', value: 'C' }, { display: 'ุณ + ูฅ โฅ ูกูข', value: 'D' } ], correct: 'A', explanation: `<p>ุนุจุงุฑุฉ "ูุงุชุฌ ุทุฑุญ ูฅ ูู ุนุฏุฏ ูุง" ุชุชุฑุฌู ุฅูู <span class="math-eq">ุณ - ูฅ</span>.</p><p>ุนุจุงุฑุฉ "ุนูู ุงูุฃูู" ุชุนูู "ุฃูุจุฑ ูู ุฃู ูุณุงูู" (โฅ).</p><p>ุฅุฐูุ ุงููุชุจุงููุฉ ูู <span class="math-eq">ุณ - ูฅ โฅ ูกูข</span>.</p>`, smartExplanation: `<p><b>ุงููููุงุช ุงูููุชุงุญูุฉ:</b> 'ุทุฑุญ ูฅ ูู ุนุฏุฏ' ุชุนูู <span class="math-eq">ุณ - ูฅ</span>. ู 'ุนูู ุงูุฃูู' ุชุนูู โฅ. ุงูุฎูุงุฑ ุงููุญูุฏ ุงูุฐู ูุทุงุจู ูู (ุฃ).</p>` },
            { type: 'mcq', level: 'โญโญ', text: `ุฃู ูู ุงููุชุจุงููุงุช ุงูุชุงููุฉ ุญููุง ูู <span class="math-eq">ู โฅ -ูข</span>ุ`, options: [ { display: 'ู + ูฃ โฅ ูก', value: 'A' }, { display: 'ู - ูก โฅ ูก', value: 'B' }, { display: 'ู + ูฅ โฅ ูจ', value: 'C' }, { display: 'ู - ูข โฅ -ูฃ', value: 'D' } ], correct: 'A', explanation: `<p>ูุญู ุงูุฎูุงุฑ ุงูุฃูู: <span class="math-eq">ู + ูฃ โฅ ูก</span>.</p><p>ูุทุฑุญ ูฃ ูู ุงูุทุฑููู: <span class="math-eq">ู โฅ ูก - ูฃ</span>.</p><p>ุฅุฐูุ <span class="math-eq">ู โฅ -ูข</span>. ููู ุงูุญู ุงููุทููุจ.</p>`, smartExplanation: `<p><b>ุงูุญู ุงูุนูุณู:</b> ุนูุถ ุจู <span class="math-eq">ู = -ูข</span> ูู ุงูุฎูุงุฑุงุช ูุงุจุญุซ ุนู ุงููุชุจุงููุฉ ุงูุชู ุชุตุจุญ ุตุญูุญุฉ (ูุณุงูุงุฉ).<br>ุงูุฎูุงุฑ (ุฃ): <span class="math-eq">-ูข + ูฃ = ูก</span>. ูู <span class="math-eq">ูก โฅ ูก</span>ุ ูุนู. ูุฐุง ูู ุงูุฎูุงุฑ ุงููุญุชูู.</p>` },
            { type: 'mcq', level: 'โญ', text: `ูุง ูู ุงูุฌููุฉ ุงูุชู ุชูุซู ุงููุชุจุงููุฉ <span class="math-eq">ุณ - ูฅ > ูกู</span>ุ`, options: [ { display: 'ุนุฏุฏ ูุทุฑูุญ ููู ูฅ ุฃูุจุฑ ูู ูกู', value: 'A' }, { display: 'ุนุฏุฏ ูุทุฑูุญ ููู ูฅ ุฃุตุบุฑ ูู ูกู', value: 'B' }, { display: 'ูุฌููุน ุนุฏุฏ ู ูฅ ุฃูุจุฑ ูู ูกู', value: 'C' }, { display: 'ูฅ ูุทุฑูุญ ูู ุนุฏุฏ ุฃูุจุฑ ูู ูกู', value: 'D' } ], correct: 'A', explanation: `<p>ุงููุชุจุงููุฉ <span class="math-eq">ุณ - ูฅ > ูกู</span> ุชูุฑุฃ ุญุฑููุงู: ุนุฏุฏ (ุณ) ูุทุฑูุญ ููู ูฅ ูู ุฃูุจุฑ ูู (>) ูกู.</p>` },
            { type: 'mcq', level: 'โญโญโญ', text: `ุญู ุงููุชุจุงููุฉ ุงูุชุงููุฉ: <span class="math-eq">-ูข + ู โค -ูง + ูขู</span>`, options: [ { display: 'ู โฅ ูฅ', value: 'A' }, { display: 'ู โค ูฅ', value: 'B' }, { display: 'ู โฅ -ูฉ', value: 'C' }, { display: 'ู โค -ูฉ', value: 'D' } ], correct: 'A', explanation: `<p><b>1. ูุทุฑุญ ู ูู ุงูุทุฑููู:</b> <span class="math-eq">-ูข โค -ูง + ู</span>.</p><p><b>2. ูุถูู ูง ููุทุฑููู:</b> <span class="math-eq">-ูข + ูง โค ู</span>.</p><p><b>3. ูุจุณุท:</b> <span class="math-eq">ูฅ โค ู</span>ุ ูุงูุชู ุชูุงูุฆ <span class="math-eq">ู โฅ ูฅ</span>.</p>`, smartExplanation: `<p><b>ุงูููู ุงูุณุฑูุน:</b> ุงููู 'ู' ุฅูู ุงููููู (ูุชุตุจุญ ู) ูุงููู -ูง ุฅูู ุงููุณุงุฑ (ูุชุตุจุญ +ูง). ุงููุชุจุงููุฉ ุชุตุจุญ <span class="math-eq">ูฅ โค ู</span>ุ ุฃู <span class="math-eq">ู โฅ ูฅ</span>.</p>` },
            { type: 'mcq', level: 'โญโญ', text: `ูุฑูุฏ ุณุงุฆู ูุทุน ูุณุงูุฉ ูุง ุชูู ุนู <span class="num-highlight">ูฃูู</span> ูู. ุฅุฐุง ูุทุน <span class="num-highlight">ูกูขู</span> ูู ุจุงููุนูุ ููุง ุงููุชุจุงููุฉ ุงูุชู ุชูุซู ุงููุณุงูุฉ ุงููุชุจููุฉ <span class="math-eq">ู</span> ุงูุชู ูุฌุจ ุนููู ูุทุนูุงุ`, options: [ { display: 'ูกูขู + ู โฅ ูฃูู', value: 'A' }, { display: 'ูกูขู + ู โค ูฃูู', value: 'B' }, { display: 'ู - ูกูขู โฅ ูฃูู', value: 'C' }, { display: 'ูฃูู - ู โค ูกูขู', value: 'D' } ], correct: 'A', explanation: `<p>ุงููุณุงูุฉ ุงูููุทูุนุฉ (ูกูขู ูู) ุฒุงุฆุฏ ุงููุณุงูุฉ ุงููุชุจููุฉ (<span class="math-eq">ู</span>) ูุฌุจ ุฃู ุชููู "ูุง ุชูู ุนู" (โฅ) ูฃูู ูู.</p><p>ุฅุฐูุ ุงููุชุจุงููุฉ ูู <span class="math-eq">ูกูขู + ู โฅ ูฃูู</span>.</p>`, smartExplanation: `<p><b>ุงููููุงุช ุงูููุชุงุญูุฉ:</b> 'ูุง ุชูู ุนู' ุชุนูู โฅ. ุงููุณุงูุฉ ุงูุฅุฌูุงููุฉ ูู 'ูุง ูุทุนู + ุงููุชุจูู'ุ ุฃู <span class="math-eq">ูกูขู + ู</span>. ุฅุฐู ุงููุชุจุงููุฉ ูู <span class="math-eq">ูกูขู + ู โฅ ูฃูู</span>.</p>` }
        ];
        const shuffled = [...questionBank].sort(() => 0.5 - Math.random());
        const questionCount = Math.min(shuffled.length, 5);
        return shuffled.slice(0, questionCount);
    }
    function toArabicNumerals(num) {
        const arabicNumerals = ['ู', 'ูก', 'ูข', 'ูฃ', 'ูค', 'ูฅ', 'ูฆ', 'ูง', 'ูจ', 'ูฉ'];
        return String(num).replace(/[0-9]/g, (d) => arabicNumerals[parseInt(d)]);
    }
    function generateNumberLine(containerId, value, type) {
        const container = document.getElementById(containerId);
        if (!container) return;
        const start = value - 5;
        const end = value + 5;
        const range = end - start;
        const svgWidth = container.clientWidth > 0 ? container.clientWidth : 250;
        const svgHeight = 60;
        const valueToX = (val) => ((val - start) / range) * (svgWidth - 40) + 20;
        const isClosed = type === 'gte' || type === 'lte';
        const isLeft = type === 'lt' || type === 'lte';
        let ticksHtml = '';
        for (let i = start; i <= end; i++) {
            const x = valueToX(i);
            ticksHtml += `<line x1="${x}" y1="15" x2="${x}" y2="25" stroke="gray" stroke-width="1"></line>`;
            ticksHtml += `<text x="${x}" y="45" text-anchor="middle" font-size="12" fill="black">${toArabicNumerals(i)}</text>`;
        }
        const valueX = valueToX(value);
        const circleHtml = `<circle cx="${valueX}" cy="20" r="5" stroke="#3b82f6" stroke-width="2" fill="${isClosed ? '#3b82f6' : 'white'}"></circle>`;
        let rayHtml = '';
        if (isLeft) {
            rayHtml = `<line x1="${valueX}" y1="20" x2="0" y2="20" stroke="#3b82f6" stroke-width="3"></line>`;
            rayHtml += `<polygon points="10,15 0,20 10,25" fill="#3b82f6"></polygon>`;
        } else {
            rayHtml = `<line x1="${valueX}" y1="20" x2="${svgWidth}" y2="20" stroke="#3b82f6" stroke-width="3"></line>`;
            rayHtml += `<polygon points="${svgWidth - 10},15 ${svgWidth},20 ${svgWidth - 10},25" fill="#3b82f6"></polygon>`;
        }
        const svg = `<svg width="100%" height="${svgHeight}" class="number-line-svg"><line x1="0" y1="20" x2="${svgWidth}" y2="20" stroke="gray" stroke-width="2"></line>${ticksHtml}${rayHtml}${circleHtml}</svg>`;
        container.innerHTML = svg;
    }
    document.addEventListener('DOMContentLoaded', () => {
        const exampleContainers = document.querySelectorAll('[id^="interactive-container-"]');
        const state = {};
        exampleContainers.forEach(container => {
            const exampleId = container.id.split('-')[2];
            state[exampleId] = { currentIndex: -1, steps: container.querySelectorAll('.step-interactive'), placeholder: container.querySelector('.interactive-placeholder'), prevBtn: container.querySelector('.prev-btn'), nextBtn: container.querySelector('.next-btn'), resetBtn: container.querySelector('.reset-btn') };
            const resetExample = () => { state[exampleId].steps.forEach(step => step.classList.remove('active')); state[exampleId].currentIndex = -1; if (state[exampleId].placeholder) { state[exampleId].placeholder.classList.remove('hidden'); } updateButtons(); };
            const updateButtons = () => { const isFirstStep = state[exampleId].currentIndex <= -1; const isLastStep = state[exampleId].currentIndex >= state[exampleId].steps.length - 1; state[exampleId].prevBtn.disabled = isFirstStep; if (isLastStep) { state[exampleId].nextBtn.classList.add('hidden'); state[exampleId].resetBtn.classList.remove('hidden'); } else { state[exampleId].nextBtn.classList.remove('hidden'); state[exampleId].resetBtn.classList.add('hidden'); } };
            
            state[exampleId].nextBtn.addEventListener('click', () => {
                if (state[exampleId].currentIndex < state[exampleId].steps.length - 1) {
                    if (state[exampleId].currentIndex === -1 && state[exampleId].placeholder) {
                        state[exampleId].placeholder.classList.add('hidden');
                    }
                    state[exampleId].currentIndex++;
                    const activeStep = state[exampleId].steps[state[exampleId].currentIndex];
                    activeStep.classList.add('active');
                    const nlContainer = activeStep.querySelector('[data-nldata]');
                    if (nlContainer) {
                        const data = JSON.parse(nlContainer.dataset.nldata);
                        generateNumberLine(nlContainer.id, data.value, data.type);
                    }
                    updateButtons();
                }
            });
            state[exampleId].prevBtn.addEventListener('click', () => {
                if (state[exampleId].currentIndex > -1) {
                    state[exampleId].steps[state[exampleId].currentIndex].classList.remove('active');
                    state[exampleId].currentIndex--;
                     if (state[exampleId].currentIndex === -1 && state[exampleId].placeholder) {
                        state[exampleId].placeholder.classList.remove('hidden');
                    }
                    updateButtons();
                }
            });

            if(state[exampleId].resetBtn) { state[exampleId].resetBtn.addEventListener('click', resetExample); }
            updateButtons();
        });

        const student = getStudentFromStorage();
        const lessonTitleElement = document.getElementById('lesson-title');
        const lessonTitle = lessonTitleElement ? lessonTitleElement.textContent : null;
        buildHeader(student, lessonTitle);
        buildFooter();
        const questions = generateQuiz();
        initializeQuiz(LESSON_ID, questions, student);
        const retakeBtn = document.getElementById('retake-quiz-btn');
        if(retakeBtn) { retakeBtn.addEventListener('click', () => { window.location.reload(); }); }
        
        const closeModalBtn = document.getElementById('closeModalBtn');
        if(closeModalBtn) closeModalBtn.addEventListener('click', closeModal);
        
        const closeSmartModalBtn = document.getElementById('closeSmartModalBtn');
        if(closeSmartModalBtn) closeSmartModalBtn.addEventListener('click', closeSmartModal);

        window.addEventListener('resize', () => {
            document.querySelectorAll('.number-line-container[data-nldata]').forEach(nlContainer => {
                if (nlContainer.offsetParent !== null) {
                    const data = JSON.parse(nlContainer.dataset.nldata);
                    generateNumberLine(nlContainer.id, data.value, data.type);
                }
            });
        });
    });
    </script>
</body>
</html>

