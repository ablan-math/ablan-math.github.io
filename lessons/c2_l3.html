<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงูุฏุฑุณ ูข-ูฃ: ุชูุซูู ุงููุนุงุฏูุงุช ุงูุฎุทูุฉ ุจูุงููุงู | ููุตุฉ ุงูุฑูุงุถูุงุช ุงูุชูุงุนููุฉ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; }
        .hidden { display: none; }
        .step-box { border-right: 4px solid #1d4ed8; }
        .vocab-term { background-color: #ffefc5; padding: 2px 6px; border-radius: 4px; font-weight: bold; }
        .option-label { display: block; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; cursor: pointer; transition: all 0.2s ease-in-out; }
        .option-label:hover { border-color: #3b82f6; background-color: #eff6ff; }
        input[type="radio"]:checked + .option-label { border-color: #2563eb; background-color: #dbeafe; box-shadow: 0 0 0 2px #bfdbfe; }
        input[type="radio"] { display: none; }
        .feedback-correct { color: #16a34a; }
        .feedback-incorrect { color: #dc2626; }
        .highlight-change { color: #ef4444; font-weight: bold; }
        
        /* === ุชุนุฏูู ุงูุฑููุฒ ุงูุฑูุงุถูุฉ === */
        .math-eq {
            font-family: "Courier New", monospace; /* ุฎุท ุนุฑูุถ ููุชุจุงุนุฏ */
            font-size: 1.2rem; /* ุชูุจูุฑ ุญุฌู ุงูุฎุท */
            font-weight: bold;
            color: #4338ca;
            background-color: #f3f4f6; /* ุฎูููุฉ ุฑูุงุฏูุฉ ูุงุชุญุฉ */
            border: 1px solid #d1d5db; /* ุฅุทุงุฑ ุฎููู */
            padding: 2px 8px; /* ููุงูุด ุฏุงุฎููุฉ */
            border-radius: 6px; /* ุฒูุงูุง ุฏุงุฆุฑูุฉ */
            display: inline-block;
            vertical-align: middle; /* ูุญุงุฐุงุฉ ุฃูุถู ูุน ุงููุต */
        }
        
        .fraction { display: inline-flex; flex-direction: column; text-align: center; vertical-align: middle; margin: 0 0.2em; }
        .fraction > span { display: block; padding: 0 0.4em; }
        .fraction > .frac-bar { border-top: 2px solid #4338ca; }
        .step-interactive { display: none; opacity: 0; transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out; transform: translateY(10px); }
        .step-interactive.active { display: block; opacity: 1; transform: translateY(0); }
        .graph-container {
            position: relative;
            width: 100%;
            max-width: 350px;
            height: 250px;
            margin: 1rem auto;
            border: 1px solid #ccc;
            background-color: white;
        }
        .graph-container svg {
            width: 100%;
            height: 100%;
        }
        .svg-element { transition: opacity 0.5s ease-in-out; }
    </style>
</head>
<body class="bg-gray-100">
    <div id="app-container" class="grid grid-template-rows: auto 1fr auto; min-height: 100vh;">
        <header id="main-header" class="bg-white shadow-md sticky top-0 z-50"></header>
        <main class="container mx-auto max-w-4xl my-8">
            <div class="p-6 bg-white rounded-xl shadow-lg">
                <header class="flex justify-between items-center mb-8 border-b pb-4 border-gray-200">
                    <h1 id="lesson-title" class="text-3xl font-bold text-blue-800">ุงูุฏุฑุณ ูข-ูฃ: ุชูุซูู ุงููุนุงุฏูุงุช ุงูุฎุทูุฉ ุจูุงููุงู</h1>
                    <a href="../index.html" target="_top" class="text-sm text-blue-600 hover:underline">&larr; ุงูุนูุฏุฉ ุฅูู ุงูููุฑุณ</a>
                </header>
                <section class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">๐ก ุฃููุงู: ุงูููููู ุงูุฃุณุงุณู</h2>
                    <div class="p-4 bg-blue-50 rounded-lg space-y-4">
                        <div>
                            <h3 class="font-bold text-blue-700">ูููุง ุณุจู...</h3>
                            <p>ุฏุฑุณุช ุชูุซูู ุงูุนูุงูุฉ ุจูู ุงููููุงุช ุจุงููุนุงุฏูุงุช.</p>
                        </div>
                        <hr>
                        <div>
                            <h3 class="font-bold text-blue-700">ูุงูุขู...</h3>
                            <ul class="list-disc pr-6 space-y-2">
                                <li>ูููุฒ <span class="vocab-term">ุงููุนุงุฏูุฉ ุงูุฎุทูุฉ</span>.</li>
                                <li>ูุญุฏุฏ <span class="vocab-term">ุงูููุทุน ุงูุณููู</span> ู<span class="vocab-term">ุงูููุทุน ุงูุตุงุฏู</span> ูููุนุงุฏูุฉ.</li>
                                <li>ููุซู ุงููุนุงุฏูุงุช ุงูุฎุทูุฉ ุจูุงููุงู.</li>
                            </ul>
                        </div>
                         <hr>
                         <div>
                            <h3 class="font-bold text-blue-700">ุงูููุฑุฏุงุช ุงูุฌุฏูุฏุฉ</h3>
                            <dl class="space-y-3 mt-2">
                                <div>
                                    <dt class="font-bold text-md text-blue-800">ุงููุนุงุฏูุฉ ุงูุฎุทูุฉ</dt>
                                    <dd class="pr-4 text-gray-600 text-sm">ูู ูุนุงุฏูุฉ ููุซููุง ุฎุท ูุณุชููู. ูุง ุชุญุชูู ุนูู ุฃุณุณ ูููุชุบูุฑุงุช (ูุซู ุณยฒ) ุฃู ูุชุบูุฑุงุช ูุถุฑูุจุฉ ูู ุจุนุถูุง (ูุซู ุณ ุต).</dd>
                                </div>
                                <div>
                                    <dt class="font-bold text-md text-blue-800">ุงูุตูุฑุฉ ุงูููุงุณูุฉ</dt>
                                    <dd class="pr-4 text-gray-600 text-sm">ูู ุทุฑููุฉ ููุชุงุจุฉ ุงููุนุงุฏูุฉ ุงูุฎุทูุฉ ุนูู ุงูุตูุฑุฉ <span class="math-eq">ุฃุณ + ุจ ุต = ุฌ</span>.</dd>
                                </div>
                                <div>
                                    <dt class="font-bold text-md text-blue-800">ุงูููุทุน ุงูุณููู (x-intercept)</dt>
                                    <dd class="pr-4 text-gray-600 text-sm">ูู ุงูุฅุญุฏุงุซู ุงูุณููู ููููุทุฉ ุงูุชู ููุทุน ูููุง ุงูุฎุท ูุญูุฑ ุงูุณููุงุช. ุนูุฏ ูุฐู ุงูููุทุฉุ ุชููู ูููุฉ <span class="math-eq">ุต = ู</span>.</dd>
                                </div>
                                <div>
                                    <dt class="font-bold text-md text-blue-800">ุงูููุทุน ุงูุตุงุฏู (y-intercept)</dt>
                                    <dd class="pr-4 text-gray-600 text-sm">ูู ุงูุฅุญุฏุงุซู ุงูุตุงุฏู ููููุทุฉ ุงูุชู ููุทุน ูููุง ุงูุฎุท ูุญูุฑ ุงูุตุงุฏุงุช. ุนูุฏ ูุฐู ุงูููุทุฉุ ุชููู ูููุฉ <span class="math-eq">ุณ = ู</span>.</dd>
                                </div>
                            </dl>
                        </div>
                    </div>
                </section>
                <section class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">๐ฏ ุซุงููุงู: ุชุฏุฑูุจุงุช ุณุฑูุนุฉ ุนูู ุชูููุฒ ุงููุนุงุฏูุงุช</h2>
                    <div id="interactive-container-5" class="p-4 bg-white rounded-lg shadow">
                        <p class="text-lg font-semibold mb-4">ุญุฏุฏ ูุง ุฅุฐุง ูุงูุช ูู ูุนุงุฏูุฉ ูููุง ููู ุฎุทูุฉ ุฃู ูุง.</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Question 1 -->
                            <div class="p-3 bg-blue-100 rounded-lg">
                                <p class="text-center font-bold">1. <span class="math-eq">ุต = ุณยฒ + ูก</span></p>
                                <div class="steps-container mt-2 space-y-2">
                                    <div class="step-interactive p-3 bg-gray-50 rounded-lg step-box"><p><b class="text-red-600">ุบูุฑ ุฎุทูุฉ</b></p></div>
                                    <div class="step-interactive p-3 bg-gray-100 rounded-lg step-box"><p class="pr-4"><b>ุงูุชุจุฑูุฑ:</b> ูุฃู ุงููุชุบูุฑ 'ุณ' ูุฑููุน ููุฃุณ 2.</p></div>
                                </div>
                            </div>
                            <!-- Question 2 -->
                            <div class="p-3 bg-blue-100 rounded-lg">
                                <p class="text-center font-bold">2. <span class="math-eq">ูฃุณ + ูฅุต = ูกู</span></p>
                                <div class="steps-container mt-2 space-y-2">
                                    <div class="step-interactive p-3 bg-gray-50 rounded-lg step-box"><p><b class="text-green-600">ุฎุทูุฉ</b></p></div>
                                    <div class="step-interactive p-3 bg-gray-100 rounded-lg step-box"><p class="pr-4"><b>ุงูุชุจุฑูุฑ:</b> ูููู ูุชุงุจุชูุง ุนูู ุงูุตูุฑุฉ ุงูููุงุณูุฉ ูุงููุชุบูุฑุงุช ูู ุงูุฃุณ ุงูุฃูู.</p></div>
                                </div>
                            </div>
                            <!-- Question 3 -->
                            <div class="p-3 bg-blue-100 rounded-lg">
                                <p class="text-center font-bold">3. <span class="math-eq">ุณ ุต = ูค</span></p>
                                <div class="steps-container mt-2 space-y-2">
                                    <div class="step-interactive p-3 bg-gray-50 rounded-lg step-box"><p><b class="text-red-600">ุบูุฑ ุฎุทูุฉ</b></p></div>
                                    <div class="step-interactive p-3 bg-gray-100 rounded-lg step-box"><p class="pr-4"><b>ุงูุชุจุฑูุฑ:</b> ูุฃู ุงููุชุบูุฑูู 'ุณ' ู 'ุต' ูุถุฑูุจุงู ูู ุจุนุถููุง.</p></div>
                                </div>
                            </div>
                            <!-- Question 4 -->
                            <div class="p-3 bg-blue-100 rounded-lg">
                                <p class="text-center font-bold">4. <span class="math-eq flex inline-flex items-center"><span class="fraction"><span>ุต</span><span class="frac-bar"></span><span>ูข</span></span> = ุณ</span></p>
                                <div class="steps-container mt-2 space-y-2">
                                    <div class="step-interactive p-3 bg-gray-50 rounded-lg step-box"><p><b class="text-green-600">ุฎุทูุฉ</b></p></div>
                                    <div class="step-interactive p-3 bg-gray-100 rounded-lg step-box"><p class="pr-4"><b>ุงูุชุจุฑูุฑ:</b> ูููู ูุชุงุจุชูุง ุนูู ุงูุตูุฑุฉ <span class="math-eq">ูขุณ - ุต = ู</span>ุ ููู ุชุญูู ุงูุดุฑูุท.</p></div>
                                </div>
                            </div>
                        </div>
                        <div class="flex justify-center mt-6">
                             <div class="interactive-placeholder text-center text-gray-500 p-4"><p>ุงุถุบุท "ุงูุชุงูู" ูุฅุธูุงุฑ ุงูุฅุฌุงุจุงุช ุจุดูู ูุชุณูุณู</p></div>
                        </div>
                        <div class="flex justify-between mt-2">
                            <button data-example="5" class="prev-btn bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed">ุฑุฌูุน</button>
                            <div>
                                <button data-example="5" class="next-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">ุงูุชุงูู</button>
                                <button data-example="5" class="reset-btn hidden bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700">ุฅุนุงุฏุฉ</button>
                            </div>
                        </div>
                    </div>
                </section>
                <section class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">๐ฏ ุซุงูุซุงู: ุฃูุซูุฉ ุชูุงุนููุฉ ูุฅูุฌุงุฏ ุงูุตูุฑุฉ ุงูููุงุณูุฉ</h2>
                    <div class="p-6 bg-gray-50 rounded-lg">
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <!-- Example A -->
                            <div id="interactive-container-6" class="p-4 bg-white rounded-lg shadow flex flex-col">
                                <p class="text-lg font-semibold mb-4 text-center">ูุซุงู ูก</p>
                                <p class="text-center mb-4"><span class="math-eq">ุต = ูฃุณ - ูค</span></p>
                                <div class="steps-container space-y-4 flex-grow min-h-[150px]">
                                    <div class="interactive-placeholder text-center text-gray-500 p-4"><p>ุงุถุบุท "ุงูุชุงูู"</p></div>
                                    <div class="step-interactive p-2 bg-gray-50 rounded-lg step-box"><h4 class="font-bold text-sm">ุงูุฎุทูุฉ ูก: ุงููุฏู</h4><p class="text-sm">ุงููุฏู ูู ุงููุตูู ููุตูุฑุฉ ุงูููุงุณูุฉ <span class="math-eq text-base">ุฃุณ + ุจ ุต = ุฌ</span>.</p></div>
                                    <div class="step-interactive p-2 bg-gray-50 rounded-lg step-box"><h4 class="font-bold text-sm">ุงูุฎุทูุฉ ูข: ููู ุงููุชุบูุฑุงุช</h4><p class="text-sm">ูุทุฑุญ <span class="math-eq text-base">ูฃุณ</span> ูู ุงูุทุฑููู. ูุชุตุจุญ: <span class="math-eq text-base">ุต - ูฃุณ = -ูค</span></p></div>
                                    <div class="step-interactive p-2 bg-green-100 rounded-lg step-box border-green-600"><h4 class="font-bold text-sm">ุงูุฎุทูุฉ ูฃ: ุงูุญู ุงูููุงุฆู</h4><p class="text-sm">ูุถุฑุจ ูู -ูก ููุฑุชุจ: <span class="math-eq text-base">ูฃุณ - ุต = ูค</span></p></div>
                                </div>
                                <div class="flex justify-between mt-6">
                                    <button data-example="6" class="prev-btn bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed">ุฑุฌูุน</button>
                                    <div>
                                        <button data-example="6" class="next-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">ุงูุชุงูู</button>
                                        <button data-example="6" class="reset-btn hidden bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700">ุฅุนุงุฏุฉ</button>
                                    </div>
                                </div>
                            </div>
                            <!-- Example B -->
                            <div id="interactive-container-7" class="p-4 bg-white rounded-lg shadow flex flex-col">
                                <p class="text-lg font-semibold mb-4 text-center">ูุซุงู ูข</p>
                                <p class="text-center mb-4"><span class="math-eq">ูขุต = ูจ - ูฆุณ</span></p>
                                <div class="steps-container space-y-4 flex-grow min-h-[150px]">
                                    <div class="interactive-placeholder text-center text-gray-500 p-4"><p>ุงุถุบุท "ุงูุชุงูู"</p></div>
                                    <div class="step-interactive p-2 bg-gray-50 rounded-lg step-box"><h4 class="font-bold text-sm">ุงูุฎุทูุฉ ูก: ุงููุฏู</h4><p class="text-sm">ุงููุฏู ูู ุงููุตูู ููุตูุฑุฉ ุงูููุงุณูุฉ <span class="math-eq text-base">ุฃุณ + ุจ ุต = ุฌ</span>.</p></div>
                                    <div class="step-interactive p-2 bg-gray-50 rounded-lg step-box"><h4 class="font-bold text-sm">ุงูุฎุทูุฉ ูข: ููู ุงููุชุบูุฑุงุช</h4><p class="text-sm">ูุถูู <span class="math-eq text-base">ูฆุณ</span> ุฅูู ุงูุทุฑููู. ูุชุตุจุญ: <span class="math-eq text-base">ูฆุณ + ูขุต = ูจ</span></p></div>
                                    <div class="step-interactive p-2 bg-green-100 rounded-lg step-box border-green-600"><h4 class="font-bold text-sm">ุงูุฎุทูุฉ ูฃ: ุงูุญู ุงูููุงุฆู</h4><p class="text-sm">ุงููุนุงุฏูุฉ ุงูุขู ุจุงูุตูุฑุฉ ุงูููุงุณูุฉ.</p></div>
                                </div>
                                <div class="flex justify-between mt-6">
                                    <button data-example="7" class="prev-btn bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed">ุฑุฌูุน</button>
                                    <div>
                                        <button data-example="7" class="next-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">ุงูุชุงูู</button>
                                        <button data-example="7" class="reset-btn hidden bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700">ุฅุนุงุฏุฉ</button>
                                    </div>
                                </div>
                            </div>
                            <!-- Example C -->
                            <div id="interactive-container-8" class="p-4 bg-white rounded-lg shadow flex flex-col">
                                <p class="text-lg font-semibold mb-4 text-center">ูุซุงู ูฃ</p>
                                <p class="text-center mb-4"><span class="math-eq">ุต = -ูงุณ</span></p>
                                <div class="steps-container space-y-4 flex-grow min-h-[150px]">
                                    <div class="interactive-placeholder text-center text-gray-500 p-4"><p>ุงุถุบุท "ุงูุชุงูู"</p></div>
                                    <div class="step-interactive p-2 bg-gray-50 rounded-lg step-box"><h4 class="font-bold text-sm">ุงูุฎุทูุฉ ูก: ุงููุฏู</h4><p class="text-sm">ุงููุฏู ูู ุงููุตูู ููุตูุฑุฉ ุงูููุงุณูุฉ <span class="math-eq text-base">ุฃุณ + ุจ ุต = ุฌ</span>.</p></div>
                                    <div class="step-interactive p-2 bg-gray-50 rounded-lg step-box"><h4 class="font-bold text-sm">ุงูุฎุทูุฉ ูข: ููู ุงููุชุบูุฑุงุช</h4><p class="text-sm">ูุถูู <span class="math-eq text-base">ูงุณ</span> ุฅูู ุงูุทุฑููู. ูุชุตุจุญ: <span class="math-eq text-base">ูงุณ + ุต = ู</span></p></div>
                                    <div class="step-interactive p-2 bg-green-100 rounded-lg step-box border-green-600"><h4 class="font-bold text-sm">ุงูุฎุทูุฉ ูฃ: ุงูุญู ุงูููุงุฆู</h4><p class="text-sm">ุงููุนุงุฏูุฉ ุงูุขู ุจุงูุตูุฑุฉ ุงูููุงุณูุฉ (ูููุฉ ุฌ = ู).</p></div>
                                </div>
                                <div class="flex justify-between mt-6">
                                    <button data-example="8" class="prev-btn bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed">ุฑุฌูุน</button>
                                    <div>
                                        <button data-example="8" class="next-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">ุงูุชุงูู</button>
                                        <button data-example="8" class="reset-btn hidden bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700">ุฅุนุงุฏุฉ</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                 <section class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">๐ฏ ุฑุงุจุนุงู: ุชูุซูู ุงููุนุงุฏูุงุช ุจูุงููุงู</h2>
                    <div class="p-6 bg-gray-50 rounded-lg">
                        <div class="flex flex-col space-y-8">
                            <!-- Example 1 -->
                            <div id="interactive-container-1" class="p-4 bg-white rounded-lg shadow">
                                <p class="text-lg font-semibold mb-4">ูุซุงู ูฃ: ุฃูุฌุฏ ุงูููุทุนูู ุงูุณููู ูุงูุตุงุฏู ูููุนุงุฏูุฉ <span class="math-eq">ูขุณ + ูคุต = ูกูฆ</span></p>
                                <div class="flex flex-col md:flex-row-reverse gap-8 items-center">
                                    <!-- Right side: Graph -->
                                    <div class="graph-container md:w-1/2">
                                        <svg viewBox="0 0 300 200">
                                            <defs><pattern id="gridMain" width="15" height="15" patternUnits="userSpaceOnUse"><path d="M 15 0 L 0 0 0 15" fill="none" stroke="#e5e7eb" stroke-width="1"/></pattern></defs>
                                            <rect width="100%" height="100%" fill="url(#gridMain)" />
                                            <line x1="0" y1="105" x2="300" y2="105" stroke="#6b7280" stroke-width="2"/>
                                            <text x="280" y="100" font-family="Cairo" font-size="16" fill="#000" font-weight="bold">ุณ</text>
                                            <line x1="150" y1="0" x2="150" y2="200" stroke="#6b7280" stroke-width="2"/>
                                            <text x="155" y="15" font-family="Cairo" font-size="16" fill="#000" font-weight="bold">ุต</text>
                                            
                                            <!-- Dynamic Elements -->
                                            <line id="graph-1-line" x1="150" y1="45" x2="270" y2="105" stroke="#1d4ed8" stroke-width="3" class="svg-element hidden"/>
                                            <circle id="graph-1-point-y" cx="150" cy="45" r="5" fill="#ef4444" class="svg-element hidden"/>
                                            <text id="graph-1-text-y" x="100" y="50" font-family="Cairo" font-size="14" fill="#000" font-weight="bold" class="svg-element hidden">(ูุ ูค)</text>
                                            <circle id="graph-1-point-x" cx="270" cy="105" r="5" fill="#ef4444" class="svg-element hidden"/>
                                            <text id="graph-1-text-x" x="240" y="130" font-family="Cairo" font-size="14" fill="#000" font-weight="bold" class="svg-element hidden">(ูจุ ู)</text>
                                        </svg>
                                    </div>
                                    <!-- Left side: Steps -->
                                    <div class="steps-container md:w-1/2 space-y-4 min-h-[250px]">
                                        <div class="interactive-placeholder text-center text-gray-500 p-4"><p>ุงุถุบุท "ุงูุชุงูู" ูุจุฏุก ุฎุทูุงุช ุงูุญู</p></div>
                                        <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 1: ุฅูุฌุงุฏ ุงูููุทุน ุงูุณููู (ุนูุฏ ุต=ู)</h4><p>ูุนูุถ ุนู <span class="math-eq">ุต</span> ุจู <span class="math-eq">ู</span>: <span class="math-eq">ูขุณ + ูค(ู) = ูกูฆ</span></p><p class="text-center mt-2"><span class="math-eq">ูขุณ = ูกูฆ</span> โฌ๏ธ <span class="math-eq">ุณ = ูจ</span></p></div>
                                        <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 2: ุฅูุฌุงุฏ ุงูููุทุน ุงูุตุงุฏู (ุนูุฏ ุณ=ู)</h4><p>ูุนูุถ ุนู <span class="math-eq">ุณ</span> ุจู <span class="math-eq">ู</span>: <span class="math-eq">ูข(ู) + ูคุต = ูกูฆ</span></p><p class="text-center mt-2"><span class="math-eq">ูคุต = ูกูฆ</span> โฌ๏ธ <span class="math-eq">ุต = ูค</span></p></div>
                                        <div class="step-interactive p-4 bg-green-100 rounded-lg step-box border-green-600"><h4 class="font-bold">ุงูุฎุทูุฉ 3: ุงูุญู ุงูููุงุฆู</h4><p>ูุตู ุจูู ุงูููุทุชูู <span class="math-eq">(ูจ, ู)</span> ู <span class="math-eq">(ู, ูค)</span> ูุฑุณู ุงูุฎุท ุงููุณุชููู.</p></div>
                                    </div>
                                </div>
                                <div class="flex justify-between mt-6">
                                    <button data-example="1" class="prev-btn bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed">ุฑุฌูุน</button>
                                    <div>
                                        <button data-example="1" class="next-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">ุงูุชุงูู</button>
                                        <button data-example="1" class="reset-btn hidden bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700">ุฅุนุงุฏุฉ</button>
                                    </div>
                                </div>
                            </div>
                             <!-- Example 2 -->
                            <div id="interactive-container-2" class="p-4 bg-white rounded-lg shadow">
                                <p class="text-lg font-semibold mb-4">ูุซุงู ูค: ุญุงูุฉ ุฎุงุตุฉ - ุชูุซูู ุงููุนุงุฏูุฉ <span class="math-eq">ุณ = ูฃ</span> ุจูุงููุงู</p>
                                <div class="flex flex-col md:flex-row-reverse gap-8 items-center">
                                    <div class="graph-container md:w-1/2">
                                        <svg viewBox="0 0 300 200">
                                           <defs><pattern id="gridSpecial" width="20" height="20" patternUnits="userSpaceOnUse"><path d="M 20 0 L 0 0 0 20" fill="none" stroke="#e5e7eb" stroke-width="1"/></pattern></defs>
                                            <rect width="100%" height="100%" fill="url(#gridSpecial)" />
                                            <line x1="0" y1="100" x2="300" y2="100" stroke="#6b7280" stroke-width="2"/>
                                            <text x="280" y="95" font-family="Cairo" font-size="16" fill="#000" font-weight="bold">ุณ</text>
                                            <line x1="150" y1="0" x2="150" y2="200" stroke="#6b7280" stroke-width="2"/>
                                            <text x="155" y="15" font-family="Cairo" font-size="16" fill="#000" font-weight="bold">ุต</text>
                                            <!-- Dynamic Elements -->
                                            <line id="graph-2-line" x1="210" y1="0" x2="210" y2="200" stroke="#1d4ed8" stroke-width="3" class="svg-element hidden"/>
                                            <circle id="graph-2-point-x" cx="210" cy="100" r="5" fill="#ef4444" class="svg-element hidden"/>
                                            <text id="graph-2-text-x" x="180" y="125" font-family="Cairo" font-size="14" fill="#000" font-weight="bold" class="svg-element hidden">(ูฃุ ู)</text>
                                        </svg>
                                    </div>
                                    <div class="steps-container md:w-1/2 space-y-4 min-h-[250px]">
                                        <div class="interactive-placeholder text-center text-gray-500 p-4"><p>ุงุถุบุท "ุงูุชุงูู" ูุจุฏุก ุฎุทูุงุช ุงูุญู</p></div>
                                        <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 1: ุชุญููู ุงููุนุงุฏูุฉ ูุฅูุฌุงุฏ ุงูููุทุน ุงูุณููู</h4><p>ุงููุนุงุฏูุฉ <span class="math-eq">ุณ = ูฃ</span> ุชุนูู ุฃู ูููุฉ <span class="math-eq">ุณ</span> ุซุงุจุชุฉ ุฏุงุฆูุงู ุนูุฏ ูฃ. ูุฐุง ููุซู ุฎุทุงู ุฑุฃุณูุงู ููุทุน ูุญูุฑ ุงูุณููุงุช ุนูุฏ <span class="math-eq">ุณ = ูฃ</span>.</p></div>
                                        <div class="step-interactive p-4 bg-red-100 rounded-lg step-box border-red-600"><h4 class="font-bold">ุงูุฎุทูุฉ 2: ุงูุญู ุงูููุงุฆู</h4><p>ุงูุฎุท ุงูุฑุฃุณู <span class="math-eq">ุณ = ูฃ</span> ููุงุฒู ูุญูุฑ ุงูุตุงุฏุงุช ููุง ููุทุนู ุฃุจุฏุงู. ุฅุฐูุ <strong class="text-red-700">ูุง ููุฌุฏ ููุทุน ุตุงุฏู</strong>.</p></div>
                                    </div>
                                </div>
                                <div class="flex justify-between mt-6">
                                    <button data-example="2" class="prev-btn bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed">ุฑุฌูุน</button>
                                    <div>
                                        <button data-example="2" class="next-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">ุงูุชุงูู</button>
                                        <button data-example="2" class="reset-btn hidden bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700">ุฅุนุงุฏุฉ</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <section class="mt-12">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-2xl font-bold text-gray-800">โ๏ธ ุฎุงูุณุงู: ุญุงู ุฏูุฑู! ุงุฎุชุจุฑ ูููู</h2>
                        <div id="attempts-counter" class="text-sm font-bold text-gray-600"></div>
                    </div>
                    <form id="quizForm" class="p-6 bg-gray-50 rounded-lg space-y-8"></form>
                    <div id="quiz-results" class="hidden mt-6 p-4 rounded-lg text-center">
                        <h3 class="text-xl font-bold">ูุชูุฌุชู ุงูููุงุฆูุฉ</h3>
                        <p id="quiz-score" class="text-4xl font-bold my-2"></p>
                        <div id="save-status" class="mt-4 text-sm font-semibold"></div>
                        <button id="retake-quiz-btn" class="hidden mt-4 bg-blue-600 text-white font-medium py-2 px-6 rounded-lg hover:bg-blue-700">ุฅุนุงุฏุฉ ุงูุงุฎุชุจุงุฑ</button>
                    </div>
                </section>
            </div>
        </main>
        <footer id="main-footer" class="bg-gray-200 py-4"></footer>
    </div>
    <div id="explanationModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-white rounded-lg shadow-2xl p-6 max-w-lg w-full">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold">๐ก ุดุฑุญ ุงูุฅุฌุงุจุฉ</h3>
                <button id="closeModalBtn" class="p-2 -m-2 rounded-full hover:bg-gray-200">
                    <svg class="h-6 w-6 text-gray-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
            </div>
            <div id="explanationText" class="text-gray-700 max-h-[60vh] overflow-y-auto"></div>
        </div>
    </div>
    <script>
    // =================================================================================
    // ุฏูุงู ูุดุชุฑูุฉ (ูุง ุชูู ุจุชุนุฏูู ูุฐุง ุงูุฌุฒุก)
    // =================================================================================
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzrf1-At3Pq7i39bGV3F1iD3-b0G-WWyRi5cgpKeQjyn_N5fh2EmGhoyRKUsbLd-F_UJQ/exec";
    const MAX_ATTEMPTS = 3;
    let currentQuestions = []; 
    function getStudentFromStorage() { const studentDataString = localStorage.getItem('currentStudent'); if (studentDataString) { try { return JSON.parse(studentDataString); } catch (e) { return null; } } return null; }
    function buildHeader(studentData, lessonTitle = null) { const headerContainer = document.getElementById('main-header'); if (!headerContainer) return; let titleHtml; if (lessonTitle) { titleHtml = `<div><h2 class="text-sm text-gray-500 leading-tight">ููุตุฉ ุงูุฑูุงุถูุงุช ุงูุชูุงุนููุฉ</h2><h1 class="text-xl font-bold text-indigo-700 leading-tight">${lessonTitle}</h1></div>`; } else { titleHtml = `<a href="../index.html" target="_top"><h1 class="text-2xl font-bold text-blue-800">ููุตุฉ ุงูุฑูุงุถูุงุช ุงูุชูุงุนููุฉ</h1></a>`; } let userInfoHtml = ''; if (studentData) { userInfoHtml = `<div class="flex items-center gap-4"><span class="font-semibold">ุฃููุงูุ ${studentData.name}</span><a href="../index.html" target="_top" id="logout-link" class="bg-red-500 text-white py-1 px-3 rounded-lg hover:bg-red-600">ุฎุฑูุฌ</a></div>`; } else { userInfoHtml = `<p class="text-lg text-gray-600">ุฒุงุฆุฑ</p>`; } headerContainer.innerHTML = `<div class="container mx-auto px-6 py-4 flex justify-between items-center">${titleHtml}${userInfoHtml}</div>`; const logoutLink = headerContainer.querySelector('#logout-link'); if(logoutLink) { logoutLink.addEventListener('click', () => { localStorage.removeItem('currentStudent'); }); } }
    function buildFooter() { const footerContainer = document.getElementById('main-footer'); if (!footerContainer) return; footerContainer.innerHTML = `<div class="container mx-auto px-6"><p class="text-center text-gray-600 text-sm">ยฉ 2024 ุฌููุน ุงูุญููู ูุญููุธุฉ | ุชุตููู ูุชุทููุฑ: ุฃ. ุนุจุฏุงูุนุฒูุฒ ุฎุงูุฏ ุงูุนุจูุงู</p></div>`; }
    function initializeQuiz(lessonId, questions, studentData) { currentQuestions = questions; const quizForm = document.getElementById('quizForm'); if (!quizForm) return; if (questions.length === 0) { quizForm.innerHTML = `<p class="text-center text-gray-600">ูุง ุชูุฌุฏ ุฃุณุฆูุฉ ูุชุงุญุฉ ููุฐุง ุงูุฏุฑุณ ุญุงููุงู.</p>`; return; } let attemptsLeft; if (studentData) { const studentLessonData = studentData.lessons?.[lessonId] || { attempts: 0 }; attemptsLeft = MAX_ATTEMPTS - studentLessonData.attempts; } else { attemptsLeft = 1; } const attemptsCounter = document.getElementById('attempts-counter'); if (attemptsCounter) { attemptsCounter.innerHTML = `ุงููุญุงููุงุช ุงููุชุจููุฉ: <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full">${attemptsLeft}</span>`; } const quizHtml = questions.map((q, index) => { const optionsHTML = q.options.map((opt, optIndex) => `<div><input type="radio" name="q${index}" value="${opt.value}" id="q${index}_opt${optIndex}" class="hidden"><label for="q${index}_opt${optIndex}" class="option-label">${opt.display}</label></div>`).join(''); return `<div class="p-4 border-2 border-gray-200 rounded-lg"><p class="font-bold">${index + 1}. <span class="text-yellow-500">${q.level}</span> ${q.text}</p><div class="grid grid-cols-1 sm:grid-cols-2 gap-3 mt-3">${optionsHTML}</div><div id="feedback-q${index}" class="mt-2 text-sm font-bold"></div><button type="button" id="explain-btn-${index}" class="hidden mt-2 text-xs text-blue-600 hover:underline">ุงุนุฑู ููุงุฐุงุ</button></div>`; }).join(''); quizForm.innerHTML = quizHtml + `<button type="submit" id="submit-quiz-btn" class="w-full text-white bg-green-600 hover:bg-green-700 font-medium rounded-lg text-lg px-5 py-3 mt-8">ุชุญูู ูู ุฅุฌุงุจุงุชู</button>`; questions.forEach((q, index) => { const explainBtn = document.getElementById(`explain-btn-${index}`); if(explainBtn) explainBtn.addEventListener('click', () => showExplanation(index)); }); if (attemptsLeft <= 0) { const submitBtn = quizForm.querySelector('#submit-quiz-btn'); submitBtn.disabled = true; submitBtn.textContent = 'ูุง ุชูุฌุฏ ูุญุงููุงุช ูุชุจููุฉ'; submitBtn.classList.add('bg-gray-400', 'hover:bg-gray-400'); } quizForm.onsubmit = (e) => { e.preventDefault(); let score = 0; questions.forEach((q, index) => { const userAnswer = e.target.elements[`q${index}`]?.value; const feedbackEl = document.getElementById(`feedback-q${index}`); if (userAnswer === q.correct) { score++; feedbackEl.textContent = 'โ ุฅุฌุงุจุฉ ุตุญูุญุฉ!'; feedbackEl.className = 'mt-2 text-sm font-bold text-green-600'; } else { feedbackEl.textContent = `โ ุฅุฌุงุจุฉ ุฎุงุทุฆุฉ.`; feedbackEl.className = 'mt-2 text-sm font-bold text-red-600'; } document.getElementById(`explain-btn-${index}`).classList.remove('hidden');}); const finalGrade = Math.round((score / questions.length) * 10); const resultsDiv = document.getElementById('quiz-results'); resultsDiv.classList.remove('hidden'); document.getElementById('quiz-score').textContent = `${finalGrade} / 10`; if (studentData) { saveGrade(lessonId, finalGrade, studentData.id); if (attemptsLeft - 1 > 0) { document.getElementById('retake-quiz-btn').classList.remove('hidden'); } } else { document.getElementById('save-status').textContent = 'ุชู ุนุฑุถ ูุชูุฌุชู. ุณุฌู ุงูุฏุฎูู ูุญูุธ ุชูุฏูู.'; } e.target.querySelector('#submit-quiz-btn').disabled = true; }; }
    function saveGrade(lessonId, grade, studentId) { if (!studentId) return; const saveStatus = document.getElementById('save-status'); saveStatus.textContent = 'ุฌุงุฑู ุญูุธ ูุชูุฌุชู...'; const url = `${SCRIPT_URL}?action=saveGrade&studentId=${studentId}&lessonId=${lessonId}&grade=${grade}`; fetch(url) .then(res => res.json()) .then(result => { if (result.status === 'success') { saveStatus.textContent = 'โ ุชู ุญูุธ ูุชูุฌุชู ุจูุฌุงุญ! ุณุชุธูุฑ ูู ููุญุฉ ุงูุชุญูู ุนูุฏ ุงูุนูุฏุฉ.'; const studentData = JSON.parse(localStorage.getItem('currentStudent')); if (!studentData.lessons) studentData.lessons = {}; if (!studentData.lessons[lessonId] || studentData.lessons[lessonId].grade < grade) { studentData.lessons[lessonId] = { grade: grade, attempts: (studentData.lessons[lessonId]?.attempts || 0) + 1 }; } else { studentData.lessons[lessonId].attempts++; } localStorage.setItem('currentStudent', JSON.stringify(studentData)); } else { throw new Error(result.message); } }) .catch(error => { saveStatus.textContent = 'โ ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุญูุธ ุงูุฏุฑุฌุฉ.'; console.error("Save Grade Error:", error); }); }
    function showExplanation(questionIndex) { const modal = document.getElementById('explanationModal'); const explanationText = document.getElementById('explanationText'); if(modal && explanationText && currentQuestions[questionIndex] && currentQuestions[questionIndex].explanation) { explanationText.innerHTML = currentQuestions[questionIndex].explanation; modal.classList.remove('hidden'); } }
    function closeModal() { const modal = document.getElementById('explanationModal'); if(modal) modal.classList.add('hidden'); }

    // =================================================================================
    // ูุญุชูู ุงูุฏุฑุณ (ูุฐุง ุงูุฌุฒุก ูุชู ุชุนุฏููู ููู ุฏุฑุณ)
    // =================================================================================
    
    // 1. ุถุน ููุนุฑููุงู ูุฑูุฏุงู ููุฏุฑุณ ููุง
    const LESSON_ID = 'c2_l3'; 

    // 2. ุจูู ุงูุฃุณุฆูุฉ ุงูุฎุงุต ุจุงูุฏุฑุณ
    function generateQuiz() {
        const questionBank = [
            { 
                type: 'mcq', 
                level: 'โญ', 
                text: 'ุฃู ูู ุงููุนุงุฏูุงุช ุงูุชุงููุฉ ูู ูุนุงุฏูุฉ ุฎุทูุฉุ', 
                options: [
                    { display: '<span class="math-eq">ุณ + ุตยฒ = ูฅ</span>', value: 'opt1' },
                    { display: '<span class="math-eq">ุณ ุต = ูกู</span>', value: 'opt2' },
                    { display: '<span class="math-eq">ูฅุณ - ุต = ูฃ</span>', value: 'opt3' },
                    { display: '<span class="math-eq flex inline-flex items-center"><span class="fraction"><span>ูก</span><span class="frac-bar"></span><span>ุณ</span></span> + ุต = ูข</span>', value: 'opt4' }
                ], 
                correct: 'opt3', 
                explanation: `<p>ุงููุนุงุฏูุฉ ุงูุฎุทูุฉ ูุง ุชุญุชูู ุนูู ูุชุบูุฑุงุช ูุถุฑูุจุฉ ุจุจุนุถูุง (ูุซู ุณ ุต)ุ ููุง ูุชุบูุฑุงุช ูู ุงูููุงูุ ููุง ุฃุณุณ ุฃูุจุฑ ูู ูก. ุงููุนุงุฏูุฉ <span class="math-eq">ูฅุณ - ุต = ูฃ</span> ูู ุงููุญูุฏุฉ ุงูุชู ุชุญูู ูุฐู ุงูุดุฑูุท.</p>`
            },
            { 
                type: 'mcq', 
                level: 'โญโญ', 
                text: 'ุฃูุฌุฏ ุงูููุทุนูู ุงูุณููู ูุงูุตุงุฏู ูููุนุงุฏูุฉ <span class="math-eq">ูฃุณ + ูฆุต = ูกูจ</span>', 
                options: [
                    { display: 'ุงูุณููู = ูฆุ ุงูุตุงุฏู = ูฃ', value: 'opt1' },
                    { display: 'ุงูุณููู = ูฃุ ุงูุตุงุฏู = ูฆ', value: 'opt2' },
                    { display: 'ุงูุณููู = ูกูจุ ุงูุตุงุฏู = ูกูจ', value: 'opt3' },
                    { display: 'ุงูุณููู = -ูฆุ ุงูุตุงุฏู = -ูฃ', value: 'opt4' }
                ], 
                correct: 'opt1', 
                explanation: `<p class='mb-2'><b>ูุฅูุฌุงุฏ ุงูููุทุน ุงูุณููู (ุต=ู):</b></p><p><span class="math-eq">ูฃุณ + ูฆ(ู) = ูกูจ</span> โฌ๏ธ <span class="math-eq">ูฃุณ = ูกูจ</span> โฌ๏ธ <span class="math-eq">ุณ = ูฆ</span></p><p class='mb-2 mt-4'><b>ูุฅูุฌุงุฏ ุงูููุทุน ุงูุตุงุฏู (ุณ=ู):</b></p><p><span class="math-eq">ูฃ(ู) + ูฆุต = ูกูจ</span> โฌ๏ธ <span class="math-eq">ูฆุต = ูกูจ</span> โฌ๏ธ <span class="math-eq">ุต = ูฃ</span></p>`
            },
            { 
                type: 'mcq', 
                level: 'โญโญ', 
                text: 'ุงูุชุจ ุงููุนุงุฏูุฉ <span class="math-eq">ุต = -ูขุณ + ูฅ</span> ุจุงูุตูุฑุฉ ุงูููุงุณูุฉ.', 
                options: [
                    { display: '<span class="math-eq">ูขุณ + ุต = ูฅ</span>', value: 'opt1' },
                    { display: '<span class="math-eq">ุต - ูขุณ = ูฅ</span>', value: 'opt2' },
                    { display: '<span class="math-eq">-ูขุณ - ุต = -ูฅ</span>', value: 'opt3' },
                    { display: '<span class="math-eq">ูขุณ = ูฅ - ุต</span>', value: 'opt4' }
                ], 
                correct: 'opt1', 
                explanation: `<p>ุงูุตูุฑุฉ ุงูููุงุณูุฉ ูู <span class="math-eq">ุฃุณ + ุจ ุต = ุฌ</span>. ูููู ุงูุญุฏ <span class="math-eq">-ูขุณ</span> ุฅูู ุงูุทุฑู ุงูุฃููู ุจุฅุถุงูุฉ <span class="math-eq">ูขุณ</span> ููุทุฑูููุ ูุชุตุจุญ ุงููุนุงุฏูุฉ <span class="math-eq">ูขุณ + ุต = ูฅ</span>.</p>`
            },
            { 
                type: 'mcq', 
                level: 'โญโญโญ', 
                text: 'ุฅุฐุง ูุงู ุงูููุทุน ุงูุณููู ููุนุงุฏูุฉ ูู ูฅ ูุงูููุทุน ุงูุตุงุฏู ูู -ูขุ ูุฃู ููุทุฉ ูู ุงูุชุงููุฉ ุชูุน ุนูู ุงูุฎุทุ', 
                options: [
                    { display: '(ูฅุ -ูข)', value: 'opt1' },
                    { display: '(-ูขุ ูฅ)', value: 'opt2' },
                    { display: '(ูฅุ ู)', value: 'opt3' },
                    { display: '(-ูฅุ ูข)', value: 'opt4' }
                ], 
                correct: 'opt3', 
                explanation: `<p>ุงูููุทุน ุงูุณููู ูู ุงูููุทุฉ ุงูุชู ููุทุน ูููุง ุงูุฎุท ูุญูุฑ ุงูุณููุงุชุ ูุชููู ูููุฉ ุต ุนูุฏูุง ุตูุฑ. ุจูุง ุฃู ุงูููุทุน ุงูุณููู ูู ูฅุ ูุฅู ุงูููุทุฉ ูู (ูฅุ ู). ุฃูุง ุงูููุทุน ุงูุตุงุฏู -ูข ูููุซู ุงูููุทุฉ (ูุ -ูข).</p>`
            },
            { 
                type: 'mcq', 
                level: 'โญโญ', 
                text: `
                    <p class="mb-2">ูู ุงูุฑุณู ุงูุจูุงูู ุฃุฏูุงูุ ูุง ูู ุงูููุทุน ุงูุตุงุฏูุ</p>
                    <div class="graph-container mx-auto my-3" style="width: 300px; height: 220px;">
                        <svg viewBox="0 0 300 220">
                            <defs><pattern id="gridQuiz" width="20" height="20" patternUnits="userSpaceOnUse"><path d="M 20 0 L 0 0 0 20" fill="none" stroke="#e5e7eb" stroke-width="1.5"/></pattern></defs>
                            <rect width="100%" height="100%" fill="url(#gridQuiz)" />
                            <line x1="0" y1="110" x2="300" y2="110" stroke="#374151" stroke-width="3"/>
                            <text x="280" y="105" font-family="Cairo" font-size="18" fill="#000" font-weight="bold">ุณ</text>
                            <line x1="150" y1="0" x2="150" y2="220" stroke="#374151" stroke-width="3"/>
                            <text x="155" y="20" font-family="Cairo" font-size="18" fill="#000" font-weight="bold">ุต</text>
                            <line x1="150" y1="90" x2="250" y2="110" stroke="#047857" stroke-width="5"/>
                            <circle cx="150" cy="90" r="8" fill="#dc2626"/>
                            <text x="90" y="90" font-family="Cairo" font-size="24" fill="#1f2937" font-weight="bold">(ูุ ูข)</text>
                            <circle cx="250" cy="110" r="8" fill="#dc2626"/>
                            <text x="200" y="140" font-family="Cairo" font-size="24" fill="#1f2937" font-weight="bold">(ูกูุ ู)</text>
                        </svg>
                    </div>
                `,
                options: [
                    { display: '<span class="math-eq">ูกู</span>', value: 'opt1' },
                    { display: '<span class="math-eq">ู</span>', value: 'opt2' },
                    { display: '<span class="math-eq">ูข</span>', value: 'opt3' },
                    { display: 'ูุง ูููู ุชุญุฏูุฏู', value: 'opt4' }
                ], 
                correct: 'opt3', 
                explanation: `<p>ุงูููุทุน ุงูุตุงุฏู ูู ุงูููุทุฉ ุงูุชู ููุทุน ูููุง ุงูุฎุท ูุญูุฑ ุงูุตุงุฏุงุช. ุจุงููุธุฑ ุฅูู ุงูุฑุณู ุงูุจูุงููุ ูุฌุฏ ุฃู ุงูุฎุท ููุทุน ูุญูุฑ ุงูุตุงุฏุงุช ุนูุฏ <span class="math-eq">ุต = ูข</span>.</p>`
            },
            { 
                type: 'mcq', 
                level: 'โญโญโญ', 
                text: 'ูุง ูู ุงูููุทุน ุงูุตุงุฏู ูููุนุงุฏูุฉ <span class="math-eq">ุต = -ูฅ</span>ุ', 
                options: [
                    { display: '<span class="math-eq">ู</span>', value: 'opt1' },
                    { display: '<span class="math-eq">-ูฅ</span>', value: 'opt2' },
                    { display: '<span class="math-eq">ูฅ</span>', value: 'opt3' },
                    { display: 'ูุง ููุฌุฏ', value: 'opt4' }
                ], 
                correct: 'opt2', 
                explanation: `<p>ุงููุนุงุฏูุฉ <span class="math-eq">ุต = -ูฅ</span> ุชูุซู ุฎุทุงู ุฃูููุงู ููุทุน ูุญูุฑ ุงูุตุงุฏุงุช ุนูุฏ <span class="math-eq">-ูฅ</span>. ูุฐููุ ุงูููุทุน ุงูุตุงุฏู ูู -ูฅ.</p>`
            },
             { 
                type: 'mcq', 
                level: 'โญโญโญ', 
                text: 'ูู ูุซุงู "ููุงุฏุฉ ุงูุณูุงุฑุฉ"ุ ูุงุฐุง ููุซู ุงูููุทุน ุงูุณููู (ูููุฉ ุณ ุนูุฏูุง ุต=ู)ุ', 
                options: [
                    { display: 'ุงูุฒูู ุงูููู ููุฑุญูุฉ', value: 'opt1' },
                    { display: 'ุณุฑุนุฉ ุงูุณูุงุฑุฉ', value: 'opt2' },
                    { display: 'ุงููุณุงูุฉ ุงููุจุฏุฆูุฉ ุฅูู ุงููุฒุฑุนุฉ', value: 'opt3' },
                    { display: 'ุงููุณุงูุฉ ุงูููุทูุนุฉ ุจุนุฏ ุณุงุนุฉ', value: 'opt4' }
                ], 
                correct: 'opt1', 
                explanation: `<p>ุงูููุทุน ุงูุณููู ูุญุฏุซ ุนูุฏูุง ุชููู ุงููุณุงูุฉ ุงููุชุจููุฉ (ุต) ุชุณุงูู ุตูุฑุงู. ูู ูุฐุง ุงูุณูุงูุ ูู ููุซู ุงูุฒูู ุงููุงุฒู ูุฅููุงุก ุงูุฑุญูุฉ ูุงููุตูู ุฅูู ุงููุฒุฑุนุฉ.</p>`
            },
            { 
                type: 'mcq', 
                level: 'โญโญ', 
                text: 'ุฃูุฌุฏ ุงูููุทุนูู ุงูุณููู ูุงูุตุงุฏู ูููุนุงุฏูุฉ <span class="math-eq">ุณ - ูขุต = ูค</span>', 
                options: [
                    { display: 'ุงูุณููู = ูคุ ุงูุตุงุฏู = -ูข', value: 'opt1' },
                    { display: 'ุงูุณููู = -ูขุ ุงูุตุงุฏู = ูค', value: 'opt2' },
                    { display: 'ุงูุณููู = ูขุ ุงูุตุงุฏู = -ูค', value: 'opt3' },
                    { display: 'ุงูุณููู = ูคุ ุงูุตุงุฏู = ูข', value: 'opt4' }
                ], 
                correct: 'opt1', 
                explanation: `<p class='mb-2'><b>ูุฅูุฌุงุฏ ุงูููุทุน ุงูุณููู (ุต=ู):</b></p><p><span class="math-eq">ุณ - ูข(ู) = ูค</span> โฌ๏ธ <span class="math-eq">ุณ = ูค</span></p><p class='mb-2 mt-4'><b>ูุฅูุฌุงุฏ ุงูููุทุน ุงูุตุงุฏู (ุณ=ู):</b></p><p><span class="math-eq">ู - ูขุต = ูค</span> โฌ๏ธ <span class="math-eq">-ูขุต = ูค</span> โฌ๏ธ <span class="math-eq">ุต = -ูข</span></p>`
            },
            { 
                type: 'mcq', 
                level: 'โญโญ', 
                text: 'ูุง ูู ุงูููุทุน ุงูุณููู ูููุนุงุฏูุฉ <span class="math-eq">ุต = ูข</span>ุ', 
                options: [
                    { display: 'ูข', value: 'opt1' },
                    { display: 'ู', value: 'opt2' },
                    { display: '-ูข', value: 'opt3' },
                    { display: 'ูุง ููุฌุฏ', value: 'opt4' }
                ], 
                correct: 'opt4', 
                explanation: `<p>ุงููุนุงุฏูุฉ <span class="math-eq">ุต = ูข</span> ุชูุซู ุฎุทุงู ุฃูููุงู ููุงุฒู ูุญูุฑ ุงูุณููุงุช ุนูุฏ ุต=ูข ููุง ููุทุนู ุฃุจุฏุงูุ ูุฐูู ูุง ููุฌุฏ ููุทุน ุณููู.</p>`
            },
            { 
                type: 'mcq', 
                level: 'โญ', 
                text: 'ุนูุฏ ุฃู ูููุฉ ูููุชุบูุฑ <span class="math-eq">ุต</span> ููุฌุฏ ุงูููุทุน ุงูุณูููุ', 
                options: [
                    { display: '<span class="math-eq">ุต = ูก</span>', value: 'opt1' },
                    { display: '<span class="math-eq">ุต = ู</span>', value: 'opt2' },
                    { display: '<span class="math-eq">ุต = ุณ</span>', value: 'opt3' },
                    { display: 'ูุนุชูุฏ ุนูู ุงููุนุงุฏูุฉ', value: 'opt4' }
                ], 
                correct: 'opt2', 
                explanation: `<p>ุจุงูุชุนุฑููุ ุงูููุทุน ุงูุณููู ูู ุงูููุทุฉ ุงูุชู ููุทุน ูููุง ุงูุฎุท ุงูุจูุงูู ูุญูุฑ ุงูุณููุงุชุ ููุฐุง ูุญุฏุซ ุฏุงุฆูุงู ุนูุฏูุง ุชููู ูููุฉ <span class="math-eq">ุต</span> ุชุณุงูู ุตูุฑุงู.</p>`
            },
            { 
                type: 'mcq', 
                level: 'โญโญ', 
                text: 'ุฃูุฌุฏ ุงูููุทุนูู ุงูุณููู ูุงูุตุงุฏู ูููุนุงุฏูุฉ <span class="math-eq">ูฅุณ - ูฃุต = ูกูฅ</span>', 
                options: [
                    { display: 'ุงูุณููู = ูฃุ ุงูุตุงุฏู = ูฅ', value: 'opt1' },
                    { display: 'ุงูุณููู = -ูฃุ ุงูุตุงุฏู = ูฅ', value: 'opt2' },
                    { display: 'ุงูุณููู = ูฃุ ุงูุตุงุฏู = -ูฅ', value: 'opt3' },
                    { display: 'ุงูุณููู = ูฅุ ุงูุตุงุฏู = -ูฃ', value: 'opt4' }
                ], 
                correct: 'opt3', 
                explanation: `<p class='mb-2'><b>ูุฅูุฌุงุฏ ุงูููุทุน ุงูุณููู (ุต=ู):</b></p><p><span class="math-eq">ูฅุณ - ูฃ(ู) = ูกูฅ</span> โฌ๏ธ <span class="math-eq">ูฅุณ = ูกูฅ</span> โฌ๏ธ <span class="math-eq">ุณ = ูฃ</span></p><p class='mb-2 mt-4'><b>ูุฅูุฌุงุฏ ุงูููุทุน ุงูุตุงุฏู (ุณ=ู):</b></p><p><span class="math-eq">ูฅ(ู) - ูฃุต = ูกูฅ</span> โฌ๏ธ <span class="math-eq">-ูฃุต = ูกูฅ</span> โฌ๏ธ <span class="math-eq">ุต = -ูฅ</span></p>`
            },
            { 
                type: 'mcq', 
                level: 'โญ', 
                text: 'ุงูููุทุฉ <span class="math-eq">(ูุ ุจ)</span> ุนูู ุงูุฑุณู ุงูุจูุงูู ุชูุซู ุฏุงุฆูุงู...', 
                options: [
                    { display: 'ุงูููุทุน ุงูุณููู', value: 'opt1' },
                    { display: 'ุงูููุทุน ุงูุตุงุฏู', value: 'opt2' },
                    { display: 'ููุทุฉ ุงูุฃุตู', value: 'opt3' },
                    { display: 'ููุทุฉ ุนุดูุงุฆูุฉ', value: 'opt4' }
                ], 
                correct: 'opt2', 
                explanation: `<p>ุจูุง ุฃู ุงูุฅุญุฏุงุซู ุงูุณููู ูุณุงูู ุตูุฑุงูุ ูุฅู ุงูููุทุฉ ุชูุน ุนูู ูุญูุฑ ุงูุตุงุฏุงุช. ูุฐููุ ูู ุชูุซู ุงูููุทุน ุงูุตุงุฏู.</p>`
            }
        ];
        const shuffled = [...questionBank].sort(() => 0.5 - Math.random());
        const questionCount = Math.min(shuffled.length, 5);
        return shuffled.slice(0, questionCount);
    }

    // =================================================================================
    // ูุดุบู ุงูููุฏ (ูุง ุชูู ุจุชุนุฏูู ูุฐุง ุงูุฌุฒุก)
    // =================================================================================
    document.addEventListener('DOMContentLoaded', () => {
        const exampleContainers = document.querySelectorAll('[id^="interactive-container-"]');
        const state = {};

        // Special handler for Example 1 Graph
        const graph1State = {
            pointX: document.getElementById('graph-1-point-x'),
            textX: document.getElementById('graph-1-text-x'),
            pointY: document.getElementById('graph-1-point-y'),
            textY: document.getElementById('graph-1-text-y'),
            line: document.getElementById('graph-1-line')
        };
        // Special handler for Example 2 Graph
        const graph2State = {
            pointX: document.getElementById('graph-2-point-x'),
            textX: document.getElementById('graph-2-text-x'),
            line: document.getElementById('graph-2-line')
        };

        function updateGraph1(currentIndex) {
            const elements = [graph1State.pointX, graph1State.textX, graph1State.pointY, graph1State.textY, graph1State.line];
            elements.forEach(el => el?.classList.add('hidden'));

            if (currentIndex >= 0) {
                graph1State.pointX?.classList.remove('hidden');
                graph1State.textX?.classList.remove('hidden');
            }
            if (currentIndex >= 1) {
                graph1State.pointY?.classList.remove('hidden');
                graph1State.textY?.classList.remove('hidden');
            }
            if (currentIndex >= 2) {
                graph1State.line?.classList.remove('hidden');
            }
        }
        
        function updateGraph2(currentIndex) {
            const elements = [graph2State.pointX, graph2State.textX, graph2State.line];
            elements.forEach(el => el?.classList.add('hidden'));

            if (currentIndex >= 0) {
                graph2State.pointX?.classList.remove('hidden');
                graph2State.textX?.classList.remove('hidden');
            }
            if (currentIndex >= 1) {
                graph2State.line?.classList.remove('hidden');
            }
        }

        exampleContainers.forEach(container => {
            const exampleId = container.id.split('-')[2];
            state[exampleId] = { 
                currentIndex: -1, 
                steps: container.querySelectorAll('.step-interactive'), 
                placeholder: container.querySelector('.interactive-placeholder'), 
                prevBtn: container.querySelector('.prev-btn'), 
                nextBtn: container.querySelector('.next-btn'), 
                resetBtn: container.querySelector('.reset-btn') 
            };
            
            const updateUI = () => {
                state[exampleId].steps.forEach((step, index) => {
                    if (index <= state[exampleId].currentIndex) {
                        step.classList.add('active');
                    } else {
                        step.classList.remove('active');
                    }
                });

                if (state[exampleId].currentIndex === -1 && state[exampleId].placeholder) {
                    state[exampleId].placeholder.classList.remove('hidden');
                } else if(state[exampleId].placeholder) {
                    state[exampleId].placeholder.classList.add('hidden');
                }
                
                if (exampleId === '1') {
                    updateGraph1(state[exampleId].currentIndex);
                } else if (exampleId === '2') {
                    updateGraph2(state[exampleId].currentIndex);
                }

                updateButtons();
            };
            
            const resetExample = () => {
                state[exampleId].currentIndex = -1;
                updateUI();
            };

            const updateButtons = () => { 
                const isFirstStep = state[exampleId].currentIndex <= -1; 
                const isLastStep = state[exampleId].currentIndex >= state[exampleId].steps.length - 1; 
                state[exampleId].prevBtn.disabled = isFirstStep; 
                if (isLastStep) { 
                    state[exampleId].nextBtn.classList.add('hidden'); 
                    state[exampleId].resetBtn.classList.remove('hidden'); 
                } else { 
                    state[exampleId].nextBtn.classList.remove('hidden'); 
                    state[exampleId].resetBtn.classList.add('hidden'); 
                } 
            };
            
            state[exampleId].nextBtn.addEventListener('click', () => {
                if (state[exampleId].currentIndex < state[exampleId].steps.length - 1) {
                    state[exampleId].currentIndex++;
                    updateUI();
                }
            });

            state[exampleId].prevBtn.addEventListener('click', () => {
                if (state[exampleId].currentIndex > -1) {
                    state[exampleId].currentIndex--;
                    updateUI();
                }
            });

            if(state[exampleId].resetBtn) { state[exampleId].resetBtn.addEventListener('click', resetExample); }
            updateUI();
        });

        const student = getStudentFromStorage();
        const lessonTitleElement = document.getElementById('lesson-title');
        const lessonTitle = lessonTitleElement ? lessonTitleElement.textContent : null;
        buildHeader(student, lessonTitle);
        buildFooter();
        const questions = generateQuiz();
        initializeQuiz(LESSON_ID, questions, student);
        const retakeBtn = document.getElementById('retake-quiz-btn');
        if(retakeBtn) { retakeBtn.addEventListener('click', () => { window.location.reload(); }); }
        const closeModalBtn = document.getElementById('closeModalBtn');
        if(closeModalBtn) { closeModalBtn.addEventListener('click', closeModal); }
    });
    </script>
</body>
</html>
