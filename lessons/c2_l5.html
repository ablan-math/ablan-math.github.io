<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงูุฏุฑุณ ูข-ูฅ: ูุนุฏู ุงูุชุบูุฑ ูุงูููู | ููุตุฉ ุงูุฑูุงุถูุงุช ุงูุชูุงุนููุฉ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; }
        .hidden { display: none; }
        .vocab-term { background-color: #ffefc5; padding: 2px 6px; border-radius: 4px; font-weight: bold; }
        .option-label { display: block; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; cursor: pointer; transition: all 0.2s ease-in-out; }
        .option-label:hover { border-color: #3b82f6; background-color: #eff6ff; }
        input[type="radio"]:checked + .option-label { border-color: #2563eb; background-color: #dbeafe; box-shadow: 0 0 0 2px #bfdbfe; }
        input[type="radio"] { display: none; }
        .feedback-correct { color: #16a34a; }
        .feedback-incorrect { color: #dc2626; }
        .math-eq {
            color: #4338ca; /* indigo-700  */
            font-weight: bold;
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        }
        .explanation-step { 
            padding-right: 12px; 
            margin-bottom: 1rem; 
            border-right: 3px solid #1d4ed8; 
            transition: opacity 0.5s ease-in-out; 
        }
        .explanation-step:last-child {
            margin-bottom: 0;
        }
        .fraction {
            display: inline-flex;
            flex-direction: column;
            text-align: center;
            vertical-align: middle;
            margin: 0 0.2em;
            line-height: 1.2em;
        }
        .fraction > span { display: block; padding: 0 0.2em; }
        .fraction > span:last-child { border-top: 2px solid currentColor; }
        .animated-element { transition: opacity 0.3s ease-in-out, stroke 0.3s ease-in-out; }
        .nav-btn:disabled {
            background-color: #9ca3af;
            cursor: not-allowed;
        }
        .highlight-y { color: #dc2626; font-weight: bold; } /* red-600 */
        .highlight-x { color: #16a34a; font-weight: bold; } /* green-600 */
    </style>
</head>
<body class="bg-gray-100">

    <div id="app-container" class="grid grid-template-rows: auto 1fr auto; min-height: 100vh;">
        <header id="main-header" class="bg-white shadow-md sticky top-0 z-50"></header>
        <main class="container mx-auto max-w-4xl my-8">
            <div class="p-6 bg-white rounded-xl shadow-lg">
                <header class="flex justify-between items-center mb-8 border-b pb-4 border-gray-200">
                    <h1 id="lesson-title" class="text-3xl font-bold text-blue-800">ุงูุฏุฑุณ ูข-ูฅ: ูุนุฏู ุงูุชุบูุฑ ูุงูููู</h1>
                    <a href="../index.html" target="_top" class="text-sm text-blue-600 hover:underline">&larr; ุงูุนูุฏุฉ ุฅูู ุงูููุฑุณ</a>
                </header>
                
                <!-- All interactive sections from the old version are restored here -->
                <section class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">๐ก ุฃููุงู: ุงูููุงููู ุงูุฃุณุงุณูุฉ</h2>
                    <div class="p-6 bg-blue-50 rounded-lg space-y-6">
                        <div>
                            <h3 class="text-xl font-semibold text-blue-700 mb-2">ูุนุฏู ุงูุชุบูุฑ</h3>
                            <p>ูุนุฏู ุงูุชุบูุฑ ูู ูุณุจุฉ ุชุตู ููู ุชุชุบูุฑ ูููุฉ ูุง ุจุงููุณุจุฉ ูุชุบูุฑ ูููุฉ ุฃุฎุฑู. ุฅูู ูุฎุจุฑูุง ุจูุฏู ุณุฑุนุฉ ุชุบูุฑ ุดูุก ูุง.</p>
                            <p class="mt-2">ุฃุจุณุท ูุซุงู ุนูู ูุนุฏู ุงูุชุบูุฑ ูู ุงูุณุฑุนุฉุ ุงูุชู ุชุตู ุชุบูุฑ ุงููุณุงูุฉ ุจุงููุณุจุฉ ููุฒูู.</p>
                             <div class="mt-4 p-4 bg-white rounded-lg border">
                                 <p class="text-lg text-center font-bold">ุตูุบุฉ ูุนุฏู ุงูุชุบูุฑ</p>
                                 <p class="text-center my-2 p-3 bg-indigo-50 rounded-md text-xl math-eq">
                                     ูุนุฏู ุงูุชุบูุฑ = 
                                     <span class="fraction"><span>ุงูุชุบูุฑ ูู ุต</span><span>ุงูุชุบูุฑ ูู ุณ</span></span>
                                     =
                                     <span class="fraction"><span>ุตโ - ุตโ</span><span>ุณโ - ุณโ</span></span>
                                 </p>
                             </div>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-blue-700 mb-2">ุงูููู</h3>
                            <p>ูู ุงูุฏูุงู ุงูุฎุทูุฉุ ูููู ูุนุฏู ุงูุชุบูุฑ ุซุงุจุชูุง. ูููุณูู ูุนุฏู ุงูุชุบูุฑ ุงูุซุงุจุช ูุฐุง <span class="vocab-term">ุงูููู</span>.</p>
                            <p class="font-bold mt-2">ููู ุงูุฎุท ุงููุณุชููู ูู ูุณุจุฉ ุงูุชุบูุฑ ุงูุฑุฃุณู (ุงูุงุฑุชูุงุน) ุฅูู ุงูุชุบูุฑ ุงูุฃููู (ุงูุงูุชุฏุงุฏ).</p>
                        </div>
                        <div class="mt-6">
                            <h3 class="text-xl font-semibold text-blue-700 mb-2">ููุฎุต ุญุงูุงุช ุงูููู</h3>
                            <p>ุงูุฑุณูู ุงูุชุงููุฉ ุชูุถุญ ุงูุญุงูุงุช ุงูุฃุฑุจุน ููููู ุจุตุฑููุง:</p>
                            <div id="slope-summary-container" class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-4 text-center"></div>
                        </div>
                    </div>
                </section>

                <section class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">๐ฏ ุซุงููุงู: ุญุณุงุจ ูุนุฏู ุงูุชุบูุฑ (ุงูุซุงุจุช ูุบูุฑ ุงูุซุงุจุช) ูู ุฌุฏูู</h2>
                    <div class="p-6 bg-gray-50 rounded-lg">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-x-8 gap-y-12">
                            <!-- Example 1: Constant Rate -->
                            <div class="space-y-4">
                                <h3 class="text-xl font-bold text-gray-700">ุงููุซุงู 1: ูุนุฏู ุงูุชุบูุฑ ุงูุซุงุจุช</h3>
                                <p>ููุถุญ ุงูุฌุฏูู ุงููุฌุงูุฑ ุนุฏุฏ ุงููููููุชุฑุงุช ุงูุชู ูุทุนูุง ุฎุงูุฏ ุจุฏุฑุงุฌุชู. ูู ูุนุฏู ุงูุชุบูุฑ ุซุงุจุชุ</p>
                                <div class="grid grid-cols-[3rem_1fr_3rem] gap-x-1 items-center">
                                    <div class="relative h-full">
                                        <div id="table-const-vis-1a" class="absolute inset-0 opacity-0 transition-opacity duration-300">
                                            <svg class="absolute w-6 h-6 text-green-600" style="top: 33%; left: 1rem;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14M19 12l-7 7-7-7"/></svg>
                                            <span class="absolute highlight-x font-mono" style="top: 33%; left: -0.5rem;">+ูฃู</span>
                                        </div>
                                        <div id="table-const-vis-2a" class="absolute inset-0 opacity-0 transition-opacity duration-300">
                                            <svg class="absolute w-6 h-6 text-green-600" style="top: 66%; left: 1rem;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14M19 12l-7 7-7-7"/></svg>
                                            <span class="absolute highlight-x font-mono" style="top: 66%; left: -0.5rem;">+ูฃู</span>
                                        </div>
                                    </div>
                                    <table class="w-full border-collapse border border-slate-400 text-center">
                                        <thead class="bg-blue-100"><tr><th class="p-2 border border-slate-300">ุงูุฒูู (ุณ)</th><th class="p-2 border border-slate-300">ุงููุณุงูุฉ (ุต)</th></tr></thead>
                                        <tbody>
                                            <tr id="table-const-row-1"><td class="p-2 border border-slate-300 font-mono">ูฃู</td><td class="p-2 border border-slate-300 font-mono">ูกู</td></tr>
                                            <tr id="table-const-row-2"><td class="p-2 border border-slate-300 font-mono">ูฆู</td><td class="p-2 border border-slate-300 font-mono">ูขู</td></tr>
                                            <tr id="table-const-row-3"><td class="p-2 border border-slate-300 font-mono">ูฉู</td><td class="p-2 border border-slate-300 font-mono">ูฃู</td></tr>
                                        </tbody>
                                    </table>
                                    <div class="relative h-full">
                                        <div id="table-const-vis-1b" class="absolute inset-0 opacity-0 transition-opacity duration-300">
                                            <svg class="absolute w-6 h-6 text-red-600" style="top: 33%; right: 1rem;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14M19 12l-7 7-7-7"/></svg>
                                            <span class="absolute highlight-y font-mono" style="top: 33%; right: -0.5rem;">+ูกู</span>
                                        </div>
                                        <div id="table-const-vis-2b" class="absolute inset-0 opacity-0 transition-opacity duration-300">
                                            <svg class="absolute w-6 h-6 text-red-600" style="top: 66%; right: 1rem;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14M19 12l-7 7-7-7"/></svg>
                                            <span class="absolute highlight-y font-mono" style="top: 66%; right: -0.5rem;">+ูกู</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="bg-white p-4 rounded-lg border min-h-[200px]">
                                    <div id="table-const-explanation" class="text-right"></div>
                                </div>
                                <div class="mt-4 flex justify-between items-center">
                                    <button id="table-const-back" class="nav-btn bg-gray-500 text-white font-medium py-2 px-6 rounded-lg hover:bg-gray-600">ุฑุฌูุน</button>
                                    <span class="text-sm font-bold text-gray-600">ุงูุฎุทูุฉ <span id="table-const-step-counter">0</span> / 4</span>
                                    <button id="table-const-next" class="nav-btn bg-indigo-600 text-white font-medium py-2 px-6 rounded-lg hover:bg-indigo-700">ุงูุชุงูู</button>
                                </div>
                            </div>
                            <div class="space-y-4">
                                <h3 class="text-xl font-bold text-gray-700">ุงููุซุงู 2: ูุนุฏู ุงูุชุบูุฑ ุบูุฑ ุงูุซุงุจุช</h3>
                                <p>ููุถุญ ุงูุฌุฏูู ุงูุชุงูู ุฃุฑุจุงุญ ูุชุฌุฑ ุตุบูุฑ ุจุงูุฃูุงู. ูู ูุนุฏู ุงูุชุบูุฑ ุซุงุจุชุ</p>
                                <div class="grid grid-cols-[3rem_1fr_3rem] gap-x-1 items-center">
                                    <div class="relative h-full">
                                        <div id="table-nonconst-vis-1a" class="absolute inset-0 opacity-0 transition-opacity duration-300">
                                            <svg class="absolute w-6 h-6 text-green-600" style="top: 33%; left: 1rem;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14M19 12l-7 7-7-7"/></svg>
                                            <span class="absolute highlight-x font-mono" style="top: 33%; left: -0.5rem;">+ูค</span>
                                        </div>
                                        <div id="table-nonconst-vis-2a" class="absolute inset-0 opacity-0 transition-opacity duration-300">
                                            <svg class="absolute w-6 h-6 text-green-600" style="top: 66%; left: 1rem;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14M19 12l-7 7-7-7"/></svg>
                                            <span class="absolute highlight-x font-mono" style="top: 66%; left: -0.5rem;">+ูข</span>
                                        </div>
                                    </div>
                                    <table class="w-full border-collapse border border-slate-400 text-center">
                                        <thead class="bg-orange-100"><tr><th class="p-2 border border-slate-300">ุงูููู (ุณ)</th><th class="p-2 border border-slate-300">ุงูุฃุฑุจุงุญ (ุต)</th></tr></thead>
                                        <tbody>
                                            <tr id="table-nonconst-row-1"><td class="p-2 border border-slate-300 font-mono">ูก</td><td class="p-2 border border-slate-300 font-mono">ูกูู</td></tr>
                                            <tr id="table-nonconst-row-2"><td class="p-2 border border-slate-300 font-mono">ูฅ</td><td class="p-2 border border-slate-300 font-mono">ูฃูู</td></tr>
                                            <tr id="table-nonconst-row-3"><td class="p-2 border border-slate-300 font-mono">ูง</td><td class="p-2 border border-slate-300 font-mono">ูงูู</td></tr>
                                        </tbody>
                                    </table>
                                     <div class="relative h-full">
                                        <div id="table-nonconst-vis-1b" class="absolute inset-0 opacity-0 transition-opacity duration-300">
                                            <svg class="absolute w-6 h-6 text-red-600" style="top: 33%; right: 1rem;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14M19 12l-7 7-7-7"/></svg>
                                            <span class="absolute highlight-y font-mono" style="top: 33%; right: -1.5rem;">+ูขูู</span>
                                        </div>
                                        <div id="table-nonconst-vis-2b" class="absolute inset-0 opacity-0 transition-opacity duration-300">
                                            <svg class="absolute w-6 h-6 text-red-600" style="top: 66%; right: 1rem;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14M19 12l-7 7-7-7"/></svg>
                                            <span class="absolute highlight-y font-mono" style="top: 66%; right: -1.5rem;">+ูคูู</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="bg-white p-4 rounded-lg border min-h-[200px]">
                                    <div id="table-nonconst-explanation" class="text-right"></div>
                                </div>
                                <div class="mt-4 flex justify-between items-center">
                                    <button id="table-nonconst-back" class="nav-btn bg-gray-500 text-white font-medium py-2 px-6 rounded-lg hover:bg-gray-600">ุฑุฌูุน</button>
                                    <span class="text-sm font-bold text-gray-600">ุงูุฎุทูุฉ <span id="table-nonconst-step-counter">0</span> / 4</span>
                                    <button id="table-nonconst-next" class="nav-btn bg-orange-600 text-white font-medium py-2 px-6 rounded-lg hover:bg-orange-700">ุงูุชุงูู</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">๐ ุซุงูุซุงู: ุฅูุฌุงุฏ ูุนุฏู ุงูุชุบูุฑ ุงูุซุงุจุช ูุบูุฑ ุงูุซุงุจุช ูู ุงูุฑุณู ุงูุจูุงูู</h2>
                    <div class="p-6 bg-gray-50 rounded-lg">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                            <div class="space-y-4">
                                <h3 class="text-xl font-bold text-gray-700">ุงููุซุงู ูก: ูุนุฏู ุงูุชุบูุฑ ุงูุซุงุจุช (ุงูููู)</h3>
                                <p>ูุฅูุฌุงุฏ ุงููููุ ูุญุฏุฏ ููุทุชูู ุนูู ุงูุฎุทุ ุซู ูุญุณุจ "ุงูุงุฑุชูุงุน" ู "ุงูุงูุชุฏุงุฏ" ุจููููุง. ุงุณุชุฎุฏู ุงูุฃุฒุฑุงุฑ ููุชููู ุจูู ุฎุทูุงุช ุงูุดุฑุญ.</p>
                                <div class="text-center">
                                    <svg id="slope-animation-svg-constant" viewBox="-2 -2 12 12" class="w-full h-72 bg-white border rounded-lg">
                                       <path d="M 0,1 L 10,1 M 0,2 L 10,2 M 0,3 L 10,3 M 0,4 L 10,4 M 0,5 L 10,5 M 0,6 L 10,6 M 0,7 L 10,7 M 0,8 L 10,8 M 0,9 L 10,9" stroke="#e5e7eb" stroke-width="0.1" />
                                       <path d="M 1,0 L 1,10 M 2,0 L 2,10 M 3,0 L 3,10 M 4,0 L 4,10 M 5,0 L 5,10 M 6,0 L 6,10 M 7,0 L 7,10 M 8,0 L 8,10 M 9,0 L 9,10" stroke="#e5e7eb" stroke-width="0.1" />
                                       <line x1="0" y1="0" x2="0" y2="10" stroke="#6b7280" stroke-width="0.2"/>
                                       <line x1="0" y1="10" x2="10" y2="10" stroke="#6b7280" stroke-width="0.2"/>
                                       <line x1="0" y1="2" x2="8" y2="10" stroke="#3b82f6" stroke-width="0.3"/>
                                       <circle cx="2" cy="4" r="0.25" fill="#ef4444" /><text x="1.5" y="3.5" font-size="0.6" font-weight="bold">(ูข, ูฆ)</text>
                                       <circle cx="6" cy="8" r="0.25" fill="#ef4444" /><text x="6.5" y="8.5" font-size="0.6" font-weight="bold">(ูฆ, ูข)</text>
                                       <g id="anim-const-step-1" class="animated-element" opacity="0"><line x1="2" y1="4" x2="2" y2="8" stroke="#dc2626" stroke-width="0.2" stroke-dasharray="0.4 0.4" /></g>
                                       <g id="anim-const-step-2" class="animated-element" opacity="0"><text x="0.8" y="6" fill="#dc2626" font-size="0.7">-ูค</text></g>
                                       <g id="anim-const-step-3" class="animated-element" opacity="0"><line x1="2" y1="8" x2="6" y2="8" stroke="#16a34a" stroke-width="0.2" stroke-dasharray="0.4 0.4" /></g>
                                       <g id="anim-const-step-4" class="animated-element" opacity="0"><text x="4" y="9" fill="#16a34a" font-size="0.7" text-anchor="middle">ูค</text></g>
                                    </svg>
                                    <div id="animation-explanation-constant" class="mt-4 p-4 bg-white rounded-lg border text-right min-h-[150px]"></div>
                                    <div class="mt-4 flex justify-between items-center">
                                        <button id="slope-anim-back-constant" class="nav-btn bg-gray-500 text-white font-medium py-2 px-6 rounded-lg hover:bg-gray-600">ุฑุฌูุน</button>
                                        <span class="text-sm font-bold text-gray-600">ุงูุฎุทูุฉ <span id="step-counter-constant">0</span> / 3</span>
                                        <button id="slope-anim-next-constant" class="nav-btn bg-indigo-600 text-white font-medium py-2 px-6 rounded-lg hover:bg-indigo-700">ุงูุชุงูู</button>
                                    </div>
                                </div>
                            </div>
                            <div class="space-y-4">
                                <h3 class="text-xl font-bold text-gray-700">ุงููุซุงู ูข: ูุนุฏู ุงูุชุบูุฑ ุบูุฑ ุงูุซุงุจุช</h3>
                                <p>ููุถุญ ุงูุฑุณู ุฃุฑุจุงุญ ุดุฑูุฉ ุจุงูุฃูู ุฑูุงู ุฎูุงู ุนุฏุฉ ุฃุนูุงู. ูู ูุนุฏู ุงูุชุบูุฑ ุซุงุจุชุ</p>
                                <div class="text-center">
                                    <svg id="slope-animation-svg-non-constant" viewBox="0 0 100 80" class="w-full h-72 bg-white border rounded-lg">
                                        <line x1="10" y1="5" x2="10" y2="70" stroke="#6b7280" stroke-width="0.5"/>
                                        <line x1="10" y1="70" x2="95" y2="70" stroke="#6b7280" stroke-width="0.5"/>
                                        <text x="5" y="10" font-size="4" fill="#374151">ุงูุฃุฑุจุงุญ</text>
                                        <text x="50" y="78" font-size="4" fill="#374151" text-anchor="middle">ุงูุนุงู</text>
                                        <g font-size="3.5" text-anchor="middle" fill="#6b7280">
                                            <text x="5" y="65.5">ูจ</text><line x1="10" y1="65" x2="95" y2="65" stroke="#e5e7eb" stroke-width="0.25"/>
                                            <text x="5" y="54.5">ูฉ</text><line x1="10" y1="53.75" x2="95" y2="53.75" stroke="#e5e7eb" stroke-width="0.25"/>
                                            <text x="5" y="43.5">ูกู</text><line x1="10" y1="42.5" x2="95" y2="42.5" stroke="#e5e7eb" stroke-width="0.25"/>
                                            <text x="5" y="32.5">ูกูก</text><line x1="10" y1="31.25" x2="95" y2="31.25" stroke="#e5e7eb" stroke-width="0.25"/>
                                            <text x="5" y="21.5">ูกูข</text><line x1="10" y1="20" x2="95" y2="20" stroke="#e5e7eb" stroke-width="0.25"/>
                                        </g>
                                        <g font-size="3.5" text-anchor="middle" fill="#6b7280">
                                            <text x="23.3" y="75">ูขูฆ</text><line x1="23.3" y1="5" x2="23.3" y2="70" stroke="#e5e7eb" stroke-width="0.25"/>
                                            <text x="46.6" y="75">ูขูจ</text><line x1="46.6" y1="5" x2="46.6" y2="70" stroke="#e5e7eb" stroke-width="0.25"/>
                                            <text x="69.9" y="75">ูฃู</text><line x1="69.9" y1="5" x2="69.9" y2="70" stroke="#e5e7eb" stroke-width="0.25"/>
                                            <text x="93.2" y="75">ูฃูข</text><line x1="93.2" y1="5" x2="93.2" y2="70" stroke="#e5e7eb" stroke-width="0.25"/>
                                        </g>
                                        <line id="nc-line-1" class="animated-element" x1="23.3" y1="65" x2="46.6" y2="53.75" stroke="#f97316" stroke-width="1"/>
                                        <line id="nc-line-2" class="animated-element" x1="46.6" y1="53.75" x2="69.9" y2="31.25" stroke="#f97316" stroke-width="1"/>
                                        <line id="nc-line-3" class="animated-element" x1="69.9" y1="31.25" x2="93.2" y2="20" stroke="#f97316" stroke-width="1"/>
                                        <circle cx="23.3" cy="65" r="1.2" fill="#f97316" />
                                        <circle cx="46.6" cy="53.75" r="1.2" fill="#f97316" />
                                        <circle cx="69.9" cy="31.25" r="1.2" fill="#f97316" />
                                        <circle cx="93.2" cy="20" r="1.2" fill="#f97316" />
                                        <g id="nc-anim-group-1" class="animated-element" opacity="0">
                                            <line x1="46.6" y1="65" x2="46.6" y2="53.75" stroke="#dc2626" stroke-width="0.5" stroke-dasharray="1 1"/>
                                            <line x1="23.3" y1="65" x2="46.6" y2="65" stroke="#16a34a" stroke-width="0.5" stroke-dasharray="1 1"/>
                                            <text x="48" y="60" font-size="4" fill="#dc2626">+ูก</text>
                                            <text x="35" y="68" font-size="4" fill="#16a34a" text-anchor="middle">+ูข</text>
                                        </g>
                                        <g id="nc-anim-group-2" class="animated-element" opacity="0">
                                            <line x1="69.9" y1="53.75" x2="69.9" y2="31.25" stroke="#dc2626" stroke-width="0.5" stroke-dasharray="1 1"/>
                                            <line x1="46.6" y1="53.75" x2="69.9" y2="53.75" stroke="#16a34a" stroke-width="0.5" stroke-dasharray="1 1"/>
                                            <text x="71.3" y="42.5" font-size="4" fill="#dc2626">+ูข</text>
                                            <text x="58.25" y="57" font-size="4" fill="#16a34a" text-anchor="middle">+ูข</text>
                                        </g>
                                        <g id="nc-anim-group-3" class="animated-element" opacity="0">
                                            <line x1="93.2" y1="31.25" x2="93.2" y2="20" stroke="#dc2626" stroke-width="0.5" stroke-dasharray="1 1"/>
                                            <line x1="69.9" y1="31.25" x2="93.2" y2="31.25" stroke="#16a34a" stroke-width="0.5" stroke-dasharray="1 1"/>
                                            <text x="94.5" y="26" font-size="4" fill="#dc2626">+ูก</text>
                                            <text x="81.55" y="34.5" font-size="4" fill="#16a34a" text-anchor="middle">+ูข</text>
                                        </g>
                                    </svg>
                                     <div id="animation-explanation-non-constant" class="mt-4 p-4 bg-white rounded-lg border text-right min-h-[150px]"></div>
                                    <div class="mt-4 flex justify-between items-center">
                                        <button id="slope-anim-back-non-constant" class="nav-btn bg-gray-500 text-white font-medium py-2 px-6 rounded-lg hover:bg-gray-600">ุฑุฌูุน</button>
                                        <span class="text-sm font-bold text-gray-600">ุงูุฎุทูุฉ <span id="step-counter-non-constant">0</span> / 7</span>
                                        <button id="slope-anim-next-non-constant" class="nav-btn bg-orange-600 text-white font-medium py-2 px-6 rounded-lg hover:bg-orange-700">ุงูุชุงูู</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">๐ ุฑุงุจุนุงู: ุชุทุจููุงุช ุนูู ุงูููู</h2>
                    <div class="p-6 bg-gray-50 rounded-lg space-y-8">
                        <div>
                            <h3 class="text-xl font-bold text-gray-700 mb-4">ุฃูุซูุฉ ุชูุงุนููุฉ: ุฅูุฌุงุฏ ุงูููู ุจูุนููููุฉ ููุทุชูู</h3>
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                <div class="bg-white p-4 rounded-lg border space-y-2">
                                    <p><strong>ูุซุงู ูก:</strong> ุฃูุฌุฏ ููู ุงููุณุชููู ุงููุงุฑ ุจุงูููุทุชูู (ุณ<sub class="text-sm">ูก</sub>, ุต<sub class="text-sm">ูก</sub>) = (<span class="highlight-x">ูข</span>ุ <span class="highlight-y">ูก</span>) ู (ุณ<sub class="text-sm">ูข</sub>, ุต<sub class="text-sm">ูข</sub>) = (<span class="highlight-x">ูฅ</span>ุ <span class="highlight-y">ูง</span>).</p>
                                    <div class="bg-gray-50 p-4 rounded-lg border min-h-[150px]">
                                        <div id="slope-ex1-explanation" class="text-right text-xl"></div>
                                    </div>
                                    <div class="mt-4 flex justify-between items-center">
                                        <button id="slope-ex1-back" class="nav-btn bg-gray-500 text-white font-medium py-2 px-6 rounded-lg hover:bg-gray-600">ุฑุฌูุน</button>
                                        <span class="text-sm font-bold text-gray-600">ุงูุฎุทูุฉ <span id="slope-ex1-step-counter">0</span> / 4</span>
                                        <button id="slope-ex1-next" class="nav-btn bg-blue-600 text-white font-medium py-2 px-6 rounded-lg hover:bg-blue-700">ุงูุชุงูู</button>
                                    </div>
                                </div>
                                <div class="bg-white p-4 rounded-lg border space-y-2">
                                     <p><strong>ูุซุงู ูข:</strong> ุฃูุฌุฏ ููู ุงููุณุชููู ุงููุงุฑ ุจุงูููุทุชูู (ุณ<sub class="text-sm">ูก</sub>, ุต<sub class="text-sm">ูก</sub>) = (<span class="highlight-x">-ูฃ</span>ุ <span class="highlight-y">ูค</span>) ู (ุณ<sub class="text-sm">ูข</sub>, ุต<sub class="text-sm">ูข</sub>) = (<span class="highlight-x">ูก</span>ุ <span class="highlight-y">-ูข</span>).</p>
                                     <div class="bg-gray-50 p-4 rounded-lg border min-h-[150px]">
                                        <div id="slope-ex2-explanation" class="text-right text-xl"></div>
                                    </div>
                                    <div class="mt-4 flex justify-between items-center">
                                        <button id="slope-ex2-back" class="nav-btn bg-gray-500 text-white font-medium py-2 px-6 rounded-lg hover:bg-gray-600">ุฑุฌูุน</button>
                                        <span class="text-sm font-bold text-gray-600">ุงูุฎุทูุฉ <span id="slope-ex2-step-counter">0</span> / 4</span>
                                        <button id="slope-ex2-next" class="nav-btn bg-blue-600 text-white font-medium py-2 px-6 rounded-lg hover:bg-blue-700">ุงูุชุงูู</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold text-gray-700 mb-4">ุชุฏุฑูุจ ุชูุงุนูู: ุฅูุฌุงุฏ ุงูุฅุญุฏุงุซู ุงููุฌููู</h3>
                            <div class="space-y-4">
                                <p class="text-lg"><strong>ุงููุณุฃูุฉ:</strong> ุฃูุฌุฏ ูููุฉ (ุฑ) ุงูุชู ุชุฌุนู ููู ุงููุณุชููู ุงููุงุฑ ุจุงูููุทุชูู (ุณ<sub class="text-sm">ูก</sub>, ุต<sub class="text-sm">ูก</sub>) = (<span class="highlight-x">ูก</span>ุ <span class="highlight-y">ูค</span>) ู (ุณ<sub class="text-sm">ูข</sub>, ุต<sub class="text-sm">ูข</sub>) = (<span class="highlight-x">-ูฅ</span>ุ <span class="highlight-y">ุฑ</span>) ูุณุงูู <span class="math-eq"><span class="fraction"><span>ูก</span><span>ูฃ</span></span></span>.</p>
                                <div class="bg-white p-4 rounded-lg border min-h-[200px]">
                                    <div id="interactive-solver-explanation" class="text-right text-xl"></div>
                                </div>
                                <div class="mt-4 flex justify-between items-center">
                                    <button id="solver-back" class="nav-btn bg-gray-500 text-white font-medium py-2 px-6 rounded-lg hover:bg-gray-600">ุฑุฌูุน</button>
                                    <span class="text-sm font-bold text-gray-600">ุงูุฎุทูุฉ <span id="solver-step-counter">0</span> / 7</span>
                                    <button id="solver-next" class="nav-btn bg-indigo-600 text-white font-medium py-2 px-6 rounded-lg hover:bg-indigo-700">ุงูุชุงูู</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="mt-12">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-2xl font-bold text-gray-800">โ๏ธ ุฎุงูุณุงู: ุญุงู ุฏูุฑู! ุงุฎุชุจุฑ ูููู</h2>
                        <div id="attempts-counter" class="text-sm font-bold text-gray-600"></div>
                    </div>
                    <form id="quizForm" class="p-6 bg-gray-50 rounded-lg space-y-8"></form>
                    <div id="quiz-results" class="hidden mt-6 p-4 rounded-lg text-center">
                        <h3 class="text-xl font-bold">ูุชูุฌุชู ุงูููุงุฆูุฉ</h3>
                        <p id="quiz-score" class="text-4xl font-bold my-2"></p>
                        <div id="save-status" class="mt-4 text-sm font-semibold"></div>
                        <button id="retake-quiz-btn" class="hidden mt-4 bg-blue-600 text-white font-medium py-2 px-6 rounded-lg hover:bg-blue-700">ุฅุนุงุฏุฉ ุงูุงุฎุชุจุงุฑ</button>
                    </div>
                </section>
            </div>
        </main>
        <footer id="main-footer" class="bg-gray-200 py-4"></footer>
    </div>
    <div id="explanationModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-white rounded-lg shadow-2xl p-6 max-w-lg w-full">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold">๐ก ุดุฑุญ ุงูุฅุฌุงุจุฉ</h3>
                <button id="closeModalBtn" class="p-2 -m-2 rounded-full hover:bg-gray-200">
                    <svg class="h-6 w-6 text-gray-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
            </div>
            <div id="explanationContentWrapper" class="text-gray-700 max-h-[60vh] overflow-y-auto"></div>
        </div>
    </div>
    <script>
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzrf1-At3Pq7i39bGV3F1iD3-b0G-WWyRi5cgpKeQjyn_N5fh2EmGhoyRKUsbLd-F_UJQ/exec";
    const MAX_ATTEMPTS = 3;
    let currentQuestions = []; 
    const fractionHTML = (num, den) => `<span class="fraction"><span>${num}</span><span>${den}</span></span>`;
    function getStudentFromStorage() { const studentDataString = localStorage.getItem('currentStudent'); if (studentDataString) { try { return JSON.parse(studentDataString); } catch (e) { return null; } } return null; }
    function buildHeader(studentData, lessonTitle = null) { const headerContainer = document.getElementById('main-header'); if (!headerContainer) return; let titleHtml; if (lessonTitle) { titleHtml = `<div><h2 class="text-sm text-gray-500 leading-tight">ููุตุฉ ุงูุฑูุงุถูุงุช ุงูุชูุงุนููุฉ</h2><h1 class="text-xl font-bold text-indigo-700 leading-tight">${lessonTitle}</h1></div>`; } else { titleHtml = `<a href="../index.html" target="_top"><h1 class="text-2xl font-bold text-blue-800">ููุตุฉ ุงูุฑูุงุถูุงุช ุงูุชูุงุนููุฉ</h1></a>`; } let userInfoHtml = ''; if (studentData) { userInfoHtml = `<div class="flex items-center gap-4"><span class="font-semibold">ุฃููุงูุ ${studentData.name}</span><a href="../index.html" target="_top" id="logout-link" class="bg-red-500 text-white py-1 px-3 rounded-lg hover:bg-red-600">ุฎุฑูุฌ</a></div>`; } else { userInfoHtml = `<p class="text-lg text-gray-600">ุฒุงุฆุฑ</p>`; } headerContainer.innerHTML = `<div class="container mx-auto px-6 py-4 flex justify-between items-center">${titleHtml}${userInfoHtml}</div>`; const logoutLink = headerContainer.querySelector('#logout-link'); if(logoutLink) { logoutLink.addEventListener('click', () => { localStorage.removeItem('currentStudent'); }); } }
    function buildFooter() { const footerContainer = document.getElementById('main-footer'); if (!footerContainer) return; footerContainer.innerHTML = `<div class="container mx-auto px-6"><p class="text-center text-gray-600 text-sm">ยฉ 2024 ุฌููุน ุงูุญููู ูุญููุธุฉ | ุชุตููู ูุชุทููุฑ: ุฃ. ุนุจุฏุงูุนุฒูุฒ ุฎุงูุฏ ุงูุนุจูุงู</p></div>`; }
    function createInteractiveSection(config) { let currentStep = 0; const renderStep = (step) => { config.stepCounter.textContent = step; let cumulativeHTML = ''; if (step === 0) { cumulativeHTML = config.stepsContent[0].text; } else { for (let i = 1; i <= step; i++) { cumulativeHTML += `<div class="explanation-step">${config.stepsContent[i].text}</div>`; } } config.explanationDiv.innerHTML = cumulativeHTML; if (config.customRender) { config.customRender(step); } config.backBtn.disabled = (step === 0); config.nextBtn.textContent = (step === config.totalSteps) ? 'ุฅุนุงุฏุฉ' : 'ุงูุชุงูู'; }; config.nextBtn.addEventListener('click', () => { currentStep = (currentStep < config.totalSteps) ? currentStep + 1 : 0; renderStep(currentStep); }); config.backBtn.addEventListener('click', () => { if (currentStep > 0) { currentStep--; renderStep(currentStep); } }); renderStep(0); }
    function initializeQuiz(lessonId, questions, studentData) { currentQuestions = questions; const quizForm = document.getElementById('quizForm'); if (!quizForm) return; if (questions.length === 0) { quizForm.innerHTML = `<p class="text-center text-gray-600">ูุง ุชูุฌุฏ ุฃุณุฆูุฉ ูุชุงุญุฉ ููุฐุง ุงูุฏุฑุณ ุญุงููุงู.</p>`; return; } let attemptsLeft; if (studentData) { const studentLessonData = studentData.lessons?.[lessonId] || { attempts: 0 }; attemptsLeft = MAX_ATTEMPTS - studentLessonData.attempts; } else { attemptsLeft = 1; } const attemptsCounter = document.getElementById('attempts-counter'); if (attemptsCounter) { attemptsCounter.innerHTML = `ุงููุญุงููุงุช ุงููุชุจููุฉ: <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full">${attemptsLeft}</span>`; } const quizHtml = questions.map((q, index) => { const optionsHTML = q.options.map((opt, optIndex) => `<div><input type="radio" name="q${index}" value="${opt.value}" id="q${index}_opt${optIndex}" class="hidden"><label for="q${index}_opt${optIndex}" class="option-label">${opt.display}</label></div>`).join(''); return `<div class="p-4 border-2 border-gray-200 rounded-lg"><p class="font-bold">${index + 1}. <span class="text-yellow-500">${q.level}</span> ${q.text}</p>${q.graph || ''}<div class="grid grid-cols-1 sm:grid-cols-2 gap-3 mt-3">${optionsHTML}</div><div id="feedback-q${index}" class="mt-2 text-sm font-bold"></div><button type="button" id="explain-btn-${index}" class="hidden mt-2 text-xs text-blue-600 hover:underline">ุงุนุฑู ููุงุฐุงุ</button></div>`; }).join(''); quizForm.innerHTML = quizHtml + `<button type="submit" id="submit-quiz-btn" class="w-full text-white bg-green-600 hover:bg-green-700 font-medium rounded-lg text-lg px-5 py-3 mt-8">ุชุญูู ูู ุฅุฌุงุจุงุชู</button>`; questions.forEach((q, index) => { const explainBtn = document.getElementById(`explain-btn-${index}`); if(explainBtn) explainBtn.addEventListener('click', () => showExplanation(index)); }); if (attemptsLeft <= 0) { const submitBtn = quizForm.querySelector('#submit-quiz-btn'); submitBtn.disabled = true; submitBtn.textContent = 'ูุง ุชูุฌุฏ ูุญุงููุงุช ูุชุจููุฉ'; submitBtn.classList.add('bg-gray-400', 'hover:bg-gray-400'); } quizForm.onsubmit = (e) => { e.preventDefault(); let score = 0; questions.forEach((q, index) => { const userAnswer = e.target.elements[`q${index}`]?.value; const feedbackEl = document.getElementById(`feedback-q${index}`); if (userAnswer === q.correct) { score++; feedbackEl.textContent = 'โ ุฅุฌุงุจุฉ ุตุญูุญุฉ!'; feedbackEl.className = 'mt-2 text-sm font-bold text-green-600'; } else { feedbackEl.textContent = `โ ุฅุฌุงุจุฉ ุฎุงุทุฆุฉ.`; feedbackEl.className = 'mt-2 text-sm font-bold text-red-600'; } document.getElementById(`explain-btn-${index}`).classList.remove('hidden');}); const finalGrade = Math.round((score / questions.length) * 10); const resultsDiv = document.getElementById('quiz-results'); resultsDiv.classList.remove('hidden'); document.getElementById('quiz-score').textContent = `${finalGrade} / 10`; if (studentData) { saveGrade(lessonId, finalGrade, studentData.id); if (attemptsLeft - 1 > 0) { document.getElementById('retake-quiz-btn').classList.remove('hidden'); } } else { document.getElementById('save-status').textContent = 'ุชู ุนุฑุถ ูุชูุฌุชู. ุณุฌู ุงูุฏุฎูู ูุญูุธ ุชูุฏูู.'; } e.target.querySelector('#submit-quiz-btn').disabled = true; }; }
    function saveGrade(lessonId, grade, studentId) { if (!studentId) return; const saveStatus = document.getElementById('save-status'); saveStatus.textContent = 'ุฌุงุฑู ุญูุธ ูุชูุฌุชู...'; const url = `${SCRIPT_URL}?action=saveGrade&studentId=${studentId}&lessonId=${lessonId}&grade=${grade}`; fetch(url) .then(res => res.json()) .then(result => { if (result.status === 'success') { saveStatus.textContent = 'โ ุชู ุญูุธ ูุชูุฌุชู ุจูุฌุงุญ! ุณุชุธูุฑ ูู ููุญุฉ ุงูุชุญูู ุนูุฏ ุงูุนูุฏุฉ.'; const studentData = JSON.parse(localStorage.getItem('currentStudent')); if (!studentData.lessons) studentData.lessons = {}; if (!studentData.lessons[lessonId] || studentData.lessons[lessonId].grade < grade) { studentData.lessons[lessonId] = { grade: grade, attempts: (studentData.lessons[lessonId]?.attempts || 0) + 1 }; } else { studentData.lessons[lessonId].attempts++; } localStorage.setItem('currentStudent', JSON.stringify(studentData)); } else { throw new Error(result.message); } }) .catch(error => { saveStatus.textContent = 'โ ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุญูุธ ุงูุฏุฑุฌุฉ.'; console.error("Save Grade Error:", error); }); }
    function showExplanation(questionIndex) { const q = currentQuestions[questionIndex]; const modal = document.getElementById('explanationModal'); const contentWrapper = document.getElementById('explanationContentWrapper'); if(!modal || !contentWrapper || !q || !q.explanation) return; contentWrapper.innerHTML = ''; if (typeof q.explanation === 'object' && q.explanation.isInteractive) { const interactiveContainer = document.createElement('div'); if(q.explanation.tableHTML) { const tableDiv = document.createElement('div'); tableDiv.innerHTML = q.explanation.tableHTML; interactiveContainer.append(tableDiv); } const explanationDiv = document.createElement('div'); explanationDiv.className = 'text-right text-base mb-4 min-h-[100px]'; const navContainer = document.createElement('div'); navContainer.className = 'flex justify-between items-center'; const backBtn = document.createElement('button'); backBtn.className = 'nav-btn bg-gray-500 text-white font-medium py-2 px-6 rounded-lg hover:bg-gray-600 text-sm'; backBtn.textContent = 'ุฑุฌูุน'; const stepCounter = document.createElement('span'); stepCounter.className = 'text-xs font-bold text-gray-600'; const nextBtn = document.createElement('button'); nextBtn.className = 'nav-btn bg-blue-600 text-white font-medium py-2 px-6 rounded-lg hover:bg-blue-700 text-sm'; nextBtn.textContent = 'ุงูุชุงูู'; navContainer.append(backBtn, stepCounter, nextBtn); interactiveContainer.append(explanationDiv, navContainer); contentWrapper.append(interactiveContainer); createInteractiveSection({ nextBtn: nextBtn, backBtn: backBtn, stepCounter: stepCounter, explanationDiv: explanationDiv, totalSteps: q.explanation.totalSteps, stepsContent: q.explanation.stepsContent, customRender: (step) => { if (q.explanation.tableHTML) { const rowsToHighlight = q.explanation.stepsContent[step].highlightRows || []; const allRows = interactiveContainer.querySelectorAll(`tr[data-expl-row]`); allRows.forEach((row, index) => { row.classList.toggle('bg-blue-100', rowsToHighlight.includes(index)); }); } } }); } else { contentWrapper.innerHTML = q.explanation; } modal.classList.remove('hidden'); }
    function closeModal() { const modal = document.getElementById('explanationModal'); if(modal) modal.classList.add('hidden'); }
    const LESSON_ID = 'c2_l5'; 
    const generateQuiz = () => { const questionBank = [ { type: 'mcq', level: 'โญ', topic: 'concept', text: 'ูุงุฐุง ูุตู ูุนุฏู ุงูุชุบูุฑุ', options: [ { display: 'ููุทุฉ ุจุฏุงูุฉ ุงูุฏุงูุฉ', value: 'A' }, { display: 'ููู ุชุชุบูุฑ ูููุฉ ูุง ุจุงููุณุจุฉ ูุฃุฎุฑู', value: 'B' }, { display: 'ุฃุนูู ูููุฉ ุชุตู ุฅูููุง ุงูุฏุงูุฉ', value: 'C' }, { display: 'ุทูู ุงูุฎุท ุงููุณุชููู', value: 'D' } ], correct: 'B', explanation: '<p>ูุนุฏู ุงูุชุบูุฑ ูู ูุณุจุฉ ุชูุงุฑู ููุฏุงุฑ ุงูุชุบูุฑ ูู ูููุฉ (ูุซู ุงููุณุงูุฉ) ุจููุฏุงุฑ ุงูุชุบูุฑ ูู ูููุฉ ุฃุฎุฑู (ูุซู ุงูุฒูู).</p>' }, { type: 'mcq', level: 'โญ', topic: 'concept', text: 'ูู ุฏุงูุฉ ุฎุทูุฉุ ุงุณู ุขุฎุฑ ููุนุฏู ุงูุชุบูุฑ ูู:', options: [ { display: 'ุงูููุทุน ุงูุณููู', value: 'A' }, { display: 'ุงูููู', value: 'B' }, { display: 'ููุทุฉ ุงูุฃุตู', value: 'C' }, { display: 'ุงููุฌุงู', value: 'D' } ], correct: 'B', explanation: '<p>ุงูููู ูู ุงูุงุณู ุงูุฐู ูุทูู ุนูู ูุนุฏู ุงูุชุบูุฑ ุงูุซุงุจุช ูู ุฃู ุฏุงูุฉ ุฎุทูุฉ.</p>' }, { type: 'mcq', level: 'โญโญ', topic: 'slope_concept', text: 'ุนูุฏูุง ูุชุญุฑู ุงูุฎุท ุงููุณุชููู ููุฃุนูู ุนูุฏ ุงูุชุญุฑู ูู ุงููุณุงุฑ ุฅูู ุงูููููุ ูููู ูููู:', options: [ { display: 'ููุฌุจูุง', value: 'A' }, { display: 'ุณุงูุจูุง', value: 'B' }, { display: 'ุตูุฑูุง', value: 'C' }, { display: 'ุบูุฑ ูุนุฑู', value: 'D' } ], correct: 'A', explanation: '<p>ุงูููู ุงูููุฌุจ ูุนูู ุฃู ุงูุฎุท ูุชุฌู ุตุนูุฏูุง ุนูุฏ ุงููุธุฑ ุฅููู ูู ุงููุณุงุฑ ุฅูู ุงููููู.</p>' }, { type: 'mcq', level: 'โญโญ', topic: 'table-rate', text: 'ูู ุงูุฌุฏููุ ูู ูุนุฏู ุงูุชุบูุฑ ุซุงุจุชุ ูุฅุฐุง ูุงู ูุฐููุ ููุง ูููุชูุ', graph: `<div class="flex justify-center my-2"><table class="w-2/3 text-center border"> <thead class="bg-gray-200"><tr><th class="p-1 border">ุณ</th><th class="p-1 border">ุต</th></tr></thead> <tbody> <tr><td class="p-1 border">ูข</td><td class="p-1 border">ูฅ</td></tr> <tr><td class="p-1 border">ูค</td><td class="p-1 border">ูกู</td></tr> <tr><td class="p-1 border">ูฆ</td><td class="p-1 border">ูกูฅ</td></tr> </tbody></table></div>`, options: [ { display: `ูุนูุ ุซุงุจุช ููุณุงูู <span class="math-eq">${fractionHTML('5','2')}</span>`, value: 'A' }, { display: `ูุนูุ ุซุงุจุช ููุณุงูู <span class="math-eq">${fractionHTML('2','5')}</span>`, value: 'B' }, { display: 'ูุงุ ุบูุฑ ุซุงุจุช', value: 'C' }, { display: 'ูุนูุ ุซุงุจุช ููุณุงูู ูฅ', value: 'D' } ], correct: 'A', explanation: { isInteractive: true, tableHTML: `<div class="flex justify-center my-2"><table class="w-full text-center border"> <thead class="bg-gray-200"><tr><th class="p-1 border">ุณ</th><th class="p-1 border">ุต</th></tr></thead> <tbody> <tr data-expl-row="0"><td class="p-1 border">ูข</td><td class="p-1 border">ูฅ</td></tr> <tr data-expl-row="1"><td class="p-1 border">ูค</td><td class="p-1 border">ูกู</td></tr> <tr data-expl-row="2"><td class="p-1 border">ูฆ</td><td class="p-1 border">ูกูฅ</td></tr> </tbody></table></div>`, totalSteps: 3, stepsContent: [ { text: "ุงุถุบุท 'ุงูุชุงูู' ูุชุญููู ุงูุฌุฏูู.", highlightRows: [] }, { text: `<strong>1. ุงููุนุฏู ุงูุฃูู:</strong><br><div class="math-eq text-center mt-2">${fractionHTML('ุงูุชุบูุฑ ูู ุต','ุงูุชุบูุฑ ูู ุณ')} = ${fractionHTML('ูฅ','ูข')}</div>`, highlightRows: [0, 1] }, { text: `<strong>2. ุงููุนุฏู ุงูุซุงูู:</strong><br><div class="math-eq text-center mt-2">${fractionHTML('ุงูุชุบูุฑ ูู ุต','ุงูุชุบูุฑ ูู ุณ')} = ${fractionHTML('ูฅ','ูข')}</div>`, highlightRows: [1, 2] }, { text: `<strong>ุงูุงุณุชูุชุงุฌ:</strong><br>ุจูุง ุฃู ุงููุนุฏู ูุชุณุงููุ ููู ุซุงุจุช ููุณุงูู ${fractionHTML('ูฅ','ูข')}.`, highlightRows: [] } ] } }, { type: 'mcq', level: 'โญโญ', topic: 'table-rate', text: 'ูู ุงูุฌุฏููุ ูู ูุนุฏู ุงูุชุบูุฑ ุซุงุจุชุ', graph: `<div class="flex justify-center my-2"><table class="w-2/3 text-center border"> <thead class="bg-gray-200"><tr><th class="p-1 border">ุณ</th><th class="p-1 border">ุต</th></tr></thead> <tbody> <tr><td class="p-1 border">ูก</td><td class="p-1 border">ูกู</td></tr> <tr><td class="p-1 border">ูข</td><td class="p-1 border">ูขู</td></tr> <tr><td class="p-1 border">ูค</td><td class="p-1 border">ูฅู</td></tr> </tbody></table></div>`, options: [ { display: 'ูุนูุ ุซุงุจุช ููุณุงูู ูกู', value: 'A' }, { display: 'ูุงุ ุบูุฑ ุซุงุจุช', value: 'B' }, { display: 'ูุนูุ ุซุงุจุช ููุณุงูู ูกูฅ', value: 'C' }, { display: 'ูุนูุ ุซุงุจุช ููุณุงูู ูกูข.ูฅ', value: 'D' } ], correct: 'B', explanation: { isInteractive: true, tableHTML: `<div class="flex justify-center my-2"><table class="w-full text-center border"> <thead class="bg-gray-200"><tr><th class="p-1 border">ุณ</th><th class="p-1 border">ุต</th></tr></thead> <tbody> <tr data-expl-row="0"><td class="p-1 border">ูก</td><td class="p-1 border">ูกู</td></tr> <tr data-expl-row="1"><td class="p-1 border">ูข</td><td class="p-1 border">ูขู</td></tr> <tr data-expl-row="2"><td class="p-1 border">ูค</td><td class="p-1 border">ูฅู</td></tr> </tbody></table></div>`, totalSteps: 3, stepsContent: [ { text: "ุงุถุบุท 'ุงูุชุงูู' ูุชุญููู ุงูุฌุฏูู.", highlightRows: [] }, { text: `<strong>1. ุงููุนุฏู ุงูุฃูู:</strong><br><div class="math-eq text-center mt-2">${fractionHTML('ุงูุชุบูุฑ ูู ุต','ุงูุชุบูุฑ ูู ุณ')} = ${fractionHTML('ูกู','ูก')} = ูกู</div>`, highlightRows: [0, 1] }, { text: `<strong>2. ุงููุนุฏู ุงูุซุงูู:</strong><br><div class="math-eq text-center mt-2">${fractionHTML('ุงูุชุบูุฑ ูู ุต','ุงูุชุบูุฑ ูู ุณ')} = ${fractionHTML('ูฃู','ูข')} = ูกูฅ</div>`, highlightRows: [1, 2] }, { text: `<strong>ุงูุงุณุชูุชุงุฌ:</strong><br>ุจูุง ุฃู ูกู โ ูกูฅุ ูุงููุนุฏู ุบูุฑ ุซุงุจุช.`, highlightRows: [] } ] } }, { type: 'mcq', level: 'โญโญ', topic: 'graph-rate', text: 'ูู ุงูุฑุณู ุงูุจูุงููุ ูู ูุนุฏู ุงูุชุบูุฑ ุซุงุจุชุ ูุฅุฐุง ูุงู ูุฐููุ ููุง ูููุชูุ', graph: '<svg viewBox="-1 -1 7 7" class="w-full h-40 bg-white border rounded-lg mt-2"><path d="M 0,1 L 6,1 M 0,2 L 6,2 M 0,3 L 6,3 M 0,4 L 6,4 M 0,5 L 6,5 M 1,0 L 1,6 M 2,0 L 2,6 M 3,0 L 3,6 M 4,0 L 4,6 M 5,0 L 5,6" stroke="#e5e7eb" stroke-width="0.1" /><line x1="0" y1="6" x2="0" y2="0" stroke="#9ca3af" stroke-width="0.15" /><line x1="0" y1="6" x2="6" y2="6" stroke="#9ca3af" stroke-width="0.15" /><line x1="1" y1="5" x2="3" y2="1" stroke="#3b82f6" stroke-width="0.3" /><circle cx="1" cy="5" r="0.15" fill="#ef4444" /><circle cx="3" cy="1" r="0.15" fill="#ef4444" /></svg>', options: [ { display: 'ูุนูุ ุซุงุจุช ููุณุงูู ูข', value: 'A' }, { display: 'ูุนูุ ุซุงุจุช ููุณุงูู -ูข', value: 'B' }, { display: 'ูุงุ ุบูุฑ ุซุงุจุช', value: 'C' }, { display: `ูุนูุ ุซุงุจุช ููุณุงูู -${fractionHTML('1','2')}`, value: 'D' } ], correct: 'A', explanation: { isInteractive: true, totalSteps: 3, stepsContent: [ { text: "ุงุถุบุท 'ุงูุชุงูู' ูุชุญููู ุงูุฑุณู." }, { text: `<strong>1. ุชุญุฏูุฏ ููุทุชูู:</strong><br>ูุฎุชุงุฑ ุงูููุทุชูู (ูกุ ูก) ู (ูฃุ ูฅ).` }, { text: `<strong>2. ุญุณุงุจ ุงูููู:</strong><br><div class="math-eq text-center mt-2">${fractionHTML('ูฅ - ูก','ูฃ - ูก')} = ${fractionHTML('ูค','ูข')}</div>` }, { text: `<strong>ุงูุงุณุชูุชุงุฌ:</strong><br>ุงูููู ุซุงุจุช ููุณุงูู ูข.` } ] } }, { type: 'mcq', level: 'โญโญ', topic: 'graph-rate', text: 'ูู ุงูุฑุณู ุงูุจูุงููุ ูู ูุนุฏู ุงูุชุบูุฑ ุซุงุจุชุ', graph: '<svg viewBox="0 0 20 20" class="w-full h-40 bg-white border rounded-lg mt-2"><path d="M1,19 C 4,15 8,1 19,1" stroke="#f97316" fill="none" stroke-width="1.2"/></svg>', options: [ { display: 'ูุนูุ ูุฃู ุงูุฎุท ูุชุฌู ููุฃุนูู', value: 'A' }, { display: 'ูุงุ ูุฃูู ููุญูู ูููุณ ุฎุทูุง ูุณุชููููุง', value: 'B' }, { display: 'ูุนูุ ูุฃู ูููู ููุฌุจ', value: 'C' }, { display: 'ูุงุ ูุฃู ูููู ุณุงูุจ', value: 'D' } ], correct: 'B', explanation: '<p>ุงูุฑุณู ูุง ููุซู ุฎุทูุง ูุณุชููููุงุ ุจู ููุญูู. ูุฐุง ูุนูู ุฃู ุงูููู ูุชุบูุฑ ุนูุฏ ูู ููุทุฉุ ูุจุงูุชุงูู ูุฅู ูุนุฏู ุงูุชุบูุฑ ุบูุฑ ุซุงุจุช.</p>' }, { type: 'mcq', level: 'โญโญ', topic: 'two-point-calc', text: 'ุฃูุฌุฏ ููู ุงููุณุชููู ุงููุงุฑ ุจุงูููุทุชูู (ูข, ูฅ) ู (ูค, ูฉ).', options: [ { display: '<span class="math-eq">ูข</span>', value: 'A' }, { display: `<span class="math-eq">${fractionHTML('ูก','ูข')}</span>`, value: 'B' }, { display: '<span class="math-eq">-ูข</span>', value: 'C' }, { display: '<span class="math-eq">ูค</span>', value: 'D' } ], correct: 'A', explanation: `<p>ุงูููู = ${fractionHTML('ูฉ - ูฅ','ูค - ูข')} = ${fractionHTML('ูค','ูข')} = ูข.</p>` }, { type: 'mcq', level: 'โญโญโญ', topic: 'two-point-calc', text: 'ุฃูุฌุฏ ููู ุงููุณุชููู ุงููุงุฑ ุจุงูููุทุชูู (-ูก, ูฃ) ู (ูข, -ูฃ).', options: [ { display: '<span class="math-eq">ูข</span>', value: 'A' }, { display: '<span class="math-eq">ู</span>', value: 'B' }, { display: '<span class="math-eq">-ูข</span>', value: 'C' }, { display: '<span class="math-eq">ุบูุฑ ูุนุฑู</span>', value: 'D' } ], correct: 'C', explanation: `<p>ุงูููู = ${fractionHTML('-ูฃ - ูฃ','ูข - (-ูก)')} = ${fractionHTML('-ูฆ','ูฃ')} = -ูข.</p>` }, { type: 'mcq', level: 'โญโญโญ', topic: 'find-coordinate', text: 'ุฃูุฌุฏ ูููุฉ (ุฑ) ุงูุชู ุชุฌุนู ููู ุงููุณุชููู ุงููุงุฑ ุจุงูููุทุชูู (ูขุ ุฑ) ู (ูฅุ ูจ) ูุณุงูู ูข.', options: [ { display: 'ูข', value: 'A' }, { display: 'ูกูค', value: 'B' }, { display: 'ูค', value: 'C' }, { display: 'ูก', value: 'D' } ], correct: 'A', explanation: `<p>ูุณุชุฎุฏู ุตูุบุฉ ุงูููู: ูข = ${fractionHTML('ูจ - ุฑ', 'ูฅ - ูข')}.<br>ูข = ${fractionHTML('ูจ - ุฑ', 'ูฃ')}.<br>ูฆ = ูจ - ุฑ.<br>ุฅุฐูุงุ ุฑ = ูข.</p>` }, { type: 'mcq', level: 'โญโญโญ', topic: 'real-life', text: 'ุทุงุจุนุฉ ุชุทุจุน ูกูขู ุตูุญุฉ ูู ูค ุฏูุงุฆู. ูุง ูู ูุนุฏู ุชุบูุฑ ุนุฏุฏ ุงูุตูุญุงุช ุงููุทุจูุนุฉ ูู ุงูุฏูููุฉุ', options: [ { display: 'ูฃู ุตูุญุฉ/ุฏูููุฉ', value: 'A' }, { display: 'ูคูจู ุตูุญุฉ/ุฏูููุฉ', value: 'B' }, { display: 'ูคู ุตูุญุฉ/ุฏูููุฉ', value: 'C' }, { display: 'ูกูขู ุตูุญุฉ/ุฏูููุฉ', value: 'D' } ], correct: 'A', explanation: `<p>ูุนุฏู ุงูุชุบูุฑ = ${fractionHTML('ูกูขู ุตูุญุฉ','ูค ุฏูุงุฆู')} = ูฃู ุตูุญุฉ/ุฏูููุฉ.</p>` }, { type: 'mcq', level: 'โญโญ', topic: 'table-rate', text: 'ูุง ูู ูุนุฏู ุงูุชุบูุฑ ูู ุณุนุฑ ุงูุฏูููุฉ ุจูู ุงูุดูุฑูู ุงูุฃูู ูุงูุซุงูุซุ', graph: `<div class="flex justify-center my-2"><table class="w-2/3 text-center border"> <thead class="bg-gray-200"><tr><th class="p-1 border">ุงูุดูุฑ</th><th class="p-1 border">ุณุนุฑ ุงูุฏูููุฉ (ูููุฉ)</th></tr></thead> <tbody> <tr><td class="p-1 border">ูก</td><td class="p-1 border">ูคูฅ</td></tr> <tr><td class="p-1 border">ูข</td><td class="p-1 border">ูคู</td></tr> <tr><td class="p-1 border">ูฃ</td><td class="p-1 border">ูฃูฅ</td></tr> </tbody></table></div>`, options: [ { display: '-ูฅ ูููุฉ/ุดูุฑ', value: 'A' }, { display: 'ูฅ ูููุฉ/ุดูุฑ', value: 'B' }, { display: '-ูกู ูููุฉ/ุดูุฑ', value: 'C' }, { display: 'ูกู ูููุฉ/ุดูุฑ', value: 'D' } ], correct: 'A', explanation: `<p>ูุนุฏู ุงูุชุบูุฑ = ${fractionHTML('ูฃูฅ - ูคูฅ','ูฃ - ูก')} = ${fractionHTML('-ูกู','ูข')} = -ูฅ ูููุฉ ููู ุดูุฑ.</p>` } ]; const shuffled = [...questionBank].sort(() => 0.5 - Math.random()); const questionCount = Math.min(shuffled.length, 5); return shuffled.slice(0, questionCount); }
    document.addEventListener('DOMContentLoaded', () => {
        const student = getStudentFromStorage();
        const lessonTitleElement = document.getElementById('lesson-title');
        const lessonTitle = lessonTitleElement ? lessonTitleElement.textContent : null;
        buildHeader(student, lessonTitle);
        buildFooter();
        const questions = generateQuiz();
        initializeQuiz(LESSON_ID, questions, student);
        const retakeBtn = document.getElementById('retake-quiz-btn');
        if(retakeBtn) { retakeBtn.addEventListener('click', () => { window.location.reload(); }); }
        const closeModalBtn = document.getElementById('closeModalBtn');
        if(closeModalBtn) { closeModalBtn.addEventListener('click', closeModal); }

        // Initialize all interactive examples from the old version
        const slopeSummaryContainer = document.getElementById('slope-summary-container');
        if(slopeSummaryContainer) {
            slopeSummaryContainer.innerHTML = `<div class="p-2 bg-white rounded-lg border"><svg viewBox="0 0 20 20" class="w-full h-24"><line x1="1" y1="10" x2="19" y2="10" stroke="#9ca3af" stroke-width="0.5"/><line x1="10" y1="1" x2="10" y2="19" stroke="#9ca3af" stroke-width="0.5"/><line x1="1" y1="15" x2="9" y2="5" stroke="#2563eb" stroke-width="1.2"/></svg><p class="font-bold mt-1 text-sm">ููู ููุฌุจ</p></div><div class="p-2 bg-white rounded-lg border"><svg viewBox="0 0 20 20" class="w-full h-24"><line x1="1" y1="10" x2="19" y2="10" stroke="#9ca3af" stroke-width="0.5"/><line x1="10" y1="1" x2="10" y2="19" stroke="#9ca3af" stroke-width="0.5"/><line x1="1" y1="5" x2="9" y2="15" stroke="#dc2626" stroke-width="1.2"/></svg><p class="font-bold mt-1 text-sm">ููู ุณุงูุจ</p></div><div class="p-2 bg-white rounded-lg border"><svg viewBox="0 0 20 20" class="w-full h-24"><line x1="1" y1="10" x2="19" y2="10" stroke="#9ca3af" stroke-width="0.5"/><line x1="10" y1="1" x2="10" y2="19" stroke="#9ca3af" stroke-width="0.5"/><line x1="2" y1="5" x2="18" y2="5" stroke="#16a34a" stroke-width="1.2"/></svg><p class="font-bold mt-1 text-sm">ููู ุตูุฑ</p></div><div class="p-2 bg-white rounded-lg border"><svg viewBox="0 0 20 20" class="w-full h-24"><line x1="1" y1="10" x2="19" y2="10" stroke="#9ca3af" stroke-width="0.5"/><line x1="10" y1="1" x2="10" y2="19" stroke="#9ca3af" stroke-width="0.5"/><line x1="15" y1="2" x2="15" y2="18" stroke="#ca8a04" stroke-width="1.2"/></svg><p class="font-bold mt-1 text-sm">ููู ุบูุฑ ูุนุฑู</p></div>`;
        }
        createInteractiveSection({ nextBtn: document.getElementById('table-const-next'), backBtn: document.getElementById('table-const-back'), stepCounter: document.getElementById('table-const-step-counter'), explanationDiv: document.getElementById('table-const-explanation'), totalSteps: 4, stepsContent: [ { text: "ุงุถุบุท 'ุงูุชุงูู' ููุชุญูู ุฅุฐุง ูุงู ูุนุฏู ุงูุชุบูุฑ ุซุงุจุชูุง." }, { text: `<strong>1. ูุญุณุจ ุงููุนุฏู ุจูู ุงูููุทุชูู ุงูุฃููู ูุงูุซุงููุฉ:</strong><br><div class="math-eq text-center mt-2">${fractionHTML('ุงูุชุบูุฑ ูู ุต', 'ุงูุชุบูุฑ ูู ุณ')} = ${fractionHTML('ูกู', 'ูฃู')} = ${fractionHTML('ูก', 'ูฃ')}</div>` }, { text: `<strong>2. ูุญุณุจ ุงููุนุฏู ุจูู ุงูููุทุชูู ุงูุซุงููุฉ ูุงูุซุงูุซุฉ:</strong><br><div class="math-eq text-center mt-2">${fractionHTML('ุงูุชุบูุฑ ูู ุต', 'ุงูุชุบูุฑ ูู ุณ')} = ${fractionHTML('ูกู', 'ูฃู')} = ${fractionHTML('ูก', 'ูฃ')}</div>` }, { text: `<strong>3. ุงูููุงุฑูุฉ:</strong><br>ุงููุนุฏู ูู ุงูุญุงูุชูู = <span class="math-eq">${fractionHTML('ูก','ูฃ')}</span>.`}, { text: `<strong>ุงูุงุณุชูุชุงุฌ:</strong><br>ุจูุง ุฃู ุงููุนุฏู ูุชุณุงููุ ูุฅู <span class="font-bold text-green-600">ูุนุฏู ุงูุชุบูุฑ ุซุงุจุช</span>.`} ], customRender: (step) => { document.getElementById('table-const-vis-1a').style.opacity = step >= 1 ? '1' : '0'; document.getElementById('table-const-vis-1b').style.opacity = step >= 1 ? '1' : '0'; document.getElementById('table-const-vis-2a').style.opacity = step >= 2 ? '1' : '0'; document.getElementById('table-const-vis-2b').style.opacity = step >= 2 ? '1' : '0'; document.getElementById('table-const-row-1').classList.toggle('bg-blue-100', step === 1); document.getElementById('table-const-row-2').classList.toggle('bg-blue-100', step === 1 || step === 2); document.getElementById('table-const-row-3').classList.toggle('bg-blue-100', step === 2); } });
        createInteractiveSection({ nextBtn: document.getElementById('table-nonconst-next'), backBtn: document.getElementById('table-nonconst-back'), stepCounter: document.getElementById('table-nonconst-step-counter'), explanationDiv: document.getElementById('table-nonconst-explanation'), totalSteps: 4, stepsContent: [ { text: "ุงุถุบุท 'ุงูุชุงูู' ููุชุญูู ุฅุฐุง ูุงู ูุนุฏู ุงูุชุบูุฑ ุซุงุจุชูุง." }, { text: `<strong>1. ูุญุณุจ ุงููุนุฏู ุจูู ุงูููู ุงูุฃูู ูุงูุฎุงูุณ:</strong><br><div class="math-eq text-center mt-2">${fractionHTML('ุงูุชุบูุฑ ูู ุต', 'ุงูุชุบูุฑ ูู ุณ')} = ${fractionHTML('ูขูู', 'ูค')} = ูฅู</div>` }, { text: `<strong>2. ูุญุณุจ ุงููุนุฏู ุจูู ุงูููู ุงูุฎุงูุณ ูุงูุณุงุจุน:</strong><br><div class="math-eq text-center mt-2">${fractionHTML('ุงูุชุบูุฑ ูู ุต', 'ุงูุชุบูุฑ ูู ุณ')} = ${fractionHTML('ูคูู', 'ูข')} = ูขูู</div>` }, { text: `<strong>3. ุงูููุงุฑูุฉ:</strong><br>ุงููุนุฏู ุงูุฃูู <span class="math-eq">ูฅู</span> ูุง ูุณุงูู ุงููุนุฏู ุงูุซุงูู <span class="math-eq">ูขูู</span>.`}, { text: `<strong>ุงูุงุณุชูุชุงุฌ:</strong><br>ุจูุง ุฃู ุงููุนุฏู ูุฎุชููุ ูุฅู <span class="font-bold text-red-600">ูุนุฏู ุงูุชุบูุฑ ุบูุฑ ุซุงุจุช</span>.`} ], customRender: (step) => { document.getElementById('table-nonconst-vis-1a').style.opacity = step >= 1 ? '1' : '0'; document.getElementById('table-nonconst-vis-1b').style.opacity = step >= 1 ? '1' : '0'; document.getElementById('table-nonconst-vis-2a').style.opacity = step >= 2 ? '1' : '0'; document.getElementById('table-nonconst-vis-2b').style.opacity = step >= 2 ? '1' : '0'; document.getElementById('table-nonconst-row-1').classList.toggle('bg-orange-100', step === 1); document.getElementById('table-nonconst-row-2').classList.toggle('bg-orange-100', step === 1 || step === 2); document.getElementById('table-nonconst-row-3').classList.toggle('bg-orange-100', step === 2); } });
        createInteractiveSection({ nextBtn: document.getElementById('slope-anim-next-constant'), backBtn: document.getElementById('slope-anim-back-constant'), stepCounter: document.getElementById('step-counter-constant'), explanationDiv: document.getElementById('animation-explanation-constant'), totalSteps: 3, stepsContent: [ { text: "ุงุถุบุท ุนูู 'ุงูุชุงูู' ูุจุฏุก ุงูุดุฑุญ ุฎุทูุฉ ุจุฎุทูุฉ." }, { text: "<strong>1. ูุฌุฏ ุงูุชุบูุฑ ุงูุฑุฃุณู (ุงูุงุฑุชูุงุน):</strong> ุฃุฑุจุน ุฎุทูุงุช ููุฃุณูู (-ูค)." }, { text: "<strong>2. ูุฌุฏ ุงูุชุบูุฑ ุงูุฃููู (ุงูุงูุชุฏุงุฏ):</strong> ุฃุฑุจุน ุฎุทูุงุช ูููููู (+ูค)." }, { text: `<strong>3. ูุญุณุจ ุงูููู:</strong><br><div class="p-2 bg-blue-100 rounded-md text-blue-800 text-lg mt-2">ุงูููู = ${fractionHTML('ุงูุงุฑุชูุงุน','ุงูุงูุชุฏุงุฏ')} = ${fractionHTML('-ูค','ูค')} = -ูก</div>` } ], customRender: (step) => { document.getElementById('anim-const-step-1').style.opacity = step >= 1 ? '1' : '0'; document.getElementById('anim-const-step-2').style.opacity = step >= 1 ? '1' : '0'; document.getElementById('anim-const-step-3').style.opacity = step >= 2 ? '1' : '0'; document.getElementById('anim-const-step-4').style.opacity = step >= 2 ? '1' : '0'; } });
        createInteractiveSection({ nextBtn: document.getElementById('slope-anim-next-non-constant'), backBtn: document.getElementById('slope-anim-back-non-constant'), stepCounter: document.getElementById('step-counter-non-constant'), explanationDiv: document.getElementById('animation-explanation-non-constant'), totalSteps: 7, stepsContent: [ { text: "ุงุถุบุท 'ุงูุชุงูู' ูุชุญููู ูุนุฏู ุงูุชุบูุฑ ููู ูุชุฑุฉ." }, { text: `<strong>ุงููุชุฑุฉ ุงูุฃููู (ุจูู ุนุงูู ูขูฆ ู ูขูจ):</strong><br>ูุธูุฑ ุงูุฑุณู ุงูุชุฏุงุฏูุง ุจููุฏุงุฑ ูข ู ุงุฑุชูุงุนูุง ุจููุฏุงุฑ ูก.` }, { text: `ูุนุฏู ุงูุชุบูุฑ = <div class="math-eq inline-block">${fractionHTML('ูก','ูข')}</div>` }, { text: `<strong>ุงููุชุฑุฉ ุงูุซุงููุฉ (ุจูู ุนุงูู ูขูจ ู ูฃู):</strong><br>ูุธูุฑ ุงูุฑุณู ุงูุชุฏุงุฏูุง ุจููุฏุงุฑ ูข ู ุงุฑุชูุงุนูุง ุจููุฏุงุฑ ูข.` }, { text: `ูุนุฏู ุงูุชุบูุฑ = <div class="math-eq inline-block">${fractionHTML('ูข','ูข')} = ูก</div>` }, { text: `<strong>ุงููุชุฑุฉ ุงูุซุงูุซุฉ (ุจูู ุนุงูู ูฃู ู ูฃูข):</strong><br>ูุธูุฑ ุงูุฑุณู ุงูุชุฏุงุฏูุง ุจููุฏุงุฑ ูข ู ุงุฑุชูุงุนูุง ุจููุฏุงุฑ ูก.` }, { text: `ูุนุฏู ุงูุชุบูุฑ = <div class="math-eq inline-block">${fractionHTML('ูก','ูข')}</div>` }, { text: `<strong>ุงูุงุณุชูุชุงุฌ:</strong><br>ุจูุง ุฃู ุงููุนุฏูุงุช (${fractionHTML('ูก','ูข')}ุ ูกุ ${fractionHTML('ูก','ูข')}) ูุฎุชููุฉุ ูุฅู <span class="font-bold text-red-600">ูุนุฏู ุงูุชุบูุฑ ุบูุฑ ุซุงุจุช</span>.` } ], customRender: (step) => { const anim1 = document.getElementById('nc-anim-group-1'); const anim2 = document.getElementById('nc-anim-group-2'); const anim3 = document.getElementById('nc-anim-group-3'); anim1.style.opacity = (step >= 1 && step < 3) ? '1' : '0'; anim2.style.opacity = (step >= 3 && step < 5) ? '1' : '0'; anim3.style.opacity = (step >= 5 && step < 7) ? '1' : '0'; document.getElementById('nc-line-1').style.stroke = (step >= 1 && step < 3) ? '#dc2626' : '#f97316'; document.getElementById('nc-line-2').style.stroke = (step >= 3 && step < 5) ? '#dc2626' : '#f97316'; document.getElementById('nc-line-3').style.stroke = (step >= 5 && step < 7) ? '#dc2626' : '#f97316'; } });
        createInteractiveSection({ nextBtn: document.getElementById('slope-ex1-next'), backBtn: document.getElementById('slope-ex1-back'), stepCounter: document.getElementById('slope-ex1-step-counter'), explanationDiv: document.getElementById('slope-ex1-explanation'), totalSteps: 4, stepsContent: [ { text: "ุงุถุบุท 'ุงูุชุงูู' ูุจุฏุก ุงูุญู." }, { text: `<strong>1. ูุชุงุจุฉ ุตูุบุฉ ุงูููู:</strong><br><div class="math-eq text-center mt-2">ู = ${fractionHTML('ุตโ - ุตโ', 'ุณโ - ุณโ')}</div>` }, { text: `<strong>2. ุงูุชุนููุถ ูู ุงูุตูุบุฉ:</strong><br><div class="math-eq text-center mt-2">ู = ${fractionHTML('<span class="highlight-y">ูง</span> - <span class="highlight-y">ูก</span>', '<span class="highlight-x">ูฅ</span> - <span class="highlight-x">ูข</span>')}</div>` }, { text: `<strong>3. ุชุจุณูุท ุงููุณุฑ:</strong><br><div class="math-eq text-center mt-2">ู = ${fractionHTML('ูฆ', 'ูฃ')}</div>` }, { text: `<strong>4. ุงูุญู ุงูููุงุฆู:</strong><br><div class="p-2 bg-green-100 rounded-md inline-block mt-2"><span class="math-eq text-green-700">ู = ูข</span></div>` } ], customRender: () => {} });
        createInteractiveSection({ nextBtn: document.getElementById('slope-ex2-next'), backBtn: document.getElementById('slope-ex2-back'), stepCounter: document.getElementById('slope-ex2-step-counter'), explanationDiv: document.getElementById('slope-ex2-explanation'), totalSteps: 4, stepsContent: [ { text: "ุงุถุบุท 'ุงูุชุงูู' ูุจุฏุก ุงูุญู." }, { text: `<strong>1. ูุชุงุจุฉ ุตูุบุฉ ุงูููู:</strong><br><div class="math-eq text-center mt-2">ู = ${fractionHTML('ุตโ - ุตโ', 'ุณโ - ุณโ')}</div>` }, { text: `<strong>2. ุงูุชุนููุถ ูู ุงูุตูุบุฉ:</strong><br><div class="math-eq text-center mt-2">ู = ${fractionHTML('<span class="highlight-y">-ูข</span> - <span class="highlight-y">ูค</span>', '<span class="highlight-x">ูก</span> - (<span class="highlight-x">-ูฃ</span>)')}</div>` }, { text: `<strong>3. ุชุจุณูุท ุงููุณุฑ:</strong><br><div class="math-eq text-center mt-2">ู = ${fractionHTML('-ูฆ', 'ูค')}</div>` }, { text: `<strong>4. ุงูุญู ุงูููุงุฆู:</strong><br><div class="p-2 bg-green-100 rounded-md inline-block mt-2"><span class="math-eq text-green-700">ู = -${fractionHTML('ูฃ', 'ูข')}</span></div>` } ], customRender: () => {} });
        createInteractiveSection({ nextBtn: document.getElementById('solver-next'), backBtn: document.getElementById('solver-back'), stepCounter: document.getElementById('solver-step-counter'), explanationDiv: document.getElementById('interactive-solver-explanation'), totalSteps: 7, stepsContent: [ { text: "ุงุถุบุท 'ุงูุชุงูู' ูุจุฏุก ุญู ุงููุณุฃูุฉ ุฎุทูุฉ ุจุฎุทูุฉ." }, { text: `<strong>1. ูุชุงุจุฉ ุตูุบุฉ ุงูููู:</strong><br><div class="math-eq text-center mt-2">ู = ${fractionHTML('ุต<sub class="text-sm">ูข</sub> - ุต<sub class="text-sm">ูก</sub>', 'ุณ<sub class="text-sm">ูข</sub> - ุณ<sub class="text-sm">ูก</sub>')}</div>` }, { text: `<strong>2. ุงูุชุนููุถ ุจุงูููู:</strong><br><div class="math-eq text-center mt-2">${fractionHTML('ูก','ูฃ')} = ${fractionHTML('<span class="highlight-y">ุฑ</span> - <span class="highlight-y">ูค</span>','<span class="highlight-x">-ูฅ</span> - <span class="highlight-x">ูก</span>')}</div>` }, { text: `<strong>3. ุชุจุณูุท ุงูููุงู:</strong><br><div class="math-eq text-center mt-2">${fractionHTML('ูก','ูฃ')} = ${fractionHTML('ุฑ - ูค','-ูฆ')}</div>` }, { text: `<strong>4. ุงูุถุฑุจ ุงูุชุจุงุฏูู:</strong><br><div class="math-eq text-center mt-2">ูก ร (-ูฆ) = ูฃ ร (ุฑ - ูค)</div>` }, { text: `<strong>5. ุชุจุณูุท ุงููุนุงุฏูุฉ:</strong><br><div class="math-eq text-center mt-2">-ูฆ = ูฃุฑ - ูกูข</div>` }, { text: `<strong>6. ุญู ุงููุนุงุฏูุฉ (ุฌูุน ูกูข ููุทุฑููู):</strong><br><div class="math-eq text-center mt-2">ูฆ = ูฃุฑ</div>` }, { text: `<strong>7. ุงูุญู ุงูููุงุฆู (ุงููุณูุฉ ุนูู ูฃ):</strong><br><div class="p-2 bg-green-100 rounded-md inline-block mt-2"><span class="math-eq text-green-700">ุฑ = ูข</span></div>` } ], customRender: () => {} });
    });
    </script>
</body>
</html>
