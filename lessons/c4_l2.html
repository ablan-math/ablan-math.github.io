<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- STEP 1: ุนููุงู ุงูุตูุญุฉ -->
    <title>ุงูุฏุฑุณ ูค-ูข: ุญู ุงููุชุจุงููุงุช ุจุงูุถุฑุจ ูุงููุณูุฉ | ููุตุฉ ุงูุฑูุงุถูุงุช ุงูุชูุงุนููุฉ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; }
        .hidden { display: none; }
        .step-box { border-right: 4px solid #1d4ed8; }
        .vocab-term { background-color: #ffefc5; padding: 2px 6px; border-radius: 4px; font-weight: bold; }
        .vocab-term-alt { background-color: #dbeafe; padding: 2px 6px; border-radius: 4px; font-weight: bold; }
        .option-label { display: block; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; cursor: pointer; transition: all 0.2s ease-in-out; }
        .option-label:hover { border-color: #3b82f6; background-color: #eff6ff; }
        input[type="radio"]:checked + .option-label { border-color: #2563eb; background-color: #dbeafe; box-shadow: 0 0 0 2px #bfdbfe; }
        input[type="radio"] { display: none; }
        .feedback-correct { color: #16a34a; }
        .feedback-incorrect { color: #dc2626; }
        .highlight-number { background-color: #fef9c3; border: 1px solid #fde047; color: #b45309; font-weight: bold; padding: 0 5px; border-radius: 4px; }
        .math-eq { font-family: "Courier New", monospace; font-size: 1.1rem; font-weight: bold; color: #4338ca; background-color: #f3f4f6; border: 1px solid #d1d5db; padding: 2px 8px; border-radius: 6px; display: inline-block; vertical-align: middle; }
        .math-eq .highlight-number { padding: 0; border: none; } /* Style for highlighted numbers inside math-eq */
        .fraction { display: inline-flex; flex-direction: column; text-align: center; vertical-align: middle; margin: 0 0.2em; }
        .fraction > span { display: block; padding: 0 0.4em; }
        .fraction > .frac-bar { border-top: 2px solid #4338ca; }
        .step-interactive { display: none; opacity: 0; transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out; transform: translateY(10px); }
        .step-interactive.active { display: block; opacity: 1; transform: translateY(0); }

        /* CSS for Number Line */
        .number-line-wrapper { margin-top: 1rem; padding: 1rem 0; }
        .number-line { position: relative; width: 100%; height: 2px; background-color: #374151; }
        .number-line::before, .number-line::after { content: ''; position: absolute; top: 50%; transform: translateY(-50%); width: 0; height: 0; border-style: solid; }
        .number-line::before { left: -1px; border-width: 6px 8px 6px 0; border-color: transparent #374151 transparent transparent; }
        .number-line::after { right: -1px; border-width: 6px 0 6px 8px; border-color: transparent transparent transparent #374151; }
        .ticks-container { position: relative; width: 100%; height: 2rem; }
        .tick { position: absolute; bottom: 0; transform: translateX(-50%); display: flex; flex-direction: column; align-items: center; font-size: 0.875rem; }
        .tick::before { content: ''; width: 2px; height: 8px; background-color: #374151; margin-bottom: 4px; }
        .solution-line { position: absolute; top: 50%; transform: translateY(-50%); height: 4px; background-color: #2563eb; }
        .solution-point { position: absolute; top: 50%; transform: translate(-50%, -50%); width: 12px; height: 12px; border-radius: 9999px; border: 2px solid #2563eb; }
        .solution-point.open { background-color: #fff; }
        .solution-point.closed { background-color: #2563eb; }
    </style>
</head>
<body class="bg-gray-100">
    <div id="app-container" class="grid grid-template-rows: auto 1fr auto; min-height: 100vh;">
        <header id="main-header" class="bg-white shadow-md sticky top-0 z-50"></header>
        <main class="container mx-auto max-w-4xl my-8">
            <div class="p-6 bg-white rounded-xl shadow-lg">
                <header class="flex justify-between items-center mb-8 border-b pb-4 border-gray-200">
                    <h1 id="lesson-title" class="text-3xl font-bold text-blue-800">ุงูุฏุฑุณ ูค-ูข: ุญู ุงููุชุจุงููุงุช ุจุงูุถุฑุจ ูุงููุณูุฉ</h1>
                    <a href="../index.html" target="_top" class="text-sm text-blue-600 hover:underline">&larr; ุงูุนูุฏุฉ ุฅูู ุงูููุฑุณ</a>
                </header>

                <section class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">๐ก ุฃููุงู: ุงูููููู ุงูุฃุณุงุณู</h2>
                    <div class="p-6 bg-blue-50 rounded-lg space-y-6">
                        <div>
                            <h3 class="text-xl font-semibold text-blue-700 mb-2">ุงูุถุฑุจ ุฃู ุงููุณูุฉ ุนูู ุนุฏุฏ ููุฌุจ</h3>
                            <p class="text-center">ุนูุฏ ุถุฑุจ ุทุฑูู ุงููุชุจุงููุฉ ุฃู ูุณูุชููุง ุนูู ุนุฏุฏ <span class="vocab-term">ููุฌุจ</span>ุ ูุจูู ุงุชุฌุงู ุฅุดุงุฑุฉ ุงููุชุจุงููุฉ <span class="vocab-term-alt">ููุง ูู</span>.</p>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-red-700 mb-2">ุงูุถุฑุจ ุฃู ุงููุณูุฉ ุนูู ุนุฏุฏ ุณุงูุจ</h3>
                            <p class="text-center">ุนูุฏ ุถุฑุจ ุทุฑูู ุงููุชุจุงููุฉ ุฃู ูุณูุชููุง ุนูู ุนุฏุฏ <span class="vocab-term bg-red-100 text-red-800">ุณุงูุจ</span>ุ ูุฌุจ <span class="vocab-term-alt bg-red-200 text-red-900">ุนูุณ ุงุชุฌุงู</span> ุฅุดุงุฑุฉ ุงููุชุจุงููุฉ.</p>
                             <div class="mt-4 p-4 bg-white rounded-lg border">
                                 <p class="text-center my-2 p-3 bg-indigo-50 rounded-md text-xl">
                                    <span class="math-eq">&lt;</span> ูุตุจุญ <span class="math-eq">&gt;</span>
                                    <span class="mx-4 font-bold">ู</span>
                                    <span class="math-eq">โฅ</span> ูุตุจุญ <span class="math-eq">โค</span>
                                 </p>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">๐ฏ ุซุงููุงู: ุฃูุซูุฉ ุชูุงุนููุฉ</h2>
                    <div class="p-6 bg-gray-50 rounded-lg">
                        <div class="flex flex-col space-y-8">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                
                                <!-- ุงููุซุงู ุงูุชูุงุนูู 1 -->
                                <div id="interactive-container-1" class="p-4 bg-white rounded-lg shadow">
                                    <p class="text-lg font-semibold mb-4">ูุซุงู ูก: ุญู ุงููุชุจุงููุฉ <span class="math-eq">ูจู โฅ ูคูจ</span></p>
                                    <div class="steps-container space-y-4 min-h-[250px]">
                                        <div class="interactive-placeholder text-center text-gray-500 p-4"><p>ุงุถุบุท "ุงูุชุงูู" ูุจุฏุก ุฎุทูุงุช ุงูุญู</p></div>
                                        <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ ูก: ุงููุณูุฉ ุนูู ูจ</h4><p class="text-center"><span class="math-eq"><span class="fraction"><span>ูจู</span><span class="frac-bar"></span><span class="highlight-number">ูจ</span></span> โฅ <span class="fraction"><span>ูคูจ</span><span class="frac-bar"></span><span class="highlight-number">ูจ</span></span></span></p></div>
                                        <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ ูข: ุงูุชุจุณูุท</h4><p class="text-center"><span class="math-eq">ู โฅ ูฆ</span></p></div>
                                        <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ ูฃ: ูุฌููุนุฉ ุงูุญู</h4><p class="text-center"><span class="math-eq">{ู | ู โฅ ูฆ}</span></p></div>
                                        <div class="step-interactive p-4 bg-green-200 rounded-lg step-box border-green-600"><h4 class="font-bold">ุงูุฎุทูุฉ ูค: ุงูุชูุซูู ุงูุจูุงูู</h4>
                                            <div class="number-line-wrapper">
                                                <div class="ticks-container">
                                                    <div class="tick" style="left: 20%;"><span>ูค</span></div>
                                                    <div class="tick" style="left: 40%;"><span>ูฅ</span></div>
                                                    <div class="tick" style="left: 60%;"><span>ูฆ</span></div>
                                                    <div class="tick" style="left: 80%;"><span>ูง</span></div>
                                                    <div class="number-line">
                                                        <div class="solution-line" style="left: 60%; width: 40%;"></div>
                                                        <div class="solution-point closed" style="left: 60%;"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="flex justify-between mt-6">
                                        <button data-example="1" class="prev-btn bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed">ุฑุฌูุน</button>
                                        <div>
                                            <button data-example="1" class="next-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">ุงูุชุงูู</button>
                                            <button data-example="1" class="reset-btn hidden bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700">ุฅุนุงุฏุฉ</button>
                                        </div>
                                    </div>
                                </div>

                                <!-- ุงููุซุงู ุงูุชูุงุนูู 2 -->
                                <div id="interactive-container-2" class="p-4 bg-white rounded-lg shadow">
                                    <p class="text-lg font-semibold mb-4">ูุซุงู ูข: ุญู ุงููุชุจุงููุฉ <span class="math-eq">-ูฅู > ูขูฅ</span></p>
                                    <div class="steps-container space-y-4 min-h-[250px]">
                                        <div class="interactive-placeholder text-center text-gray-500 p-4"><p>ุงุถุบุท "ุงูุชุงูู" ูุจุฏุก ุฎุทูุงุช ุงูุญู</p></div>
                                        <div class="step-interactive p-4 bg-red-100 rounded-lg step-box border-red-500"><h4 class="font-bold text-red-800">ุงูุฎุทูุฉ ูก: ุงููุณูุฉ ุนูู -ูฅ (ูุนูุณ ุงูุฅุดุงุฑุฉ)</h4><p class="text-center"><span class="math-eq"><span class="fraction"><span>-ูฅู</span><span class="frac-bar"></span><span class="highlight-number">-ูฅ</span></span> < <span class="fraction"><span>ูขูฅ</span><span class="frac-bar"></span><span class="highlight-number">-ูฅ</span></span></span></p></div>
                                        <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ ูข: ุงูุชุจุณูุท</h4><p class="text-center"><span class="math-eq">ู < -ูฅ</span></p></div>
                                        <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ ูฃ: ูุฌููุนุฉ ุงูุญู</h4><p class="text-center"><span class="math-eq">{ู | ู < -ูฅ}</span></p></div>
                                        <div class="step-interactive p-4 bg-green-200 rounded-lg step-box border-green-600"><h4 class="font-bold">ุงูุฎุทูุฉ ูค: ุงูุชูุซูู ุงูุจูุงูู</h4>
                                            <div class="number-line-wrapper">
                                                <div class="ticks-container">
                                                    <div class="tick" style="left: 20%;"><span>-ูง</span></div>
                                                    <div class="tick" style="left: 40%;"><span>-ูฆ</span></div>
                                                    <div class="tick" style="left: 60%;"><span>-ูฅ</span></div>
                                                    <div class="tick" style="left: 80%;"><span>-ูค</span></div>
                                                    <div class="number-line">
                                                        <div class="solution-line" style="left: 0%; width: 60%;"></div>
                                                        <div class="solution-point open" style="left: 60%;"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="flex justify-between mt-6">
                                        <button data-example="2" class="prev-btn bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed">ุฑุฌูุน</button>
                                        <div>
                                            <button data-example="2" class="next-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">ุงูุชุงูู</button>
                                            <button data-example="2" class="reset-btn hidden bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700">ุฅุนุงุฏุฉ</button>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- ุงููุซุงู ุงูุชูุงุนูู 3 -->
                                <div id="interactive-container-3" class="p-4 bg-white rounded-lg shadow">
                                    <p class="text-lg font-semibold mb-4">ูุซุงู ูฃ: ุญู ุงููุชุจุงููุฉ <span class="math-eq"><span class="fraction"><span>ุณ</span><span class="frac-bar"></span><span>ูค</span></span> โค ูข</span></p>
                                    <div class="steps-container space-y-4 min-h-[250px]">
                                        <div class="interactive-placeholder text-center text-gray-500 p-4"><p>ุงุถุบุท "ุงูุชุงูู" ูุจุฏุก ุฎุทูุงุช ุงูุญู</p></div>
                                        <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ ูก: ุงูุถุฑุจ ูู ูค</h4><p class="text-center"><span class="math-eq"><span class="fraction"><span>ุณ</span><span class="frac-bar"></span><span>ูค</span></span> ร <span class="highlight-number">ูค</span> โค ูข ร <span class="highlight-number">ูค</span></span></p></div>
                                        <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ ูข: ุงูุชุจุณูุท</h4><p class="text-center"><span class="math-eq">ุณ โค ูจ</span></p></div>
                                        <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ ูฃ: ูุฌููุนุฉ ุงูุญู</h4><p class="text-center"><span class="math-eq">{ุณ | ุณ โค ูจ}</span></p></div>
                                        <div class="step-interactive p-4 bg-green-200 rounded-lg step-box border-green-600"><h4 class="font-bold">ุงูุฎุทูุฉ ูค: ุงูุชูุซูู ุงูุจูุงูู</h4>
                                            <div class="number-line-wrapper">
                                                <div class="ticks-container">
                                                    <div class="tick" style="left: 25%;"><span>ูง</span></div>
                                                    <div class="tick" style="left: 50%;"><span>ูจ</span></div>
                                                    <div class="tick" style="left: 75%;"><span>ูฉ</span></div>
                                                    <div class="number-line">
                                                        <div class="solution-line" style="left: 0%; width: 50%;"></div>
                                                        <div class="solution-point closed" style="left: 50%;"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="flex justify-between mt-6">
                                        <button data-example="3" class="prev-btn bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed">ุฑุฌูุน</button>
                                        <div>
                                            <button data-example="3" class="next-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">ุงูุชุงูู</button>
                                            <button data-example="3" class="reset-btn hidden bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700">ุฅุนุงุฏุฉ</button>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- ุงููุซุงู ุงูุชูุงุนูู 4 -->
                                <div id="interactive-container-4" class="p-4 bg-white rounded-lg shadow">
                                    <p class="text-lg font-semibold mb-4">ูุซุงู ูค: ุญู ุงููุชุจุงููุฉ <span class="math-eq"><span class="fraction"><span>ู</span><span class="frac-bar"></span><span>-ูฃ</span></span> < ูฆ</span></p>
                                    <div class="steps-container space-y-4 min-h-[250px]">
                                        <div class="interactive-placeholder text-center text-gray-500 p-4"><p>ุงุถุบุท "ุงูุชุงูู" ูุจุฏุก ุฎุทูุงุช ุงูุญู</p></div>
                                        <div class="step-interactive p-4 bg-red-100 rounded-lg step-box border-red-500"><h4 class="font-bold text-red-800">ุงูุฎุทูุฉ ูก: ุงูุถุฑุจ ูู -ูฃ (ูุนูุณ ุงูุฅุดุงุฑุฉ)</h4><p class="text-center"><span class="math-eq"><span class="fraction"><span>ู</span><span class="frac-bar"></span><span>-ูฃ</span></span> ร (<span class="highlight-number">-ูฃ</span>) > ูฆ ร (<span class="highlight-number">-ูฃ</span>)</span></p></div>
                                        <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ ูข: ุงูุชุจุณูุท</h4><p class="text-center"><span class="math-eq">ู > -ูกูจ</span></p></div>
                                        <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ ูฃ: ูุฌููุนุฉ ุงูุญู</h4><p class="text-center"><span class="math-eq">{ู | ู > -ูกูจ}</span></p></div>
                                        <div class="step-interactive p-4 bg-green-200 rounded-lg step-box border-green-600"><h4 class="font-bold">ุงูุฎุทูุฉ ูค: ุงูุชูุซูู ุงูุจูุงูู</h4>
                                            <div class="number-line-wrapper">
                                                <div class="ticks-container">
                                                    <div class="tick" style="left: 20%;"><span>-ูขู</span></div>
                                                    <div class="tick" style="left: 40%;"><span>-ูกูฉ</span></div>
                                                    <div class="tick" style="left: 60%;"><span>-ูกูจ</span></div>
                                                    <div class="tick" style="left: 80%;"><span>-ูกูง</span></div>
                                                    <div class="number-line">
                                                        <div class="solution-line" style="left: 60%; width: 40%;"></div>
                                                        <div class="solution-point open" style="left: 60%;"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="flex justify-between mt-6">
                                        <button data-example="4" class="prev-btn bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed">ุฑุฌูุน</button>
                                        <div>
                                            <button data-example="4" class="next-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">ุงูุชุงูู</button>
                                            <button data-example="4" class="reset-btn hidden bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700">ุฅุนุงุฏุฉ</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                <!-- ุงููุซุงู ุงูุชูุงุนูู 5 (ุฌุฏูุฏ) -->
                                <div id="interactive-container-5" class="p-4 bg-white rounded-lg shadow">
                                    <p class="text-lg font-semibold mb-4">ูุซุงู ูฅ: ุญู <span class="math-eq"><span class="fraction"><span>ูข</span><span class="frac-bar"></span><span>ูฃ</span></span> ุฃ โฅ ูฆ</span></p>
                                    <div class="steps-container space-y-4 min-h-[250px]">
                                        <div class="interactive-placeholder text-center text-gray-500 p-4"><p>ุงุถุบุท "ุงูุชุงูู" ูุจุฏุก ุฎุทูุงุช ุงูุญู</p></div>
                                        <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ ูก: ุงูุถุฑุจ ูู ุงูููููุจ</h4><p class="text-center"><span class="math-eq"><span class="highlight-number"><span class="fraction"><span>ูฃ</span><span class="frac-bar"></span><span>ูข</span></span></span> ร <span class="fraction"><span>ูข</span><span class="frac-bar"></span><span>ูฃ</span></span> ุฃ โฅ ูฆ ร <span class="highlight-number"><span class="fraction"><span>ูฃ</span><span class="frac-bar"></span><span>ูข</span></span></span></span></p></div>
                                        <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ ูข: ุงูุชุจุณูุท</h4><p class="text-center"><span class="math-eq">ุฃ โฅ <span class="fraction"><span>ูกูจ</span><span class="frac-bar"></span><span>ูข</span></span></span></p><p class="text-center mt-2"><span class="math-eq">ุฃ โฅ ูฉ</span></p></div>
                                        <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ ูฃ: ูุฌููุนุฉ ุงูุญู</h4><p class="text-center"><span class="math-eq">{ุฃ | ุฃ โฅ ูฉ}</span></p></div>
                                        <div class="step-interactive p-4 bg-green-200 rounded-lg step-box border-green-600"><h4 class="font-bold">ุงูุฎุทูุฉ ูค: ุงูุชูุซูู ุงูุจูุงูู</h4>
                                            <div class="number-line-wrapper">
                                                <div class="ticks-container">
                                                    <div class="tick" style="left: 25%;"><span>ูจ</span></div>
                                                    <div class="tick" style="left: 50%;"><span>ูฉ</span></div>
                                                    <div class="tick" style="left: 75%;"><span>ูกู</span></div>
                                                    <div class="number-line">
                                                        <div class="solution-line" style="left: 50%; width: 50%;"></div>
                                                        <div class="solution-point closed" style="left: 50%;"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="flex justify-between mt-6">
                                        <button data-example="5" class="prev-btn bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed">ุฑุฌูุน</button>
                                        <div>
                                            <button data-example="5" class="next-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">ุงูุชุงูู</button>
                                            <button data-example="5" class="reset-btn hidden bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700">ุฅุนุงุฏุฉ</button>
                                        </div>
                                    </div>
                                </div>
                                <!-- ุงููุซุงู ุงูุชูุงุนูู 6 (ุฌุฏูุฏ) -->
                                <div id="interactive-container-6" class="p-4 bg-white rounded-lg shadow">
                                    <p class="text-lg font-semibold mb-4">ูุซุงู ูฆ: ุญู <span class="math-eq">-<span class="fraction"><span>ูฃ</span><span class="frac-bar"></span><span>ูฅ</span></span> ุจ > ูฉ</span></p>
                                    <div class="steps-container space-y-4 min-h-[250px]">
                                        <div class="interactive-placeholder text-center text-gray-500 p-4"><p>ุงุถุบุท "ุงูุชุงูู" ูุจุฏุก ุฎุทูุงุช ุงูุญู</p></div>
                                        <div class="step-interactive p-4 bg-red-100 rounded-lg step-box border-red-500"><h4 class="font-bold text-red-800">ุงูุฎุทูุฉ ูก: ุงูุถุฑุจ ูู ุงูููููุจ (ูุนูุณ ุงูุฅุดุงุฑุฉ)</h4><p class="text-center"><span class="math-eq">ุจ < ูฉ ร (<span class="highlight-number">-<span class="fraction"><span>ูฅ</span><span class="frac-bar"></span><span>ูฃ</span></span></span>)</span></p></div>
                                        <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ ูข: ุงูุชุจุณูุท</h4><p class="text-center"><span class="math-eq">ุจ < -<span class="fraction"><span>ูคูฅ</span><span class="frac-bar"></span><span>ูฃ</span></span></span></p><p class="text-center mt-2"><span class="math-eq">ุจ < -ูกูฅ</span></p></div>
                                        <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ ูฃ: ูุฌููุนุฉ ุงูุญู</h4><p class="text-center"><span class="math-eq">{ุจ | ุจ < -ูกูฅ}</span></p></div>
                                        <div class="step-interactive p-4 bg-green-200 rounded-lg step-box border-green-600"><h4 class="font-bold">ุงูุฎุทูุฉ ูค: ุงูุชูุซูู ุงูุจูุงูู</h4>
                                            <div class="number-line-wrapper">
                                                <div class="ticks-container">
                                                    <div class="tick" style="left: 25%;"><span>-ูกูฆ</span></div>
                                                    <div class="tick" style="left: 50%;"><span>-ูกูฅ</span></div>
                                                    <div class="tick" style="left: 75%;"><span>-ูกูค</span></div>
                                                    <div class="number-line">
                                                        <div class="solution-line" style="left: 0%; width: 50%;"></div>
                                                        <div class="solution-point open" style="left: 50%;"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="flex justify-between mt-6">
                                        <button data-example="6" class="prev-btn bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed">ุฑุฌูุน</button>
                                        <div>
                                            <button data-example="6" class="next-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">ุงูุชุงูู</button>
                                            <button data-example="6" class="reset-btn hidden bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700">ุฅุนุงุฏุฉ</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="mt-12">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-2xl font-bold text-gray-800">โ๏ธ ุซุงูุซุงู: ุญุงู ุฏูุฑู! ุงุฎุชุจุฑ ูููู</h2>
                        <div id="attempts-counter" class="text-sm font-bold text-gray-600"></div>
                    </div>
                    <form id="quizForm" class="p-6 bg-gray-50 rounded-lg space-y-8"></form>
                    <div id="quiz-results" class="hidden mt-6 p-4 rounded-lg text-center">
                        <h3 class="text-xl font-bold">ูุชูุฌุชู ุงูููุงุฆูุฉ</h3>
                        <p id="quiz-score" class="text-4xl font-bold my-2"></p>
                        <div id="save-status" class="mt-4 text-sm font-semibold"></div>
                        <button id="retake-quiz-btn" class="hidden mt-4 bg-blue-600 text-white font-medium py-2 px-6 rounded-lg hover:bg-blue-700">ุฅุนุงุฏุฉ ุงูุงุฎุชุจุงุฑ</button>
                    </div>
                </section>
            </div>
        </main>
        <footer id="main-footer" class="bg-gray-200 py-4"></footer>
    </div>

    <div id="explanationModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-white rounded-lg shadow-2xl p-6 max-w-lg w-full">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold">๐ก ุดุฑุญ ุงูุฅุฌุงุจุฉ</h3>
                <button id="closeModalBtn" class="p-2 -m-2 rounded-full hover:bg-gray-200">
                    <svg class="h-6 w-6 text-gray-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
            </div>
            <div id="explanationText" class="text-gray-700 max-h-[60vh] overflow-y-auto"></div>
        </div>
    </div>
    <div id="smartExplanationModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-white rounded-lg shadow-2xl p-6 max-w-lg w-full border-t-4 border-purple-500">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-purple-800">๐ง ุงูุญู ุงูุฐูู</h3>
                <button id="closeSmartModalBtn" class="p-2 -m-2 rounded-full hover:bg-gray-200">
                    <svg class="h-6 w-6 text-gray-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
            </div>
            <div id="smartExplanationText" class="text-gray-700 max-h-[60vh] overflow-y-auto"></div>
        </div>
    </div>

    <script>
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzrf1-At3Pq7i39bGV3F1iD3-b0G-WWyRi5cgpKeQjyn_N5fh2EmGhoyRKUsbLd-F_UJQ/exec";
    const MAX_ATTEMPTS = 3;
    let currentQuestions = []; 
    function getStudentFromStorage() { const studentDataString = localStorage.getItem('currentStudent'); if (studentDataString) { try { return JSON.parse(studentDataString); } catch (e) { return null; } } return null; }
    function buildHeader(studentData, lessonTitle = null) { const headerContainer = document.getElementById('main-header'); if (!headerContainer) return; let titleHtml; if (lessonTitle) { titleHtml = `<div><h2 class="text-sm text-gray-500 leading-tight">ููุตุฉ ุงูุฑูุงุถูุงุช ุงูุชูุงุนููุฉ</h2><h1 class="text-xl font-bold text-indigo-700 leading-tight">${lessonTitle}</h1></div>`; } else { titleHtml = `<a href="../index.html" target="_top"><h1 class="text-2xl font-bold text-blue-800">ููุตุฉ ุงูุฑูุงุถูุงุช ุงูุชูุงุนููุฉ</h1></a>`; } let userInfoHtml = ''; if (studentData) { userInfoHtml = `<div class="flex items-center gap-4"><span class="font-semibold">ุฃููุงูุ ${studentData.name}</span><a href="../index.html" target="_top" id="logout-link" class="bg-red-500 text-white py-1 px-3 rounded-lg hover:bg-red-600">ุฎุฑูุฌ</a></div>`; } else { userInfoHtml = `<p class="text-lg text-gray-600">ุฒุงุฆุฑ</p>`; } headerContainer.innerHTML = `<div class="container mx-auto px-6 py-4 flex justify-between items-center">${titleHtml}${userInfoHtml}</div>`; const logoutLink = headerContainer.querySelector('#logout-link'); if(logoutLink) { logoutLink.addEventListener('click', () => { localStorage.removeItem('currentStudent'); }); } }
    function buildFooter() { const footerContainer = document.getElementById('main-footer'); if (!footerContainer) return; footerContainer.innerHTML = `<div class="container mx-auto px-6"><p class="text-center text-gray-600 text-sm">ยฉ 2024 ุฌููุน ุงูุญููู ูุญููุธุฉ | ุชุตููู ูุชุทููุฑ: ุฃ. ุนุจุฏุงูุนุฒูุฒ ุฎุงูุฏ ุงูุนุจูุงู</p></div>`; }
    function initializeQuiz(lessonId, questions, studentData) { currentQuestions = questions; const quizForm = document.getElementById('quizForm'); if (!quizForm) return; if (questions.length === 0) { quizForm.innerHTML = `<p class="text-center text-gray-600">ูุง ุชูุฌุฏ ุฃุณุฆูุฉ ูุชุงุญุฉ ููุฐุง ุงูุฏุฑุณ ุญุงููุงู.</p>`; return; } let attemptsLeft; if (studentData) { const studentLessonData = studentData.lessons?.[lessonId] || { attempts: 0 }; attemptsLeft = MAX_ATTEMPTS - studentLessonData.attempts; } else { attemptsLeft = 1; } const attemptsCounter = document.getElementById('attempts-counter'); if (attemptsCounter) { attemptsCounter.innerHTML = `ุงููุญุงููุงุช ุงููุชุจููุฉ: <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full">${attemptsLeft}</span>`; } const quizHtml = questions.map((q, index) => { const optionsHTML = q.options.map((opt, optIndex) => `<div><input type="radio" name="q${index}" value="${opt.value}" id="q${index}_opt${optIndex}" class="hidden"><label for="q${index}_opt${optIndex}" class="option-label">${opt.display}</label></div>`).join(''); const smartButtonHTML = q.smartExplanation ? `<button type="button" id="smart-explain-btn-${index}" class="hidden mt-2 text-xs text-purple-600 hover:underline font-semibold">๐ง ุงูุญู ุงูุฐูู</button>` : ''; return `<div class="p-4 border-2 border-gray-200 rounded-lg"><p class="font-bold">${index + 1}. <span class="text-yellow-500">${q.level}</span> ${q.text}</p><div class="grid grid-cols-1 sm:grid-cols-2 gap-3 mt-3">${optionsHTML}</div><div id="feedback-q${index}" class="mt-2 text-sm font-bold"></div><div class="flex items-center space-x-4 space-x-reverse">${smartButtonHTML}<button type="button" id="explain-btn-${index}" class="hidden mt-2 text-xs text-blue-600 hover:underline">ุงุนุฑู ููุงุฐุงุ</button></div></div>`; }).join(''); quizForm.innerHTML = quizHtml + `<button type="submit" id="submit-quiz-btn" class="w-full text-white bg-green-600 hover:bg-green-700 font-medium rounded-lg text-lg px-5 py-3 mt-8">ุชุญูู ูู ุฅุฌุงุจุงุชู</button>`; questions.forEach((q, index) => { const explainBtn = document.getElementById(`explain-btn-${index}`); if(explainBtn) explainBtn.addEventListener('click', () => showExplanation(index)); if (q.smartExplanation) { const smartExplainBtn = document.getElementById(`smart-explain-btn-${index}`); if(smartExplainBtn) smartExplainBtn.addEventListener('click', () => showSmartExplanation(index)); } }); if (attemptsLeft <= 0) { const submitBtn = quizForm.querySelector('#submit-quiz-btn'); submitBtn.disabled = true; submitBtn.textContent = 'ูุง ุชูุฌุฏ ูุญุงููุงุช ูุชุจููุฉ'; submitBtn.classList.add('bg-gray-400', 'hover:bg-gray-400'); } quizForm.onsubmit = (e) => { e.preventDefault(); let score = 0; questions.forEach((q, index) => { const userAnswer = e.target.elements[`q${index}`]?.value; const feedbackEl = document.getElementById(`feedback-q${index}`); if (userAnswer === q.correct) { score++; feedbackEl.textContent = 'โ ุฅุฌุงุจุฉ ุตุญูุญุฉ!'; feedbackEl.className = 'mt-2 text-sm font-bold text-green-600'; } else { feedbackEl.textContent = `โ ุฅุฌุงุจุฉ ุฎุงุทุฆุฉ.`; feedbackEl.className = 'mt-2 text-sm font-bold text-red-600'; } document.getElementById(`explain-btn-${index}`).classList.remove('hidden'); if (q.smartExplanation) { document.getElementById(`smart-explain-btn-${index}`).classList.remove('hidden'); } }); const finalGrade = Math.round((score / questions.length) * 10); const resultsDiv = document.getElementById('quiz-results'); resultsDiv.classList.remove('hidden'); document.getElementById('quiz-score').textContent = `${finalGrade} / 10`; if (studentData) { saveGrade(lessonId, finalGrade, studentData.id); if (attemptsLeft - 1 > 0) { document.getElementById('retake-quiz-btn').classList.remove('hidden'); } } else { document.getElementById('save-status').textContent = 'ุชู ุนุฑุถ ูุชูุฌุชู. ุณุฌู ุงูุฏุฎูู ูุญูุธ ุชูุฏูู.'; } e.target.querySelector('#submit-quiz-btn').disabled = true; }; }
    function saveGrade(lessonId, grade, studentId) { if (!studentId) return; const saveStatus = document.getElementById('save-status'); saveStatus.textContent = 'ุฌุงุฑู ุญูุธ ูุชูุฌุชู...'; const url = `${SCRIPT_URL}?action=saveGrade&studentId=${studentId}&lessonId=${lessonId}&grade=${grade}`; fetch(url) .then(res => res.json()) .then(result => { if (result.status === 'success') { saveStatus.textContent = 'โ ุชู ุญูุธ ูุชูุฌุชู ุจูุฌุงุญ! ุณุชุธูุฑ ูู ููุญุฉ ุงูุชุญูู ุนูุฏ ุงูุนูุฏุฉ.'; const studentData = JSON.parse(localStorage.getItem('currentStudent')); if (!studentData.lessons) studentData.lessons = {}; if (!studentData.lessons[lessonId] || studentData.lessons[lessonId].grade < grade) { studentData.lessons[lessonId] = { grade: grade, attempts: (studentData.lessons[lessonId]?.attempts || 0) + 1 }; } else { studentData.lessons[lessonId].attempts++; } localStorage.setItem('currentStudent', JSON.stringify(studentData)); } else { throw new Error(result.message); } }) .catch(error => { saveStatus.textContent = 'โ ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุญูุธ ุงูุฏุฑุฌุฉ.'; console.error("Save Grade Error:", error); }); }
    function showExplanation(questionIndex) { const modal = document.getElementById('explanationModal'); const explanationText = document.getElementById('explanationText'); if(modal && explanationText && currentQuestions[questionIndex] && currentQuestions[questionIndex].explanation) { explanationText.innerHTML = currentQuestions[questionIndex].explanation; modal.classList.remove('hidden'); } }
    function closeModal() { const modal = document.getElementById('explanationModal'); if(modal) modal.classList.add('hidden'); }
    function showSmartExplanation(questionIndex) { const modal = document.getElementById('smartExplanationModal'); const explanationText = document.getElementById('smartExplanationText'); if(modal && explanationText && currentQuestions[questionIndex] && currentQuestions[questionIndex].smartExplanation) { explanationText.innerHTML = currentQuestions[questionIndex].smartExplanation; modal.classList.remove('hidden'); } }
    function closeSmartModal() { const modal = document.getElementById('smartExplanationModal'); if(modal) modal.classList.add('hidden'); }
    
    const LESSON_ID = 'c4_l2'; 
    
    function generateQuiz() { 
        const questionBank = [
            { 
                type: 'mcq', level: 'โญ', text: `ุญู ุงููุชุจุงููุฉ <span class="math-eq">ูงุต < -ูคูข</span>`,
                options: [ 
                    { display: 'ุต < -ูฆ', value: 'A' }, { display: 'ุต > -ูฆ', value: 'B' }, 
                    { display: 'ุต < ูฆ', value: 'C' }, { display: 'ุต > ูฆ', value: 'D' }
                ], 
                correct: 'A',
                explanation: `<p>ูุญู ุงููุชุจุงููุฉุ ููุณู ุงูุทุฑููู ุนูู <span class="highlight-number">ูง</span>.</p><p>ุจูุง ุฃู <span class="highlight-number">ูง</span> ุนุฏุฏ ููุฌุจุ ูุฅู ุงุชุฌุงู ุฅุดุงุฑุฉ ุงููุชุจุงููุฉ ูุง ูุชุบูุฑ.</p><p><span class="math-eq"><span class="fraction"><span>ูงุต</span><span class="frac-bar"></span><span>ูง</span></span> < <span class="fraction"><span>-ูคูข</span><span class="frac-bar"></span><span>ูง</span></span></span></p><p>ุงูุญู ูู <span class="math-eq">ุต < -ูฆ</span>.</p>`,
            },
            { 
                type: 'mcq', level: 'โญโญ', text: `ุญู ุงููุชุจุงููุฉ <span class="math-eq"><span class="fraction"><span>ุจ</span><span class="frac-bar"></span><span>-ูข</span></span> โฅ ูจ</span>`,
                options: [ 
                    { display: 'ุจ โฅ -ูกูฆ', value: 'A' }, { display: 'ุจ โค -ูค', value: 'B' }, 
                    { display: 'ุจ โค -ูกูฆ', value: 'C' }, { display: 'ุจ โฅ -ูค', value: 'D' }
                ], 
                correct: 'C',
                explanation: `<p>ูุญู ุงููุชุจุงููุฉุ ูุถุฑุจ ุงูุทุฑููู ูู <span class="highlight-number">-ูข</span>.</p><p>ุจูุง ุฃููุง ูุถุฑุจ ูู ุนุฏุฏ ุณุงูุจุ <span class="text-red-600 font-bold">ูุฌุจ ุนูุณ ุงุชุฌุงู ุฅุดุงุฑุฉ ุงููุชุจุงููุฉ</span> ูู โฅ ุฅูู โค.</p><p><span class="math-eq">ุจ โฅ ูจ</span>  ->  <span class="math-eq">ุจ โค <span class="highlight-number">ูจ</span> ร (<span class="highlight-number">-ูข</span>)</span></p><p>ุงูุญู ูู <span class="math-eq">ุจ โค -ูกูฆ</span>.</p>`,
                smartExplanation: `<p>ุจูุฌุฑุฏ ุฃู ุชุฑู ุฃูู ุณุชุถุฑุจ ุฃู ุชูุณู ุนูู ุนุฏุฏ ุณุงูุจุ ุงุนูู ุฃู ุงูุฅุดุงุฑุฉ ุณุชูุนูุณ. ูุฐุง ููุบู ุงูุฎูุงุฑูู (ุฃ) ู (ุฏ). ุซู ุงุถุฑุจ <span class="highlight-number">ูจ</span> ูู <span class="highlight-number">-ูข</span> ูุชุญุตู ุนูู <span class="highlight-number">-ูกูฆ</span>.</p>`
            },
            { 
                type: 'mcq', level: 'โญ', text: `ุนูุฏ ุญู ุงููุชุจุงููุฉ <span class="math-eq">-ูกูุฃ โค ูกูู</span>ุ ูุงุฐุง ููุนู ุจุฅุดุงุฑุฉ ุงููุชุจุงููุฉุ`,
                options: [ 
                    { display: 'ุชุจูู ููุง ูู', value: 'A' }, { display: 'ูุนูุณูุง', value: 'B' }, 
                    { display: 'ูุญุฐููุง', value: 'C' }, { display: 'ูุบูุฑูุง ุฅูู ูุณุงูู', value: 'D' }
                ], 
                correct: 'B',
                explanation: `<p>ูุญู ุงููุชุจุงููุฉุ ุณููุณู ุงูุทุฑููู ุนูู <span class="highlight-number">-ูกู</span>.</p><p>ุงููุงุนุฏุฉ ุชููู: ุนูุฏ ุงููุณูุฉ ุนูู ุนุฏุฏ ุณุงูุจุ ูุฌุจ ุนูุณ ุงุชุฌุงู ุฅุดุงุฑุฉ ุงููุชุจุงููุฉ.</p>`,
            },
            { 
                type: 'mcq', level: 'โญโญ', text: `ูุง ุงููุชุจุงููุฉ ุงูุชู ุชูุซู ุงูุฌููุฉ "ูุงุชุฌ ูุณูุฉ ุนุฏุฏ ุนูู <span class="highlight-number">ูฅ</span> ุฃูุจุฑ ูู ุฃู ูุณุงูู <span class="highlight-number">ูฃ</span>"ุ`,
                options: [ 
                    { display: '<span class="math-eq"><span class="fraction"><span>ู</span><span class="frac-bar"></span><span>ูฅ</span></span> โฅ ูฃ</span>', value: 'A' }, 
                    { display: '<span class="math-eq"><span class="fraction"><span>ู</span><span class="frac-bar"></span><span>ูฅ</span></span> โค ูฃ</span>', value: 'B' }, 
                    { display: '<span class="math-eq">ูฅู โฅ ูฃ</span>', value: 'C' }, 
                    { display: '<span class="math-eq">ู - ูฅ โฅ ูฃ</span>', value: 'D' }
                ], 
                correct: 'A',
                explanation: `<p>"ูุณูุฉ ุนุฏุฏ (ู) ุนูู <span class="highlight-number">ูฅ</span>" ุชููุชุจ <span class="math-eq"><span class="fraction"><span>ู</span><span class="frac-bar"></span><span>ูฅ</span></span></span>.</p><p>"ุฃูุจุฑ ูู ุฃู ูุณุงูู <span class="highlight-number">ูฃ</span>" ูู ุงูุฑูุฒ <span class="math-eq">โฅ</span>.</p><p>ุฅุฐูุ ุงููุชุจุงููุฉ ูู <span class="math-eq"><span class="fraction"><span>ู</span><span class="frac-bar"></span><span>ูฅ</span></span> โฅ ูฃ</span>.</p>`
            },
            { 
                type: 'mcq', level: 'โญโญโญ', text: `ุญู ุงููุชุจุงููุฉ <span class="math-eq">-<span class="fraction"><span>ูฃ</span><span class="frac-bar"></span><span>ูค</span></span>ุฌู > ูฉ</span>`,
                options: [ 
                    { display: 'ุฌู > -ูกูข', value: 'A' }, { display: 'ุฌู < -ูกูข', value: 'B' }, 
                    { display: 'ุฌู > ูกูข', value: 'C' }, { display: 'ุฌู < ูกูข', value: 'D' }
                ], 
                correct: 'B',
                explanation: `<p>ูุญู ุงููุชุจุงููุฉุ ูุถุฑุจ ุงูุทุฑููู ูู ููููุจ ุงููุณุฑ ููู <span class="math-eq">-<span class="fraction"><span>ูค</span><span class="frac-bar"></span><span>ูฃ</span></span></span>.</p><p>ุจูุง ุฃููุง ูุถุฑุจ ูู ุนุฏุฏ ุณุงูุจุ <span class="text-red-600 font-bold">ูุฌุจ ุนูุณ ุงุชุฌุงู ุงูุฅุดุงุฑุฉ</span> ูู > ุฅูู <.</p><p><span class="math-eq">ุฌู < <span class="highlight-number">ูฉ</span> ร (-<span class="fraction"><span>ูค</span><span class="frac-bar"></span><span>ูฃ</span></span>)</span></p><p><span class="math-eq">ุฌู < -<span class="fraction"><span>ูฃูฆ</span><span class="frac-bar"></span><span>ูฃ</span></span></span></p><p>ุงูุญู ูู <span class="math-eq">ุฌู < -ูกูข</span>.</p>`
            },
            { 
                type: 'mcq', level: 'โญ', text: `ุญู ุงููุชุจุงููุฉ <span class="math-eq">ูกูขุณ โค ูฆู</span>`,
                options: [ 
                    { display: 'ุณ โค ูฅ', value: 'A' }, { display: 'ุณ โฅ ูฅ', value: 'B' }, 
                    { display: 'ุณ โค -ูฅ', value: 'C' }, { display: 'ุณ โฅ -ูฅ', value: 'D' }
                ], 
                correct: 'A',
                explanation: `<p>ูุญู ุงููุชุจุงููุฉุ ููุณู ุงูุทุฑููู ุนูู <span class="highlight-number">ูกูข</span>.</p><p>ุจูุง ุฃู <span class="highlight-number">ูกูข</span> ุนุฏุฏ ููุฌุจุ ูุฅู ุงุชุฌุงู ุฅุดุงุฑุฉ ุงููุชุจุงููุฉ ูุง ูุชุบูุฑ.</p><p>ุงูุญู ูู <span class="math-eq">ุณ โค ูฅ</span>.</p>`,
            },
            { 
                type: 'mcq', level: 'โญโญ', text: `ุญู ุงููุชุจุงููุฉ <span class="math-eq"><span class="fraction"><span>ู</span><span class="frac-bar"></span><span>-ูฆ</span></span> > ูค</span>`,
                options: [ 
                    { display: 'ู > -ูขูค', value: 'A' }, { display: 'ู < -ูขูค', value: 'B' }, 
                    { display: 'ู > ูขูค', value: 'C' }, { display: 'ู < ูขูค', value: 'D' }
                ], 
                correct: 'B',
                explanation: `<p>ูุญู ุงููุชุจุงููุฉุ ูุถุฑุจ ุงูุทุฑููู ูู <span class="highlight-number">-ูฆ</span>.</p><p>ุจูุง ุฃููุง ูุถุฑุจ ูู ุนุฏุฏ ุณุงูุจุ <span class="text-red-600 font-bold">ูุฌุจ ุนูุณ ุงุชุฌุงู ุงูุฅุดุงุฑุฉ</span> ูู > ุฅูู <.</p><p>ุงูุญู ูู <span class="math-eq">ู < -ูขูค</span>.</p>`,
            },
            { 
                type: 'mcq', level: 'โญ', text: `ุฃุฑุจุนุฉ ุฃูุซุงู ุนุฏุฏ ูุง ูู ุนูู ุงูุฃูุซุฑ <span class="highlight-number">ูขู</span>. ุฃู ูุชุจุงููุฉ ุชูุซู ูุฐู ุงูุฌููุฉุ`,
                options: [ 
                    { display: 'ูคู > ูขู', value: 'A' }, { display: 'ูคู < ูขู', value: 'B' }, 
                    { display: 'ูคู โฅ ูขู', value: 'C' }, { display: 'ูคู โค ูขู', value: 'D' }
                ], 
                correct: 'D',
                explanation: `<p>"ุฃุฑุจุนุฉ ุฃูุซุงู ุนุฏุฏ" ุชุนูู <span class="math-eq">ูคู</span>.</p><p>ุนุจุงุฑุฉ "ุนูู ุงูุฃูุซุฑ" ุชุนูู ุฃุตุบุฑ ูู ุฃู ูุณุงูู <span class="math-eq">โค</span>.</p><p>ุฅุฐูุ ุงููุชุจุงููุฉ ูู <span class="math-eq">ูคู โค ูขู</span>.</p>`,
            },
            { 
                type: 'mcq', level: 'โญโญ', text: `ุญู ุงููุชุจุงููุฉ <span class="math-eq"><span class="fraction"><span>ูฃ</span><span class="frac-bar"></span><span>ูง</span></span>ุฏ < ูกูฅ</span>`,
                options: [ 
                    { display: 'ุฏ < ูฃูฅ', value: 'A' }, { display: 'ุฏ > ูฃูฅ', value: 'B' }, 
                    { display: 'ุฏ < ูขูก', value: 'C' }, { display: 'ุฏ > ูขูก', value: 'D' }
                ], 
                correct: 'A',
                explanation: `<p>ูุญู ุงููุชุจุงููุฉุ ูุถุฑุจ ุงูุทุฑููู ูู ููููุจ ุงููุณุฑ ููู <span class="math-eq"><span class="fraction"><span>ูง</span><span class="frac-bar"></span><span>ูฃ</span></span></span>.</p><p>ุจูุง ุฃู ุงูููููุจ ุนุฏุฏ ููุฌุจุ ูุง ูุนูุณ ุงุชุฌุงู ุงูุฅุดุงุฑุฉ.</p><p><span class="math-eq">ุฏ < <span class="highlight-number">ูกูฅ</span> ร <span class="fraction"><span>ูง</span><span class="frac-bar"></span><span>ูฃ</span></span></span></p><p>ุงูุญู ูู <span class="math-eq">ุฏ < ูฃูฅ</span>.</p>`,
            },
            { 
                type: 'mcq', level: 'โญโญโญ', text: `ุญู ุงููุชุจุงููุฉ <span class="math-eq">-<span class="fraction"><span>ูฅ</span><span class="frac-bar"></span><span>ูฆ</span></span>ู โค ูขูฅ</span>`,
                options: [ 
                    { display: 'ู โค -ูฃู', value: 'A' }, { display: 'ู โฅ -ูฃู', value: 'B' }, 
                    { display: 'ู โค ูฃู', value: 'C' }, { display: 'ู โฅ ูฃู', value: 'D' }
                ], 
                correct: 'B',
                explanation: `<p>ูุญู ุงููุชุจุงููุฉุ ูุถุฑุจ ุงูุทุฑููู ูู ููููุจ ุงููุณุฑ ููู <span class="math-eq">-<span class="fraction"><span>ูฆ</span><span class="frac-bar"></span><span>ูฅ</span></span></span>.</p><p>ุจูุง ุฃููุง ูุถุฑุจ ูู ุนุฏุฏ ุณุงูุจุ <span class="text-red-600 font-bold">ูุฌุจ ุนูุณ ุงุชุฌุงู ุงูุฅุดุงุฑุฉ</span> ูู โค ุฅูู โฅ.</p><p><span class="math-eq">ู โฅ <span class="highlight-number">ูขูฅ</span> ร (-<span class="fraction"><span>ูฆ</span><span class="frac-bar"></span><span>ูฅ</span></span>)</span></p><p>ุงูุญู ูู <span class="math-eq">ู โฅ -ูฃู</span>.</p>`,
            },
            { 
                type: 'mcq', level: 'โญโญโญ', text: `ุฅุฐุง ูุงู ุซูุซุง ุนุฏุฏ ูุง ุฃูู ูู <span class="highlight-number">-ูจ</span>ุ ููุง ุญู ุงููุชุจุงููุฉุ`,
                options: [ 
                    { display: 'ุณ < -ูกูข', value: 'A' }, { display: 'ุณ > -ูกูข', value: 'B' }, 
                    { display: 'ุณ < -ูขูค', value: 'C' }, { display: 'ุณ > -ูขูค', value: 'D' }
                ], 
                correct: 'A',
                explanation: `<p>ุฃููุงูุ ููุชุจ ุงููุชุจุงููุฉ: <span class="math-eq"><span class="fraction"><span>ูข</span><span class="frac-bar"></span><span>ูฃ</span></span>ุณ < -ูจ</span>.</p><p>ูุญููุงุ ูุถุฑุจ ุงูุทุฑููู ูู ููููุจ ุงููุณุฑ ููู <span class="math-eq"><span class="fraction"><span>ูฃ</span><span class="frac-bar"></span><span>ูข</span></span></span>.</p><p><span class="math-eq">ุณ < <span class="highlight-number">-ูจ</span> ร <span class="fraction"><span>ูฃ</span><span class="frac-bar"></span><span>ูข</span></span></span></p><p>ุงูุญู ูู <span class="math-eq">ุณ < -ูกูข</span>.</p>`,
            },
            {
                type: 'mcq', level: 'โญโญ', text: `ุญู ุงููุชุจุงููุฉ <span class="math-eq">-ู.ูฅุต โฅ -ูกู</span>`,
                options: [
                    { display: 'ุต โค ูขู', value: 'A' }, { display: 'ุต โฅ ูขู', value: 'B' },
                    { display: 'ุต โค -ูขู', value: 'C' }, { display: 'ุต โฅ -ูขู', value: 'D' }
                ],
                correct: 'A',
                explanation: `<p>ูุญู ุงููุชุจุงููุฉุ ููุณู ุงูุทุฑููู ุนูู <span class="highlight-number">-ู.ูฅ</span>.</p><p>ุจูุง ุฃููุง ููุณู ุนูู ุนุฏุฏ ุณุงูุจุ <span class="text-red-600 font-bold">ูุฌุจ ุนูุณ ุงุชุฌุงู ุงูุฅุดุงุฑุฉ</span> ูู โฅ ุฅูู โค.</p><p>ุชุฐูุฑ ุฃู ุงููุณูุฉ ุนูู <span class="highlight-number">-ู.ูฅ</span> ูู ููุณูุง ุงูุถุฑุจ ูู <span class="highlight-number">-ูข</span>.</p><p><span class="math-eq">ุต โค <span class="highlight-number">-ูกู</span> ร (<span class="highlight-number">-ูข</span>)</span></p><p>ุงูุญู ูู <span class="math-eq">ุต โค ูขู</span>.</p>`
            }
        ];
        
        const shuffled = [...questionBank].sort(() => 0.5 - Math.random());
        // ุณูุชู ุงุฎุชูุงุฑ 5 ุฃุณุฆูุฉ ุนุดูุงุฆูุงู ูู ุงูุจูู ุงูุฐู ูุญุชูู ุนูู 12 ุณุคุงูุงู
        const questionCount = Math.min(shuffled.length, 5);
        return shuffled.slice(0, questionCount);
    }

    document.addEventListener('DOMContentLoaded', () => {
        const exampleContainers = document.querySelectorAll('[id^="interactive-container-"]');
        const state = {};
        exampleContainers.forEach(container => {
            const exampleId = container.id.split('-')[2];
            state[exampleId] = { currentIndex: -1, steps: container.querySelectorAll('.step-interactive'), placeholder: container.querySelector('.interactive-placeholder'), prevBtn: container.querySelector('.prev-btn'), nextBtn: container.querySelector('.next-btn'), resetBtn: container.querySelector('.reset-btn') };
            const resetExample = () => { state[exampleId].steps.forEach(step => step.classList.remove('active')); state[exampleId].currentIndex = -1; if (state[exampleId].placeholder) { state[exampleId].placeholder.classList.remove('hidden'); } updateButtons(); };
            const updateButtons = () => { 
                const isFirstStep = state[exampleId].currentIndex <= -1; 
                const isLastStep = state[exampleId].currentIndex >= state[exampleId].steps.length - 1; 
                state[exampleId].prevBtn.disabled = isFirstStep; 
                if (isLastStep) { 
                    state[exampleId].nextBtn.classList.add('hidden'); 
                    state[exampleId].resetBtn.classList.remove('hidden'); 
                } else { 
                    state[exampleId].nextBtn.classList.remove('hidden'); 
                    state[exampleId].resetBtn.classList.add('hidden'); 
                } 
            };
            
            state[exampleId].nextBtn.addEventListener('click', () => {
                if (state[exampleId].currentIndex < state[exampleId].steps.length - 1) {
                    if (state[exampleId].currentIndex === -1 && state[exampleId].placeholder) {
                        state[exampleId].placeholder.classList.add('hidden');
                    }
                    state[exampleId].currentIndex++;
                    state[exampleId].steps[state[exampleId].currentIndex].classList.add('active');
                    updateButtons();
                }
            });
            state[exampleId].prevBtn.addEventListener('click', () => {
                if (state[exampleId].currentIndex > -1) {
                    if(state[exampleId].steps[state[exampleId].currentIndex]) {
                       state[exampleId].steps[state[exampleId].currentIndex].classList.remove('active');
                    }
                    state[exampleId].currentIndex--;
                     if (state[exampleId].currentIndex === -1 && state[exampleId].placeholder) {
                        state[exampleId].placeholder.classList.remove('hidden');
                    }
                    updateButtons();
                }
            });

            if(state[exampleId].resetBtn) { state[exampleId].resetBtn.addEventListener('click', resetExample); }
            updateButtons();
        });

        const student = getStudentFromStorage();
        const lessonTitleElement = document.getElementById('lesson-title');
        const lessonTitle = lessonTitleElement ? lessonTitleElement.textContent : null;
        buildHeader(student, lessonTitle);
        buildFooter();
        const questions = generateQuiz();
        initializeQuiz(LESSON_ID, questions, student);
        const retakeBtn = document.getElementById('retake-quiz-btn');
        if(retakeBtn) { retakeBtn.addEventListener('click', () => { window.location.reload(); }); }
        
        const closeModalBtn = document.getElementById('closeModalBtn');
        if(closeModalBtn) closeModalBtn.addEventListener('click', closeModal);
        
        const closeSmartModalBtn = document.getElementById('closeSmartModalBtn');
        if(closeSmartModalBtn) closeSmartModalBtn.addEventListener('click', closeSmartModal);
    });
    </script>
</body>
</html>
