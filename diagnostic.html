<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اختبارات الرياضيات التشخيصية</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #3498db; --secondary: #2ecc71; --accent: #f1c40f;
            --light: #fdfdfd; --dark: #34495e; --bg-color: #ecf0f1;
            --card-bg: #ffffff; --text-color: #4a4a4a; --header-gradient: linear-gradient(135deg, var(--primary), var(--secondary));
            --score-high: #2ecc71; --score-medium: #f1c40f; --score-low: #e74c3c;
            --points-color: #9b59b6;
        }
        
        body { 
            font-family: 'Cairo', sans-serif; 
            background-color: var(--bg-color); 
            color: var(--text-color); 
            line-height: 1.7; 
            margin: 0;
            padding: 0;
        }

        .screen { display: none; }
        .screen.active { display: block; animation: zoomIn 0.6s ease-in-out; }

        @keyframes zoomIn { 
            from { opacity: 0; transform: scale(0.95); } 
            to { opacity: 1; transform: scale(1); } 
        }

        .container { 
            max-width: 1200px; 
            margin: 0 auto; 
            padding: 20px; 
        }

        header {
            background: var(--header-gradient); 
            color: white; 
            padding: 1.5rem 1rem; 
            border-radius: 0 0 35px 35px; 
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1); 
            margin-bottom: 2rem;
            position: relative; 
            overflow: hidden;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            text-align: right;
            position: relative;
            z-index: 2;
        }

        header::before, header::after {
            z-index: 1;
        }
        
        header::before {
            content: '\f1ec'; 
            font-family: 'Font Awesome 6 Free'; 
            font-weight: 900;
            position: absolute; 
            top: -20px; 
            left: -30px; 
            font-size: 150px; 
            opacity: 0.1; 
            transform: rotate(-15deg);
        }

        header::after {
            content: '\f518'; 
            font-family: 'Font Awesome 6 Free'; 
            font-weight: 900;
            position: absolute; 
            bottom: -30px; 
            right: -20px; 
            font-size: 150px; 
            opacity: 0.1; 
            transform: rotate(15deg);
        }

        header h1 { 
            font-size: 2.5rem; 
            font-weight: 800; 
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2); 
            margin: 0;
        }

        header p { 
            font-size: 1.2rem; 
            opacity: 0.9; 
            margin-top: 0.25rem; 
            margin-bottom: 0;
        }

        .welcome-container, .dashboard-container, .test-section, .student-progress { 
            background: var(--card-bg); 
            padding: 2.5rem; 
            border-radius: 20px; 
            box-shadow: 0 8px 25px rgba(0,0,0,0.08); 
        }

        .btn {
            background-color: var(--primary); 
            color: white; 
            padding: 1rem 3rem; 
            border: none;
            border-radius: 50px; 
            font-size: 1.2rem; 
            font-weight: 700; 
            cursor: pointer;
            transition: all 0.3s ease; 
            display: inline-flex; 
            align-items: center; 
            gap: 0.75rem;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin: 0.5rem;
            text-decoration: none;
        }

        .btn:hover { 
            transform: translateY(-4px); 
            box-shadow: 0 6px 15px rgba(0,0,0,0.2); 
        }

        .btn:active { 
            transform: translateY(-1px); 
        }
        
        .btn:disabled {
            background-color: #bdc3c7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn-secondary {
            background-color: #95a5a6;
        }

        .btn-secondary:hover {
            background-color: #7f8c8d;
        }
        
        .btn-exit {
            background-color: #e74c3c;
            padding: 0.5rem 1.5rem;
            font-size: 1rem;
        }

        .dashboard-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(340px, 1fr)); 
            gap: 2rem; 
            margin-top: 2rem; 
        }

        .quiz-card {
            background: var(--card-bg); 
            border-radius: 20px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.06); 
            transition: all 0.3s ease;
            display: flex; 
            flex-direction: column; 
            overflow: hidden;
        }

        .quiz-card:hover { 
            transform: translateY(-8px); 
            box-shadow: 0 12px 30px rgba(0,0,0,0.12); 
        }

        .quiz-card-header { 
            padding: 1.5rem; 
            background: var(--primary); 
            color: white; 
            text-align: center; 
        }

        .quiz-card-header h3 { 
            font-size: 1.6rem; 
            margin: 0; 
        }

        .quiz-card-body { 
            padding: 1.5rem; 
            flex-grow: 1; 
            text-align: center; 
        }

        .levels-container { 
            display: flex; 
            justify-content: space-around; 
            align-items: flex-start; 
            margin-top: 1rem; 
        }

        .level-wrapper {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .level-bubble {
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center;
            width: 80px; 
            height: 80px; 
            border-radius: 50%; 
            border: 3px solid #eee;
            cursor: pointer; 
            transition: all 0.3s ease;
        }
        
        .level-bubble.disabled {
            cursor: not-allowed;
            background-color: #f8f9f9;
        }

        .level-bubble:hover:not(.disabled) { 
            transform: scale(1.1); 
            border-color: var(--primary); 
        }

        .level-bubble .level-name { 
            font-size: 0.9rem; 
            font-weight: 700; 
        }

        .level-bubble .level-score { 
            font-size: 1.1rem; 
            font-weight: 800; 
            display: flex; 
            align-items: center; 
            gap: 0.3rem; 
        }

        .level-bubble .level-score.not-completed { 
            color: #aaa; 
            font-size: 0.8rem; 
        }

        .level-bubble .score-high { color: var(--score-high); }
        .level-bubble .score-medium { color: var(--score-medium); }
        .level-bubble .score-low { color: var(--score-low); }

        .level-stars {
            position: absolute;
            bottom: -8px;
            left: -8px;
            font-size: 1rem;
            color: var(--accent);
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
            transform: rotate(-20deg);
            letter-spacing: 1px;
            pointer-events: none;
        }
        
        .student-progress {
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .progress-bar {
            height: 12px;
            background-color: #ecf0f1;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .progress-text {
            margin-top: 0.5rem;
            font-weight: bold;
            color: #6c757d;
            font-size: 0.9rem;
        }

        .points-container {
            text-align: center;
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 2px dashed #e0e0e0;
            font-size: 1.2rem;
            font-weight: bold;
        }

        .points-container i {
            color: var(--points-color);
            margin-left: 0.5rem;
        }
        
        .progress-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            text-align: center;
            margin-top: 1rem;
        }
        .progress-item h4 {
            font-size: 1.1rem;
            color: var(--dark);
            margin: 0 0 0.75rem 0;
        }
        .progress-item .progress-fill-easy { background: var(--secondary); }
        .progress-item .progress-fill-medium { background: var(--accent); }
        .progress-item .progress-fill-hard { background: var(--score-low); }
        
        .level-completion-box .label {
            font-size: 1rem;
            color: #6c757d;
        }
        .level-completion-box .value {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--dark);
        }

        .quiz-header {
            text-align: center; 
            margin-bottom: 2rem; 
        }

        .quiz-meta {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .question-counter, .time-counter { 
            font-size: 1.2rem; 
            font-weight: 600; 
            color: #777; 
            padding: 0.5rem 1rem; 
            background: #eee; 
            border-radius: 20px; 
            display: inline-block;
        }

        .time-counter.warning {
            background-color: #f39c12;
            color: white;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .question-text { 
            font-size: 2rem; 
            margin: 1rem 0; 
            min-height: 70px; 
            color: var(--dark); 
        }

        .options-grid { 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 1.5rem; 
        }

        .option {
            background: var(--card-bg); 
            padding: 1.5rem; 
            border: 2px solid #ddd; 
            border-radius: 15px;
            cursor: pointer; 
            transition: all 0.3s ease; 
            font-size: 1.3rem;
            display: flex; 
            align-items: center; 
            justify-content: center;
        }

        .option:hover { 
            border-color: var(--primary); 
            transform: scale(1.05); 
        }

        .option.selected { 
            border-color: var(--secondary); 
            background-color: #e8f9f5; 
            transform: scale(1.05); 
        }

        .option.correct { 
            background-color: #d4edda; 
            border-color: var(--score-high); 
            transform: scale(1.05); 
            animation: correct-answer 0.5s ease; 
        }

        .option.incorrect { 
            background-color: #f8d7da; 
            border-color: var(--score-low); 
            animation: incorrect-answer 0.5s ease; 
        }

        @keyframes correct-answer { 
            0%, 100% { transform: scale(1.05); } 
            50% { transform: scale(1.1); } 
        }

        @keyframes incorrect-answer { 
            0%, 100% { transform: translateX(0); } 
            25% { transform: translateX(-10px); } 
            75% { transform: translateX(10px); } 
        }

        .quiz-nav { 
            margin-top: 2rem; 
            display: flex; 
            justify-content: center;
            gap: 1rem;
        }

        .explanation { 
            margin-top: 2rem; 
            padding: 1.5rem; 
            background-color: #fffbe6; 
            border-right: 5px solid var(--accent); 
            border-radius: 10px; 
            text-align: right; 
            display: none; 
        }

        .explanation h4 { 
            font-size: 1.3rem; 
            color: var(--accent); 
            margin-bottom: 0.5rem; 
        }

        .result-box { 
            text-align: center; 
            padding: 3rem; 
            position: relative; 
        }

        .result-box .result-icon { 
            font-size: 8rem; 
            color: var(--accent); 
            margin-bottom: 1rem; 
            animation: trophy-animation 1s ease-out; 
        }

        @keyframes trophy-animation { 
            from { transform: translateY(-50px) scale(0.5); opacity: 0; } 
            to { transform: translateY(0) scale(1); opacity: 1; } 
        }

        .result-box h2 { 
            font-size: 2.8rem; 
            color: var(--primary); 
        }

        .result-box p { 
            font-size: 3.5rem; 
            font-weight: 800; 
            color: var(--secondary); 
            margin: 1rem 0; 
        }

        .points-earned {
            font-size: 1.5rem;
            color: var(--points-color);
            margin: 1rem 0;
            font-weight: bold;
        }

        .fraction { 
            display: inline-flex; 
            flex-direction: column; 
            align-items: center; 
            vertical-align: middle; 
            margin: 0 0.2em; 
            line-height: 1; 
        }

        .fraction .numerator { 
            border-bottom: 2px solid; 
            padding: 0 0.2em; 
        }

        .fraction .denominator { 
            padding: 0.1em 0.2em; 
        }

        .footer {
            background-color: var(--dark);
            color: white;
            padding: 1.5rem 0;
            text-align: center;
            margin-top: 2rem;
        }

        .footer .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        /* Pre-Quiz Screen Styles */
        .explanation-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin: 2.5rem 0;
        }
        .explanation-card {
            background-color: #f8f9fa;
            padding: 1.5rem;
            border-radius: 15px;
            border-bottom: 4px solid var(--primary);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }
        .explanation-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }
        .explanation-card .icon-wrapper {
            font-size: 2.5rem;
            color: var(--primary);
            background-color: #eaf3fb;
            border-radius: 50%;
            width: 70px;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        .explanation-card .text-content {
            text-align: right;
        }
        .explanation-card h3 {
            font-size: 1.4rem;
            color: var(--dark);
            margin-top: 0;
            margin-bottom: 0.5rem;
        }
        .explanation-card p {
            font-size: 1rem;
            line-height: 1.7;
            margin-bottom: 0;
            color: #6c757d;
        }
        .explanation-card p strong {
            color: var(--primary);
            font-weight: 700;
            font-size: 1.1rem;
        }
        #pre-quiz-subtitle {
            font-size: 1.3rem;
            color: var(--dark);
            margin-top: 0.5rem;
        }

        /* Final Result Card Styles */
        .final-result-card {
            text-align: center;
        }
        .final-result-card h3 {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--dark);
            margin-bottom: 0.5rem;
        }
        .final-result-card p {
            font-size: 1.1rem;
            color: #6c757d;
            margin-top: 0;
        }
        .final-result-card .main-icon {
            font-size: 4rem;
            color: var(--accent);
            background: linear-gradient(135deg, #f1c40f, #f39c12);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 1rem 0;
            animation: trophy-animation 1s ease-out;
        }
        .final-metrics {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 2rem;
        }
        .metric-box {
            background-color: #f8f9fa;
            padding: 1.5rem;
            border-radius: 15px;
            width: 200px;
        }
        .metric-box .label {
            font-size: 1rem;
            font-weight: 700;
            color: #6c757d;
            margin-bottom: 0.5rem;
        }
        .metric-box .value {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--dark);
        }
        .metric-box .value .fas {
            font-size: 1.5rem;
            margin-right: 0.5rem;
        }
        .metric-box .value .fa-percent { color: var(--secondary); }
        .metric-box .value .fa-coins { color: var(--points-color); }
        
        .level-performance-details {
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 2px dashed #e0e0e0;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
        }
        .level-detail-box {
            text-align: center;
        }
        .level-detail-box .label {
            font-size: 1.1rem;
            font-weight: 700;
            color: #6c757d;
        }
        .level-detail-box .value {
            font-size: 2rem;
            font-weight: 800;
        }
        .level-detail-box .value.easy { color: var(--secondary); }
        .level-detail-box .value.medium { color: var(--accent); }
        .level-detail-box .value.hard { color: var(--score-low); }


        @media (max-width: 768px) {
            .options-grid {
                grid-template-columns: 1fr;
            }
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }
            header h1 {
                font-size: 2rem;
            }
            
            header p {
                font-size: 1.1rem;
            }
            
            .quiz-card {
                margin-bottom: 1.5rem;
            }
            
            .btn {
                padding: 0.8rem 1.5rem;
                font-size: 1rem;
            }

            .explanation-grid, .progress-grid, .level-performance-details {
                grid-template-columns: 1fr;
            }

            .final-metrics {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="main-content">
        <div id="dashboard-screen" class="screen active">
            <header>
                <div class="header-content container">
                    <div id="header-info">
                        <h1 id="dashboard-title"></h1>
                        <p id="dashboard-subtitle">اختر مهارة لتبدأ الاختبار</p>
                    </div>
                    <div id="header-action"></div>
                </div>
            </header>
            <div class="container">
                <div class="student-progress" id="student-progress-box"></div>
                <div class="dashboard-grid" id="dashboard-grid"></div>
            </div>
        </div>

        <!-- PRE-QUIZ SCREEN -->
        <div id="pre-quiz-screen" class="screen">
            <header><h1>استعد للاختبار</h1></header>
            <div class="container">
                <div class="welcome-container" style="text-align: center;">
                    <h2 id="pre-quiz-title" style="font-size: 2.2rem; color: var(--primary);"></h2>
                    <p id="pre-quiz-subtitle"></p>
                    <div class="explanation-grid">
                        <div class="explanation-card">
                            <div class="icon-wrapper"><i class="fas fa-balance-scale-right"></i></div>
                            <div class="text-content">
                                <h3>الدرجة الموزونة</h3>
                                <p id="pre-quiz-weight-exp"></p>
                            </div>
                        </div>
                        <div class="explanation-card">
                             <div class="icon-wrapper"><i class="fas fa-coins"></i></div>
                             <div class="text-content">
                                <h3>نظام النقاط</h3>
                                <p id="pre-quiz-points-exp"></p>
                            </div>
                        </div>
                    </div>
                    <div class="quiz-nav">
                        <button id="start-actual-quiz-btn" class="btn"><i class="fas fa-play"></i> ابدأ الاختبار</button>
                        <button id="back-from-pre-quiz-btn" class="btn btn-secondary"><i class="fas fa-arrow-right"></i> تراجع</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="quiz-screen" class="screen">
             <header><h1 id="quiz-title"></h1></header>
            <div class="container"><div class="test-section">
                <div class="quiz-header">
                    <div class="quiz-meta">
                        <p class="question-counter" id="question-counter"></p>
                        <p class="time-counter" id="time-counter"></p>
                    </div>
                    <p class="question-text" id="question-text"></p>
                </div>
                <div class="options-grid" id="options-grid"></div>
                <div class="explanation" id="explanation-box"><h4><i class="fas fa-lightbulb"></i> طريقة الحل:</h4><p id="explanation-text"></p></div>
                <div class="quiz-nav">
                    <button id="next-question-btn" class="btn"><i class="fas fa-arrow-left"></i> السؤال التالي</button>
                </div>
            </div></div>
        </div>

        <div id="result-screen" class="screen">
            <header><h1>نتيجة التحدي</h1></header>
            <div class="container"><div class="welcome-container result-box">
                <i id="result-icon" class="fas"></i>
                <h2 id="result-title"></h2>
                <p id="result-score"></p>
                <p id="result-points" class="points-earned"></p>
                <button id="back-to-dashboard-btn" class="btn"><i class="fas fa-th-large"></i> العودة للوحة الإنجازات</button>
                <button id="retry-from-result-btn" class="btn btn-secondary"><i class="fas fa-redo"></i> إعادة الاختبار</button>
            </div></div>
        </div>
    </div>
    <footer class="footer"><div class="container"><p>&copy; ٢٠٢٤ اختبار الرياضيات التشخيصي | إعداد: عبدالعزيز خالد العبلان</p></div></footer>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- CONFIGURATION ---
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzrf1-At3Pq7i39bGV3F1iD3-b0G-WWyRi5cgpKeQjyn_N5fh2EmGhoyRKUsbLd-F_UJQ/exec";
        
        // --- DOM Elements ---
        const screens = { 
            dashboard: document.getElementById('dashboard-screen'), 
            preQuiz: document.getElementById('pre-quiz-screen'), 
            quiz: document.getElementById('quiz-screen'), 
            result: document.getElementById('result-screen') 
        };
        const studentProgressBox = document.getElementById('student-progress-box');
        const dashboardGrid = document.getElementById('dashboard-grid');
        const dashboardTitle = document.getElementById('dashboard-title');
        const dashboardSubtitle = document.getElementById('dashboard-subtitle');
        const headerAction = document.getElementById('header-action');
        
        const preQuizTitle = document.getElementById('pre-quiz-title');
        const preQuizSubtitle = document.getElementById('pre-quiz-subtitle');
        const preQuizWeightExp = document.getElementById('pre-quiz-weight-exp');
        const preQuizPointsExp = document.getElementById('pre-quiz-points-exp');
        const startActualQuizBtn = document.getElementById('start-actual-quiz-btn');
        const backFromPreQuizBtn = document.getElementById('back-from-pre-quiz-btn');

        const quizTitle = document.getElementById('quiz-title');
        const questionCounter = document.getElementById('question-counter');
        const timeCounter = document.getElementById('time-counter');
        const questionText = document.getElementById('question-text');
        const optionsGrid = document.getElementById('options-grid');
        const nextQuestionBtn = document.getElementById('next-question-btn');
        const explanationBox = document.getElementById('explanation-box');
        const explanationText = document.getElementById('explanation-text');

        const resultTitle = document.getElementById('result-title');
        const resultScore = document.getElementById('result-score');
        const resultIcon = document.getElementById('result-icon');
        const resultPoints = document.getElementById('result-points');
        const backToDashboardBtn = document.getElementById('back-to-dashboard-btn');
        const retryFromResultBtn = document.getElementById('retry-from-result-btn');

        // --- State ---
        let studentId = '';
        let studentName = '';
        let isVisitor = false;
        let currentQuizId = null;
        let currentDifficulty = null;
        let currentQuestionIndex = 0;
        let currentModel = [];
        let score = 0;
        let quizData = {};
        let timer = null;
        let timeLeft = 0;
        let totalPoints = 0;

        // --- Data (Questions) ---
        const quizzes = {
            arithmetic: {
                title: 'الأعداد والعمليات الحسابية',
                levels: {
                    easy: [
                        [{ q: 'ناتج جمع ٢ + ٥ يساوي:', o: ['٦', '٧', '٨', '٩'], a: 1, exp: 'عند إضافة ٥ إلى ٢، نحصل على المجموع ٧.' }, { q: 'أي عدد يأتي بعد العدد ٩؟', o: ['٨', '١١', '٧', '١٠'], a: 3, exp: 'في خط الأعداد، العدد الذي يلي ٩ مباشرة هو ١٠.' }, { q: 'كم عدد التفاحات في الصورة: 🍎🍎🍎🍎', o: ['ثلاثة', 'خمسة', 'أربعة', 'ستة'], a: 2, exp: 'ببساطة نعد التفاحات لنجد أنها أربع.' }, { q: 'ناتج طرح ٨ - ٣ يساوي:', o: ['٥', '٦', '٤', '٧'], a: 0, exp: 'عندما نأخذ ٣ من ٨، يتبقى لدينا ٥.' }],
                        [{ q: 'ناتج جمع ٣ + ٦ يساوي:', o: ['٨', '٩', '١٠', '٧'], a: 1, exp: 'عند إضافة ٦ إلى ٣، نحصل على المجموع ٩.' }, { q: 'أي عدد يأتي بعد العدد ١٥؟', o: ['١٤', '١٧', '١٦', '١٣'], a: 2, exp: 'العدد الذي يلي ١٥ مباشرة هو ١٦.' }, { q: 'كم عدد النجوم في الصورة: ⭐⭐⭐⭐⭐', o: ['أربعة', 'ستة', 'خمسة', 'سبعة'], a: 2, exp: 'ببساطة نعد النجوم لنجد أنها خمسة.' }, { q: 'ناتج طرح ٩ - ٤ يساوي:', o: ['٦', '٤', '٥', '٣'], a: 2, exp: 'عندما نأخذ ٤ من ٩، يتبقى لدينا ٥.' }],
                        [{ q: 'ناتج جمع ٤ + ٤ يساوي:', o: ['٨', '٧', '٩', '٦'], a: 0, exp: 'جمع العدد مع نفسه، ٤ زائد ٤ يساوي ٨.' }, { q: 'أي عدد يأتي قبل العدد ٧؟', o: ['٨', '٥', '٦', '٩'], a: 2, exp: 'العدد الذي يسبق ٧ مباشرة هو ٦.' }, { q: 'كم عدد الأقلام في الصورة: ✏️✏️✏️', o: ['اثنان', 'ثلاثة', 'أربعة', 'واحد'], a: 1, exp: 'ببساطة نعد الأقلام لنجد أنها ثلاثة.' }, { q: 'ناتج طرح ١٠ - ٦ يساوي:', o: ['٥', '٣', '٢', '٤'], a: 3, exp: 'عندما نأخذ ٦ من ١٠، يتبقى لدينا ٤.' }],
                        [{ q: 'ناتج جمع ١ + ٨ يساوي:', o: ['١٠', '٨', '٩', '٧'], a: 2, exp: 'عند إضافة ٨ إلى ١، نحصل على المجموع ٩.' }, { q: 'أي عدد يقع بين ٨ و ١٠؟', o: ['٧', '٩', '١١', '٨'], a: 1, exp: 'العدد الصحيح الذي يقع بين ٨ و ١٠ هو ٩.' }, { q: 'كم عدد الكرات في الصورة: ⚽⚽⚽⚽⚽⚽', o: ['خمسة', 'سبعة', 'ثمانية', 'ستة'], a: 3, exp: 'ببساطة نعد الكرات لنجد أنها ستة.' }, { q: 'ناتج طرح ٧ - ٢ يساوي:', o: ['٥', '٤', '٦', '٣'], a: 0, exp: 'عندما نأخذ ٢ من ٧، يتبقى لدينا ٥.' }]
                    ],
                    medium: [
                        [{ q: 'ناتج ضرب ٦ × ٧ يساوي:', o: ['١٣', '٤٨', '٣٦', '٤٢'], a: 3, exp: 'من جدول الضرب، نعلم أن حاصل ضرب ٦ في ٧ هو ٤٢.' }, { q: 'إذا كان لديك ٣٠ ريالاً، واشتريت لعبة بسعر ١٢ ريالاً، كم يتبقى معك؟', o: ['١٨ ريال', '٢٨ ريال', '٤٢ ريال', '١٥ ريال'], a: 0, exp: 'نقوم بعملية الطرح: ٣٠ - ١٢ = ١٨ ريالاً.' }, { q: 'وزع معلم ٢٠ قلماً على ٤ طلاب بالتساوي. كم يأخذ كل طالب؟', o: ['٤ أقلام', '٦ أقلام', '٥ أقلام', '١٠ أقلام'], a: 2, exp: 'نقوم بعملية القسمة: ٢٠ ÷ ٤ = ٥ أقلام لكل طالب.' }, { q: 'أي كسر أكبر: ١/٣ أم ١/٤؟', o: ['١/٣', '١/٤', 'متساويان', 'لا يمكن المقارنة'], a: 0, exp: 'عندما يتساوى البسط، الكسر ذو المقام الأصغر هو الأكبر. لذا ١/٣ أكبر من ١/٤.' }],
                        [{ q: 'ناتج ضرب ٥ × ٨ يساوي:', o: ['٤٠', '١٣', '٤٥', '٣٥'], a: 0, exp: 'من جدول الضرب، نعلم أن حاصل ضرب ٥ في ٨ هو ٤٠.' }, { q: 'إذا كان لديك ٥٠ ريالاً، واشتريت كتاباً بسعر ٢٥ ريالاً، كم يتبقى معك؟', o: ['٣٥ ريال', '٢٥ ريال', '١٥ ريال', '٧٥ ريال'], a: 1, exp: 'نقوم بعملية الطرح: ٥٠ - ٢٥ = ٢٥ ريالاً.' }, { q: 'وزع أب ٣٠ ريالاً على ٥ أبناء بالتساوي. كم يأخذ كل ابن؟', o: ['٥ ريالات', '٧ ريالات', '٦ ريالات', '١٠ ريالات'], a: 2, exp: 'نقوم بعملية القسمة: ٣٠ ÷ ٥ = ٦ ريالات لكل ابن.' }, { q: 'أي كسر أكبر: ١/٢ أم ١/٥؟', o: ['١/٥', 'كلاهما', '١/٢', 'لا أعرف'], a: 2, exp: 'النصف (١/٢) أكبر من الخمس (١/٥).' }],
                        [{ q: 'ناتج ضرب ٩ × ٣ يساوي:', o: ['١٢', '٣٦', '٢٧', '١٨'], a: 2, exp: 'من جدول الضرب، نعلم أن حاصل ضرب ٩ في ٣ هو ٢٧.' }, { q: 'إذا كان لديك ٢٠ ريالاً، واشتريت دفتراً بسعر ٨ ريالات، كم يتبقى معك؟', o: ['١٢ ريال', '٢٨ ريال', '١٠ ريال', '١٤ ريال'], a: 0, exp: 'نقوم بعملية الطرح: ٢٠ - ٨ = ١٢ ريالاً.' }, { q: 'قسمت فاطمة ١٨ قطعة حلوى على ٣ صديقات. كم تأخذ كل صديقة؟', o: ['٥ قطع', '٦ قطع', '٧ قطع', '٨ قطع'], a: 1, exp: 'نقوم بعملية القسمة: ١٨ ÷ ٣ = ٦ قطع لكل صديقة.' }, { q: 'أي كسر أصغر: ١/٦ أم ١/٨؟', o: ['١/٦', 'متساويان', '١/٨', 'لا يمكن المقارنة'], a: 2, exp: 'عندما يتساوى البسط، الكسر ذو المقام الأكبر هو الأصغر. لذا ١/٨ أصغر من ١/٦.' }],
                        [{ q: 'ناتج ضرب ٤ × ٦ يساوي:', o: ['١٠', '٢٨', '٢٠', '٢٤'], a: 3, exp: 'من جدول الضرب، نعلم أن حاصل ضرب ٤ في ٦ هو ٢٤.' }, { q: 'إذا كان لديك ١٠٠ ريال، واشتريت قميصاً بسعر ٦٥ ريالاً، كم يتبقى معك؟', o: ['٣٥ ريال', '٤٥ ريال', '٢٥ ريال', '١٦٥ ريال'], a: 0, exp: 'نقوم بعملية الطرح: ١٠٠ - ٦٥ = ٣٥ ريالاً.' }, { q: 'وزع مزارع ٢٤ تفاحة على ٦ صناديق بالتساوي. كم تفاحة في كل صندوق؟', o: ['٥ تفاحات', '٤ تفاحات', '٦ تفاحات', '٣ تفاحات'], a: 1, exp: 'نقوم بعملية القسمة: ٢٤ ÷ ٦ = ٤ تفاحات في كل صندوق.' }, { q: 'أي كسر أكبر: ٢/٣ أم ٢/٥؟', o: ['٢/٥', '٢/٣', 'متساويان', 'لا يمكن المقارنة'], a: 1, exp: 'عندما يتساوى البسط، الكسر ذو المقام الأصغر هو الأكبر. لذا ٢/٣ أكبر من ٢/٥.' }]
                    ],
                    hard: [
                        [{ q: 'ما هو ناتج قسمة ٤٥٥ ÷ ٥ ؟', o: ['٩١', '٨١', '٩٥', '١٠١'], a: 0, exp: '٤٥ قسمة ٥ هي ٩، و ٥ قسمة ٥ هي ١. إذن النتيجة هي ٩١.' }, { q: 'ما هو ناتج (٤ + ٦) × ٣ ؟', o: ['٢٢', '١٣', '١٨', '٣٠'], a: 3, exp: 'نتبع ترتيب العمليات، فنحسب ما بداخل الأقواس أولاً: (٤+٦) = ١٠. ثم نضرب: ١٠ × ٣ = ٣٠.' }, { q: 'إذا كان سعر ٤ أقلام هو ٦ ريالات، فما سعر ١٠ أقلام؟', o: ['١٥ ريال', '٢٤ ريال', '١٠ ريال', '١٢ ريال'], a: 0, exp: 'سعر القلم الواحد = ٦ ÷ ٤ = ١.٥ ريال. إذن سعر ١٠ أقلام = ١٠ × ١.٥ = ١5 ريال.' }, { q: 'ناتج (١٠ - ٤) ÷ ٢ + ٥ يساوي:', o: ['٨', '٦', '٧', '٥'], a: 0, exp: 'الأقواس أولاً (١٠-٤=٦). ثم القسمة (٦÷٢=٣). ثم الجمع (٣+٥=٨).' }],
                        [{ q: 'ما هو ناتج قسمة ٣٦٦ ÷ ٣ ؟', o: ['١٣٣', '١١٢', '١٢٢', '١٢٣'], a: 2, exp: '٣ قسمة ٣ هي ١، ٦ قسمة ٣ هي ٢، ٦ قسمة ٣ هي ٢. النتيجة ١٢٢.' }, { q: 'ما هو ناتج (٥ + ٣) × ٤ ؟', o: ['٣٢', '٢٣', '٢٠', '١٢'], a: 0, exp: 'الأقواس أولاً (٥+٣=٨). ثم نضرب: ٨ × ٤ = ٣٢.' }, { q: 'إذا كان سعر ٣ دفاتر هو ١٢ ريالاً، فما سعر ٥ دفاتر؟', o: ['١٥ ريال', '٢٠ ريال', '٢٥ ريال', '٣٠ ريال'], a: 1, exp: 'سعر الدفتر الواحد = ١٢ ÷ ٣ = ٤ ريالات. سعر ٥ دفاتر = ٥ × ٤ = ٢٠ ريال.' }, { q: 'ناتج (١٢ + ٨) ÷ ٤ + ٣ يساوي:', o: ['١٣', '٨', '١٠', '٢٠'], a: 1, exp: 'الأقواس أولاً (١٢+٨=٢٠). ثم القسمة (٢٠÷٤=٥). ثم الجمع (٥+٣=٨).' }],
                        [{ q: 'ما هو ناتج قسمة ٨٤٢ ÷ ٢ ؟', o: ['٤١١', '٤٢١', '٤٢٢', '٢٤١'], a: 1, exp: '٨ قسمة ٢ هي ٤، ٤ قسمة ٢ هي ٢، ٢ قسمة ٢ هي ١. النتيجة ٤٢١.' }, { q: 'ما هو ناتج (١٠ - ٢) × ٥ ؟', o: ['٥٠', '٣٠', '٤٠', '٦٠'], a: 2, exp: 'الأقواس أولاً (١٠-٢=٨). ثم نضرب: ٨ × ٥ = ٤٠.' }, { q: 'إذا كان سعر ٥ برتقالات هو ١٠ ريالات، فما سعر ٨ برتقالات؟', o: ['١٣ ريال', '١٥ ريال', '١٦ ريال', '١٨ ريال'], a: 2, exp: 'سعر البرتقالة الواحدة = ١٠ ÷ ٥ = ٢ ريال. سعر ٨ برتقالات = ٨ × ٢ = ١٦ ريال.' }, { q: 'ناتج (٢٠ - ٥) ÷ ٣ + ٦ يساوي:', o: ['١٠', '١١', '١٢', '١٣'], a: 1, exp: 'الأقواس أولاً (٢٠-٥=١٥). ثم القسمة (١٥÷٣=٥). ثم الجمع (٥+٦=١١).' }],
                        [{ q: 'ما هو ناتج قسمة ٦٣٩ ÷ ٩ ؟', o: ['٧١', '٨١', '٦٩', '٧٩'], a: 0, exp: '٦٣ قسمة ٩ هي ٧، و ٩ قسمة ٩ هي ١. النتيجة ٧١.' }, { q: 'ما هو ناتج (٧ + ٢) × ٦ ؟', o: ['٤٨', '٤٢', '٥٤', '٦٠'], a: 2, exp: 'الأقواس أولاً (٧+٢=٩). ثم نضرب: ٩ × ٦ = ٥٤.' }, { q: 'إذا كان سعر ٢ كجم من التفاح هو ١٤ ريالاً، فما سعر ٣ كجم؟', o: ['٢٠ ريال', '٢١ ريال', '٢٤ ريال', '٢٨ ريال'], a: 1, exp: 'سعر الكيلو الواحد = ١٤ ÷ ٢ = ٧ ريالات. سعر ٣ كجم = ٣ × ٧ = ٢١ ريال.' }, { q: 'ناتج (٥ × ٤) - (١٠ ÷ ٢) يساوي:', o: ['١٠', '٢٠', '٥', '١٥'], a: 3, exp: 'الضرب والقسمة أولاً (٥×٤=٢٠)، (١٠÷٢=٥). ثم الطرح (٢٠-٥=١٥).' }]
                    ]
                }
            },
            geometry: {
                title: 'الهندسة الأساسية',
                levels: {
                    easy: [
                        [{ q: 'ما هو اسم هذا الشكل: 🟥 ؟', o: ['دائرة', 'مثلث', 'مربع', 'نجمة'], a: 2, exp: 'هذا الشكل له أربعة أضلاع متساوية وأربع زوايا قائمة، لذا هو مربع.' }, { q: 'كم عدد أضلاع المثلث؟', o: ['ثلاثة', 'أربعة', 'خمسة', 'ستة'], a: 0, exp: 'المثلث، كما يتضح من اسمه، له ثلاثة أضلاع.' }, { q: 'أي من هذه الأشياء يشبه الدائرة؟', o: ['باب', 'كتاب', 'عجلة السيارة', 'طاولة'], a: 2, exp: 'عجلة السيارة هي أفضل مثال على الشكل الدائري من بين الخيارات.' }, { q: 'ما هو الشكل الذي ليس له زوايا حادة؟', o: ['المثلث', 'المستطيل', 'النجمة', 'السهم'], a: 1, exp: 'المستطيل جميع زواياه قائمة (٩٠ درجة)، وليست حادة.' }],
                        [{ q: 'ما هو اسم هذا الشكل: 🔵 ؟', o: ['مربع', 'دائرة', 'مثلث', 'مستطيل'], a: 1, exp: 'هذا الشكل مستدير وليس له أضلاع أو زوايا، لذا هو دائرة.' }, { q: 'كم عدد أضلاع المربع؟', o: ['ثلاثة', 'أربعة', 'خمسة', 'ستة'], a: 1, exp: 'المربع له أربعة أضلاع متساوية في الطول.' }, { q: 'أي من هذه الأشياء يشبه المكعب؟', o: ['كرة', 'صندوق هدايا', 'هرم', 'موزة'], a: 1, exp: 'صندوق الهدايا غالباً ما يكون على شكل مكعب.' }, { q: 'ما هو الشكل الذي جميع أضلاعه متساوية؟', o: ['المستطيل', 'المعين', 'المربع', 'كلاهما ب و ج'], a: 3, exp: 'المربع والمعين كلاهما لهما أربعة أضلاع متساوية.' }],
                        [{ q: 'ما هو اسم هذا الشكل: ▲ ؟', o: ['دائرة', 'مربع', 'مثلث', 'سهم'], a: 2, exp: 'هذا الشكل له ثلاثة أضلاع وثلاث زوايا، لذا هو مثلث.' }, { q: 'كم عدد أضلاع الشكل الخماسي؟', o: ['أربعة', 'خمسة', 'ستة', 'سبعة'], a: 1, exp: 'الشكل الخماسي، كما يتضح من اسمه، له خمسة أضلاع.' }, { q: 'أي من هذه الأشياء يشبه المثلث؟', o: ['شراع القارب', 'عجلة', 'باب', 'صندوق'], a: 0, exp: 'شراع القارب غالباً ما يكون على شكل مثلث.' }, { q: 'ما هو الشكل الذي له ٦ أوجه؟', o: ['الهرم', 'المكعب', 'الأسطوانة', 'الكرة'], a: 1, exp: 'المكعب هو مجسم له ستة أوجه مربعة الشكل.' }],
                        [{ q: 'ما هو اسم هذا الشكل: ⭐ ؟', o: ['دائرة', 'نجمة', 'شمس', 'وردة'], a: 1, exp: 'هذا الشكل يمثل نجمة بخمسة رؤوس.' }, { q: 'كم عدد أضلاع الدائرة؟', o: ['واحد', 'اثنان', 'أربعة', 'صفر'], a: 3, exp: 'الدائرة ليس لها أضلاع مستقيمة.' }, { q: 'أي من هذه الأشياء يشبه المستطيل؟', o: ['تفاحة', 'كرة', 'شاشة التلفاز', 'هرم'], a: 2, exp: 'شاشة التلفاز هي مثال شائع لشكل المستطيل.' }, { q: 'ما هو الشكل الذي ليس له أضلاع مستقيمة؟', o: ['المربع', 'الدائرة', 'المثلث', 'المستطيل'], a: 1, exp: 'الدائرة هي الشكل الوحيد الذي يتكون من خط منحنٍ وليس له أضلاع مستقيمة.' }]
                    ],
                    medium: [
                        [{ q: 'ما هو محيط مربع طول ضلعه ٣ سم؟', o: ['٦ سم', '٩ سم', '١٢ سم', '٣ سم'], a: 2, exp: 'محيط المربع = طول الضلع × ٤. إذن ٣ × ٤ = ١٢ سم.' }, { q: 'كم عدد رؤوس المكعب؟', o: ['٤', '٦', '٨', '١٢'], a: 2, exp: 'المكعب له ٨ رؤوس (زوايا).' }, { q: 'الزاوية التي تشبه زاوية ورقة الكتاب تسمى زاوية:', o: ['حادة', 'منفرجة', 'مستقيمة', 'قائمة'], a: 3, exp: 'زاوية ركن الكتاب هي مثال ممتاز على الزاوية القائمة التي قياسها ٩٠ درجة.' }, { q: 'ما هو اسم المجسم الذي يشبه علبة الأحذية؟', o: ['مكعب', 'متوازي مستطيلات', 'هرم', 'أسطوانة'], a: 1, exp: 'علبة الأحذية هي مثال شائع على مجسم متوازي المستطيلات.' }],
                        [{ q: 'ما هو محيط مربع طول ضلعه ٥ سم؟', o: ['١٠ سم', '١٥ سم', '٢٠ سم', '٢٥ سم'], a: 2, exp: 'محيط المربع = طول الضلع × ٤. إذن ٥ × ٤ = ٢٠ سم.' }, { q: 'كم عدد أوجه المكعب؟', o: ['٤', '٦', '٨', '١٢'], a: 1, exp: 'المكعب له ٦ أوجه مربعة.' }, { q: 'الزاوية الأصغر من ٩٠ درجة تسمى زاوية:', o: ['قائمة', 'منفرجة', 'حادة', 'مستقيمة'], a: 2, exp: 'أي زاوية قياسها أقل من ٩٠ درجة هي زاوية حادة.' }, { q: 'ما هو اسم المجسم الذي يشبه كرة القدم؟', o: ['دائرة', 'مكعب', 'كرة', 'أسطوانة'], a: 2, exp: 'كرة القدم هي مثال واضح على مجسم الكرة.' }],
                        [{ q: 'ما هو محيط مستطيل طوله ٦ سم وعرضه ٤ سم؟', o: ['١٠ سم', '٢٤ سم', '٢٠ سم', '١٢ سم'], a: 2, exp: 'محيط المستطيل = (الطول + العرض) × ٢. إذن (٦ + ٤) × ٢ = ٢٠ سم.' }, { q: 'كم عدد أحرف (أضلاع) المكعب؟', o: ['٦', '٨', '١٠', '١٢'], a: 3, exp: 'المكعب له ١٢ حرفاً (ضلعاً).' }, { q: 'الزاوية الأكبر من ٩٠ درجة تسمى زاوية:', o: ['حادة', 'منفرجة', 'قائمة', 'مستقيمة'], a: 1, exp: 'أي زاوية قياسها أكبر من ٩٠ وأقل من ١٨٠ درجة هي زاوية منفرجة.' }, { q: 'ما هو اسم المجسم الذي يشبه علبة المشروبات الغازية؟', o: ['دائرة', 'مخروط', 'أسطوانة', 'كرة'], a: 2, exp: 'علبة المشروبات الغازية هي مثال شائع على مجسم الأسطوانة.' }],
                        [{ q: 'ما هو محيط مثلث متساوي الأضلاع طول ضلعه ٧ سم؟', o: ['١٤ سم', '٢١ سم', '٢٨ سم', '٤٩ سم'], a: 1, exp: 'محيط المثلث = مجموع أضلاعه. بما أنه متساوي الأضلاع، إذن ٧ × ٣ = ٢١ سم.' }, { q: 'كم عدد رؤوس الهرم الرباعي؟', o: ['٤', '٥', '٦', '٨'], a: 1, exp: 'الهرم الرباعي له ٤ رؤوس في القاعدة ورأس واحد في القمة، المجموع ٥.' }, { q: 'الخط المستقيم يمثل زاوية قياسها ١٨٠ درجة وتسمى زاوية:', o: ['قائمة', 'كاملة', 'مستقيمة', 'منعكسة'], a: 2, exp: 'الزاوية التي قياسها ١٨٠ درجة تسمى زاوية مستقيمة.' }, { q: 'ما هو اسم المجسم الذي يشبه قبعة الحفلات؟', o: ['هرم', 'أسطوانة', 'مخروط', 'كرة'], a: 2, exp: 'قبعة الحفلات هي مثال شائع على مجسم المخروط.' }]
                    ],
                    hard: [
                        [{ q: 'ما هي مساحة مستطيل طوله ١٠ سم وعرضه ٥ سم؟', o: ['١٥ سم²', '٣٠ سم²', '٥٠ سم²', '١٠٠ سم²'], a: 2, exp: 'مساحة المستطيل = الطول × العرض. إذن ١٠ × ٥ = ٥٠ سم².' }, { q: 'ما هو مجموع زوايا أي شكل رباعي؟', o: ['٩٠ درجة', '١٨٠ درجة', '٢٧٠ درجة', '٣٦٠ درجة'], a: 3, exp: 'مجموع قياسات الزوايا الداخلية لأي شكل رباعي هو دائماً ٣٦٠ درجة.' }, { q: 'إذا كان محيط مثلث متساوي الأضلاع هو ٢١ سم، فما طول كل ضلع؟', o: ['٣ سم', '٧ سم', '٢١ سم', '٦٣ سم'], a: 1, exp: 'بما أن الأضلاع متساوية، نقسم المحيط على عدد الأضلاع (٣). ٢١ ÷ ٣ = ٧ سم.' }, { q: 'ما هو حجم مكعب طول حرفه ٤ سم؟', o: ['١٢ سم³', '١٦ سم³', '٣٢ سم³', '٦٤ سم³'], a: 3, exp: 'حجم المكعب = طول الحرف × نفسه × نفسه. إذن ٤ × ٤ × ٤ = ٦٤ سم³.' }],
                        [{ q: 'ما هي مساحة مربع طول ضلعه ٦ سم؟', o: ['١٢ سم²', '٢٤ سم²', '٣٦ سم²', '٦٠ سم²'], a: 2, exp: 'مساحة المربع = طول الضلع × نفسه. إذن ٦ × ٦ = ٣٦ سم².' }, { q: 'ما هو مجموع زوايا أي مثلث؟', o: ['٩٠ درجة', '١٨٠ درجة', '٣٦٠ درجة', '١٢٠ درجة'], a: 1, exp: 'مجموع قياسات الزوايا الداخلية لأي مثلث هو دائماً ١٨٠ درجة.' }, { q: 'إذا كان محيط مربع هو ٢٤ سم، فما طول ضلعه؟', o: ['٤ سم', '٦ سم', '٨ سم', '١٢ سم'], a: 1, exp: 'طول ضلع المربع = المحيط ÷ ٤. إذن ٢٤ ÷ ٤ = ٦ سم.' }, { q: 'ما هو حجم مكعب طول حرفه ٣ سم؟', o: ['٩ سم³', '١٢ سم³', '١٨ سم³', '٢٧ سم³'], a: 3, exp: 'حجم المكعب = طول الحرف × نفسه × نفسه. إذن ٣ × ٣ × ٣ = ٢٧ سم³.' }],
                        [{ q: 'ما هي مساحة مستطيل طوله ٨ سم وعرضه ٤ سم؟', o: ['١٢ سم²', '٢٤ سم²', '٣٢ سم²', '٦٤ سم²'], a: 2, exp: 'مساحة المستطيل = الطول × العرض. إذن ٨ × ٤ = ٣٢ سم².' }, { q: 'كم قياس كل زاوية في المربع؟', o: ['٤٥ درجة', '٦٠ درجة', '٩٠ درجة', '١٨٠ درجة'], a: 2, exp: 'المربع له أربع زوايا وجميعها قائمة، أي قياس كل منها ٩٠ درجة.' }, { q: 'إذا كان محيط مستطيل ٣٠ سم وطوله ١٠ سم، فما عرضه؟', o: ['٥ سم', '١٠ سم', '١٥ سم', '٢٠ سم'], a: 0, exp: 'نصف المحيط = ٣٠ ÷ ٢ = ١٥ سم. العرض = نصف المحيط - الطول = ١٥ - ١٠ = ٥ سم.' }, { q: 'ما هو حجم متوازي مستطيلات أبعاده ٢ سم، ٣ سم، ٥ سم؟', o: ['١٠ سم³', '٢٥ سم³', '٣٠ سم³', '٦٠ سم³'], a: 2, exp: 'حجم متوازي المستطيلات = الطول × العرض × الارتفاع. إذن ٢ × ٣ × ٥ = ٣٠ سم³.' }],
                        [{ q: 'ما هي مساحة مثلث قائم الزاوية طول قاعدته ٦ سم وارتفاعه ٨ سم؟', o: ['٤٨ سم²', '١٤ سم²', '٢٤ سم²', '٣٠ سم²'], a: 2, exp: 'مساحة المثلث = (القاعدة × الارتفاع) ÷ ٢. إذن (٦ × ٨) ÷ ٢ = ٢٤ سم².' }, { q: 'إذا كانت زاويتان في مثلث هما ٥٠ و ٦٠ درجة، فما قياس الزاوية الثالثة؟', o: ['٧٠ درجة', '٨٠ درجة', '٩٠ درجة', '١١٠ درجة'], a: 0, exp: 'مجموع زوايا المثلث ١٨٠. الزاوية الثالثة = ١٨٠ - (٥٠ + ٦٠) = ٧٠ درجة.' }, { q: 'إذا كان محيط مثلث متساوي الأضلاع هو ٣٦ سم، فما طول كل ضلع؟', o: ['٩ سم', '١٨ سم', '١٢ سم', '٦ سم'], a: 2, exp: 'بما أن الأضلاع متساوية، نقسم المحيط على ٣. إذن ٣٦ ÷ ٣ = ١٢ سم.' }, { q: 'ما هو حجم مكعب طول حرفه ٥ سم؟', o: ['٢٥ سم³', '٥٠ سم³', '١٠٠ سم³', '١٢٥ سم³'], a: 3, exp: 'حجم المكعب = ٥ × ٥ × ٥ = ١٢٥ سم³.' }]
                    ]
                }
            },
            algebra: {
                title: 'التفكير الجبري',
                levels: {
                    easy: [
                        [{ q: 'إذا كان ⬜ + ٣ = ٥، فما هو العدد داخل المربع؟', o: ['١', '٢', '٣', '٤'], a: 1, exp: 'العدد الذي إذا أضفنا إليه ٣ يصبح الناتج ٥ هو ٢.' }, { q: 'أكمل النمط: ▲، ▼، ▲، ▼، __؟', o: ['▲', '▼', '■', '●'], a: 0, exp: 'النمط يتناوب بين سهم للأعلى وسهم للأسفل.' }, { q: 'ما هو العدد المفقود في النمط: ٢، ٤، ٦، __، ١٠؟', o: ['٧', '٨', '٩', '٥'], a: 1, exp: 'النمط يزيد بمقدار ٢ في كل مرة. بعد ٦، يأتي العدد ٨.' }, { q: 'إذا كان لديك ٣ صناديق، وفي كل صندوق ٤ كرات، فما مجموع الكرات؟', o: ['٧', '١٠', '١٢', '٩'], a: 2, exp: 'هذه عملية ضرب: ٣ × ٤ = ١٢ كرة.' }],
                        [{ q: 'إذا كان ⬜ + ٤ = ٩، فما هو العدد داخل المربع؟', o: ['٣', '٤', '٥', '٦'], a: 2, exp: 'العدد الذي إذا أضفنا إليه ٤ يصبح الناتج ٩ هو ٥.' }, { q: 'أكمل النمط: 🔵، 🔴، 🔵، 🔴، __؟', o: ['🔵', '🔴', '🟢', '🟡'], a: 0, exp: 'النمط يتناوب بين دائرة زرقاء ودائرة حمراء.' }, { q: 'ما هو العدد المفقود في النمط: ٥، ١٠، ١٥، __، ٢٥؟', o: ['١٦', '١٨', '٢٠', '٢٢'], a: 2, exp: 'النمط يزيد بمقدار ٥ في كل مرة. بعد ١٥، يأتي العدد ٢٠.' }, { q: 'إذا كان لديك ٥ أكياس، وفي كل كيس ٣ تفاحات، فما مجموع التفاح؟', o: ['٨', '١٥', '١٠', '٢٠'], a: 1, exp: 'هذه عملية ضرب: ٥ × ٣ = ١٥ تفاحة.' }],
                        [{ q: 'إذا كان ⬜ - ٢ = ٦، فما هو العدد داخل المربع؟', o: ['٤', '٧', '٨', '٩'], a: 2, exp: 'العدد الذي إذا طرحنا منه ٢ يصبح الناتج ٦ هو ٨.' }, { q: 'أكمل النمط: أ، ب، ت، أ، ب، __؟', o: ['أ', 'ب', 'ت', 'ث'], a: 2, exp: 'النمط يكرر الحروف الثلاثة الأولى بالترتيب.' }, { q: 'ما هو العدد المفقود في النمط: ١٠، ٨، ٦، __، ٢؟', o: ['٥', '٤', '٣', '١'], a: 1, exp: 'النمط ينقص بمقدار ٢ في كل مرة. بعد ٦، يأتي العدد ٤.' }, { q: 'إذا كان لديك طبقان، وفي كل طبق ٦ قطع حلوى، فما مجموع الحلوى؟', o: ['٨', '١٠', '١٢', '١٤'], a: 2, exp: 'هذه عملية ضرب: ٢ × ٦ = ١٢ قطعة حلوى.' }],
                        [{ q: 'إذا كان ٧ - ⬜ = ٣، فما هو العدد داخل المربع؟', o: ['٢', '٣', '٤', '٥'], a: 2, exp: 'العدد الذي نطرحه من ٧ ليصبح الناتج ٣ هو ٤.' }, { q: 'أكمل النمط: ١، ٢، ٣، ١، ٢، __؟', o: ['١', '٢', '٣', '٤'], a: 2, exp: 'النمط يكرر الأرقام من ١ إلى ٣ بالترتيب.' }, { q: 'ما هو العدد المفقود في النمط: ٣، ٦، ٩، __، ١٥؟', o: ['١٠', '١١', '١٢', '١٣'], a: 2, exp: 'النمط يزيد بمقدار ٣ في كل مرة. بعد ٩، يأتي العدد ١٢.' }, { q: 'إذا كان لديك ٤ سيارات لعبة، ولكل سيارة ٤ عجلات، فما مجموع العجلات؟', o: ['٨', '١٢', '١٦', '٢٠'], a: 2, exp: 'هذه عملية ضرب: ٤ × ٤ = ١٦ عجلة.' }]
                    ],
                    medium: [
                        [{ q: 'حل المعادلة: س + ١٠ = ١٧', o: ['س = ٢٧', 'س = ١٧', 'س = ٧', 'س = ١٠'], a: 2, exp: 'لإيجاد قيمة س، نطرح ١٠ من الطرفين. س = ١٧ - ١٠ = ٧.' }, { q: 'إذا كانت أ = ٥، فما قيمة ٤ × أ ؟', o: ['٩', '٤٥', '١', '٢٠'], a: 3, exp: 'نعوض عن أ بالرقم ٥، فتصبح العملية ٤ × ٥ = ٢٠.' }, { q: 'ما هو العدد الذي إذا طرحنا منه ٦ كان الناتج ٩؟', o: ['٣', '١٥', '٥٤', '٩٦'], a: 1, exp: 'نحلها بشكل عكسي: ٩ + ٦ = ١٥. العدد هو ١٥.' }, { q: 'أكمل النمط: ٣، ٦، ٩، ١٢، __؟', o: ['١٣', '١٤', '١٥', '١٦'], a: 2, exp: 'النمط يزيد بمقدار ٣ في كل مرة (مضاعفات العدد ٣). بعد ١٢، يأتي العدد ١٥.' }],
                        [{ q: 'حل المعادلة: س + ٥ = ١٢', o: ['س = ١٧', 'س = ٧', 'س = ٦', 'س = ٨'], a: 1, exp: 'لإيجاد قيمة س، نطرح ٥ من الطرفين. س = ١٢ - ٥ = ٧.' }, { q: 'إذا كانت ب = ٣، فما قيمة ٦ × ب ؟', o: ['٩', '١٨', '٣٦', '٢'], a: 1, exp: 'نعوض عن ب بالرقم ٣، فتصبح العملية ٦ × ٣ = ١٨.' }, { q: 'ما هو العدد الذي إذا أضفنا إليه ٥ كان الناتج ١٤؟', o: ['١٩', '٧', '٩', '١٠'], a: 2, exp: 'نحلها بشكل عكسي: ١٤ - ٥ = ٩. العدد هو ٩.' }, { q: 'أكمل النمط: ٤، ٨، ١٢، ١٦، __؟', o: ['١٨', '٢٤', '٢٠', '٢٢'], a: 2, exp: 'النمط يزيد بمقدار ٤ في كل مرة. بعد ١٦، يأتي العدد ٢٠.' }],
                        [{ q: 'حل المعادلة: س - ٣ = ٨', o: ['س = ٥', 'س = ١١', 'س = ٢٤', 'س = ٩'], a: 1, exp: 'لإيجاد قيمة س، نضيف ٣ للطرفين. س = ٨ + ٣ = ١١.' }, { q: 'إذا كانت ج = ١٠، فما قيمة ج ÷ ٢ ؟', o: ['٢٠', '١٢', '٨', '٥'], a: 3, exp: 'نعوض عن ج بالرقم ١٠، فتصبح العملية ١٠ ÷ ٢ = ٥.' }, { q: 'ما هو العدد الذي إذا ضربناه في ٣ كان الناتج ١٨؟', o: ['٦', '١٥', '٢١', '٥٤'], a: 0, exp: 'نحلها بشكل عكسي: ١٨ ÷ ٣ = ٦. العدد هو ٦.' }, { q: 'أكمل النمط: ٤٠، ٣٥، ٣٠، ٢٥، __؟', o: ['٢٠', '١٥', '٢٤', '٣٠'], a: 0, exp: 'النمط ينقص بمقدار ٥ في كل مرة. بعد ٢٥، يأتي العدد ٢٠.' }],
                        [{ q: 'حل المعادلة: ١٥ - س = ٩', o: ['س = ٢٤', 'س = ٦', 'س = ٥', 'س = ٧'], a: 1, exp: 'لإيجاد قيمة س، نفكر: ١٥ ناقص كم يساوي ٩؟ الجواب هو ٦.' }, { q: 'إذا كانت د = ٨، فما قيمة د + ٧ ؟', o: ['١', '٥٦', '١٥', '١٦'], a: 2, exp: 'نعوض عن د بالرقم ٨، فتصبح العملية ٨ + ٧ = ١٥.' }, { q: 'ما هو العدد الذي إذا قسمناه على ٤ كان الناتج ٥؟', o: ['١', '٩', '٢٠', '١٥'], a: 2, exp: 'نحلها بشكل عكسي: ٥ × ٤ = ٢٠. العدد هو ٢٠.' }, { q: 'أكمل النمط: ٢، ٥، ٨، ١١، __؟', o: ['١٢', '١٣', '١٤', '١٥'], a: 2, exp: 'النمط يزيد بمقدار ٣ في كل مرة. بعد ١١، يأتي العدد ١٤.' }]
                    ],
                    hard: [
                        [{ q: 'حل المعادلة: ٣ص = ٢١', o: ['ص = ١٨', 'ص = ٧', 'ص = ٢٤', 'ص = ٣'], a: 1, exp: 'لإيجاد قيمة ص، نقسم الطرفين على ٣. ص = ٢١ ÷ ٣ = ٧.' }, { q: 'إذا كان س/٢ = ٨، فما قيمة س؟', o: ['٤', '١٠', '٦', '١٦'], a: 3, exp: 'لإيجاد قيمة س، نضرب الطرفين في ٢. س = ٨ × ٢ = ١٦.' }, { q: 'إذا كانت ب = ٤، فما قيمة (٥ × ب) - ٥ ؟', o: ['١٥', '٢٥', '٢٠', '١٠'], a: 0, exp: 'نتبع ترتيب العمليات: الضرب أولاً (٥×٤=٢٠)، ثم الطرح (٢٠-٥=١٥).' }, { q: 'أكمل النمط: ١، ٤، ٩، ١٦، __؟', o: ['٢٠', '٢٤', '٢٥', '٣٢'], a: 2, exp: 'هذا النمط يمثل مربع الأعداد (١×١، ٢×٢، ٣×٣، ٤×٤). العدد التالي هو ٥×٥ = ٢٥.' }],
                        [{ q: 'حل المعادلة: ٥ص = ٣٠', o: ['ص = ٢٥', 'ص = ٦', 'ص = ٣٥', 'ص = ٥'], a: 1, exp: 'لإيجاد قيمة ص، نقسم الطرفين على ٥. ص = ٣٠ ÷ ٥ = ٦.' }, { q: 'إذا كان س/٣ = ٥، فما قيمة س؟', o: ['٢', '٨', '١٥', '١٨'], a: 2, exp: 'لإيجاد قيمة س، نضرب الطرفين في ٣. س = ٥ × ٣ = ١٥.' }, { q: 'إذا كانت س = ٣، فما قيمة (٦ × س) + ٢ ؟', o: ['١١', '٢٠', '٣٦', '٢٤'], a: 1, exp: 'الضرب أولاً (٦×٣=١٨)، ثم الجمع (١٨+٢=٢٠).' }, { q: 'أكمل النمط: ٢، ٥، ١٠، ١٧، __؟', o: ['٢٤', '٢٥', '٢٦', '٢٧'], a: 2, exp: 'النمط هو مربع العدد زائد واحد (١²+١, ٢²+١, ٣²+١, ٤²+١). التالي هو ٥²+١ = ٢٦.' }],
                        [{ q: 'حل المعادلة: ٤ص = ٣٦', o: ['ص = ٣٢', 'ص = ٤٠', 'ص = ٩', 'ص = ٨'], a: 2, exp: 'لإيجاد قيمة ص، نقسم الطرفين على ٤. ص = ٣٦ ÷ ٤ = ٩.' }, { q: 'إذا كان س/٦ = ٤، فما قيمة س؟', o: ['٢٤', '١٠', '٢', '٣٠'], a: 0, exp: 'لإيجاد قيمة س، نضرب الطرفين في ٦. س = ٤ × ٦ = ٢٤.' }, { q: 'إذا كانت ص = ١٠، فما قيمة (ص ÷ ٢) + ٥ ؟', o: ['٥', '١٠', '١٥', '٢٠'], a: 1, exp: 'القسمة أولاً (١٠÷٢=٥)، ثم الجمع (٥+٥=١٠).' }, { q: 'أكمل النمط: ١، ٨، ٢٧، ٦٤، __؟', o: ['٨١', '١٠٠', '١٢٥', '٢٥٦'], a: 2, exp: 'هذا النمط يمثل مكعب الأعداد (١³، ٢³، ٣³، ٤³). التالي هو ٥³ = ١٢٥.' }],
                        [{ q: 'حل المعادلة: ٧ص = ٤٩', o: ['ص = ٤٢', 'ص = ٥٦', 'ص = ٨', 'ص = ٧'], a: 3, exp: 'لإيجاد قيمة ص، نقسم الطرفين على ٧. ص = ٤٩ ÷ ٧ = ٧.' }, { q: 'إذا كان س/٥ = ١٠، فما قيمة س؟', o: ['٢', '٥', '١٥', '٥٠'], a: 3, exp: 'لإيجاد قيمة س، نضرب الطرفين في ٥. س = ١٠ × ٥ = ٥٠.' }, { q: 'إذا كانت ع = ٥، فما قيمة ٣٠ - (٤ × ع) ؟', o: ['١٠', '٢١', '٢٦', '١٥'], a: 0, exp: 'الضرب أولاً (٤×٥=٢٠)، ثم الطرح (٣٠-٢٠=١٠).' }, { q: 'أكمل النمط: ٥، ١٠، ٢٠، ٤٠، __؟', o: ['٥٠', '٦٠', '٧٠', '٨٠'], a: 3, exp: 'النمط يتضاعف (يضرب في ٢) في كل مرة. بعد ٤٠، يأتي العدد ٨٠.' }]
                    ]
                }
            },
            measurement: {
                title: 'القياس والوحدات',
                levels: {
                    easy: [
                        [{ q: 'كم يوماً في الأسبوع؟', o: ['٥ أيام', '٦ أيام', '٧ أيام', '٨ أيام'], a: 2, exp: 'الأسبوع يتكون من سبعة أيام.' }, { q: 'أي وحدة أفضل لقياس وزن تفاحة؟', o: ['الجرام', 'الكيلوجرام', 'الطن', 'المتر'], a: 0, exp: 'الجرام هو الوحدة المناسبة لقياس الأوزان الصغيرة.' }, { q: 'أي من هذه أطول: قلم رصاص أم سيارة؟', o: ['قلم رصاص', 'سيارة', 'متساويان', 'لا يمكن المقارنة'], a: 1, exp: 'من الواضح أن السيارة أطول بكثير من قلم الرصاص.' }, { q: 'إذا كانت الساعة تشير إلى تمام الساعة الثانية، فأين يكون عقرب الدقائق؟', o: ['عند ٣', 'عند ٦', 'عند ٩', 'عند ١٢'], a: 3, exp: 'عندما تكون الساعة تماماً، يكون عقرب الدقائق الطويل دائماً عند الرقم ١٢.' }],
                        [{ q: 'كم شهراً في السنة؟', o: ['١٠ أشهر', '١١ شهراً', '١٢ شهراً', '١٣ شهراً'], a: 2, exp: 'السنة تتكون من اثني عشر شهراً.' }, { q: 'أي وحدة أفضل لقياس طول غرفة؟', o: ['السنتيمتر', 'المتر', 'الكيلومتر', 'المليمتر'], a: 1, exp: 'المتر هو الوحدة القياسية والمناسبة لقياس طول الغرف.' }, { q: 'أي من هذه أثقل: فيل أم قطة؟', o: ['قطة', 'فيل', 'متساويان', 'لا يمكن المقارنة'], a: 1, exp: 'الفيل أثقل بكثير جداً من القطة.' }, { q: 'إذا كانت الساعة تشير إلى الثالثة والنصف، فأين يكون عقرب الدقائق؟', o: ['عند ٣', 'عند ٩', 'عند ١٢', 'عند ٦'], a: 3, exp: 'عندما تكون الساعة "والنصف"، يكون عقرب الدقائق دائماً عند الرقم ٦.' }],
                        [{ q: 'كم ساعة في اليوم؟', o: ['١٢ ساعة', '٢٤ ساعة', '٣٦ ساعة', '٤٨ ساعة'], a: 1, exp: 'اليوم الكامل يتكون من ٢٤ ساعة.' }, { q: 'أي وحدة أفضل لقياس كمية الماء في قارورة؟', o: ['اللتر', 'الكيلوجرام', 'المتر', 'الجرام'], a: 0, exp: 'اللتر (أو أجزاؤه مثل المليلتر) هو الوحدة المستخدمة لقياس حجم السوائل.' }, { q: 'أي من هذه أبطأ: سلحفاة أم أرنب؟', o: ['أرنب', 'سلحفاة', 'متساويان', 'لا يمكن المقارنة'], a: 1, exp: 'السلحفاة مشهورة ببطء حركتها مقارنة بالأرنب السريع.' }, { q: 'إذا كانت الساعة تشير إلى الرابعة والربع، فأين يكون عقرب الدقائق؟', o: ['عند ١٢', 'عند ٦', 'عند ٣', 'عند ٤'], a: 2, exp: 'عندما تكون الساعة "والربع"، يكون عقرب الدقائق دائماً عند الرقم ٣.' }],
                        [{ q: 'كم دقيقة في الساعة؟', o: ['٣٠ دقيقة', '٥٠ دقيقة', '٦٠ دقيقة', '١٠٠ دقيقة'], a: 2, exp: 'الساعة الواحدة تتكون من ٦٠ دقيقة.' }, { q: 'أي وحدة أفضل لقياس وزن شاحنة؟', o: ['الجرام', 'الكيلوجرام', 'الطن', 'السنتيمتر'], a: 2, exp: 'الطن هو الوحدة المستخدمة لقياس الأوزان الثقيلة جداً مثل الشاحنات.' }, { q: 'أي من هذه أسخن: كوب شاي أم قطعة ثلج؟', o: ['قطعة ثلج', 'كوب شاي', 'متساويان', 'لا يمكن المقارنة'], a: 1, exp: 'كوب الشاي درجة حرارته أعلى بكثير من درجة حرارة قطعة الثلج.' }, { q: 'إذا كانت الساعة تشير إلى السادسة تماماً، فأين يكون عقرب الساعات؟', o: ['عند ١٢', 'عند ٣', 'عند ٦', 'عند ٩'], a: 2, exp: 'عندما تكون الساعة السادسة تماماً، يشير عقرب الساعات القصير إلى الرقم ٦.' }]
                    ],
                    medium: [
                        [{ q: 'كم سنتيمتر في ٢ متر؟', o: ['٢٠ سم', '٢٠٠٠ سم', '٢ سم', '٢٠٠ سم'], a: 3, exp: 'بما أن المتر الواحد يساوي ١٠٠ سم، فإن مترين يساويان ٢ × ١٠٠ = ٢٠٠ سم.' }, { q: '٣٠٠٠ جرام تساوي كم كيلوجرام؟', o: ['٣٠ كجم', '٣ كجم', '٣٠٠ كجم', '٠.٣ كجم'], a: 1, exp: 'كل ١٠٠٠ جرام يساوي ١ كيلوجرام، لذا ٣٠٠٠ جرام تساوي ٣ كيلوجرام.' }, { q: 'إذا كانت الساعة الآن ٤:٣٠، فكم كانت قبل نصف ساعة؟', o: ['٣:٣٠', '٤:٠٠', '٥:٠٠', '٣:٠٠'], a: 1, exp: 'قبل نصف ساعة (٣٠ دقيقة) من ٤:٣٠ كانت الساعة ٤:٠٠ تماماً.' }, { q: 'ما هي الأداة التي نستخدمها لرسم خط مستقيم؟', o: ['المنقلة', 'الفرجار', 'الممحاة', 'المسطرة'], a: 3, exp: 'المسطرة هي الأداة المخصصة لرسم وقياس الخطوط المستقيمة.' }],
                        [{ q: 'كم سنتيمتر في ٥ أمتار؟', o: ['٥٠ سم', '٥٠٠ سم', '٥٠٠٠ سم', '٠.٥ سم'], a: 1, exp: 'بما أن المتر الواحد يساوي ١٠٠ سم، فإن ٥ أمتار تساوي ٥ × ١٠٠ = ٥٠٠ سم.' }, { q: '٥٠٠٠ جرام تساوي كم كيلوجرام؟', o: ['٥٠ كجم', '٥٠٠ كجم', '٥ كجم', '٠.٥ كجم'], a: 2, exp: 'كل ١٠٠٠ جرام يساوي ١ كيلوجرام، لذا ٥٠٠٠ جرام تساوي ٥ كيلوجرام.' }, { q: 'إذا كانت الساعة الآن ١٠:٠٠، فكم ستكون بعد ساعة ونصف؟', o: ['١١:٠٠', '١١:٣٠', '١٢:٠٠', '١٠:٣٠'], a: 1, exp: 'بعد ساعة تصبح ١١:٠٠، وبعد نصف ساعة إضافية تصبح ١١:٣٠.' }, { q: 'ما هي الأداة التي نستخدمها لقياس الزوايا؟', o: ['المسطرة', 'المنقلة', 'الفرجار', 'الميزان'], a: 1, exp: 'المنقلة هي الأداة الهندسية المستخدمة لقياس درجات الزوايا.' }],
                        [{ q: 'كم متر في ٣ كيلومتر؟', o: ['٣٠ متر', '٣٠٠ متر', '٣٠٠٠ متر', '٣٠٠٠٠ متر'], a: 2, exp: 'الكيلومتر الواحد يساوي ١٠٠٠ متر، لذا ٣ كيلومتر تساوي ٣ × ١٠٠٠ = ٣٠٠٠ متر.' }, { q: '٢ كيلوجرام تساوي كم جرام؟', o: ['٢٠ جرام', '٢٠٠ جرام', '٢٠٠٠ جرام', '٢٠٠٠٠ جرام'], a: 2, exp: 'الكيلوجرام الواحد يساوي ١٠٠٠ جرام، لذا ٢ كيلوجرام تساوي ٢ × ١٠٠٠ = ٢٠٠٠ جرام.' }, { q: 'إذا كانت الساعة الآن ٢:١٥، فكم كانت قبل ربع ساعة؟', o: ['٢:٠٠', '١:٤٥', '٢:٣٠', '١:٣٠'], a: 0, exp: 'قبل ربع ساعة (١٥ دقيقة) من ٢:١٥ كانت الساعة ٢:٠٠ تماماً.' }, { q: 'ما هي الأداة التي نستخدمها لقياس درجة الحرارة؟', o: ['المسطرة', 'الساعة', 'مقياس الحرارة', 'الميزان'], a: 2, exp: 'مقياس الحرارة (الترمومتر) هو الأداة المستخدمة لقياس درجة حرارة الأشياء.' }],
                        [{ q: 'كم مليمتر في ١٠ سنتيمتر؟', o: ['١٠ ملم', '١٠٠ ملم', '١٠٠٠ ملم', '١ ملم'], a: 1, exp: 'السنتيمتر الواحد يساوي ١٠ مليمتر، لذا ١٠ سنتيمتر تساوي ١٠ × ١٠ = ١٠٠ مليمتر.' }, { q: 'نصف كيلوجرام يساوي كم جرام؟', o: ['٥٠ جرام', '٥٠٠٠ جرام', '٥٠٠ جرام', '٥ جرام'], a: 2, exp: 'الكيلوجرام الكامل ١٠٠٠ جرام، إذن نصفه يساوي ٥٠٠ جرام.' }, { q: 'إذا كانت الساعة الآن ٨:٤٥، فكم ستكون بعد ٢٠ دقيقة؟', o: ['٩:٠٠', '٨:٥٥', '٩:١٥', '٩:٠٥'], a: 3, exp: '٨:٤٥ + ١٥ دقيقة = ٩:٠٠. نضيف الـ ٥ دقائق المتبقية، فتكون الساعة ٩:٠٥.' }, { q: 'ما هي الأداة التي نستخدمها لرسم دائرة؟', o: ['المسطرة', 'المنقلة', 'المثلث', 'الفرجار'], a: 3, exp: 'الفرجار هو الأداة الهندسية المخصصة لرسم الدوائر والأقواس.' }]
                    ],
                    hard: [
                        [{ q: 'فيلم مدته ساعة و ٤٥ دقيقة. كم دقيقة هي مدة الفيلم الإجمالية؟', o: ['١٠٠ دقيقة', '١٤٥ دقيقة', '١٠٥ دقيقة', '٦٥ دقيقة'], a: 2, exp: 'الساعة تساوي ٦٠ دقيقة. نضيف إليها ٤٥ دقيقة، فيكون المجموع ٦٠ + ٤٥ = ١٠٥ دقيقة.' }, { q: 'إذا كان محيط حديقة مستطيلة ٤٠ متراً، وطولها ١٢ متراً، فكم عرضها؟', o: ['٨ أمتار', '١٦ متراً', '٢٨ متراً', '٢٠ متراً'], a: 0, exp: 'نصف المحيط = ٤٠ ÷ ٢ = ٢٠ متر. العرض = نصف المحيط - الطول = ٢٠ - ١٢ = ٨ أمتار.' }, { q: 'كم لتراً في ٥٠٠٠ ملليلتر؟', o: ['٥٠٠ لتر', '٥٠ لتر', '٥ لتر', '٠.٥ لتر'], a: 2, exp: 'بما أن كل ١٠٠٠ ملليلتر يساوي ١ لتر، فإننا نقسم ٥٠٠٠ على ١٠٠٠ لنحصل على ٥ لترات.' }, { q: 'بدأ التمرين الساعة ٨:١٠ صباحاً واستمر لمدة ٥٥ دقيقة. متى انتهى؟', o: ['٩:٠٠ ص', '٨:٥٥ ص', '٩:٠٥ ص', '٩:١٠ ص'], a: 2, exp: '٨:١٠ + ٥٠ دقيقة = ٩:٠٠. ثم نضيف الـ ٥ دقائق المتبقية، فيكون وقت الانتهاء هو ٩:٠٥ صباحاً.' }],
                        [{ q: 'رحلة مدتها ساعتان و ١٥ دقيقة. كم دقيقة هي مدة الرحلة؟', o: ['١٢٥ دقيقة', '١٣٥ دقيقة', '١٥٠ دقيقة', '١١٥ دقيقة'], a: 1, exp: 'الساعتان تساويان ١٢٠ دقيقة. نضيف إليها ١٥ دقيقة، فيكون المجموع ١٢٠ + ١٥ = ١٣٥ دقيقة.' }, { q: 'إذا كان محيط ملعب مربع الشكل ٨٠ متراً، فكم طول ضلعه؟', o: ['٤٠ متراً', '٣٠ متراً', '٢٠ متراً', '١٠ أمتار'], a: 2, exp: 'طول ضلع المربع = المحيط ÷ ٤. إذن ٨٠ ÷ ٤ = ٢٠ متراً.' }, { q: 'كم لتراً في ٢٥٠٠ ملليلتر؟', o: ['٢٥ لتر', '٢.٥ لتر', '٠.٢٥ لتر', '٢٥٠ لتر'], a: 1, exp: 'بما أن كل ١٠٠٠ ملليلتر يساوي ١ لتر، فإن ٢٥٠٠ ملليلتر تساوي ٢.٥ لتر.' }, { q: 'بدأ فيلم الساعة ٧:٣٠ مساءً وانتهى الساعة ٩:٠٠ مساءً. كم مدته؟', o: ['ساعة ونصف', 'ساعتان', 'ساعة وربع', 'ساعة'], a: 0, exp: 'من ٧:٣٠ إلى ٨:٣٠ ساعة، ومن ٨:٣٠ إلى ٩:٠٠ نصف ساعة. المجموع ساعة ونصف.' }],
                        [{ q: 'مباراة مدتها ٩٠ دقيقة. كم ساعة ودقيقة هي مدة المباراة؟', o: ['ساعة و ٣٠ دقيقة', 'ساعة و ٤٥ دقيقة', 'ساعتان إلا ربع', 'ساعة و ٢٠ دقيقة'], a: 0, exp: '٩٠ دقيقة تساوي ٦٠ دقيقة (ساعة) + ٣٠ دقيقة (نصف ساعة).' }, { q: 'إذا كان محيط إطار صورة مستطيل ٦٠ سم، وعرضه ١٠ سم، فكم طوله؟', o: ['٥٠ سم', '٤٠ سم', '٣٠ سم', '٢٠ سم'], a: 3, exp: 'نصف المحيط = ٦٠ ÷ ٢ = ٣٠ سم. الطول = نصف المحيط - العرض = ٣٠ - ١٠ = ٢٠ سم.' }, { q: 'كم ملليلتر في ٣ لترات؟', o: ['٣٠ مل', '٣٠٠ مل', '٣٠٠٠ مل', '٣٠٠٠٠ مل'], a: 2, exp: 'اللتر الواحد يساوي ١٠٠٠ ملليلتر، لذا ٣ لترات تساوي ٣ × ١٠٠٠ = ٣٠٠٠ ملليلتر.' }, { q: 'انطلق قطار الساعة ١١:٠٠ صباحاً ووصل الساعة ٢:٣٠ ظهراً. كم مدة الرحلة؟', o: ['ساعتان ونصف', '٣ ساعات', '٣ ساعات ونصف', '٤ ساعات'], a: 2, exp: 'من ١١:٠٠ إلى ٢:٠٠ هي ٣ ساعات. نضيف نصف ساعة، فتكون المدة ٣ ساعات ونصف.' }],
                        [{ q: 'حصة دراسية مدتها ٥٠ دقيقة. إذا بدأت ٩:٠٠ ص، متى تنتهي؟', o: ['٩:٤٥ ص', '١٠:٠٠ ص', '٩:٥٠ ص', '١٠:١٠ ص'], a: 2, exp: 'ببساطة نضيف ٥٠ دقيقة إلى وقت البداية، ٩:٠٠ + ٥٠ دقيقة = ٩:٥٠ صباحاً.' }, { q: 'إذا كانت مساحة غرفة مربعة ٢٥ متراً مربعاً، فكم طول ضلعها؟', o: ['٤ أمتار', '٥ أمتار', '٦ أمتار', '١٠ أمتار'], a: 1, exp: 'بما أن مساحة المربع = الضلع × نفسه، نبحث عن العدد الذي إذا ضرب في نفسه كان الناتج ٢٥، وهو ٥.' }, { q: 'كم ملليلتر في لتر ونصف؟', o: ['١٥٠ مل', '١٥٠٠ مل', '١٠٥٠ مل', '٥٠٠ مل'], a: 1, exp: 'اللتر ١٠٠٠ مل والنصف لتر ٥٠٠ مل. المجموع ١٠٠٠ + ٥٠٠ = ١٥٠٠ ملليلتر.' }, { q: 'نام طفل الساعة ٩:٠٠ مساءً واستيقظ ٦:٣٠ صباحاً. كم ساعة نام؟', o: ['٨ ساعات ونصف', '٩ ساعات', '٩ ساعات ونصف', '١٠ ساعات'], a: 2, exp: 'من ٩ مساءً إلى ٦ صباحاً ٩ ساعات. نضيف نصف ساعة، فتكون المدة ٩ ساعات ونصف.' }]
                    ]
                }
            },
            statistics: {
                title: 'الإحصاء والبيانات',
                levels: {
                    easy: [
                        [{ q: 'في قائمة الفواكه: تفاح، موز، تفاح، برتقال، تفاح. ما هي الفاكهة الأكثر تكراراً؟', o: ['موز', 'برتقال', 'تفاح', 'لا يوجد'], a: 2, exp: 'كلمة "تفاح" تكررت ٣ مرات، وهي الأكثر.' }, { q: 'إذا كان كل رمز 🍦 يمثل طالباً واحداً، فكم عدد الطلاب الذين يمثلهم: 🍦🍦🍦 ؟', o: ['طالبان', 'ثلاثة طلاب', 'أربعة طلاب', 'طالب واحد'], a: 1, exp: 'بما أن كل رمز يمثل طالباً، فإن ثلاثة رموز تمثل ثلاثة طلاب.' }, { q: 'إذا كان لديك ٣ قمصان حمراء و ٢ زرقاء، أي لون لديه فرصة أكبر أن تختاره عشوائياً؟', o: ['أزرق', 'أحمر', 'نفس الفرصة', 'أخضر'], a: 1, exp: 'بما أن عدد القمصان الحمراء أكبر، فإن فرصة اختيارها هي الأكبر.' }, { q: 'في رسم بياني يمثل أيام الأسبوع، أي يوم يأتي بعد يوم الإثنين؟', o: ['الأحد', 'الثلاثاء', 'الأربعاء', 'السبت'], a: 1, exp: 'وفقاً لترتيب أيام الأسبوع، يوم الثلاثاء يأتي مباشرة بعد يوم الإثنين.' }],
                        [{ q: 'في قائمة الألوان: أحمر، أزرق، أخضر، أزرق، أحمر، أزرق. ما اللون الأكثر تكراراً؟', o: ['أحمر', 'أخضر', 'أزرق', 'أصفر'], a: 2, exp: 'اللون "أزرق" تكرر ٣ مرات، وهو الأكثر.' }, { q: 'إذا كان كل رمز ⭐ يمثل نقطة واحدة، فكم عدد النقاط التي يمثلها: ⭐⭐⭐⭐⭐ ؟', o: ['٤ نقاط', '٥ نقاط', '٦ نقاط', '٣ نقاط'], a: 1, exp: 'بما أن كل رمز يمثل نقطة، فإن خمسة رموز تمثل خمس نقاط.' }, { q: 'في كيس ٥ كرات زرقاء و ٨ خضراء، أي لون لديه فرصة أكبر أن تسحبه؟', o: ['أزرق', 'أخضر', 'نفس الفرصة', 'أحمر'], a: 1, exp: 'بما أن عدد الكرات الخضراء أكبر، فإن فرصة سحبها هي الأكبر.' }, { q: 'في تقويم شهري، أي شهر يأتي قبل شهر رمضان؟', o: ['شوال', 'رجب', 'شعبان', 'ذو القعدة'], a: 2, exp: 'وفقاً للتقويم الهجري، شهر شعبان يأتي مباشرة قبل شهر رمضان.' }],
                        [{ q: 'في قائمة الأرقام: ٥، ٧، ٨، ٧، ٦. ما الرقم الأكثر تكراراً؟', o: ['٥', '٦', '٧', '٨'], a: 2, exp: 'الرقم ٧ تكرر مرتين، وهو الأكثر تكراراً بين الأرقام.' }, { q: 'إذا كان كل رمز 🚗 يمثل سيارة واحدة، فكم عدد السيارات التي يمثلها: 🚗🚗 ؟', o: ['سيارة واحدة', 'سيارتان', '٣ سيارات', '٤ سيارات'], a: 1, exp: 'بما أن كل رمز يمثل سيارة، فإن رمزين يمثلان سيارتين.' }, { q: 'إذا رميت حجر نرد، فهل فرصة ظهور عدد زوجي أكبر أم فردي؟', o: ['زوجي أكبر', 'فردي أكبر', 'نفس الفرصة', 'لا يمكن المعرفة'], a: 2, exp: 'حجر النرد له ٣ أرقام زوجية (٢,٤,٦) و ٣ فردية (١,٣,٥)، لذا الفرصة متساوية.' }, { q: 'في قائمة فصول السنة، أي فصل يأتي بعد الشتاء؟', o: ['الصيف', 'الخريف', 'الربيع', 'الشتاء'], a: 2, exp: 'بعد فصل الشتاء، يأتي فصل الربيع.' }],
                        [{ q: 'في قائمة الحيوانات: قطة، كلب، قطة، أرنب. ما الحيوان الأكثر تكراراً؟', o: ['كلب', 'أرنب', 'قطة', 'لا يوجد'], a: 2, exp: 'حيوان "القطة" تكرر مرتين، وهو الأكثر.' }, { q: 'إذا كان كل رمز 📖 يمثل كتاباً واحداً، فكم عدد الكتب التي يمثلها: 📖📖📖📖 ؟', o: ['٣ كتب', '٤ كتب', '٥ كتب', '٦ كتب'], a: 1, exp: 'بما أن كل رمز يمثل كتاباً، فإن أربعة رموز تمثل أربعة كتب.' }, { q: 'في صف ١٠ أولاد و ١٢ بنتاً، هل فرصة اختيار ولد أكبر أم بنت؟', o: ['ولد', 'بنت', 'نفس الفرصة', 'لا يمكن التحديد'], a: 1, exp: 'بما أن عدد البنات أكبر، فإن فرصة اختيار بنت عشوائياً هي الأكبر.' }, { q: 'في قائمة الوجبات، أي وجبة تأتي بعد الغداء؟', o: ['الفطور', 'العشاء', 'الغداء', 'السحور'], a: 1, exp: 'الوجبة الرئيسية التي تأتي بعد الغداء هي وجبة العشاء.' }]
                    ],
                    medium: [
                        [{ q: 'ما هو متوسط الأعداد: ٢، ٣، ٧ ؟', o: ['٣', '٤', '٦', '٧'], a: 1, exp: 'نجمع الأعداد (٢+٣+٧ = ١٢) ثم نقسم على عددها (٣). ١٢ ÷ ٣ = ٤.' }, { q: 'إذا رميت عملة معدنية، فما هو احتمال ظهور "صورة"؟', o: ['١٠٠%', '٠%', '٢٥%', '٥٠%'], a: 3, exp: 'العملة المعدنية لها وجهان، ولكل وجه فرصة ظهور متساوية، وهي النصف أو ٥٠%.' }, { q: 'ما هو منوال البيانات التالية: ٨, ٩, ١٠, ٩, ٨, ٩ ؟', o: ['٨', '١٠', '٩', 'لا يوجد'], a: 2, exp: 'المنوال هو القيمة الأكثر تكراراً. العدد ٩ تكرر ٣ مرات، وهو الأكثر.' }, { q: 'إذا كان رسم بياني يوضح أن ٥ طلاب يفضلون كرة القدم و ١٠ يفضلون السلة، كم يزيد عدد محبي السلة؟', o: ['بمقدار ٥', 'بمقدار ١٠', 'بمقدار ٢', 'لا يزيد'], a: 0, exp: 'الفرق بين عدد محبي السلة وكرة القدم هو ١٠ - ٥ = ٥ طلاب.' }],
                        [{ q: 'ما هو متوسط الأعداد: ٥، ٦، ٧ ؟', o: ['٥', '٦', '٧', '١٨'], a: 1, exp: 'نجمع الأعداد (٥+٦+٧ = ١٨) ثم نقسم على عددها (٣). ١٨ ÷ ٣ = ٦.' }, { q: 'إذا رميت حجر نرد، فما هو احتمال ظهور الرقم ٦؟', o: ['١/٦', '١/٣', '١/٢', '٦/٦'], a: 0, exp: 'حجر النرد له ٦ أوجه، وظهور أي وجه منها احتماله ١ من ٦.' }, { q: 'ما هو منوال البيانات التالية: أحمر، أزرق، أخضر، أزرق، أصفر ؟', o: ['أحمر', 'أخضر', 'أزرق', 'أصفر'], a: 2, exp: 'المنوال هو القيمة الأكثر تكراراً. اللون "أزرق" هو الوحيد الذي تكرر.' }, { q: 'إذا كان أحمد طوله ١٥٠ سم وسعيد طوله ١٤٠ سم، بكم يزيد طول أحمد؟', o: ['١٠ سم', '٢٠ سم', '٥ سم', 'لا يزيد'], a: 0, exp: 'الفرق في الطول هو ١٥٠ - ١٤٠ = ١٠ سم.' }],
                        [{ q: 'ما هو متوسط الأعداد: ١٠، ٢٠، ٣٠ ؟', o: ['١٥', '٢٠', '٢٥', '٦٠'], a: 1, exp: 'نجمع الأعداد (١٠+٢٠+٣٠ = ٦٠) ثم نقسم على عددها (٣). ٦٠ ÷ ٣ = ٢٠.' }, { q: 'في كيس ١٠ كرات، ٣ منها حمراء. ما احتمال سحب كرة حمراء؟', o: ['٣/١٠', '٧/١٠', '١/٣', '١/١٠'], a: 0, exp: 'الاحتمال هو عدد الكرات الحمراء مقسوماً على العدد الكلي للكرات.' }, { q: 'ما هو منوال البيانات التالية: ٥, ٦, ٧, ٥, ٨, ٥, ٩ ؟', o: ['٧', '٦', '٨', '٥'], a: 3, exp: 'المنوال هو القيمة الأكثر تكراراً. العدد ٥ تكرر ٣ مرات، وهو الأكثر.' }, { q: 'إذا كانت درجة حرارة الرياض ٤٠ والدمام ٤٥، بكم تزيد حرارة الدمام؟', o: ['٤ درجات', '٥ درجات', '١٠ درجات', 'لا تزيد'], a: 1, exp: 'الفرق في درجة الحرارة هو ٤٥ - ٤٠ = ٥ درجات.' }],
                        [{ q: 'ما هو متوسط الأعداد: ١، ٢، ٣، ٤ ؟', o: ['٢', '٢.٥', '٣', '١٠'], a: 1, exp: 'نجمع الأعداد (١+٢+٣+٤ = ١٠) ثم نقسم على عددها (٤). ١٠ ÷ ٤ = ٢.٥.' }, { q: 'في عجلة دوارة مقسمة لـ ٤ ألوان متساوية، ما احتمال توقفها على اللون الأخضر؟', o: ['١/٢', '١/٣', '١/٤', '٤/٤'], a: 2, exp: 'بما أن الألوان متساوية، فاحتمال أي لون منها هو ١ من ٤.' }, { q: 'ما هو منوال البيانات التالية: ١٠٠, ٢٠٠, ١٠٠, ٣٠٠, ٤٠٠ ؟', o: ['١٠٠', '٢٠٠', '٣٠٠', '٤٠٠'], a: 0, exp: 'المنوال هو القيمة الأكثر تكراراً. العدد ١٠٠ تكرر مرتين.' }, { q: 'إذا كان سعر كتاب ٢٠ ريالاً وسعر دفتر ١٥ ريالاً، بكم يزيد سعر الكتاب؟', o: ['٣٥ ريالاً', '١٠ ريالات', '٥ ريالات', 'لا يزيد'], a: 2, exp: 'الفرق في السعر هو ٢٠ - ١٥ = ٥ ريالات.' }]
                    ],
                    hard: [
                        [{ q: 'ما هو وسيط الأعداد التالية: ١٠، ٥، ٢٠، ١٥، ٢٥؟', o: ['٢٠', '١٠', '١٥', '٢٥'], a: 2, exp: 'أولاً نرتب الأعداد: ٥، ١٠، ١٥، ٢٠، ٢٥. الوسيط هو العدد الذي يقع في المنتصف تماماً، وهو ١٥.' }, { q: 'ما هو المدى للبيانات التالية: ٣٣, ١٥, ٤٠, ٢٢, ١٢؟', o: ['٢١', '٢٨', '٤٠', '١٢'], a: 1, exp: 'المدى هو الفرق بين أعلى قيمة وأقل قيمة. ٤٠ - ١٢ = ٢٨.' }, { q: 'إذا كان متوسط درجات طالب في اختبارين هو ٩٠، وكانت درجته في الأول ٨٥، فما درجته في الثاني؟', o: ['٩٥', '٩٠', '٨٥', '١٠٠'], a: 0, exp: 'المجموع الكلي للدرجتين = المتوسط × ٢ = ٩٠ × ٢ = ١٨٠. درجة الاختبار الثاني = ١٨٠ - ٨٥ = ٩٥.' }, { q: 'في صف به ٢٠ طالباً، ٥٠% منهم أولاد. كم عدد البنات؟', o: ['٥', '١٥', '١٠', '٢٠'], a: 2, exp: 'إذا كان ٥٠% أولاد، فإن الـ ٥٠% المتبقية هم بنات. نصف عدد الطلاب (٢٠ ÷ ٢) هو ١٠ بنات.' }],
                        [{ q: 'ما هو وسيط الأعداد التالية: ٩، ٣، ٧، ٥، ١؟', o: ['٧', '٣', '٥', '٩'], a: 2, exp: 'نرتب الأعداد: ١، ٣، ٥، ٧، ٩. الوسيط هو العدد الأوسط، وهو ٥.' }, { q: 'ما هو المدى للبيانات التالية: ١٠, ٢٠, ٥, ٢٥, ١٥؟', o: ['١٥', '٢٠', '٢٥', '٥'], a: 1, exp: 'المدى هو الفرق بين أعلى قيمة (٢٥) وأقل قيمة (٥). ٢٥ - ٥ = ٢٠.' }, { q: 'إذا كان متوسط عددين هو ١٥، وكان أحدهما ١٠، فما العدد الآخر؟', o: ['١٥', '٢٥', '٢٠', '٣٠'], a: 2, exp: 'مجموع العددين = ١٥ × ٢ = ٣٠. العدد الآخر = ٣٠ - ١٠ = ٢٠.' }, { q: 'في حديقة ٣٠ شجرة، ٤٠% منها نخيل. كم عدد أشجار النخيل؟', o: ['١٠', '١٢', '١٥', '٢٠'], a: 1, exp: 'عدد النخيل = ٣٠ × (٤٠ ÷ ١٠٠) = ١٢ شجرة.' }],
                        [{ q: 'ما هو وسيط الأعداد التالية: ١٢، ١٨، ١٠، ٢٠؟', o: ['١٢', '١٨', '١٥', '١٤'], a: 3, exp: 'نرتب الأعداد: ١٠، ١٢، ١٨، ٢٠. الوسيط هو متوسط العددين في المنتصف: (١٢+١٨)÷٢ = ١٥.' }, { q: 'ما هو المدى للبيانات التالية: ١٠٠, ٥٠, ١٥٠, ٨٠؟', o: ['٥٠', '٨٠', '١٠٠', '١٥٠'], a: 2, exp: 'المدى هو الفرق بين أعلى قيمة (١٥٠) وأقل قيمة (٥٠). ١٥٠ - ٥٠ = ١٠٠.' }, { q: 'إذا كان متوسط مصروف ٣ إخوة هو ٢٠ ريالاً، ومصروف الأول ١٥ والثاني ٢٠، فما مصروف الثالث؟', o: ['٢٠', '٢٥', '٣٠', '١٥'], a: 1, exp: 'مجموع مصروفهم = ٢٠ × ٣ = ٦٠ ريالاً. مصروف الثالث = ٦٠ - (١٥ + ٢٠) = ٢٥ ريالاً.' }, { q: 'في مكتبة ٥٠ كتاباً، ٢٠% منها قصص. كم عدد القصص؟', o: ['١٠', '١٥', '٢٠', '٢٥'], a: 0, exp: 'عدد القصص = ٥٠ × (٢٠ ÷ ١٠٠) = ١٠ كتب.' }],
                        [{ q: 'ما هو وسيط الأعداد التالية: ٥٠، ٢٠، ٤٠، ١٠، ٣٠؟', o: ['٤٠', '٣٥', '٣٠', '٢٥'], a: 2, exp: 'نرتب الأعداد: ١٠، ٢٠، ٣٠، ٤٠، ٥٠. الوسيط هو العدد الأوسط، وهو ٣٠.' }, { q: 'ما هو المدى للبيانات التالية: ٧, ٨, ٦, ٩, ٥؟', o: ['٣', '٤', '٥', '٩'], a: 1, exp: 'المدى هو الفرق بين أعلى قيمة (٩) وأقل قيمة (٥). ٩ - ٥ = ٤.' }, { q: 'إذا كان متوسط وزن ٣ صناديق هو ١٠ كجم، فما مجموع أوزانهم؟', o: ['١٣ كجم', '٢٠ كجم', '٣٠ كجم', '٤٠ كجم'], a: 2, exp: 'مجموع الأوزان = المتوسط × عدد الصناديق = ١٠ × ٣ = ٣٠ كجم.' }, { q: 'فريق به ١٠ لاعبين، ٩٠% منهم سجلوا أهدافاً. كم لاعباً سجل هدفاً؟', o: ['١', '٥', '٨', '٩'], a: 3, exp: 'عدد اللاعبين الذين سجلوا = ١٠ × (٩٠ ÷ ١٠٠) = ٩ لاعبين.' }]
                    ]
                }
            },
            percentages: {
                title: 'النسب المئوية',
                levels: {
                    easy: [
                        [{ q: 'إذا أكلت نصف تفاحة، فكم النسبة المئوية التي أكلتها؟', o: ['٢٥%', '١٠٠%', '٥٠%', '١٠%'], a: 2, exp: 'النصف دائماً يمثل ٥٠% من أي شيء كامل.' }, { q: 'ماذا تعني ١٠٠% من كعكة؟', o: ['نصف الكعكة', 'كل الكعكة', 'ربع الكعكة', 'لا شيء'], a: 1, exp: '١٠٠% تعني الكل أو الشيء كاملاً.' }, { q: 'أي نسبة أكبر: ٢٠% أم ١٠%؟', o: ['٢٠%', '١٠%', 'متساويتان', 'لا يمكن المقارنة'], a: 0, exp: 'كلما زاد الرقم، زادت النسبة المئوية. ٢٠ أكبر من ١٠.' }, { q: 'إذا كانت بطارية هاتفك ١٠٠%، فهذا يعني أنها:', o: ['فارغة', 'نصف ممتلئة', 'ممتلئة بالكامل', 'تحتاج للشحن'], a: 2, exp: '١٠٠% هي النسبة التي تدل على الاكتمال والامتلاء.' }],
                        [{ q: 'إذا أنفقت rبع مصروفك، فكم النسبة المئوية التي أنفقتها؟', o: ['٥٠%', '٢٥%', '٧٥%', '١٠%'], a: 1, exp: 'الربع دائماً يمثل ٢٥% من أي شيء كامل.' }, { q: 'ماذا تعني ٥٠% من رحلة؟', o: ['كل الرحلة', 'ربع الرحلة', 'نصف الرحلة', 'بداية الرحلة'], a: 2, exp: '٥٠% تعني النصف.' }, { q: 'أي نسبة أكبر: ٧٥% أم ٥٠%؟', o: ['٥٠%', '٧٥%', 'متساويتان', 'لا يمكن المقارنة'], a: 1, exp: '٧٥ أكبر من ٥٠، لذا النسبة أكبر.' }, { q: 'إذا كان خزان الوقود ٥٠%، فهذا يعني أنه:', o: ['ممتلئ بالكامل', 'فارغ', 'ممتلئ إلى النصف', 'يحتاج للقليل'], a: 2, exp: '٥٠% تعني أن الخزان ممتلئ إلى نصفه.' }],
                        [{ q: 'إذا أجبت على كل الأسئلة بشكل صحيح، فكم نسبتك المئوية؟', o: ['٥٠%', '٧٥%', '٩٠%', '١٠٠%'], a: 3, exp: 'الإجابة على كل شيء بشكل صحيح تعني الحصول على الدرجة الكاملة أو ١٠٠%.' }, { q: 'ماذا تعني ٢٥% من مبلغ؟', o: ['كل المبلغ', 'نصف المبلغ', 'ربع المبلغ', 'لا شيء'], a: 2, exp: '٢٥% تعني الربع.' }, { q: 'أي نسبة أصغر: ٣٠% أم ٣٣%؟', o: ['٣٠%', '٣٣%', 'متساويتان', 'لا يمكن المقارنة'], a: 0, exp: '٣٠ أصغر من ٣٣، لذا النسبة أصغر.' }, { q: 'إذا اكتمل تحميل ملف بنسبة ٢٥%، فهذا يعني أنه:', o: ['اكتمل نصفه', 'اكتمل كله', 'اكتمل ربعه', 'لم يبدأ'], a: 2, exp: '٢٥% تعني أن ربع الملف قد تم تحميله.' }],
                        [{ q: 'إذا كان كوب الماء فارغاً تماماً، فكم النسبة المئوية للماء فيه؟', o: ['١٠٠%', '٥٠%', '١٠%', '٠%'], a: 3, exp: 'كلمة "فارغ" تعني عدم وجود أي شيء، أي أن النسبة هي ٠%.' }, { q: 'ماذا تعني ٠% من بطارية؟', o: ['ممتلئة', 'فارغة تماماً', 'نصفها ممتلئ', 'مشحونة'], a: 1, exp: '٠% تعني أنها فارغة من الطاقة.' }, { q: 'أي نسبة أكبر: ٩٩% أم ١٠٠%؟', o: ['٩٩%', '١٠٠%', 'متساويتان', 'لا يمكن المقارنة'], a: 1, exp: '١٠٠ أكبر من ٩٩، لذا النسبة أكبر.' }, { q: 'إذا كان خصم على سلعة ١٠%، فهذا يعني أن سعرها:', o: ['سيزيد', 'لن يتغير', 'سينقص', 'سيتضاعف'], a: 2, exp: 'الخصم يعني أن السعر الأصلي سينقص.' }]
                    ],
                    medium: [
                        [{ q: 'الكسر الاعتيادي ١/٤ يساوي:', o: ['٢٠%', '٤٠%', '١٤%', '٢٥%'], a: 3, exp: 'الربع يمثل ٢٥% من الكل (١٠٠ ÷ ٤ = ٢٥).' }, { q: 'ما قيمة ٥٠% من العدد ٢٠؟', o: ['٥', '١٠', '١٥', '٢٠'], a: 1, exp: '٥٠% تعني النصف. نصف العدد ٢٠ هو ١٠.' }, { q: 'الكسر العشري ٠.١ يمثل أي نسبة مئوية؟', o: ['١%', '١٠٠%', '١٠%', '٠.١%'], a: 2, exp: 'لتحويل كسر عشري إلى نسبة مئوية، نضربه في ١٠٠. ٠.١ × ١٠٠ = ١٠%.' }, { q: 'صندوق به ١٠ كرات، ٧ منها حمراء. ما هي النسبة المئوية للكرات الحمراء؟', o: ['٧%', '٧٠%', '١٠%', '١٧%'], a: 1, exp: '٧ من ١٠ تعني ٧٠ من ١٠٠، أي ٧٠%.' }],
                        [{ q: 'الكسر الاعتيادي ١/٢ يساوي:', o: ['٢٠%', '٥٠%', '٢٥%', '١٢%'], a: 1, exp: 'النصف يمثل ٥٠% من الكل (١٠٠ ÷ ٢ = ٥٠).' }, { q: 'ما قيمة ٥٠% من العدد ٤٠؟', o: ['١٠', '١٥', '٢٠', '٢٥'], a: 2, exp: '٥٠% تعني النصف. نصف العدد ٤٠ هو ٢٠.' }, { q: 'الكسر العشري ٠.٥ يمثل أي نسبة مئوية؟', o: ['٥%', '٥٠%', '٠.٥%', '٥٠٠%'], a: 1, exp: 'لتحويل كسر عشري إلى نسبة مئوية، نضربه في ١٠٠. ٠.٥ × ١٠٠ = ٥٠%.' }, { q: 'صف به ١٠ طلاب، ٤ منهم بنات. ما النسبة المئوية للبنات؟', o: ['٤%', '١٤%', '٤٠%', '٤٤%'], a: 2, exp: '٤ من ١٠ تعني ٤٠ من ١٠٠، أي ٤٠%.' }],
                        [{ q: 'الكسر الاعتيادي ١/٥ يساوي:', o: ['١٥%', '٥٠%', '٢٠%', '٢٥%'], a: 2, exp: 'الخمس يمثل ٢٠% من الكل (١٠٠ ÷ ٥ = ٢٠).' }, { q: 'ما قيمة ٢٥% من العدد ١٦؟', o: ['٤', '٨', '٢', '٦'], a: 0, exp: '٢٥% تعني الربع. ربع العدد ١٦ هو ٤.' }, { q: 'الكسر العشري ٠.٧٥ يمثل أي نسبة مئوية؟', o: ['٧.٥%', '٧٥٠%', '٧٥%', '٠.٧٥%'], a: 2, exp: 'لتحويل كسر عشري إلى نسبة مئوية، نضربه في ١٠٠. ٠.٧٥ × ١٠٠ = ٧٥%.' }, { q: 'فريق لعب ١٠ مباريات، فاز في ٩. ما النسبة المئوية للفوز؟', o: ['٩%', '١٩%', '٩٩%', '٩٠%'], a: 3, exp: '٩ من ١٠ تعني ٩٠ من ١٠٠، أي ٩٠%.' }],
                        [{ q: 'الكسر الاعتيادي ٣/٤ يساوي:', o: ['٣٤%', '٧٥%', '٦٠%', '٨٠%'], a: 1, exp: 'الثلاثة أرباع تمثل ٧٥% من الكل.' }, { q: 'ما قيمة ١٠% من العدد ٨٠؟', o: ['٤', '٨', '١٠', '١٦'], a: 1, exp: '١٠% من أي عدد تعني قسمته على ١٠. ٨٠ ÷ ١٠ = ٨.' }, { q: 'الكسر العشري ١.٠ يمثل أي نسبة مئوية؟', o: ['١%', '١٠%', '١٠٠%', '١٠٠٠%'], a: 2, exp: 'لتحويل كسر عشري إلى نسبة مئوية، نضربه في ١٠٠. ١.٠ × ١٠٠ = ١٠٠%.' }, { q: 'سلة بها ١٠ فواكه، ١ منها تفاحة. ما النسبة المئوية للتفاح؟', o: ['١%', '١٠%', '١١%', '٢٠%'], a: 1, exp: '١ من ١٠ تعني ١٠ من ١٠٠، أي ١٠%.' }]
                    ],
                    hard: [
                        [{ q: 'ما قيمة ٢٠% من العدد ٢٠٠؟', o: ['٢٠', '٤٠', '٥٠', '١٠٠'], a: 1, exp: 'طريقة سهلة: ١٠% من ٢٠٠ هي ٢٠. إذن ٢٠% هي ضعفها، أي ٤٠. أو (٢٠ × ٢٠٠) ÷ ١٠٠ = ٤٠.' }, { q: 'سعر قميص ٨٠ ريالاً، عليه خصم ٢٥%. كم ريالاً ستوفر؟', o: ['٢٥ ريال', '٨ ريال', '٤٠ ريال', '٢٠ ريال'], a: 3, exp: '٢٥% تعادل الربع. ربع المبلغ ٨٠ هو ٨٠ ÷ ٤ = ٢٠ ريال.' }, { q: 'أجاب طالب على ١٨ سؤالاً صحيحاً من أصل ٢٠. ما هي نسبته المئوية؟', o: ['١٨%', '٨٠%', '٩٠%', '٨٨%'], a: 2, exp: 'النسبة = (١٨ ÷ ٢٠) × ١٠٠ = ٠.٩ × ١٠٠ = ٩٠%.' }, { q: 'ما هو العدد الذي ٥٠% منه يساوي ١٥؟', o: ['١٥', '٣٠', '٥٠', '٧.٥'], a: 1, exp: 'إذا كان نصف العدد هو ١٥، فإن العدد كاملاً (١٠٠%) هو ضعف هذا الرقم: ١٥ × ٢ = ٣٠.' }],
                        [{ q: 'ما قيمة ٣٠% من العدد ١٥٠؟', o: ['٣٠', '٤٥', '٥٠', '٦٠'], a: 1, exp: '١٠% من ١٥٠ هي ١٥. إذن ٣٠% هي ١٥ × ٣ = ٤٥.' }, { q: 'سعر لعبة ١٠٠ ريال، عليها خصم ١٠%. كم سعرها الجديد؟', o: ['١١٠ ريال', '٨٠ ريال', '٩٠ ريال', '١٠ ريال'], a: 2, exp: 'قيمة الخصم ١٠% من ١٠٠ هي ١٠ ريالات. السعر الجديد = ١٠٠ - ١٠ = ٩٠ ريال.' }, { q: 'أجاب طالب على ٤ أسئلة صحيحة من أصل ٥. ما هي نسبته المئوية؟', o: ['٤٥%', '٧٥%', '٨٠%', '٩٠%'], a: 2, exp: 'النسبة = (٤ ÷ ٥) × ١٠٠ = ٠.٨ × ١٠٠ = ٨٠%.' }, { q: 'ما هو العدد الذي ٢٥% منه يساوي ١٠؟', o: ['٢.٥', '٢٥', '٤٠', '٥٠'], a: 2, exp: 'إذا كان ربع العدد هو ١٠، فإن العدد كاملاً هو ١٠ × ٤ = ٤٠.' }],
                        [{ q: 'ما قيمة ٥% من العدد ٤٠٠؟', o: ['٢٠', '٤٠', '٥٠', '١٠٠'], a: 0, exp: '١٠% من ٤٠٠ هي ٤٠. إذن ٥% هي نصفها، أي ٢٠.' }, { q: 'راتب موظف ٥٠٠٠ ريال، حصل على زيادة ٥%. كم ريالاً زاد راتبه؟', o: ['٥٠ ريال', '١٠٠ ريال', '٢٥٠ ريال', '٥٠٠ ريال'], a: 2, exp: 'قيمة الزيادة = ٥٠٠٠ × (٥ ÷ ١٠٠) = ٢٥٠ ريال.' }, { q: 'أجاب طالب على ٢٥ سؤالاً صحيحاً من أصل ٥٠. ما هي نسبته المئوية؟', o: ['٢٥%', '٥٠%', '٧٥%', '١٠٠%'], a: 1, exp: '٢٥ من ٥٠ تمثل النصف، والنصف دائماً هو ٥٠%.' }, { q: 'ما هو العدد الذي ١٠% منه يساوي ٧؟', o: ['٧.٧', '١٧', '٧٠', '٧٠٠'], a: 2, exp: 'إذا كان ١٠% من العدد هو ٧، فإن العدد كاملاً (١٠٠%) هو ٧ × ١٠ = ٧٠.' }],
                        [{ q: 'ما قيمة ٥٠% من العدد ٩٠؟', o: ['٩', '٤٥', '٥٠', '١٨٠'], a: 1, exp: '٥٠% تعني النصف. نصف العدد ٩٠ هو ٤٥.' }, { q: 'فاتورة كهرباء ٢٠٠ ريال، عليها ضريبة ١٥%. كم قيمة الفاتورة الإجمالية؟', o: ['٢٠٠.١٥ ريال', '٢١٥ ريال', '٢٣٠ ريال', '٣٠ ريال'], a: 2, exp: 'قيمة الضريبة = ٢٠٠ × ٠.١٥ = ٣٠ ريال. الإجمالي = ٢٠٠ + ٣٠ = ٢٣٠ ريال.' }, { q: 'أجاب طالب على ٧ أسئلة صحيحة من أصل ١٠. ما هي نسبته المئوية؟', o: ['٧%', '١٧%', '٧٠%', '٧٧%'], a: 2, exp: '٧ من ١٠ تعني ٧٠ من ١٠٠، أي ٧٠%.' }, { q: 'ما هو العدد الذي ٢٠٠% (ضعفه) منه يساوي ٤٠؟', o: ['١٠', '٢٠', '٨٠', '٤٠'], a: 1, exp: 'إذا كان ضعف العدد هو ٤٠، فإن العدد نفسه هو ٤٠ ÷ ٢ = ٢٠.' }]
                    ]
                }
            }
        };

        // --- Functions ---
        function toArabicNumerals(str) {
            if (str === null || str === undefined) return '';
            const arabicNumerals = ['٠', '١', '٢', '٣', '٤', '٥', '٦', '٧', '٨', '٩'];
            return String(str).replace(/[0-9]/g, d => arabicNumerals[parseInt(d)]);
        }
        
        function processContent(content) {
            let processed = toArabicNumerals(content);
            processed = processed.replace(/([٠-٩]+)\/([٠-٩]+)/g, '<span class="fraction"><span class="numerator">$1</span><span class="denominator">$2</span></span>');
            return processed;
        }

        function showScreen(screenId) {
            Object.values(screens).forEach(screen => screen.classList.remove('active'));
            screens[screenId].classList.add('active');
        }

        function loadQuizData(studentData) {
            let dataToLoad = null;
            if(isVisitor) {
                const savedVisitorData = sessionStorage.getItem('visitorDiagnosticData');
                if(savedVisitorData) dataToLoad = JSON.parse(savedVisitorData);
            } else if (studentData && studentData.diagnostics) {
                dataToLoad = studentData.diagnostics;
            }

            totalPoints = 0;
            Object.keys(quizzes).forEach(key => {
                quizData[key] = { title: quizzes[key].title, levels: {} };
                Object.keys(quizzes[key].levels).forEach(levelKey => {
                    const skillId = `d_${key}_${levelKey}`;
                    const levelData = dataToLoad ? dataToLoad[skillId] : null;
                    quizData[key].levels[levelKey] = { 
                        score: levelData ? levelData.grade : null, 
                        completed: !!levelData,
                        points: levelData ? levelData.metricValue || 0 : 0
                    };
                    if(levelData) {
                        totalPoints += levelData.metricValue || 0;
                    }
                });
            });
        }
        
        async function saveGradeToSheet(itemId, grade, points) {
            if (isVisitor || !studentId) return; 
            const url = `${SCRIPT_URL}?action=saveGrade&studentId=${studentId}&itemId=${itemId}&grade=${grade}&metricValue=${points}`;
            try {
                const response = await fetch(url);
                const result = await response.json();
                console.log(`Saved ${itemId}:`, result);
            } catch (error) {
                console.error(`Failed to save ${itemId}:`, error);
            }
        }

        function getScoreStyle(score) {
            if (score >= 80) return { class: 'score-high', icon: 'fa-trophy' };
            if (score >= 50) return { class: 'score-medium', icon: 'fa-smile' };
            return { class: 'score-low', icon: 'fa-frown' };
        }

        function calculatePoints(correctAnswers, difficulty) {
            const pointsPerQuestion = difficulty === 'easy' ? 1 : (difficulty === 'medium' ? 2 : 3);
            return correctAnswers * pointsPerQuestion;
        }

        function renderDashboard() {
            if(isVisitor) {
                dashboardTitle.textContent = 'مرحباً بك أيها الزائر';
                dashboardSubtitle.textContent = 'يمكنك تجربة كل اختبار مرة واحدة';
                headerAction.innerHTML = '';
            } else {
                dashboardTitle.textContent = `أهلاً بك، ${studentName}`;
                dashboardSubtitle.textContent = 'اختر مهارة لتبدأ الاختبار';
                headerAction.innerHTML = `<a href="index.html" target="_top" class="btn btn-exit"><i class="fas fa-sign-out-alt"></i> العودة للمنصة</a>`;
            }

            const allLevels = Object.values(quizData).flatMap(q => Object.values(q.levels));
            const completedLevelsCount = allLevels.filter(l => l.completed).length;
            const totalLevels = allLevels.length;
            
            const levelCounts = { easy: 0, medium: 0, hard: 0 };
            const levelScores = { easy: 0, medium: 0, hard: 0 };
            
            Object.values(quizData).forEach(skill => {
                Object.entries(skill.levels).forEach(([levelKey, levelData]) => {
                    if(levelData.completed) {
                        levelCounts[levelKey]++;
                        levelScores[levelKey] += levelData.score;
                    }
                });
            });

            if (completedLevelsCount === totalLevels && !isVisitor) {
                const average = Math.round(allLevels.reduce((sum, level) => sum + (level.score || 0), 0) / totalLevels);
                
                const easyAverage = Math.round(levelScores.easy / 6);
                const mediumAverage = Math.round(levelScores.medium / 6);
                const hardAverage = Math.round(levelScores.hard / 6);

                studentProgressBox.innerHTML = `
                    <div class="final-result-card">
                        <i class="fas fa-medal main-icon"></i>
                        <h3>أحسنت! لقد أكملت التقييم بنجاح</h3>
                        <p>هذه هي نتيجتك النهائية بناءً على أدائك في جميع المهارات والمستويات.</p>
                        <div class="final-metrics">
                            <div class="metric-box">
                                <div class="label">المعدل النهائي</div>
                                <div class="value"><i class="fas fa-percent"></i>${toArabicNumerals(average)}</div>
                            </div>
                            <div class="metric-box">
                                <div class="label">مجموع النقاط</div>
                                <div class="value"><i class="fas fa-coins"></i>${toArabicNumerals(totalPoints)}</div>
                            </div>
                        </div>
                        <div class="level-performance-details">
                            <div class="level-detail-box">
                                <div class="label">أداء المستوى السهل</div>
                                <div class="value easy">${toArabicNumerals(easyAverage)}%</div>
                            </div>
                            <div class="level-detail-box">
                                <div class="label">أداء المستوى المتوسط</div>
                                <div class="value medium">${toArabicNumerals(mediumAverage)}%</div>
                            </div>
                            <div class="level-detail-box">
                                <div class="label">أداء المستوى العالي</div>
                                <div class="value hard">${toArabicNumerals(hardAverage)}%</div>
                            </div>
                        </div>
                    </div>
                `;
                saveGradeToSheet('d_test_overall', average, totalPoints);
            } else {
                let progressHTML = `
                    <h3><i class="fas fa-tasks"></i> نسبة إنجازك حسب المستوى</h3>
                    <div class="progress-grid">
                `;

                ['easy', 'medium', 'hard'].forEach(level => {
                    const count = levelCounts[level];
                    const percentage = Math.round((count / 6) * 100);
                    const levelName = level === 'easy' ? 'السهل' : (level === 'medium' ? 'المتوسط' : 'العالي');
                    
                    progressHTML += `<div class="progress-item"><h4>المستوى ${levelName}</h4>`;
                    
                    if (count === 6) {
                        const average = Math.round(levelScores[level] / 6);
                        progressHTML += `
                            <div class="level-completion-box">
                                <div class="label">معدلك <i class="fas fa-check-circle" style="color: var(--secondary);"></i></div>
                                <div class="value">${toArabicNumerals(average)}%</div>
                            </div>
                        `;
                    } else {
                        progressHTML += `
                            <div class="progress-bar">
                                <div class="progress-fill progress-fill-${level}" style="width: ${percentage}%"></div>
                            </div>
                            <div class="progress-text">${toArabicNumerals(count)} من ٦</div>
                        `;
                    }
                    progressHTML += `</div>`;
                });

                progressHTML += `</div><div class="points-container">
                        <span>النقاط التي جمعتها:</span>
                        <i class="fas fa-coins"></i>
                        <span>${toArabicNumerals(totalPoints)}</span>
                    </div>`;
                
                studentProgressBox.innerHTML = progressHTML;
            }

            dashboardGrid.innerHTML = '';
            
            Object.keys(quizzes).forEach(key => {
                const quiz = quizzes[key];
                const data = quizData[key];
                const card = document.createElement('div');
                card.className = 'quiz-card';
                
                let levelsHTML = '<div class="levels-container">';
                Object.keys(quiz.levels).forEach(levelKey => {
                    const levelData = data.levels[levelKey];
                    let scoreHTML = `<div class="level-score not-completed">لم يختبر</div>`;
                    if (levelData.completed) {
                        const style = getScoreStyle(levelData.score);
                        scoreHTML = `<div class="level-score ${style.class}"><i class="fas ${style.icon}"></i> ${toArabicNumerals(levelData.score)}%</div>`;
                    }
                    const levelName = levelKey === 'easy' ? 'سهل' : (levelKey === 'medium' ? 'متوسط' : 'عالي');
                    const multiplier = levelKey === 'easy' ? '<i class="fas fa-star"></i>' : (levelKey === 'medium' ? '<i class="fas fa-star"></i><i class="fas fa-star"></i>' : '<i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>');
                    levelsHTML += `<div class="level-wrapper" data-quiz-id="${key}" data-difficulty="${levelKey}">
                                        <div class="level-bubble ${levelData.completed && isVisitor ? 'disabled' : ''}">
                                            <div class="level-name">${levelName}</div>
                                            ${scoreHTML}
                                        </div>
                                        <div class="level-stars">${multiplier}</div>
                                   </div>`;
                });
                levelsHTML += '</div>';

                card.innerHTML = `<div class="quiz-card-header"><h3>${quiz.title}</h3></div><div class="quiz-card-body">${levelsHTML}</div>`;
                dashboardGrid.appendChild(card);
            });
            
            dashboardGrid.addEventListener('click', (e) => {
                const bubble = e.target.closest('.level-bubble');
                if (bubble && !bubble.classList.contains('disabled')) {
                    const wrapper = bubble.closest('.level-wrapper');
                    showPreQuizScreen(wrapper.dataset.quizId, wrapper.dataset.difficulty);
                }
            });
        }

        function showPreQuizScreen(quizId, difficulty) {
            currentQuizId = quizId;
            currentDifficulty = difficulty;

            const quizInfo = quizzes[quizId];
            const levelName = difficulty === 'easy' ? 'سهل' : (difficulty === 'medium' ? 'متوسط' : 'عالي');
            const weight = difficulty === 'easy' ? 3 : (difficulty === 'medium' ? 2 : 1);
            const points = difficulty === 'easy' ? 1 : (difficulty === 'medium' ? 2 : 3);
            const pointsText = points === 1 ? 'نقطة واحدة' : (points === 2 ? 'نقطتين' : `${toArabicNumerals(points)} نقاط`);

            preQuizTitle.textContent = quizInfo.title;
            preQuizSubtitle.textContent = `أنت على وشك بدء اختبار المستوى: ${levelName}`;

            preQuizWeightExp.innerHTML = `سيتم قسمة درجتك في هذا المستوى على <strong>${toArabicNumerals(weight)}</strong> لحساب النتيجة الموزونة.`;
            preQuizPointsExp.innerHTML = `ستحصل على <strong>${pointsText}</strong> عن كل إجابة صحيحة لإضافتها إلى مجموعك.`;

            showScreen('preQuiz');
        }

        function startQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            
            const models = quizzes[currentQuizId].levels[currentDifficulty];
            const modelIndex = Math.floor(Math.random() * models.length);
            currentModel = models[modelIndex].sort(() => 0.5 - Math.random()).slice(0, 4);

            const levelName = currentDifficulty === 'easy' ? 'سهل' : (currentDifficulty === 'medium' ? 'متوسط' : 'عالي');
            quizTitle.textContent = `${quizzes[currentQuizId].title} - مستوى ${levelName}`;
            showScreen('quiz');
            loadQuestion();
        }

        function startTimer() {
            clearInterval(timer);
            timeLeft = 30; 
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if(timeLeft <= 0) {
                    clearInterval(timer);
                    handleTimeOut();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            timeCounter.textContent = `الوقت المتبقي: ${toArabicNumerals(timeLeft)} ثانية`;
            timeCounter.classList.toggle('warning', timeLeft <= 10);
        }

        function handleTimeOut() {
            Array.from(optionsGrid.children).forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            const question = currentModel[currentQuestionIndex];
            const correctIndex = question.a;
            
            optionsGrid.children[correctIndex].classList.add('correct');
            explanationText.innerHTML = processContent(question.exp);
            explanationBox.style.display = 'block';
            
            nextQuestionBtn.style.display = 'inline-flex';
        }

        function loadQuestion() {
            clearInterval(timer);
            explanationBox.style.display = 'none';
            nextQuestionBtn.style.display = 'none';
            const question = currentModel[currentQuestionIndex];
            
            questionCounter.textContent = `السؤال ${toArabicNumerals(currentQuestionIndex + 1)} من ${toArabicNumerals(currentModel.length)}`;
            questionText.innerHTML = processContent(question.q);
            optionsGrid.innerHTML = '';

            question.o.forEach((optionText, index) => {
                const option = document.createElement('div');
                option.className = 'option';
                option.innerHTML = processContent(optionText);
                option.dataset.index = index;
                option.addEventListener('click', selectOption);
                optionsGrid.appendChild(option);
            });
            
            startTimer();
        }

        function selectOption(e) {
            clearInterval(timer);
            const selectedOption = e.target.closest('.option');
            const selectedIndex = parseInt(selectedOption.dataset.index);
            const question = currentModel[currentQuestionIndex];
            const correctIndex = question.a;

            Array.from(optionsGrid.children).forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
            
            if (selectedIndex === correctIndex) {
                score++;
                selectedOption.classList.add('correct');
            } else {
                selectedOption.classList.add('incorrect');
                optionsGrid.children[correctIndex].classList.add('correct');
                explanationText.innerHTML = processContent(question.exp);
                explanationBox.style.display = 'block';
            }
            
            nextQuestionBtn.style.display = 'inline-flex';
        }

        function showQuizResult() {
            const totalQuestions = currentModel.length;
            const percentageScore = Math.round((score / totalQuestions) * 100);
            
            const currentLevelData = quizData[currentQuizId].levels[currentDifficulty];
            currentLevelData.score = percentageScore; 
            currentLevelData.completed = true;
            
            const pointsEarned = calculatePoints(score, currentDifficulty);
            currentLevelData.points = pointsEarned;
            
            const skillId = `d_${currentQuizId}_${currentDifficulty}`;
            saveGradeToSheet(skillId, percentageScore, pointsEarned);

            if(isVisitor) {
                let visitorData = JSON.parse(sessionStorage.getItem('visitorDiagnosticData')) || {};
                visitorData[skillId] = { grade: percentageScore, metricValue: pointsEarned };
                sessionStorage.setItem('visitorDiagnosticData', JSON.stringify(visitorData));
            }
            
            const levelName = currentDifficulty === 'easy' ? 'سهل' : (currentDifficulty === 'medium' ? 'متوسط' : 'عالي');
            resultTitle.textContent = `نتيجتك في المستوى - ${levelName}`;
            resultScore.textContent = `${toArabicNumerals(percentageScore)}%`;
            
            resultPoints.textContent = `لقد كسبت ${toArabicNumerals(pointsEarned)} نقطة!`;
            
            const style = getScoreStyle(percentageScore);
            resultIcon.className = `fas ${style.icon} result-icon`;
            resultIcon.style.color = style.class === 'score-high' ? 'var(--score-high)' : (style.class === 'score-medium)' ? 'var(--score-medium)' : 'var(--score-low)');

            retryFromResultBtn.style.display = isVisitor ? 'none' : 'inline-flex';

            showScreen('result');
        }
        
        function updateAndRenderDashboard() {
            totalPoints = 0;
            Object.values(quizData).forEach(skill => {
                Object.values(skill.levels).forEach(levelData => {
                    totalPoints += levelData.points || 0;
                });
            });
            
            renderDashboard();
        }

        // --- Event Listeners ---
        startActualQuizBtn.addEventListener('click', () => {
            startQuiz();
        });

        backFromPreQuizBtn.addEventListener('click', () => {
            showScreen('dashboard');
        });

        nextQuestionBtn.addEventListener('click', () => {
            currentQuestionIndex++;
            if (currentQuestionIndex < currentModel.length) {
                loadQuestion();
            } else {
                showQuizResult();
            }
        });

        retryFromResultBtn.addEventListener('click', () => {
            showPreQuizScreen(currentQuizId, currentDifficulty);
        });

        backToDashboardBtn.addEventListener('click', () => {
            showScreen('dashboard');
            updateAndRenderDashboard();
        });

        /**
         * Main initialization function.
         */
        async function init() {
            const urlParams = new URLSearchParams(window.location.search);
            studentId = urlParams.get('studentId');

            if (studentId === '1010101010') {
                const mockStudentData = {
                    name: "الطالب المثالي",
                    diagnostics: {
                        "d_arithmetic_easy": { grade: 100, metricValue: 4 }, "d_arithmetic_medium": { grade: 75, metricValue: 6 }, "d_arithmetic_hard": { grade: 50, metricValue: 6 },
                        "d_geometry_easy": { grade: 100, metricValue: 4 }, "d_geometry_medium": { grade: 100, metricValue: 8 }, "d_geometry_hard": { grade: 75, metricValue: 9 },
                        "d_algebra_easy": { grade: 100, metricValue: 4 }, "d_algebra_medium": { grade: 75, metricValue: 6 }, "d_algebra_hard": { grade: 75, metricValue: 9 },
                        "d_measurement_easy": { grade: 100, metricValue: 4 }, "d_measurement_medium": { grade: 50, metricValue: 4 }, "d_measurement_hard": { grade: 50, metricValue: 6 },
                        "d_statistics_easy": { grade: 100, metricValue: 4 }, "d_statistics_medium": { grade: 75, metricValue: 6 }, "d_statistics_hard": { grade: 100, metricValue: 12 },
                        "d_percentages_easy": { grade: 100, metricValue: 4 }, "d_percentages_medium": { grade: 100, metricValue: 8 }, "d_percentages_hard": { grade: 75, metricValue: 9 }
                    }
                };
                studentName = mockStudentData.name;
                loadQuizData(mockStudentData);
                renderDashboard();
                showScreen('dashboard');
                return;
            }

            if (!studentId) {
                isVisitor = true;
                loadQuizData(null);
                renderDashboard();
                showScreen('dashboard');
                return;
            }
            
            try {
                const response = await fetch(`${SCRIPT_URL}?action=getStudentData&studentId=${studentId}`);
                const result = await response.json();
                if (result.status === 'success' && result.data) {
                    studentName = result.data.name;
                    loadQuizData(result.data);
                    renderDashboard();
                    showScreen('dashboard');
                } else {
                    isVisitor = true;
                    loadQuizData(null);
                    renderDashboard();
                    showScreen('dashboard');
                }
            } catch (error) {
                console.error("Failed to fetch student data:", error);
                isVisitor = true;
                loadQuizData(null);
                renderDashboard();
                showScreen('dashboard');
            }
        }

        init();
    });
    </script>
</body>
</html>
