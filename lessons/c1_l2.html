<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงูุฏุฑุณ ูก-ูข: ุญู ุงููุนุงุฏูุงุช ุฐุงุช ุงูุฎุทูุฉ ุงููุงุญุฏุฉ | ููุตุฉ ุงูุฑูุงุถูุงุช ุงูุชูุงุนููุฉ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; }
        .hidden { display: none; }
        .step-box { border-right: 4px solid #1d4ed8; }
        .vocab-term { background-color: #ffefc5; padding: 2px 6px; border-radius: 4px; font-weight: bold; }
        .option-label { display: block; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; cursor: pointer; transition: all 0.2s ease-in-out; }
        .option-label:hover { border-color: #3b82f6; background-color: #eff6ff; }
        input[type="radio"]:checked + .option-label { border-color: #2563eb; background-color: #dbeafe; box-shadow: 0 0 0 2px #bfdbfe; }
        input[type="radio"] { display: none; }
        .feedback-correct { color: #16a34a; }
        .feedback-incorrect { color: #dc2626; }
        
        /* === ุชุนุฏูู ุงูุฑููุฒ ุงูุฑูุงุถูุฉ === */
        .math-eq {
            font-family: "Courier New", monospace; /* ุฎุท ุนุฑูุถ ููุชุจุงุนุฏ */
            font-size: 1.1rem; 
            font-weight: bold;
            color: #4338ca;
            background-color: #f3f4f6; /* ุฎูููุฉ ุฑูุงุฏูุฉ ูุงุชุญุฉ */
            border: 1px solid #d1d5db; /* ุฅุทุงุฑ ุฎููู */
            padding: 2px 8px; /* ููุงูุด ุฏุงุฎููุฉ */
            border-radius: 6px; /* ุฒูุงูุง ุฏุงุฆุฑูุฉ */
            display: inline-block;
            vertical-align: middle; /* ูุญุงุฐุงุฉ ุฃูุถู ูุน ุงููุต */
            white-space: nowrap;
        }
        
        .fraction { display: inline-flex; flex-direction: column; text-align: center; vertical-align: middle; margin: 0 0.2em; }
        .fraction > span { display: block; padding: 0 0.4em; }
        .fraction > .frac-bar { border-top: 2px solid #4338ca; }
        .step-interactive { display: none; opacity: 0; transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out; transform: translateY(10px); }
        .step-interactive.active { display: block; opacity: 1; transform: translateY(0); }
        
        /* ููู ุงูุนูููุฉ ูุงูุฃุฑูุงู ุงููุถุงูุฉ ููุญู */
        .highlight-change {
            color: #16a34a; /* green-600 */
            font-weight: bold;
        }
        .highlight-action {
            color: #15803d; /* green-800 */
            font-weight: 700;
            background-color: #dcfce7; /* green-100 */
            padding: 1px 4px;
            border-radius: 4px;
        }
    </style>
</head>
<body class="bg-gray-100">
    <div id="app-container" class="grid grid-template-rows: auto 1fr auto; min-height: 100vh;">
        <header id="main-header" class="bg-white shadow-md sticky top-0 z-50"></header>
        <main class="container mx-auto max-w-4xl my-8">
            <div class="p-6 bg-white rounded-xl shadow-lg">
                <header class="flex justify-between items-center mb-8 border-b pb-4 border-gray-200">
                    <h1 id="lesson-title" class="text-3xl font-bold text-blue-800">ุงูุฏุฑุณ ูก-ูข: ุญู ุงููุนุงุฏูุงุช ุฐุงุช ุงูุฎุทูุฉ ุงููุงุญุฏุฉ</h1>
                    <!-- ุฒุฑ ุงูุนูุฏุฉ ุชู ูููู ุฅูู ุงูููุฏุฑ -->
                </header>
                
                <section class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">๐ก ุฃููุงู: ุงูููููู ุงูุฃุณุงุณู</h2>
                    <div class="p-4 bg-blue-50 rounded-lg space-y-3">
                        <p>ูุญู ูุนุงุฏูุฉุ ูุฏููุง ูู <span class="vocab-term">ุนุฒู ุงููุชุบูุฑ</span> ูู ุทุฑู ููุญุฏู. ููุนู ุฐููุ ูุณุชุฎุฏู <span class="vocab-term">ุงูุนูููุงุช ุงูุนูุณูุฉ</span>.</p>
                        <p>ุชุฐูุฑ ุฏุงุฆูุงู: <strong class="text-red-600">ุฃู ุนูููุฉ ุชุฌุฑููุง ุนูู ุทุฑู ูู ุงููุนุงุฏูุฉุ ูุฌุจ ุฃู ุชุฌุฑููุง ุนูู ุงูุทุฑู ุงูุขุฎุฑ ุฃูุถุงู</strong>. ุนูุฏูุง ุชูุนู ุฐููุ ูุฃูุช ุชูุดุฆ <span class="vocab-term">ูุนุงุฏูุงุช ูุชูุงูุฆุฉ</span>ุ ููู ูุนุงุฏูุงุช ููุง ููุณ ุงูุญู.</p>
                    </div>
                </section>

                <section class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">๐ฏ ุซุงููุงู: ุฃูุซูุฉ ุชูุงุนููุฉ ุนูู ุงูุฌูุน ูุงูุทุฑุญ</h2>
                    <div class="p-6 bg-gray-50 rounded-lg space-y-8">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <!-- Example 1 -->
                            <div id="interactive-container-1" class="p-4 bg-white rounded-lg shadow">
                                <p class="text-lg font-semibold mb-2">ูุซุงู ูก: ุงูุญู ุจุงูุฌูุน</p>
                                <p class="text-md mb-4 pb-2 border-b">ุญู ุงููุนุงุฏูุฉ: <span class="math-eq">ุต - ูขูง = ูกูฉ</span></p>
                                <div class="steps-container space-y-4 min-h-[250px]">
                                    <div class="interactive-placeholder text-center text-gray-500 p-4"><p>ุงุถุบุท "ุงูุชุงูู" ูุจุฏุก ุฎุทูุงุช ุงูุญู</p></div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 1: ุชุญุฏูุฏ ุงูุนูููุฉ</h4><p>ุงููุชุบูุฑ <span class="math-eq">ุต</span> ูุทุฑูุญ ููู <span class="math-eq">ูขูง</span>. ุงูุนูููุฉ ุงูุนูุณูุฉ ููุทุฑุญ ูู ุงูุฌูุน.</p></div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 2: ุชุทุจูู ุงูุนูููุฉ ุงูุนูุณูุฉ</h4><p>ูุถูู <span class="math-eq"><span class="highlight-action">ูขูง</span></span> ุฅูู <strong class="text-red-600">ููุง ุงูุทุฑููู</strong>.</p><p class="math-eq text-center mt-2">ุต - ูขูง <span class="highlight-change">+ <span class="highlight-action">ูขูง</span></span> = ูกูฉ <span class="highlight-change">+ <span class="highlight-action">ูขูง</span></span></p></div>
                                    <div class="step-interactive p-4 bg-green-100 rounded-lg step-box border-green-600"><h4 class="font-bold">ุงูุฎุทูุฉ ุงูุฃุฎูุฑุฉ: ุงูุญู ุงูููุงุฆู</h4><p>ูุจุณุท ุงููุนุงุฏูุฉ ููุฌุฏ ุงูุญู: <span class="math-eq">ุต = ูคูฆ</span></p></div>
                                </div>
                                <div class="flex justify-between mt-6">
                                    <button data-example="1" class="prev-btn bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed">ุฑุฌูุน</button>
                                    <div>
                                        <button data-example="1" class="next-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">ุงูุชุงูู</button>
                                        <button data-example="1" class="reset-btn hidden bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700">ุฅุนุงุฏุฉ</button>
                                    </div>
                                </div>
                            </div>
                            <!-- Example 2 -->
                            <div id="interactive-container-2" class="p-4 bg-white rounded-lg shadow">
                                <p class="text-lg font-semibold mb-2">ูุซุงู ูข: ุงูุญู ุจุงูุทุฑุญ</p>
                                <p class="text-md mb-4 pb-2 border-b">ุญู ุงููุนุงุฏูุฉ: <span class="math-eq">ู + ูกูข = ูกูฅ</span></p>
                                <div class="steps-container space-y-4 min-h-[250px]">
                                    <div class="interactive-placeholder text-center text-gray-500 p-4"><p>ุงุถุบุท "ุงูุชุงูู" ูุจุฏุก ุฎุทูุงุช ุงูุญู</p></div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 1: ุชุญุฏูุฏ ุงูุนูููุฉ</h4><p>ุงููุชุบูุฑ <span class="math-eq">ู</span> ูุถุงู ุฅููู <span class="math-eq">ูกูข</span>. ุงูุนูููุฉ ุงูุนูุณูุฉ ููุฌูุน ูู ุงูุทุฑุญ.</p></div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 2: ุชุทุจูู ุงูุนูููุฉ ุงูุนูุณูุฉ</h4><p>ูุทุฑุญ <span class="math-eq"><span class="highlight-action">ูกูข</span></span> ูู <strong class="text-red-600">ููุง ุงูุทุฑููู</strong>.</p><p class="math-eq text-center mt-2">ู + ูกูข <span class="highlight-change">- <span class="highlight-action">ูกูข</span></span> = ูกูฅ <span class="highlight-change">- <span class="highlight-action">ูกูข</span></span></p></div>
                                    <div class="step-interactive p-4 bg-green-100 rounded-lg step-box border-green-600"><h4 class="font-bold">ุงูุฎุทูุฉ ุงูุฃุฎูุฑุฉ: ุงูุญู ุงูููุงุฆู</h4><p>ูุจุณุท ุงููุนุงุฏูุฉ ููุฌุฏ ุงูุญู: <span class="math-eq">ู = ูฃ</span></p></div>
                                </div>
                                <div class="flex justify-between mt-6">
                                    <button data-example="2" class="prev-btn bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed">ุฑุฌูุน</button>
                                    <div>
                                        <button data-example="2" class="next-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">ุงูุชุงูู</button>
                                        <button data-example="2" class="reset-btn hidden bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700">ุฅุนุงุฏุฉ</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">๐ฏ ุซุงูุซุงู: ุฃูุซูุฉ ุชูุงุนููุฉ ุนูู ุงูุถุฑุจ ูุงููุณูุฉ</h2>
                    <div class="p-6 bg-gray-50 rounded-lg space-y-8">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <!-- Example 3 -->
                            <div id="interactive-container-3" class="p-4 bg-white rounded-lg shadow">
                                <p class="text-lg font-semibold mb-2">ูุซุงู ูฃ: ุงูุญู ุจุงููุณูุฉ</p>
                                <p class="text-md mb-4 pb-2 border-b">ุญู ุงููุนุงุฏูุฉ: <span class="math-eq">ูคู = ูฅูข</span></p>
                                <div class="steps-container space-y-4 min-h-[250px]">
                                    <div class="interactive-placeholder text-center text-gray-500 p-4"><p>ุงุถุบุท "ุงูุชุงูู" ูุจุฏุก ุฎุทูุงุช ุงูุญู</p></div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 1: ุชุญุฏูุฏ ุงูุนูููุฉ</h4><p>ุงููุชุบูุฑ <span class="math-eq">ู</span> ูุถุฑูุจ ูู <span class="math-eq">ูค</span>. ุงูุนูููุฉ ุงูุนูุณูุฉ ููุถุฑุจ ูู ุงููุณูุฉ.</p></div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 2: ุชุทุจูู ุงูุนูููุฉ ุงูุนูุณูุฉ</h4><p>ููุณู <strong class="text-red-600">ููุง ุงูุทุฑููู</strong> ุนูู <span class="math-eq"><span class="highlight-action">ูค</span></span>.</p><p class="text-center mt-2"><span class="math-eq"><span class="fraction"><span>ูคู</span><span class="frac-bar"></span><span class="highlight-change"><span class="highlight-action">ูค</span></span></span> = <span class="fraction"><span>ูฅูข</span><span class="frac-bar"></span><span class="highlight-change"><span class="highlight-action">ูค</span></span></span></span></p></div>
                                    <div class="step-interactive p-4 bg-green-100 rounded-lg step-box border-green-600"><h4 class="font-bold">ุงูุฎุทูุฉ ุงูุฃุฎูุฑุฉ: ุงูุญู ุงูููุงุฆู</h4><p>ูุจุณุท ุงููุนุงุฏูุฉ ููุฌุฏ ุงูุญู: <span class="math-eq">ู = ูกูฃ</span></p></div>
                                </div>
                                <div class="flex justify-between mt-6">
                                    <button data-example="3" class="prev-btn bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed">ุฑุฌูุน</button>
                                    <div>
                                        <button data-example="3" class="next-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">ุงูุชุงูู</button>
                                        <button data-example="3" class="reset-btn hidden bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700">ุฅุนุงุฏุฉ</button>
                                    </div>
                                </div>
                            </div>
                            <!-- Example 4 -->
                            <div id="interactive-container-4" class="p-4 bg-white rounded-lg shadow">
                                <p class="text-lg font-semibold mb-2">ูุซุงู ูค: ุงูุญู ุจุงูุถุฑุจ</p>
                                <p class="text-md mb-4 pb-2 border-b">ุญู ุงููุนุงุฏูุฉ: <span class="math-eq"><span class="fraction"><span>ุณ</span><span class="frac-bar"></span><span>ูฆ</span></span> = ูจ</span></p>
                                <div class="steps-container space-y-4 min-h-[250px]">
                                    <div class="interactive-placeholder text-center text-gray-500 p-4"><p>ุงุถุบุท "ุงูุชุงูู" ูุจุฏุก ุฎุทูุงุช ุงูุญู</p></div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 1: ุชุญุฏูุฏ ุงูุนูููุฉ</h4><p>ุงููุชุบูุฑ <span class="math-eq">ุณ</span> ููุณูู ุนูู <span class="math-eq">ูฆ</span>. ุงูุนูููุฉ ุงูุนูุณูุฉ ูููุณูุฉ ูู ุงูุถุฑุจ.</p></div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 2: ุชุทุจูู ุงูุนูููุฉ ุงูุนูุณูุฉ</h4><p>ูุถุฑุจ <strong class="text-red-600">ููุง ุงูุทุฑููู</strong> ูู <span class="math-eq"><span class="highlight-action">ูฆ</span></span>.</p><p class="text-center mt-2"><span class="math-eq"><span class="fraction"><span>ุณ</span><span class="frac-bar"></span><span>ูฆ</span></span> <span class="highlight-change">ร <span class="highlight-action">ูฆ</span></span> = ูจ <span class="highlight-change">ร <span class="highlight-action">ูฆ</span></span></span></p></div>
                                    <div class="step-interactive p-4 bg-green-100 rounded-lg step-box border-green-600"><h4 class="font-bold">ุงูุฎุทูุฉ ุงูุฃุฎูุฑุฉ: ุงูุญู ุงูููุงุฆู</h4><p>ูุจุณุท ุงููุนุงุฏูุฉ ููุฌุฏ ุงูุญู: <span class="math-eq">ุณ = ูคูจ</span></p></div>
                                </div>
                                <div class="flex justify-between mt-6">
                                    <button data-example="4" class="prev-btn bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed">ุฑุฌูุน</button>
                                    <div>
                                        <button data-example="4" class="next-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">ุงูุชุงูู</button>
                                        <button data-example="4" class="reset-btn hidden bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700">ุฅุนุงุฏุฉ</button>
                                    </div>
                                </div>
                            </div>
                            <!-- Example 5 -->
                            <div id="interactive-container-5" class="p-4 bg-white rounded-lg shadow">
                                <p class="text-lg font-semibold mb-2">ูุซุงู ูฅ: ุงูุชุนุงูู ูุน ุงููุณูุฑ</p>
                                <p class="text-md mb-4 pb-2 border-b">ุญู ุงููุนุงุฏูุฉ: <span class="math-eq"><span class="fraction"><span>ูข</span><span class="frac-bar"></span><span>ูฃ</span></span> ู = <span class="fraction"><span>ูก</span><span class="frac-bar"></span><span>ูข</span></span></span></p>
                                <div class="steps-container space-y-4 min-h-[250px]">
                                    <div class="interactive-placeholder text-center text-gray-500 p-4"><p>ุงุถุบุท "ุงูุชุงูู" ูุจุฏุก ุฎุทูุงุช ุงูุญู</p></div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 1: ุชุญุฏูุฏ ุงูุนูููุฉ</h4><p>ุงููุชุบูุฑ <span class="math-eq">ู</span> ูุถุฑูุจ ูู ุงููุณุฑ. ุงูุนูููุฉ ุงูุนูุณูุฉ ูู ุงูุถุฑุจ ูู <span class="vocab-term">ููููุจ ุงููุณุฑ</span>.</p></div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 2: ุชุทุจูู ุงูุนูููุฉ ุงูุนูุณูุฉ</h4><p>ูุถุฑุจ <strong class="text-red-600">ููุง ุงูุทุฑููู</strong> ูู ููููุจ ุงููุณุฑ ููู <span class="math-eq"><span class="highlight-action"><span class="fraction"><span>ูฃ</span><span class="frac-bar"></span><span>ูข</span></span></span></span>.</p><p class="text-center mt-2"><span class="math-eq"><span class="highlight-change"><span class="highlight-action"><span class="fraction"><span>ูฃ</span><span class="frac-bar"></span><span>ูข</span></span></span></span> ร <span class="fraction"><span>ูข</span><span class="frac-bar"></span><span>ูฃ</span></span> ู = <span class="fraction"><span>ูก</span><span class="frac-bar"></span><span>ูข</span></span> ร <span class="highlight-change"><span class="highlight-action"><span class="fraction"><span>ูฃ</span><span class="frac-bar"></span><span>ูข</span></span></span></span></span></p></div>
                                    <div class="step-interactive p-4 bg-green-100 rounded-lg step-box border-green-600"><h4 class="font-bold">ุงูุฎุทูุฉ ุงูุฃุฎูุฑุฉ: ุงูุญู ุงูููุงุฆู</h4><p>ูุจุณุท ุงููุนุงุฏูุฉ ููุฌุฏ ุงูุญู: <span class="math-eq">ู = <span class="fraction"><span>ูฃ</span><span class="frac-bar"></span><span>ูค</span></span></span></p></div>
                                </div>
                                <div class="flex justify-between mt-6">
                                    <button data-example="5" class="prev-btn bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed">ุฑุฌูุน</button>
                                    <div>
                                        <button data-example="5" class="next-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">ุงูุชุงูู</button>
                                        <button data-example="5" class="reset-btn hidden bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700">ุฅุนุงุฏุฉ</button>
                                    </div>
                                </div>
                            </div>
                            <!-- Example 6 -->
                            <div id="interactive-container-6" class="p-4 bg-white rounded-lg shadow">
                                <p class="text-lg font-semibold mb-2">ูุซุงู ูฆ: ุงูุชุนุงูู ูุน ููููุจ ูุณุฑ ุณุงูุจ</p>
                                <p class="text-md mb-4 pb-2 border-b">ุญู ุงููุนุงุฏูุฉ: <span class="math-eq"><span class="fraction"><span>ูฃ</span><span class="frac-bar"></span><span>ูฅ</span></span> ู = -ูฉ</span></p>
                                <div class="steps-container space-y-4 min-h-[250px]">
                                    <div class="interactive-placeholder text-center text-gray-500 p-4"><p>ุงุถุบุท "ุงูุชุงูู" ูุจุฏุก ุฎุทูุงุช ุงูุญู</p></div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 1: ุชุญุฏูุฏ ุงูุนูููุฉ</h4><p>ุงููุชุบูุฑ <span class="math-eq">ู</span> ูุถุฑูุจ ูู ุงููุณุฑ. ุงูุนูููุฉ ุงูุนูุณูุฉ ูู ุงูุถุฑุจ ูู ููููุจ ุงููุณุฑ.</p></div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 2: ุชุทุจูู ุงูุนูููุฉ ุงูุนูุณูุฉ</h4><p>ูุถุฑุจ <strong class="text-red-600">ููุง ุงูุทุฑููู</strong> ูู ููููุจ ุงููุณุฑ ููู <span class="math-eq"><span class="highlight-action"><span class="fraction"><span>ูฅ</span><span class="frac-bar"></span><span>ูฃ</span></span></span></span>.</p><p class="text-center mt-2"><span class="math-eq"><span class="highlight-change"><span class="highlight-action"><span class="fraction"><span>ูฅ</span><span class="frac-bar"></span><span>ูฃ</span></span></span></span> ร <span class="fraction"><span>ูฃ</span><span class="frac-bar"></span><span>ูฅ</span></span> ู = -ูฉ ร <span class="highlight-change"><span class="highlight-action"><span class="fraction"><span>ูฅ</span><span class="frac-bar"></span><span>ูฃ</span></span></span></span></span></p></div>
                                    <div class="step-interactive p-4 bg-green-100 rounded-lg step-box border-green-600"><h4 class="font-bold">ุงูุฎุทูุฉ ุงูุฃุฎูุฑุฉ: ุงูุญู ุงูููุงุฆู</h4><p>ูุจุณุท ุงููุนุงุฏูุฉ ููุฌุฏ ุงูุญู: <span class="math-eq">ู = -ูกูฅ</span></p></div>
                                </div>
                                <div class="flex justify-between mt-6">
                                    <button data-example="6" class="prev-btn bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed">ุฑุฌูุน</button>
                                    <div>
                                        <button data-example="6" class="next-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">ุงูุชุงูู</button>
                                        <button data-example="6" class="reset-btn hidden bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700">ุฅุนุงุฏุฉ</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">๐ฏ ุฑุงุจุนุงู: ูุชุงุจุฉ ุงููุนุงุฏูุงุช ูุญููุง</h2>
                    <div class="p-6 bg-gray-50 rounded-lg space-y-8">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <!-- Example 7 -->
                            <div id="interactive-container-7" class="p-4 bg-white rounded-lg shadow">
                                <p class="text-lg font-semibold mb-2">ูุซุงู ูง: ูุชุงุจุฉ ูุนุงุฏูุฉ ุถุฑุจ</p>
                                <p class="text-md mb-4 pb-2 border-b">ุงูุชุจ ูุนุงุฏูุฉ ุชูุซู "ุณุชุฉ ุฃูุซุงู ุนุฏุฏ ุชุณุงูู ูกูฃูข"ุ ุซู ุญููุง.</p>
                                <div class="steps-container space-y-4 min-h-[250px]">
                                    <div class="interactive-placeholder text-center text-gray-500 p-4"><p>ุงุถุบุท "ุงูุชุงูู" ูุจุฏุก ุฎุทูุงุช ุงูุญู</p></div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 1: ุชุฑุฌูุฉ ุงูุฌููุฉ</h4><p>"ุณุชุฉ ุฃูุซุงู ุนุฏุฏ" ุชุชุฑุฌู ุฅูู <span class="math-eq">ูฆุณ</span>. "ุชุณุงูู ูกูฃูข" ุชุชุฑุฌู ุฅูู <span class="math-eq">= ูกูฃูข</span>. ุฅุฐูุ ุงููุนุงุฏูุฉ ูู: <span class="math-eq">ูฆุณ = ูกูฃูข</span></p></div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 2: ุญู ุงููุนุงุฏูุฉ</h4><p>ูุญู ุงููุนุงุฏูุฉุ ููุณู ููุง ุงูุทุฑููู ุนูู <span class="math-eq"><span class="highlight-action">ูฆ</span></span>.</p><p class="text-center mt-2"><span class="math-eq"><span class="fraction"><span>ูฆุณ</span><span class="frac-bar"></span><span class="highlight-change"><span class="highlight-action">ูฆ</span></span></span> = <span class="fraction"><span>ูกูฃูข</span><span class="frac-bar"></span><span class="highlight-change"><span class="highlight-action">ูฆ</span></span></span></span></p></div>
                                    <div class="step-interactive p-4 bg-green-100 rounded-lg step-box border-green-600"><h4 class="font-bold">ุงูุฎุทูุฉ ุงูุฃุฎูุฑุฉ: ุงูุญู ุงูููุงุฆู</h4><p>ุจุนุฏ ุงูุชุจุณูุทุ ูุฌุฏ ุฃู <span class="math-eq">ุณ = ูขูข</span></p></div>
                                </div>
                                <div class="flex justify-between mt-6">
                                    <button data-example="7" class="prev-btn bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed">ุฑุฌูุน</button>
                                    <div>
                                        <button data-example="7" class="next-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">ุงูุชุงูู</button>
                                        <button data-example="7" class="reset-btn hidden bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700">ุฅุนุงุฏุฉ</button>
                                    </div>
                                </div>
                            </div>
                            <!-- Example 8 -->
                            <div id="interactive-container-8" class="p-4 bg-white rounded-lg shadow">
                                <p class="text-lg font-semibold mb-2">ูุซุงู ูจ: ูุชุงุจุฉ ูุนุงุฏูุฉ ุทุฑุญ</p>
                                <p class="text-md mb-4 pb-2 border-b">ุงูุชุจ ูุนุงุฏูุฉ ุชูุซู "ุฃูู ูู ุนุฏุฏ ุจุนุดุฑุฉ ูุณุงูู ูขูฅ"ุ ุซู ุญููุง.</p>
                                <div class="steps-container space-y-4 min-h-[250px]">
                                    <div class="interactive-placeholder text-center text-gray-500 p-4"><p>ุงุถุบุท "ุงูุชุงูู" ูุจุฏุก ุฎุทูุงุช ุงูุญู</p></div>
                                    <div class="step-interactive p-4 bg-blue-100 rounded-lg step-box border-blue-600"><h4 class="font-bold text-blue-800">ุงูุฎุทูุฉ 1: ุชุฑุฌูุฉ ุงูุฌููุฉ</h4><p>"ุฃูู ูู ุนุฏุฏ ุจุนุดุฑุฉ" ุชุชุฑุฌู ุฅูู <span class="math-eq">ุณ - ูกู</span>. "ูุณุงูู ูขูฅ" ุชุชุฑุฌู ุฅูู <span class="math-eq">= ูขูฅ</span>. ุฅุฐูุ ุงููุนุงุฏูุฉ ูู: <span class="math-eq text-blue-700">ุณ - ูกู = ูขูฅ</span></p></div>
                                    <div class="step-interactive p-4 bg-blue-100 rounded-lg step-box border-blue-600"><h4 class="font-bold text-blue-800">ุงูุฎุทูุฉ 2: ุญู ุงููุนุงุฏูุฉ</h4><p>ูุญู ุงููุนุงุฏูุฉุ ูุถูู <span class="math-eq"><span class="highlight-action">ูกู</span></span> ุฅูู ููุง ุงูุทุฑููู.</p><p class="text-center mt-2"><span class="math-eq">ุณ - ูกู <span class="highlight-change">+ <span class="highlight-action">ูกู</span></span> = ูขูฅ <span class="highlight-change">+ <span class="highlight-action">ูกู</span></span></span></p></div>
                                    <div class="step-interactive p-4 bg-green-100 rounded-lg step-box border-green-600"><h4 class="font-bold">ุงูุฎุทูุฉ ุงูุฃุฎูุฑุฉ: ุงูุญู ุงูููุงุฆู</h4><p>ุจุนุฏ ุงูุชุจุณูุทุ ูุฌุฏ ุฃู <span class="math-eq">ุณ = ูฃูฅ</span></p></div>
                                </div>
                                <div class="flex justify-between mt-6">
                                    <button data-example="8" class="prev-btn bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed">ุฑุฌูุน</button>
                                    <div>
                                        <button data-example="8" class="next-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">ุงูุชุงูู</button>
                                        <button data-example="8" class="reset-btn hidden bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700">ุฅุนุงุฏุฉ</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <section class="mt-12">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-2xl font-bold text-gray-800">โ๏ธ ุฎุงูุณุงู: ุญุงู ุฏูุฑู! ุงุฎุชุจุฑ ูููู</h2>
                        <div id="attempts-counter" class="text-sm font-bold text-gray-600"></div>
                    </div>
                    <form id="quizForm" class="p-6 bg-gray-50 rounded-lg space-y-8"></form>
                    <div id="quiz-results" class="hidden mt-6 p-4 rounded-lg text-center">
                        <h3 class="text-xl font-bold">ูุชูุฌุชู ุงูููุงุฆูุฉ</h3>
                        <p id="quiz-score" class="text-4xl font-bold my-2"></p>
                        <div id="save-status" class="mt-4 text-sm font-semibold"></div>
                        <button id="retake-quiz-btn" class="hidden mt-4 bg-blue-600 text-white font-medium py-2 px-6 rounded-lg hover:bg-blue-700">ุฅุนุงุฏุฉ ุงูุงุฎุชุจุงุฑ</button>
                    </div>
                </section>
            </div>
        </main>
        <footer id="main-footer" class="bg-gray-200 py-4"></footer>
    </div>
    <div id="explanationModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-white rounded-lg shadow-2xl p-6 max-w-lg w-full">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold">๐ก ุดุฑุญ ุงูุฅุฌุงุจุฉ</h3>
                <button id="closeModalBtn" class="p-2 -m-2 rounded-full hover:bg-gray-200">
                    <svg class="h-6 w-6 text-gray-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
            </div>
            <div id="explanationText" class="text-gray-700 max-h-[60vh] overflow-y-auto"></div>
        </div>
    </div>
    <script>
    // ===================================================================================
    // ุงูุฏูุงู ุงููุดุชุฑูุฉ (ูุง ุชูู ุจุชุนุฏูู ูุฐุง ุงูุฌุฒุก)
    // ===================================================================================
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzrf1-At3Pq7i39bGV3F1iD3-b0G-WWyRi5cgpKeQjyn_N5fh2EmGhoyRKUsbLd-F_UJQ/exec";
    const MAX_ATTEMPTS = 3;
    let currentQuestions = []; 
    function getStudentFromStorage() { const studentDataString = localStorage.getItem('currentStudent'); if (studentDataString) { try { return JSON.parse(studentDataString); } catch (e) { return null; } } return null; }
    function buildHeader(studentData, studentId, classId) { const headerContainer = document.getElementById('main-header'); if (!headerContainer) return; let titleHtml = `<div><h2 class="text-sm text-gray-500 leading-tight">ููุตุฉ ุงูุฑูุงุถูุงุช ุงูุชูุงุนููุฉ</h2><h1 class="text-xl font-bold text-indigo-700 leading-tight">${document.getElementById('lesson-title').textContent}</h1></div>`; let userInfoHtml = ''; if (studentData) { userInfoHtml = `<div class="text-left"><div class="flex items-center gap-4"><span class="font-semibold">ุฃููุงูุ ${studentData.name}</span><a href="../index.html" target="_top" id="logout-link" class="bg-red-500 text-white py-1 px-3 rounded-lg hover:bg-red-600 text-sm">ุฎุฑูุฌ</a></div><a href="../index.html" target="_top" class="text-xs text-blue-600 hover:underline mt-1 block">&larr; ุงูุนูุฏุฉ ุฅูู ุงูููุฑุณ</a></div>`; } else if (studentId) { userInfoHtml = `<div class="text-left"><span class="font-semibold">ุฃููุงูุ ุทุงูุจ ${studentId}</span><a href="../index.html" target="_top" class="text-xs text-blue-600 hover:underline mt-1 block">&larr; ุงูุนูุฏุฉ ุฅูู ุงูููุฑุณ</a></div>`; } else { userInfoHtml = `<div class="text-left"><p class="font-semibold">ุฒุงุฆุฑ</p><a href="../index.html" target="_top" class="text-xs text-blue-600 hover:underline mt-1 block">&larr; ุงูุนูุฏุฉ ุฅูู ุงูููุฑุณ</a></div>`; } headerContainer.innerHTML = `<div class="container mx-auto px-6 py-4 flex justify-between items-center">${titleHtml}${userInfoHtml}</div>`; const logoutLink = headerContainer.querySelector('#logout-link'); if(logoutLink) { logoutLink.addEventListener('click', () => { localStorage.removeItem('currentStudent'); }); } }
    function buildFooter() { const footerContainer = document.getElementById('main-footer'); if (!footerContainer) return; footerContainer.innerHTML = `<div class="container mx-auto px-6"><p class="text-center text-gray-600 text-sm">ยฉ 2024 ุฌููุน ุงูุญููู ูุญููุธุฉ | ุชุตููู ูุชุทููุฑ: ุฃ. ุนุจุฏุงูุนุฒูุฒ ุฎุงูุฏ ุงูุนุจูุงู</p></div>`; }
    function initializeQuiz(lessonId, questions, studentId, classId, studentData) { currentQuestions = questions; const quizForm = document.getElementById('quizForm'); if (!quizForm) return; if (questions.length === 0) { quizForm.innerHTML = `<p class="text-center text-gray-600">ูุง ุชูุฌุฏ ุฃุณุฆูุฉ ูุชุงุญุฉ ููุฐุง ุงูุฏุฑุณ ุญุงููุงู.</p>`; return; } let attemptsLeft = 1; if (studentData) { const studentLessonData = studentData.lessons?.[lessonId] || { attempts: 0 }; attemptsLeft = MAX_ATTEMPTS - studentLessonData.attempts; } const attemptsCounter = document.getElementById('attempts-counter'); if (attemptsCounter) { attemptsCounter.innerHTML = `ุงููุญุงููุงุช ุงููุชุจููุฉ: <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full">${attemptsLeft}</span>`; } const quizHtml = questions.map((q, index) => { const optionsHTML = q.options.map((opt, optIndex) => `<div><input type="radio" name="q${index}" value="${opt.value}" id="q${index}_opt${optIndex}" class="hidden"><label for="q${index}_opt${optIndex}" class="option-label">${opt.display}</label></div>`).join(''); return `<div class="p-4 border-2 border-gray-200 rounded-lg"><p class="font-bold">${index + 1}. <span class="text-yellow-500">${q.level}</span> ${q.text}</p><div class="grid grid-cols-1 sm:grid-cols-2 gap-3 mt-3">${optionsHTML}</div><div id="feedback-q${index}" class="mt-2 text-sm font-bold"></div><div id="explanation-buttons-${index}" class="hidden mt-2 space-x-4 rtl:space-x-reverse"><button type="button" id="explain-btn-${index}" class="text-xs text-blue-600 hover:underline">ุงุนุฑู ููุงุฐุงุ</button><button type="button" id="smart-explain-btn-${index}" class="text-xs text-purple-600 hover:underline">๐ง ุญู ุฐูู</button></div></div>`; }).join(''); quizForm.innerHTML = quizHtml + `<button type="submit" id="submit-quiz-btn" class="w-full text-white bg-green-600 hover:bg-green-700 font-medium rounded-lg text-lg px-5 py-3 mt-8">ุชุญูู ูู ุฅุฌุงุจุงุชู</button>`; questions.forEach((q, index) => { const explainBtn = document.getElementById(`explain-btn-${index}`); if(explainBtn) explainBtn.addEventListener('click', () => showExplanation(index)); const smartExplainBtn = document.getElementById(`smart-explain-btn-${index}`); if(smartExplainBtn) { if (q.smartExplanation) { smartExplainBtn.addEventListener('click', () => showSmartExplanation(index)); } else { smartExplainBtn.style.display = 'none'; } } }); if (attemptsLeft <= 0) { const submitBtn = quizForm.querySelector('#submit-quiz-btn'); submitBtn.disabled = true; submitBtn.textContent = 'ูุง ุชูุฌุฏ ูุญุงููุงุช ูุชุจููุฉ'; submitBtn.classList.add('bg-gray-400', 'hover:bg-gray-400'); } quizForm.onsubmit = (e) => { e.preventDefault(); let score = 0; questions.forEach((q, index) => { const userAnswer = e.target.elements[`q${index}`]?.value; const feedbackEl = document.getElementById(`feedback-q${index}`); if (userAnswer === q.correct) { score++; feedbackEl.textContent = 'โ ุฅุฌุงุจุฉ ุตุญูุญุฉ!'; feedbackEl.className = 'mt-2 text-sm font-bold text-green-600'; } else { feedbackEl.textContent = `โ ุฅุฌุงุจุฉ ุฎุงุทุฆุฉ.`; feedbackEl.className = 'mt-2 text-sm font-bold text-red-600'; } document.getElementById(`explanation-buttons-${index}`).classList.remove('hidden');}); const finalGrade = Math.round((score / questions.length) * 10); const resultsDiv = document.getElementById('quiz-results'); resultsDiv.classList.remove('hidden'); document.getElementById('quiz-score').textContent = `${finalGrade} / 10`; if (studentId && classId) { saveGrade(lessonId, finalGrade, studentId, classId); if (studentData && (attemptsLeft - 1 > 0)) { document.getElementById('retake-quiz-btn').classList.remove('hidden'); } } else { document.getElementById('save-status').textContent = 'ุชู ุนุฑุถ ูุชูุฌุชู. ุณุฌู ุงูุฏุฎูู ูุญูุธ ุชูุฏูู.'; } e.target.querySelector('#submit-quiz-btn').disabled = true; }; }
    function saveGrade(lessonId, grade, studentId, classId) { if (!studentId || !classId) { const saveStatus = document.getElementById('save-status'); saveStatus.textContent = 'โ ุฎุทุฃ: ูู ูุชู ุงูุนุซูุฑ ุนูู ูุนุฑูู ุงูุทุงูุจ ุฃู ุงููุตู ูู ุงูุฑุงุจุท.'; console.error("Student ID or Class ID is missing from the URL."); return; } const saveStatus = document.getElementById('save-status'); saveStatus.textContent = 'ุฌุงุฑู ุญูุธ ูุชูุฌุชู...'; const url = `${SCRIPT_URL}?action=saveGrade&studentId=${studentId}&classId=${classId}&lessonId=${lessonId}&grade=${grade}`; fetch(url) .then(res => res.json()) .then(result => { if (result.status === 'success') { saveStatus.textContent = 'โ ุชู ุญูุธ ูุชูุฌุชู ุจูุฌุงุญ!'; const studentData = getStudentFromStorage(); if(studentData) { if (!studentData.lessons) studentData.lessons = {}; if (!studentData.lessons[lessonId] || studentData.lessons[lessonId].grade < grade) { studentData.lessons[lessonId] = { grade: grade, attempts: (studentData.lessons[lessonId]?.attempts || 0) + 1 }; } else { studentData.lessons[lessonId].attempts++; } localStorage.setItem('currentStudent', JSON.stringify(studentData)); } } else { throw new Error(result.message); } }) .catch(error => { saveStatus.textContent = 'โ ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุญูุธ ุงูุฏุฑุฌุฉ.'; console.error("Save Grade Error:", error); }); }
    function showExplanation(questionIndex) { const modal = document.getElementById('explanationModal'); const explanationText = document.getElementById('explanationText'); if(modal && explanationText && currentQuestions[questionIndex] && currentQuestions[questionIndex].explanation) { explanationText.innerHTML = currentQuestions[questionIndex].explanation; modal.classList.remove('hidden'); } }
    function showSmartExplanation(questionIndex) { const modal = document.getElementById('explanationModal'); const explanationText = document.getElementById('explanationText'); if(modal && explanationText && currentQuestions[questionIndex] && currentQuestions[questionIndex].smartExplanation) { explanationText.innerHTML = `<div class="p-3 bg-sky-50 border-r-4 border-sky-500 rounded-r-lg"><h4 class="font-bold text-sky-800">โก๏ธ ุญู ุฐูู ูุณุฑูุน</h4><p class="text-sm text-sky-700 mt-1">${currentQuestions[questionIndex].smartExplanation}</p></div>`; modal.classList.remove('hidden'); } }
    function closeModal() { const modal = document.getElementById('explanationModal'); if(modal) modal.classList.add('hidden'); }
    
    // ===================================================================================
    // ูุดุบู ุงูููุฏ (ููุง ุชุถุน ูุญุชูู ุงูุฏุฑุณ)
    // ===================================================================================
    
    // 1. ุชุญุฏูุฏ ูุนุฑูู ูุฑูุฏ ููุฏุฑุณ
    const LESSON_ID = 'c1_l2'; 

    // 2. ุจูู ุงูุฃุณุฆูุฉ ุงูุฎุงุต ุจุงูุฏุฑุณ
    function generateQuiz() {
        const questionBank = [
            { type: 'mcq', level: 'โญ', topic: 'addition', text: 'ุญู ุงููุนุงุฏูุฉ: <span class="math-eq">ุณ + ูกู = ูฃูฅ</span>', options: [ { display: '<span class="math-eq">ูคูฅ</span>', value: 'ูคูฅ' }, { display: '<span class="math-eq">ูขูฅ</span>', value: 'ูขูฅ' }, { display: '<span class="math-eq">ูฃ.ูฅ</span>', value: 'ูฃ.ูฅ' }, { display: '<span class="math-eq">-ูขูฅ</span>', value: '-ูขูฅ' } ], correct: 'ูขูฅ', explanation: `<p class='mb-2'>ูุญู ุงููุนุงุฏูุฉุ ูุทุฑุญ <span class="math-eq">ูกู</span> ูู ููุง ุงูุทุฑููู.</p><div class='text-right space-y-2'><p>ุฃููุงู: <span class='math-eq'>ุณ + ูกู <span class='highlight-change'>- <span class="highlight-action">ูกู</span></span> = ูฃูฅ <span class='highlight-change'>- <span class="highlight-action">ูกู</span></span></span></p><p>ุซุงููุงู: <span class='math-eq'>ุณ = ูขูฅ</span></p></div>`, smartExplanation: `ุญู ุฐููู: ูุง ูู ุงูุนุฏุฏ ุงูุฐู ุฅุฐุง ุฃุถููุง ูู ูกู ูุตุจุญ ูฃูฅุ ุฅูู ูขูฅ.` },
            { type: 'mcq', level: 'โญ', topic: 'subtraction', text: 'ุญู ุงููุนุงุฏูุฉ: <span class="math-eq">ู - ูกูฃ = ูฅ</span>', options: [ { display: '<span class="math-eq">ูจ</span>', value: 'ูจ' }, { display: '<span class="math-eq">-ูจ</span>', value: '-ูจ' }, { display: '<span class="math-eq">ูกูจ</span>', value: 'ูกูจ' }, { display: '<span class="math-eq">-ูกูจ</span>', value: '-ูกูจ' } ], correct: 'ูกูจ', explanation: `<p class='mb-2'>ูุญู ุงููุนุงุฏูุฉุ ูุถูู <span class="math-eq">ูกูฃ</span> ุฅูู ููุง ุงูุทุฑููู.</p><div class='text-right space-y-2'><p>ุฃููุงู: <span class='math-eq'>ู - ูกูฃ <span class='highlight-change'>+ <span class="highlight-action">ูกูฃ</span></span> = ูฅ <span class='highlight-change'>+ <span class="highlight-action">ูกูฃ</span></span></span></p><p>ุซุงููุงู: <span class='math-eq'>ู = ูกูจ</span></p></div>`, smartExplanation: `ุญู ุฐููู: ูุง ูู ุงูุนุฏุฏ ุงูุฐู ุฅุฐุง ุทุฑุญูุง ููู ูกูฃ ูุชุจูู ูฅุ ุฅูู ูกูจ.` },
            { type: 'mcq', level: 'โญโญ', topic: 'division', text: 'ุญู ุงููุนุงุฏูุฉ: <span class="math-eq">-ูจุณ = ูฉูฆ</span>', options: [ { display: '<span class="math-eq">ูกูข</span>', value: 'ูกูข' }, { display: '<span class="math-eq">ูกููค</span>', value: 'ูกููค' }, { display: '<span class="math-eq">-ูกูข</span>', value: '-ูกูข' }, { display: '<span class="math-eq">-ูจูจ</span>', value: '-ูจูจ' } ], correct: '-ูกูข', explanation: `<p class='mb-2'>ูุญู ุงููุนุงุฏูุฉุ ููุณู ููุง ุงูุทุฑููู ุนูู <span class="math-eq">-ูจ</span>.</p><div class='text-center space-y-2'><p><span class='math-eq'><span class="fraction"><span>-ูจุณ</span><span class="frac-bar"></span><span class='highlight-change'>-<span class="highlight-action">ูจ</span></span></span> = <span class="fraction"><span>ูฉูฆ</span><span class="frac-bar"></span><span class='highlight-change'>-<span class="highlight-action">ูจ</span></span></span></span></p><p><span class='math-eq'>ุณ = -ูกูข</span></p></div>`, smartExplanation: `ุชูุฏูุฑ: ุญุงุตู ุงูุถุฑุจ ููุฌุจ ูุงูุนุฏุฏ -ูจ ุณุงูุจุ ุฅุฐู ูุฌุจ ุฃู ูููู 'ุณ' ุณุงูุจูุง. ูุฐุง ูุณุชุจุนุฏ ุงูุฎูุงุฑุงุช ุงูููุฌุจุฉ.` },
            { type: 'mcq', level: 'โญโญ', topic: 'multiplication', text: 'ุญู ุงููุนุงุฏูุฉ: <span class="math-eq"><span class="fraction"><span>ุต</span><span class="frac-bar"></span><span>ูง</span></span> = -ูค</span>', options: [ { display: '<span class="math-eq">ูฃ</span>', value: 'ูฃ' }, { display: '<span class="math-eq">-ูขูจ</span>', value: '-ูขูจ' }, { display: '<span class="math-eq">ูขูจ</span>', value: 'ูขูจ' }, { display: '<span class="math-eq">-ูกูก</span>', value: '-ูกูก' } ], correct: '-ูขูจ', explanation: `<p class='mb-2'>ูุญู ุงููุนุงุฏูุฉุ ูุถุฑุจ ููุง ุงูุทุฑููู ูู <span class="math-eq">ูง</span>.</p><div class='text-center space-y-2'><p><span class='math-eq'><span class="fraction"><span>ุต</span><span class="frac-bar"></span><span>ูง</span></span> <span class='highlight-change'>ร <span class="highlight-action">ูง</span></span> = -ูค <span class='highlight-change'>ร <span class="highlight-action">ูง</span></span></span></p><p><span class='math-eq'>ุต = -ูขูจ</span></p></div>`, smartExplanation: `ุญู ุนูุณู: ุงุถุฑุจ ุงููุงุชุฌ -ูค ูู ูง. ุงูุฅุฌุงุจุฉ ูู -ูขูจ.` },
            { type: 'mcq', level: 'โญโญโญ', topic: 'writing', text: 'ูุง ุญู ุงููุนุงุฏูุฉ ุงูุชู ุชูุซู "ุซูุซุง ุนุฏุฏ ูุณุงูู ุณุงูุจ ุซูุงููุฉ"ุ', options: [ { display: '<span class="math-eq">-ูกูข</span>', value: '-ูกูข' }, { display: '<span class="math-eq">-ูกูฆ</span>', value: '-ูกูฆ' }, { display: '<span class="math-eq flex justify-center items-center">-ูฅ<span class="fraction"><span>ูก</span><span class="frac-bar"></span><span>ูฃ</span></span></span>', value: '-16/3' }, { display: '<span class="math-eq">ูกูข</span>', value: 'ูกูข' } ], correct: '-ูกูข', explanation: `<p class='mb-2'>ุฃููุงูุ ููุชุจ ุงููุนุงุฏูุฉ: <span class="math-eq"><span class="fraction"><span>ูข</span><span class="frac-bar"></span><span>ูฃ</span></span>ุณ = -ูจ</span></p><p class='mb-2'>ุซุงููุงูุ ูุญู ุจุถุฑุจ ุงูุทุฑููู ูู ููููุจ ุงููุณุฑ <span class="math-eq"><span class="fraction"><span>ูฃ</span><span class="frac-bar"></span><span>ูข</span></span></span></p><p class='math-eq text-center'>ุณ = -ูจ ร <span class="highlight-change"><span class="fraction"><span><span class="highlight-action">ูฃ</span></span><span class="frac-bar"></span><span><span class="highlight-action">ูข</span></span></span></span></p><p class='math-eq text-center'>ุณ = <span class="fraction"><span>-ูขูค</span><span class="frac-bar"></span><span>ูข</span></span> = -ูกูข</p>`, smartExplanation: `ุชูุฏูุฑ: ุซูุซุง ุงูุนุฏุฏ ูุณุงูู -ูจุ ุฅุฐู ุงูุนุฏุฏ ุงููุงูู ูุฌุจ ุฃู ูููู ุฃูุจุฑ ูู -ูจ ูุฃุจุนุฏ ุนู ุงูุตูุฑ. -ูกูข ูู ุงูุฎูุงุฑ ุงูููุทูู.` },
            { type: 'mcq', level: 'โญ', topic: 'subtraction', text: 'ุญู ุงููุนุงุฏูุฉ: <span class="math-eq">ู - ูฆ = -ูกูฅ</span>', options: [ { display: '<span class="math-eq">-ูฉ</span>', value: '-ูฉ' }, { display: '<span class="math-eq">-ูขูก</span>', value: '-ูขูก' }, { display: '<span class="math-eq">ูฉ</span>', value: 'ูฉ' }, { display: '<span class="math-eq">ูขูก</span>', value: 'ูขูก' } ], correct: '-ูฉ', explanation: `<p class='mb-2'>ูุญู ุงููุนุงุฏูุฉุ ูุถูู <span class="math-eq">ูฆ</span> ุฅูู ููุง ุงูุทุฑููู.</p><div class='text-right space-y-2'><p>ุฃููุงู: <span class='math-eq'>ู - ูฆ <span class='highlight-change'>+ <span class="highlight-action">ูฆ</span></span> = -ูกูฅ <span class='highlight-change'>+ <span class="highlight-action">ูฆ</span></span></span></p><p>ุซุงููุงู: <span class='math-eq'>ู = -ูฉ</span></p></div>`, smartExplanation: `ุญู ุฐููู: ุฃูุช ูุฏูู ุจู ูกูฅุ ูุทุฑุญุช ูฆ ูู ุฏููู ุงูุฃุตูู. ุฅุฐู ุฏููู ุงูุฃุตูู ูุงู ูฉ. ุงูุฅุฌุงุจุฉ -ูฉ.` },
            { type: 'mcq', level: 'โญโญ', topic: 'multiplication', text: 'ุญู ุงููุนุงุฏูุฉ: <span class="math-eq">-ูฃู = -ูขูง</span>', options: [ { display: '<span class="math-eq">-ูฉ</span>', value: '-ูฉ' }, { display: '<span class="math-eq">ูฉ</span>', value: 'ูฉ' }, { display: '<span class="math-eq">-ูฃู</span>', value: '-ูฃู' }, { display: '<span class="math-eq">-ูขูค</span>', value: '-ูขูค' } ], correct: 'ูฉ', explanation: `<p class='mb-2'>ูุญู ุงููุนุงุฏูุฉุ ููุณู ููุง ุงูุทุฑููู ุนูู <span class="math-eq">-ูฃ</span>.</p><div class='text-center space-y-2'><p><span class='math-eq'><span class="fraction"><span>-ูฃู</span><span class="frac-bar"></span><span class='highlight-change'>-<span class="highlight-action">ูฃ</span></span></span> = <span class="fraction"><span>-ูขูง</span><span class="frac-bar"></span><span class='highlight-change'>-<span class="highlight-action">ูฃ</span></span></span></span></p><p><span class='math-eq'>ู = ูฉ</span></p></div>`, smartExplanation: `ูุงุนุฏุฉ ุงูุฅุดุงุฑุงุช: ุณุงูุจ ุถุฑุจ ูุงุฐุง ูุนุทู ุณุงูุจุ ูุฌุจ ุฃู ูููู ุงูุนุฏุฏ ููุฌุจูุง. ูุฐุง ูุณุชุจุนุฏ ุงูุฎูุงุฑุงุช ุงูุณุงูุจุฉ. ูฃ ุถุฑุจ ูู ูุณุงูู ูขูงุ ุงูุฅุฌุงุจุฉ ูฉ.` },
            { type: 'mcq', level: 'โญโญโญ', topic: 'division', text: 'ุญู ุงููุนุงุฏูุฉ: <span class="math-eq"><span class="fraction"><span>ุจ</span><span class="frac-bar"></span><span>-ูค</span></span> = -ูกูข</span>', options: [ { display: '<span class="math-eq">ูฃ</span>', value: 'ูฃ' }, { display: '<span class="math-eq">-ูฃ</span>', value: '-ูฃ' }, { display: '<span class="math-eq">ูคูจ</span>', value: 'ูคูจ' }, { display: '<span class="math-eq">-ูคูจ</span>', value: '-ูคูจ' } ], correct: 'ูคูจ', explanation: `<p class='mb-2'>ูุญู ุงููุนุงุฏูุฉุ ูุถุฑุจ ููุง ุงูุทุฑููู ูู <span class="math-eq">-ูค</span>.</p><div class='text-center space-y-2'><p><span class='math-eq'><span class="fraction"><span>ุจ</span><span class="frac-bar"></span><span>-ูค</span></span> <span class='highlight-change'>ร -<span class="highlight-action">ูค</span></span> = -ูกูข <span class='highlight-change'>ร -<span class="highlight-action">ูค</span></span></span></p><p><span class='math-eq'>ุจ = ูคูจ</span></p></div>`, smartExplanation: `ุญู ุนูุณู ููุงุนุฏุฉ ุงูุฅุดุงุฑุงุช: ุงุถุฑุจ -ูกูข ูู -ูค. ุณุงูุจ ูู ุณุงูุจ ูุนุทู ููุฌุจ. ูกูข ูู ูค ูุณุงูู ูคูจ. ุงูุฅุฌุงุจุฉ ูคูจ.` },
            { type: 'mcq', level: 'โญโญ', topic: 'writing', text: 'ุนุฏุฏ ููุต ุจููุฏุงุฑ ูจ ูุฃุตุจุญ ูกูฅ. ูุง ูู ุงููุนุงุฏูุฉ ุงูุชู ุชูุซู ูุฐู ุงูุฌููุฉุ', options: [ { display: '<span class="math-eq">ุณ + ูจ = ูกูฅ</span>', value: 'ุณ + ูจ = ูกูฅ' }, { display: '<span class="math-eq">ุณ - ูจ = ูกูฅ</span>', value: 'ุณ - ูจ = ูกูฅ' }, { display: '<span class="math-eq">ูจ - ุณ = ูกูฅ</span>', value: 'ูจ - ุณ = ูกูฅ' }, { display: '<span class="math-eq">ูจุณ = ูกูฅ</span>', value: 'ูจุณ = ูกูฅ' } ], correct: 'ุณ - ูจ = ูกูฅ', explanation: `<p class='mb-2'>"ุนุฏุฏ" ููุซู ุจู <span class="math-eq">ุณ</span>. "ููุต ุจููุฏุงุฑ ูจ" ูุนูู ูุทุฑุญ <span class="math-eq">ูจ</span>. "ูุฃุตุจุญ ูกูฅ" ูุนูู ูุณุงูู <span class="math-eq">ูกูฅ</span>. ุฅุฐู ุงููุนุงุฏูุฉ ูู <span class="math-eq">ุณ - ูจ = ูกูฅ</span></p>`, smartExplanation: `ูููุงุช ููุชุงุญูุฉ: 'ููุต ุจููุฏุงุฑ ูจ' ุชุนูู ูุจุงุดุฑุฉ 'ุณ - ูจ'.` },
            { type: 'mcq', level: 'โญโญโญ', topic: 'fractions', text: 'ุญู ุงููุนุงุฏูุฉ: <span class="math-eq"><span class="fraction"><span>ูค</span><span class="frac-bar"></span><span>ูฅ</span></span> ู = ูขูจ</span>', options: [ { display: '<span class="math-eq">ูฃูฅ</span>', value: 'ูฃูฅ' }, { display: '<span class="math-eq">ูขูข.ูค</span>', value: 'ูขูข.ูค' }, { display: '<span class="math-eq">ูขูจ.ูจ</span>', value: 'ูขูจ.ูจ' }, { display: '<span class="math-eq">ูฃูข</span>', value: 'ูฃูข' } ], correct: 'ูฃูฅ', explanation: `<p class='mb-2'>ูุญู ุงููุนุงุฏูุฉุ ูุถุฑุจ ููุง ุงูุทุฑููู ูู ููููุจ ุงููุณุฑ ููู <span class="math-eq"><span class="fraction"><span>ูฅ</span><span class="frac-bar"></span><span>ูค</span></span></span></p><p class='math-eq text-center'>ู = ูขูจ ร <span class="highlight-change"><span class="fraction"><span><span class="highlight-action">ูฅ</span></span><span class="frac-bar"></span><span><span class="highlight-action">ูค</span></span></span></span></p><p class='math-eq text-center'>ู = <span class="fraction"><span>ูขูจ ร ูฅ</span><span class="frac-bar"></span><span>ูค</span></span> = <span class="fraction"><span>ูกูคู</span><span class="frac-bar"></span><span>ูค</span></span> = ูฃูฅ</p>`, smartExplanation: `ุญู ุฐููู: ุฅุฐุง ูุงูุช ุฃุฑุจุนุฉ ุฃุฎูุงุณ ุงูุนุฏุฏ ูู ูขูจุ ูุฅู ุงูุฎูุณ ุงููุงุญุฏ ูู ูขูจ รท ูค = ูง. ุฅุฐู ุงูุนุฏุฏ ุงููุงูู (ุฎูุณุฉ ุฃุฎูุงุณ) ูู ูง ร ูฅ = ูฃูฅ.` },
            { type: 'mcq', level: 'โญ', topic: 'writing', text: 'ูุง ูู ุงููุนุงุฏูุฉ ุงูุชู ุชูุซู ุงูุฌููุฉ: "ุนุฏุฏ ูุถุงู ุฅููู ูกูค ูุณุงูู ูฃ"ุ', options: [ { display: '<span class="math-eq">ุณ + ูกูค = ูฃ</span>', value: 'ุณ + ูกูค = ูฃ' }, { display: '<span class="math-eq">ุณ - ูกูค = ูฃ</span>', value: 'ุณ - ูกูค = ูฃ' }, { display: '<span class="math-eq">ูกูคุณ = ูฃ</span>', value: 'ูกูคุณ = ูฃ' }, { display: '<span class="math-eq">ูฃ + ุณ = ูกูค</span>', value: 'ูฃ + ุณ = ูกูค' } ], correct: 'ุณ + ูกูค = ูฃ', explanation: `<p class='mb-2'>"ุนุฏุฏ ูุถุงู ุฅููู ูกูค" ูุชุฑุฌู ุฅูู <span class="math-eq">ุณ + ูกูค</span>. "ูุณุงูู ูฃ" ูุชุฑุฌู ุฅูู <span class="math-eq">= ูฃ</span>. ุฅุฐู ุงููุนุงุฏูุฉ ูู <span class="math-eq">ุณ + ูกูค = ูฃ</span></p>`, smartExplanation: `ูููุงุช ููุชุงุญูุฉ: 'ูุถุงู ุฅููู' ุชุนูู '+' ู 'ูุณุงูู' ุชุนูู '='. ุงููุนุงุฏูุฉ ูู ุณ + ูกูค = ูฃ.` },
            { type: 'mcq', level: 'โญโญ', topic: 'writing', text: 'ูุง ูู ุงููุนุงุฏูุฉ ุงูุชู ุชูุซู ุงูุฌููุฉ: "ูุงุชุฌ ูุณูุฉ ุนุฏุฏ ุนูู ูฅ ูุณุงูู -ูกู"ุ', options: [ { display: '<span class="math-eq">ุณ + ูฅ = -ูกู</span>', value: 'ุณ + ูฅ = -ูกู' }, { display: '<span class="math-eq"><span class="fraction"><span>ุณ</span><span class="frac-bar"></span><span>ูฅ</span></span> = -ูกู</span>', value: 'ุณ/ูฅ = -ูกู' }, { display: '<span class="math-eq">ูฅุณ = -ูกู</span>', value: 'ูฅุณ = -ูกู' }, { display: '<span class="math-eq">ุณ - ูฅ = -ูกู</span>', value: 'ุณ - ูฅ = -ูกู' } ], correct: 'ุณ/ูฅ = -ูกู', explanation: `<p class='mb-2'>"ูุงุชุฌ ูุณูุฉ ุนุฏุฏ ุนูู ูฅ" ูุชุฑุฌู ุฅูู <span class="math-eq"><span class="fraction"><span>ุณ</span><span class="frac-bar"></span><span>ูฅ</span></span></span>. "ูุณุงูู -ูกู" ูุชุฑุฌู ุฅูู <span class="math-eq">= -ูกู</span>. ุฅุฐู ุงููุนุงุฏูุฉ ูู <span class="math-eq"><span class="fraction"><span>ุณ</span><span class="frac-bar"></span><span>ูฅ</span></span> = -ูกู</span></p>`, smartExplanation: `ูููุงุช ููุชุงุญูุฉ: 'ูุณูุฉ ุนุฏุฏ ุนูู ูฅ' ุชุนูู ูุจุงุดุฑุฉ <span class="math-eq"><span class="fraction"><span>ุณ</span><span class="frac-bar"></span><span>ูฅ</span></span></span>.` },
            { type: 'mcq', level: 'โญโญ', topic: 'writing', text: 'ุชุฑุฌู ุงูุฌููุฉ ุงูุชุงููุฉ ุฅูู ูุนุงุฏูุฉ: "ูุงุชุฌ ุถุฑุจ ุนุฏุฏ ูู ุณุงูุจ ุณุจุนุฉ ูู ูคูฉ".', options: [ { display: '<span class="math-eq">ุณ - ูง = ูคูฉ</span>', value: 'ุณ - ูง = ูคูฉ' }, { display: '<span class="math-eq">ุณ + (-ูง) = ูคูฉ</span>', value: 'ุณ + (-ูง) = ูคูฉ' }, { display: '<span class="math-eq">-ูงุณ = ูคูฉ</span>', value: '-ูงุณ = ูคูฉ' }, { display: '<span class="math-eq"><span class="fraction"><span>ุณ</span><span class="frac-bar"></span><span>-ูง</span></span> = ูคูฉ</span>', value: 'ุณ/-ูง = ูคูฉ' } ], correct: '-ูงุณ = ูคูฉ', explanation: `<p class='mb-2'>"ูุงุชุฌ ุถุฑุจ ุนุฏุฏ ูู ุณุงูุจ ุณุจุนุฉ" ูุชุฑุฌู ุฅูู <span class="math-eq">-ูงุณ</span>. "ูู ูคูฉ" ูุชุฑุฌู ุฅูู <span class="math-eq">= ูคูฉ</span>. ุฅุฐู ุงููุนุงุฏูุฉ ูู <span class="math-eq">-ูงุณ = ูคูฉ</span></p>`, smartExplanation: `ูููุงุช ููุชุงุญูุฉ: 'ุถุฑุจ ุนุฏุฏ ูู -ูง' ุชุนูู '-ูงุณ'.` }
        ];
        const shuffled = [...questionBank].sort(() => 0.5 - Math.random());
        const questionCount = Math.min(shuffled.length, 5);
        return shuffled.slice(0, questionCount);
    }

    // 3. ุชุดุบูู ุงูููุฏ ุนูุฏ ุชุญููู ุงูุตูุญุฉ
    document.addEventListener('DOMContentLoaded', () => {
        const urlParams = new URLSearchParams(window.location.search);
        const studentId = urlParams.get('studentId');
        const classId = urlParams.get('classId');

        const exampleContainers = document.querySelectorAll('[id^="interactive-container-"]');
        const state = {};
        exampleContainers.forEach(container => {
            const exampleId = container.id.split('-')[2];
            state[exampleId] = {
                currentIndex: -1,
                steps: container.querySelectorAll('.step-interactive'),
                placeholder: container.querySelector('.interactive-placeholder'),
                prevBtn: container.querySelector('.prev-btn'),
                nextBtn: container.querySelector('.next-btn'),
                resetBtn: container.querySelector('.reset-btn')
            };
            const resetExample = () => {
                state[exampleId].steps.forEach(step => step.classList.remove('active'));
                state[exampleId].currentIndex = -1;
                if (state[exampleId].placeholder) {
                    state[exampleId].placeholder.classList.remove('hidden');
                }
                updateButtons();
            };
            const updateButtons = () => {
                const isFirstStep = state[exampleId].currentIndex <= -1;
                const isLastStep = state[exampleId].currentIndex >= state[exampleId].steps.length - 1;
                state[exampleId].prevBtn.disabled = isFirstStep;
                if (isLastStep) {
                    state[exampleId].nextBtn.classList.add('hidden');
                    state[exampleId].resetBtn.classList.remove('hidden');
                } else {
                    state[exampleId].nextBtn.classList.remove('hidden');
                    state[exampleId].resetBtn.classList.add('hidden');
                }
            };
            state[exampleId].nextBtn.addEventListener('click', () => {
                if (state[exampleId].currentIndex < state[exampleId].steps.length - 1) {
                    if (state[exampleId].currentIndex === -1 && state[exampleId].placeholder) {
                        state[exampleId].placeholder.classList.add('hidden');
                    }
                    state[exampleId].currentIndex++;
                    state[exampleId].steps[state[exampleId].currentIndex].classList.add('active');
                    updateButtons();
                }
            });
            state[exampleId].prevBtn.addEventListener('click', () => {
                if (state[exampleId].currentIndex > 0) {
                    state[exampleId].steps[state[exampleId].currentIndex].classList.remove('active');
                    state[exampleId].currentIndex--;
                    updateButtons();
                } else if (state[exampleId].currentIndex === 0) {
                     state[exampleId].steps[state[exampleId].currentIndex].classList.remove('active');
                     state[exampleId].currentIndex--;
                     if (state[exampleId].placeholder) {
                        state[exampleId].placeholder.classList.remove('hidden');
                    }
                    updateButtons();
                }
            });
            if(state[exampleId].resetBtn) {
                state[exampleId].resetBtn.addEventListener('click', resetExample);
            }
            updateButtons();
        });
        const student = getStudentFromStorage();
        buildHeader(student, studentId, classId);
        buildFooter();
        const questions = generateQuiz();
        initializeQuiz(LESSON_ID, questions, studentId, classId, student);
        const retakeBtn = document.getElementById('retake-quiz-btn');
        if(retakeBtn) {
            retakeBtn.addEventListener('click', () => {
                window.location.reload();
            });
        }
        const closeModalBtn = document.getElementById('closeModalBtn');
        if(closeModalBtn) {
            closeModalBtn.addEventListener('click', closeModal);
        }
    });
    </script>
</body>
</html>
