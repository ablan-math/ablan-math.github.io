<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ø¯Ø±Ø³ Ù¥-Ù¡: Ø­Ù„ Ù†Ø¸Ø§Ù… Ù…Ù† Ù…Ø¹Ø§Ø¯Ù„ØªÙŠÙ† Ø®Ø·ÙŠØªÙŠÙ† Ø¨ÙŠØ§Ù†ÙŠØ§Ù‹ | Ù…Ù†ØµØ© Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; }
        .hidden { display: none; }
        .option-label { display: block; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; cursor: pointer; transition: all 0.2s ease-in-out; }
        .option-label:hover { border-color: #3b82f6; background-color: #eff6ff; }
        input[type="radio"]:checked + .option-label { border-color: #2563eb; background-color: #dbeafe; box-shadow: 0 0 0 2px #bfdbfe; }
        input[type="radio"] { display: none; }
        .math-eq {
            font-family: "Courier New", monospace;
            font-size: 1.1rem;
            font-weight: bold;
            color: #4338ca;
            background-color: #f3f4f6;
            border: 1px solid #d1d5db;
            padding: 2px 8px;
            border-radius: 6px;
            display: inline-block;
            vertical-align: middle;
        }
        .explanation-step { 
            padding-right: 12px; 
            margin-bottom: 1rem; 
            border-right: 3px solid #1d4ed8; 
            transition: opacity 0.5s ease-in-out; 
            min-height: 80px;
        }
        .summary-box {
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }
        .summary-box-blue {
             border-right: 3px solid #2563eb; /* blue-600 */
             background-color: #eff6ff; /* blue-50 */
        }
         .summary-box-blue .highlight-num {
            font-weight: bold;
            color: #1d4ed8; /* blue-700 */
        }
        .summary-box-red {
             border-right: 3px solid #dc2626; /* red-600 */
             background-color: #fee2e2; /* red-50 */
        }
         .summary-box-red .highlight-num {
            font-weight: bold;
            color: #b91c1c; /* red-700 */
        }
        .summary-box-green {
             border-right: 3px solid #16a34a; /* green-600 */
             background-color: #f0fdf4; /* green-50 */
        }
         .summary-box-green .highlight-num {
            font-weight: bold;
            color: #15803d; /* green-700 */
        }
        .nav-btn:disabled {
            background-color: #9ca3af;
            cursor: not-allowed;
        }
        .fraction {
            display: inline-flex;
            flex-direction: column;
            text-align: center;
            vertical-align: middle;
            margin: 0 0.2em;
            line-height: 1.2em;
        }
        .fraction > span { display: block; padding: 0 0.4em; }
        .fraction > span:last-child { border-top: 2px solid currentColor; }

        /* Graph Styles */
        .graph-container {
            position: relative;
            width: 100%;
            max-width: 360px;
            height: 360px;
            margin: 20px auto;
            border: 2px solid #9ca3af;
            background-color: #f9fafb;
            overflow: hidden;
        }
        .graph-grid {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background-image: 
                linear-gradient(to right, #e5e7eb 1px, transparent 1px), 
                linear-gradient(to bottom, #e5e7eb 1px, transparent 1px);
            background-size: 20px 20px;
        }
        .graph-axis { position: absolute; background-color: #9ca3af; }
        .x-axis { width: 100%; height: 2px; }
        .y-axis { height: 100%; width: 2px; }
        .graph-line {
            position: absolute;
            height: 3px;
            transform-origin: 0 50%; /* left center */
            transition: all 0.5s ease-in-out;
            opacity: 0;
        }
        .graph-point {
            position: absolute;
            width: 12px; height: 12px;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: all 0.5s ease-in-out;
            opacity: 0;
            z-index: 10;
        }
        .graph-movement-line {
            position: absolute;
            border-style: dashed;
            opacity: 0;
            transition: opacity 0.4s ease-in-out;
            z-index: 5;
        }
        .graph-movement-text {
            position: absolute;
            opacity: 0;
            transition: opacity 0.4s ease-in-out;
            z-index: 6;
            font-weight: bold;
            font-size: 0.9rem;
            transform: translate(-50%, -50%);
        }
        .solution-point {
            width: 18px; height: 18px;
            background-color: #f59e0b;
            border: 3px solid white;
            box-shadow: 0 0 0 2px #f59e0b;
            z-index: 20;
            animation: pulse 1.5s infinite;
        }
        .axis-label {
            position: absolute;
            font-size: 10px;
            color: #6b7280;
            background-color: #f9fafb;
            padding: 0 2px;
        }
        .feedback-box {
            padding: 0.75rem;
            border-radius: 0.5rem;
            margin-top: 1rem;
            font-weight: 500;
            border-right-width: 4px;
        }
        .feedback-correct {
            background-color: #f0fdf4; /* green-50 */
            border-color: #22c55e; /* green-500 */
            color: #15803d; /* green-800 */
        }
        .feedback-incorrect {
            background-color: #fef2f2; /* red-50 */
            border-color: #ef4444; /* red-500 */
            color: #b91c1c; /* red-800 */
        }
        @keyframes pulse {
            0% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.2); }
            100% { transform: translate(-50%, -50%) scale(1); }
        }
    </style>
</head>
<body class="bg-gray-100">
    <div id="app-container" class="min-h-screen">
        <header id="main-header" class="bg-white shadow-md sticky top-0 z-50"></header>
        <main class="container mx-auto max-w-5xl my-8 p-4">
            <div class="p-6 bg-white rounded-xl shadow-lg">
                <header class="flex justify-between items-center mb-8 border-b pb-4 border-gray-200">
                    <h1 id="lesson-title" class="text-3xl font-bold text-blue-800">Ø§Ù„Ø¯Ø±Ø³ Ù¥-Ù¡: Ø­Ù„ Ù†Ø¸Ø§Ù… Ù…Ù† Ù…Ø¹Ø§Ø¯Ù„ØªÙŠÙ† Ø®Ø·ÙŠØªÙŠÙ† Ø¨ÙŠØ§Ù†ÙŠØ§Ù‹</h1>
                    <!-- The "Return to Index" link that was here has been removed -->
                </header>

                <!-- Part 1: Basic Concepts -->
                <section class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">ğŸ’¡ Ø£ÙˆÙ„Ø§Ù‹: Ø§Ù„Ù…ÙØ§Ù‡ÙŠÙ… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</h2>
                    <div class="p-6 bg-blue-50 rounded-lg space-y-6">
                        <p>Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø§Øª Ù‡Ùˆ Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…Ù† Ù…Ø¹Ø§Ø¯Ù„ØªÙŠÙ† Ø®Ø·ÙŠØªÙŠÙ† Ø£Ùˆ Ø£ÙƒØ«Ø±. ÙˆØ­Ù„ Ø§Ù„Ù†Ø¸Ø§Ù… Ù‡Ùˆ Ø¥ÙŠØ¬Ø§Ø¯ Ø§Ù„Ø²ÙˆØ¬ Ø§Ù„Ù…Ø±ØªØ¨ (Ø³ØŒ Øµ) Ø§Ù„Ø°ÙŠ ÙŠØ­Ù‚Ù‚ Ø¬Ù…ÙŠØ¹ Ù…Ø¹Ø§Ø¯Ù„Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… ÙÙŠ Ù†ÙØ³ Ø§Ù„ÙˆÙ‚Øª. Ø¨ÙŠØ§Ù†ÙŠØ§Ù‹ØŒ Ù‡Ø°Ø§ ÙŠØ¹Ù†ÙŠ Ø¥ÙŠØ¬Ø§Ø¯ Ù†Ù‚Ø·Ø© ØªÙ‚Ø§Ø·Ø¹ Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ…Ø§Øª.</p>
                        <div class="bg-white rounded-xl shadow p-4">
                            <h3 class="text-xl font-bold text-center mb-4 text-indigo-700">Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ù…Ù…ÙƒÙ†Ø© Ù„Ù†Ø¸Ø§Ù… Ù…Ù† Ù…Ø¹Ø§Ø¯Ù„ØªÙŠÙ†</h3>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
                                <!-- Case 1: One Solution -->
                                <div class="border rounded-lg p-3 flex flex-col items-center">
                                    <h4 class="font-bold">Ø­Ù„ ÙˆØ§Ø­Ø¯ ÙÙ‚Ø·</h4>
                                    <svg class="w-32 h-32 my-2" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                        <line x1="10" y1="90" x2="90" y2="10" stroke="#ef4444" stroke-width="3"/>
                                        <line x1="10" y1="10" x2="90" y2="90" stroke="#3b82f6" stroke-width="3"/>
                                        <circle cx="50" cy="50" r="5" fill="#f59e0b"/>
                                    </svg>
                                    <p class="text-sm">Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ…Ø§Ù† ÙŠØªÙ‚Ø§Ø·Ø¹Ø§Ù† ÙÙŠ Ù†Ù‚Ø·Ø© ÙˆØ§Ø­Ø¯Ø©.</p>
                                    <p class="mt-2"><span class="font-semibold">ÙŠÙØ³Ù…Ù‰:</span> <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">Ù…ØªØ³Ù‚ ÙˆÙ…Ø³ØªÙ‚Ù„</span></p>
                                </div>
                                <!-- Case 2: Infinite Solutions -->
                                <div class="border rounded-lg p-3 flex flex-col items-center">
                                    <h4 class="font-bold">Ø¹Ø¯Ø¯ Ù„Ø§ Ù†Ù‡Ø§Ø¦ÙŠ Ù…Ù† Ø§Ù„Ø­Ù„ÙˆÙ„</h4>
                                     <svg class="w-32 h-32 my-2" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                        <line x1="10" y1="10" x2="90" y2="90" stroke="#3b82f6" stroke-width="4"/>
                                        <line x1="10" y1="10" x2="90" y2="90" stroke="#ef4444" stroke-width="4" stroke-dasharray="8, 8"/>
                                    </svg>
                                    <p class="text-sm">Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ…Ø§Ù† Ù…ØªØ·Ø§Ø¨Ù‚Ø§Ù† (Ù†ÙØ³ Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ…).</p>
                                    <p class="mt-2"><span class="font-semibold">ÙŠÙØ³Ù…Ù‰:</span> <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs">Ù…ØªØ³Ù‚ ÙˆØºÙŠØ± Ù…Ø³ØªÙ‚Ù„</span></p>
                                </div>
                                <!-- Case 3: No Solution -->
                                <div class="border rounded-lg p-3 flex flex-col items-center">
                                    <h4 class="font-bold">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø­Ù„</h4>
                                     <svg class="w-32 h-32 my-2" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                         <line x1="10" y1="20" x2="90" y2="60" stroke="#ef4444" stroke-width="3"/>
                                         <line x1="10" y1="40" x2="90" y2="80" stroke="#3b82f6" stroke-width="3"/>
                                     </svg>
                                    <p class="text-sm">Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ…Ø§Ù† Ù…ØªÙˆØ§Ø²ÙŠØ§Ù† ÙˆÙ„Ø§ ÙŠØªÙ‚Ø§Ø·Ø¹Ø§Ù† Ø£Ø¨Ø¯Ø§Ù‹.</p>
                                    <p class="mt-2"><span class="font-semibold">ÙŠÙØ³Ù…Ù‰:</span> <span class="bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs">ØºÙŠØ± Ù…ØªØ³Ù‚</span></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Part 2: Interactive Classification -->
                <section id="interactive-classification" class="mb-12">
                     <h2 class="text-2xl font-bold text-gray-800 mb-4">ğŸ” Ø«Ø§Ù†ÙŠØ§Ù‹: ØªØ­Ø¯ÙŠØ¯ Ù†ÙˆØ¹ Ø§Ù„Ù†Ø¸Ø§Ù… (ØªÙØ§Ø¹Ù„ÙŠ)</h2>
                     <div class="space-y-6">
                        <!-- Example 1: Inconsistent -->
                        <div class="p-5 bg-gray-50 rounded-lg border">
                            <p class="font-bold text-lg mb-3">Ù…Ø«Ø§Ù„ Ù¡: Ø­Ø¯Ø¯ Ù†ÙˆØ¹ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ§Ù„ÙŠ:</p>
                            <div class="flex items-center justify-center gap-4 mb-4">
                                <span class="math-eq text-blue-600">Øµ = Ù¢Ø³ + Ù¡</span>
                                <span class="font-bold text-gray-500">Ùˆ</span>
                                <span class="math-eq text-red-600">Øµ = Ù¢Ø³ - Ù£</span>
                            </div>
                            <div id="q-classify-1" class="grid grid-cols-1 md:grid-cols-3 gap-3">
                                <div><input type="radio" name="q-classify-1" value="independent" id="q1-opt1"><label for="q1-opt1" class="option-label text-center">Ù…ØªØ³Ù‚ ÙˆÙ…Ø³ØªÙ‚Ù„</label></div>
                                <div><input type="radio" name="q-classify-1" value="dependent" id="q1-opt2"><label for="q1-opt2" class="option-label text-center">Ù…ØªØ³Ù‚ ÙˆØºÙŠØ± Ù…Ø³ØªÙ‚Ù„</label></div>
                                <div><input type="radio" name="q-classify-1" value="inconsistent" id="q1-opt3"><label for="q1-opt3" class="option-label text-center">ØºÙŠØ± Ù…ØªØ³Ù‚</label></div>
                            </div>
                            <div id="feedback-classify-1" class="hidden feedback-box"></div>
                        </div>
                        <!-- Example 2: Consistent & Dependent -->
                        <div class="p-5 bg-gray-50 rounded-lg border">
                            <p class="font-bold text-lg mb-3">Ù…Ø«Ø§Ù„ Ù¢: Ø­Ø¯Ø¯ Ù†ÙˆØ¹ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ§Ù„ÙŠ:</p>
                            <div class="flex items-center justify-center gap-4 mb-4">
                                <span class="math-eq text-blue-600">Øµ = -Ù£Ø³ + Ù¢</span>
                                <span class="font-bold text-gray-500">Ùˆ</span>
                                <span class="math-eq text-red-600">Ù¢Øµ = -Ù¦Ø³ + Ù¤</span>
                            </div>
                             <div id="q-classify-2" class="grid grid-cols-1 md:grid-cols-3 gap-3">
                                <div><input type="radio" name="q-classify-2" value="independent" id="q2-opt1"><label for="q2-opt1" class="option-label text-center">Ù…ØªØ³Ù‚ ÙˆÙ…Ø³ØªÙ‚Ù„</label></div>
                                <div><input type="radio" name="q-classify-2" value="dependent" id="q2-opt2"><label for="q2-opt2" class="option-label text-center">Ù…ØªØ³Ù‚ ÙˆØºÙŠØ± Ù…Ø³ØªÙ‚Ù„</label></div>
                                <div><input type="radio" name="q-classify-2" value="inconsistent" id="q2-opt3"><label for="q2-opt3" class="option-label text-center">ØºÙŠØ± Ù…ØªØ³Ù‚</label></div>
                            </div>
                            <div id="feedback-classify-2" class="hidden feedback-box"></div>
                        </div>
                        <!-- Example 3: Consistent & Independent -->
                        <div class="p-5 bg-gray-50 rounded-lg border">
                            <p class="font-bold text-lg mb-3">Ù…Ø«Ø§Ù„ Ù£: Ø­Ø¯Ø¯ Ù†ÙˆØ¹ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ§Ù„ÙŠ:</p>
                            <div class="flex items-center justify-center gap-4 mb-4">
                                <span class="math-eq text-blue-600">Øµ = Ù¤Ø³ - Ù¥</span>
                                <span class="font-bold text-gray-500">Ùˆ</span>
                                <span class="math-eq text-red-600">Øµ = -Ø³ + Ù¥</span>
                            </div>
                             <div id="q-classify-3" class="grid grid-cols-1 md:grid-cols-3 gap-3">
                                <div><input type="radio" name="q-classify-3" value="independent" id="q3-opt1"><label for="q3-opt1" class="option-label text-center">Ù…ØªØ³Ù‚ ÙˆÙ…Ø³ØªÙ‚Ù„</label></div>
                                <div><input type="radio" name="q-classify-3" value="dependent" id="q3-opt2"><label for="q3-opt2" class="option-label text-center">Ù…ØªØ³Ù‚ ÙˆØºÙŠØ± Ù…Ø³ØªÙ‚Ù„</label></div>
                                <div><input type="radio" name="q-classify-3" value="inconsistent" id="q3-opt3"><label for="q3-opt3" class="option-label text-center">ØºÙŠØ± Ù…ØªØ³Ù‚</label></div>
                            </div>
                            <div id="feedback-classify-3" class="hidden feedback-box"></div>
                        </div>
                     </div>
                </section>

                <!-- Part 3: Interactive Graphing -->
                <section class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">ğŸ“Š Ø«Ø§Ù„Ø«Ø§Ù‹: Ø­Ù„ Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨ÙŠØ§Ù†ÙŠØ§Ù‹ (ØªÙØ§Ø¹Ù„ÙŠ)</h2>
                    <div class="space-y-10">
                        <!-- Example 1: One Solution -->
                        <div class="p-6 bg-gray-50 rounded-lg border">
                            <h3 class="text-xl font-bold text-center mb-2">Ù…Ø«Ø§Ù„ Ù¡: Ø­Ù„ ÙˆØ§Ø­Ø¯</h3>
                            <p class="text-center">Ø­Ù„ Ø§Ù„Ù†Ø¸Ø§Ù…: <span class="math-eq text-blue-600">Øµ = -Ø³ + Ù£</span> Ùˆ <span class="math-eq text-red-600">Øµ = Ù¢Ø³</span></p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center mt-4">
                                <div class="bg-gray-50 p-4 rounded-lg border min-h-[400px] flex flex-col justify-between">
                                    <div>
                                        <div id="summary-container-1"></div>
                                        <div id="graph-exp-1" class="text-right"></div>
                                    </div>
                                    <div class="mt-4 flex justify-between items-center">
                                        <button id="graph-back-1" class="nav-btn bg-gray-500 text-white font-medium py-2 px-4 rounded-lg hover:bg-gray-600 text-sm">Ø±Ø¬ÙˆØ¹</button>
                                        <span class="text-sm font-bold text-gray-600">Ø§Ù„Ø®Ø·ÙˆØ© <span id="graph-counter-1">1</span> / <span id="graph-total-1">8</span></span>
                                        <button id="graph-next-1" class="nav-btn bg-indigo-600 text-white font-medium py-2 px-4 rounded-lg hover:bg-indigo-700 text-sm">Ø§Ù„ØªØ§Ù„ÙŠ</button>
                                    </div>
                                </div>
                                <div id="graph-container-1" class="graph-container">
                                    <div class="graph-grid"></div><div class="graph-axis x-axis" style="top: 50%;"></div><div class="graph-axis y-axis" style="left: 50%;"></div>
                                    <div id="graph-line-1a" class="graph-line bg-blue-500"></div><div id="graph-line-1b" class="graph-line bg-red-500"></div>
                                    <div id="graph-point-1a1" class="graph-point bg-blue-500"></div><div id="graph-point-1a2" class="graph-point bg-blue-500"></div>
                                    <div id="graph-point-1b1" class="graph-point bg-red-500"></div><div id="graph-point-1b2" class="graph-point bg-red-500"></div>
                                    <div id="graph-rise-1a" class="graph-movement-line border-blue-500"></div><div id="graph-run-1a" class="graph-movement-line border-blue-500"></div>
                                    <div id="graph-rise-text-1a" class="graph-movement-text text-blue-600"></div><div id="graph-run-text-1a" class="graph-movement-text text-blue-600"></div>
                                    <div id="graph-rise-1b" class="graph-movement-line border-red-500"></div><div id="graph-run-1b" class="graph-movement-line border-red-500"></div>
                                    <div id="graph-rise-text-1b" class="graph-movement-text text-red-600"></div><div id="graph-run-text-1b" class="graph-movement-text text-red-600"></div>
                                    <div id="solution-point-1" class="graph-point solution-point"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Part 4: Real-life Example -->
                <section class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">ğŸ¢ Ø±Ø§Ø¨Ø¹Ø§Ù‹: Ù…Ù† ÙˆØ§Ù‚Ø¹ Ø§Ù„Ø­ÙŠØ§Ø©</h2>
                       <div class="p-6 bg-gray-50 rounded-lg border">
                            <h3 class="font-bold text-center mb-2">Ù…Ø«Ø§Ù„: Ø³Ø¨Ø§Ù‚ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©</h3>
                            <div class="flex justify-center gap-4 text-center p-4">
                                <div class="bg-blue-100 p-3 rounded-lg border border-blue-300">
                                    <h4 class="font-bold text-blue-800">ØµØ§Ù„Ø­</h4>
                                    <p>Ù‚Ø±Ø£ <span class="font-bold text-lg">Ù¦Ù¥</span> ØµÙØ­Ø©</p>
                                    <p>ÙˆÙŠÙ‚Ø±Ø£ <span class="font-bold text-lg">Ù¢Ù </span> ØµÙØ­Ø© ÙŠÙˆÙ…ÙŠØ§Ù‹</p>
                                </div>
                                <div class="bg-green-100 p-3 rounded-lg border border-green-300">
                                    <h4 class="font-bold text-green-800">Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡</h4>
                                    <p>Ù‚Ø±Ø£ <span class="font-bold text-lg">Ù¨Ù¥</span> ØµÙØ­Ø©</p>
                                    <p>ÙˆÙŠÙ‚Ø±Ø£ <span class="font-bold text-lg">Ù¡Ù </span> ØµÙØ­Ø§Øª ÙŠÙˆÙ…ÙŠØ§Ù‹</p>
                                </div>
                            </div>
                            <p class="text-center mt-2">Ø¨Ø¹Ø¯ ÙƒÙ… ÙŠÙˆÙ… ÙŠØµØ¨Ø­ Ù…Ø§ Ù‚Ø±Ø£Ù‡ ØµØ§Ù„Ø­ Ù…Ø³Ø§ÙˆÙŠØ§Ù‹ Ù„Ù…Ø§ Ù‚Ø±Ø£Ù‡ Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ØŸ</p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center mt-4">
                                <div class="bg-gray-50 p-4 rounded-lg border min-h-[420px] flex flex-col">
                                    <div class="flex-grow">
                                        <div id="summary-container-life"></div>
                                        <div id="life-exp-1" class="text-right"></div>
                                    </div>
                                    <div class="mt-4 flex justify-between items-center">
                                        <button id="life-back-1" class="nav-btn bg-gray-500 text-white font-medium py-2 px-4 rounded-lg hover:bg-gray-600 text-sm">Ø±Ø¬ÙˆØ¹</button>
                                        <span class="text-sm font-bold text-gray-600">Ø§Ù„Ø®Ø·ÙˆØ© <span id="life-counter-1">1</span> / <span id="life-total-1">10</span></span>
                                        <button id="life-next-1" class="nav-btn bg-indigo-600 text-white font-medium py-2 px-4 rounded-lg hover:bg-indigo-700 text-sm">Ø§Ù„ØªØ§Ù„ÙŠ</button>
                                    </div>
                                </div>
                                <div id="life-graph-container" class="graph-container">
                                    <div class="graph-grid"></div>
                                    <div id="life-x-axis" class="graph-axis x-axis"></div><div id="life-y-axis" class="graph-axis y-axis"></div>
                                    <div id="graph-line-life-a" class="graph-line bg-blue-500"></div>
                                    <div id="graph-line-life-b" class="graph-line bg-green-500"></div>
                                    <div id="graph-point-life-a1" class="graph-point bg-blue-500"></div><div id="graph-point-life-a2" class="graph-point bg-blue-500"></div>
                                    <div id="graph-point-life-b1" class="graph-point bg-green-500"></div><div id="graph-point-life-b2" class="graph-point bg-green-500"></div>
                                    <div id="graph-rise-life-a" class="graph-movement-line border-blue-500"></div>
                                    <div id="graph-run-life-a" class="graph-movement-line border-blue-500"></div>
                                    <div id="graph-rise-text-life-a" class="graph-movement-text text-blue-600"></div>
                                    <div id="graph-run-text-life-a" class="graph-movement-text text-blue-600"></div>
                                    <div id="graph-rise-life-b" class="graph-movement-line border-green-500"></div>
                                    <div id="graph-run-life-b" class="graph-movement-line border-green-500"></div>
                                    <div id="graph-rise-text-life-b" class="graph-movement-text text-green-600"></div>
                                    <div id="graph-run-text-life-b" class="graph-movement-text text-green-600"></div>
                                    <div id="solution-point-life" class="graph-point solution-point"></div>
                                </div>
                            </div>
                        </div>
                </section>

                <!-- Part 5: Quiz -->
                <section class="mt-12">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-2xl font-bold text-gray-800">âœï¸ Ø®Ø§Ù…Ø³Ø§Ù‹: Ø­Ø§Ù† Ø¯ÙˆØ±Ùƒ! Ø§Ø®ØªØ¨Ø± ÙÙ‡Ù…Ùƒ</h2>
                        <div id="attempts-counter" class="text-sm font-bold text-gray-600"></div>
                    </div>
                    <form id="quizForm" class="p-6 bg-gray-50 rounded-lg space-y-8"></form>
                    <div id="quiz-results" class="hidden mt-6 p-6 rounded-lg text-center">
                        <h3 class="text-xl font-bold">Ù†ØªÙŠØ¬ØªÙƒ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</h3>
                        <p id="quiz-score" class="text-4xl font-bold my-2"></p>
                        <div id="save-status" class="mt-4 text-sm font-semibold"></div>
                        <button id="retake-quiz-btn" class="hidden mt-4 bg-blue-600 text-white font-medium py-2 px-6 rounded-lg hover:bg-blue-700">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
                    </div>
                </section>
            </div>
        </main>
        <footer id="main-footer" class="bg-gray-200 py-4"></footer>
    </div>
    <div id="explanationModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-white rounded-lg shadow-2xl p-6 max-w-lg w-full">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold">ğŸ’¡ Ø´Ø±Ø­ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</h3>
                <button id="closeModalBtn" class="p-2 -m-2 rounded-full hover:bg-gray-200">
                    <svg class="h-6 w-6 text-gray-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
            </div>
            <div id="explanationText" class="text-gray-700 max-h-[60vh] overflow-y-auto"></div>
        </div>
    </div>
    <script>
    // ==================================================
    // Platform Common Functions
    // ==================================================
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzrf1-At3Pq7i39bGV3F1iD3-b0G-WWyRi5cgpKeQjyn_N5fh2EmGhoyRKUsbLd-F_UJQ/exec";
    const MAX_ATTEMPTS = 3;
    let currentQuestions = []; 
    
    // Read student and class IDs from URL
    const urlParams = new URLSearchParams(window.location.search);
    const studentId = urlParams.get('studentId');
    const classId = urlParams.get('classId');

    function getStudentFromStorage() { const d = localStorage.getItem('currentStudent'); return d ? JSON.parse(d) : null; }
    
    function buildHeader(studentData, lessonTitle = null) {
        const h = document.getElementById('main-header');
        if (!h) return;
        let t = lessonTitle ? `<div><h2 class="text-sm text-gray-500 leading-tight">Ù…Ù†ØµØ© Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©</h2><h1 class="text-xl font-bold text-indigo-700 leading-tight">${lessonTitle}</h1></div>` : `<a href="../index.html" target="_top"><h1 class="text-2xl font-bold text-blue-800">Ù…Ù†ØµØ© Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©</h1></a>`;
        let u = studentData ?
            `<div class="text-right">
                <div class="flex items-center gap-4 justify-end">
                    <span class="font-semibold">Ø£Ù‡Ù„Ø§Ù‹ØŒ ${studentData.name}</span>
                    <a href="../index.html" target="_top" id="logout-link" class="bg-red-500 text-white py-1 px-3 rounded-lg hover:bg-red-600 text-sm">Ø®Ø±ÙˆØ¬</a>
                </div>
                <a href="../index.html" target="_top" class="text-xs text-blue-600 hover:underline">&larr; Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„ÙÙ‡Ø±Ø³</a>
            </div>` :
            `<div class="text-right">
                <p class="text-lg text-gray-600">Ø²Ø§Ø¦Ø±</p>
                <a href="../index.html" target="_top" class="text-xs text-blue-600 hover:underline">&larr; Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„ÙÙ‡Ø±Ø³</a>
            </div>`;
        h.innerHTML = `<div class="container mx-auto px-6 py-4 flex justify-between items-center">${t}${u}</div>`;
        const l = h.querySelector('#logout-link');
        if(l) l.addEventListener('click', () => localStorage.removeItem('currentStudent'));
    }

    function buildFooter() { const f = document.getElementById('main-footer'); if (f) f.innerHTML = `<div class="container mx-auto px-6"><p class="text-center text-gray-600 text-sm">Â© 2024 Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© | ØªØµÙ…ÙŠÙ… ÙˆØªØ·ÙˆÙŠØ±: Ø£. Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ² Ø®Ø§Ù„Ø¯ Ø§Ù„Ø¹Ø¨Ù„Ø§Ù†</p></div>`; }
    
    function initializeQuiz(lessonId, questions, studentData) {
        currentQuestions = questions;
        const qf = document.getElementById('quizForm');
        if (!qf) return;
        if (questions.length === 0) { qf.innerHTML = `<p class="text-center text-gray-600">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø³Ø¦Ù„Ø© Ù…ØªØ§Ø­Ø© Ù„Ù‡Ø°Ø§ Ø§Ù„Ø¯Ø±Ø³ Ø­Ø§Ù„ÙŠØ§Ù‹.</p>`; return; }
        let attemptsLeft = studentData ? MAX_ATTEMPTS - (studentData.lessons?.[lessonId]?.attempts || 0) : 1;
        const ac = document.getElementById('attempts-counter');
        if (ac) ac.innerHTML = `Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©: <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full">${attemptsLeft}</span>`;
        qf.innerHTML = questions.map((q, i) => { const o = q.options.map((opt, oi) => `<div><input type="radio" name="q${i}" value="${opt.value}" id="q${i}_opt${oi}" class="hidden"><label for="q${i}_opt${oi}" class="option-label">${opt.display}</label></div>`).join(''); return `<div class="p-4 border-2 border-gray-200 rounded-lg"><p class="font-bold">${i + 1}. <span class="text-yellow-500">${q.level}</span> ${q.text}</p><div class="grid grid-cols-1 sm:grid-cols-2 gap-3 mt-3">${o}</div><div id="feedback-q${i}" class="mt-2 text-sm font-bold"></div><div id="explanation-buttons-${i}" class="hidden mt-2 space-x-4 rtl:space-x-reverse"></div></div>`; }).join('') + `<button type="submit" id="submit-quiz-btn" class="w-full text-white bg-green-600 hover:bg-green-700 font-medium rounded-lg text-lg px-5 py-3 mt-8">ØªØ­Ù‚Ù‚ Ù…Ù† Ø¥Ø¬Ø§Ø¨Ø§ØªÙŠ</button>`;
        if (attemptsLeft <= 0) { const btn = qf.querySelector('#submit-quiz-btn'); btn.disabled = true; btn.textContent = 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ù…ØªØ¨Ù‚ÙŠØ©'; btn.classList.add('bg-gray-400', 'hover:bg-gray-400'); }
        qf.onsubmit = (e) => {
            e.preventDefault();
            let score = 0;
            questions.forEach((q, i) => {
                const ua = e.target.elements[`q${i}`]?.value;
                const fb = document.getElementById(`feedback-q${i}`);
                const bc = document.getElementById(`explanation-buttons-${i}`);
                bc.innerHTML = '';
                if (ua === q.correct) { score++; fb.textContent = 'âœ” Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©!'; fb.className = 'mt-2 text-sm font-bold text-green-600'; } else { fb.textContent = `âŒ Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©.`; fb.className = 'mt-2 text-sm font-bold text-red-600'; }
                bc.classList.remove('hidden');
                const stdBtn = document.createElement('button'); stdBtn.type = 'button'; stdBtn.textContent = 'Ø§Ø¹Ø±Ù Ù„Ù…Ø§Ø°Ø§ØŸ'; stdBtn.className = 'text-xs text-blue-600 hover:underline'; stdBtn.onclick = () => window.showExplanation(i, 'standard'); bc.appendChild(stdBtn);
                if (q.smartExplanation) { const smtBtn = document.createElement('button'); smtBtn.type = 'button'; smtBtn.innerHTML = 'ğŸ§  Ø§Ù„Ø­Ù„ Ø§Ù„Ø°ÙƒÙŠ'; smtBtn.className = 'text-xs text-purple-600 hover:underline font-bold'; smtBtn.onclick = () => window.showExplanation(i, 'smart'); bc.appendChild(smtBtn); }
            });
            const finalGrade = Math.round((score / questions.length) * 10);
            const rd = document.getElementById('quiz-results'); rd.classList.remove('hidden'); document.getElementById('quiz-score').textContent = `${finalGrade} / 10`;
            
            if (studentId && classId) {
                saveGrade(lessonId, finalGrade);
                 if (studentData && attemptsLeft - 1 > 0) {
                    document.getElementById('retake-quiz-btn').classList.remove('hidden');
                }
            } else {
                document.getElementById('save-status').textContent = 'ØªÙ… Ø¹Ø±Ø¶ Ù†ØªÙŠØ¬ØªÙƒ. Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„Ø­ÙØ¸ Ù„Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨ ÙÙŠ Ø§Ù„Ø±Ø§Ø¨Ø·.';
            }
            e.target.querySelector('#submit-quiz-btn').disabled = true;
        };
    }

    function saveGrade(lessonId, grade) {
        const ss = document.getElementById('save-status');
        if (!studentId || !classId) {
            console.error("Student ID or Class ID is missing from the URL.");
            ss.textContent = 'âŒ Ø®Ø·Ø£: Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø­ÙØ¸ Ù†ØªÙŠØ¬ØªÙƒ. Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨ Ø£Ùˆ Ø§Ù„ÙØµÙ„ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©.';
            ss.className = 'mt-4 text-sm font-semibold text-red-600';
            return;
        }
        ss.textContent = 'Ø¬Ø§Ø±Ù Ø­ÙØ¸ Ù†ØªÙŠØ¬ØªÙƒ...';
        ss.className = 'mt-4 text-sm font-semibold text-gray-600';
        fetch(`${SCRIPT_URL}?action=saveGrade&studentId=${studentId}&classId=${classId}&lessonId=${lessonId}&grade=${grade}`)
            .then(res => res.json()).then(result => {
                if (result.status === 'success') {
                    ss.textContent = 'âœ” ØªÙ… Ø­ÙØ¸ Ù†ØªÙŠØ¬ØªÙƒ Ø¨Ù†Ø¬Ø§Ø­!';
                    ss.className = 'mt-4 text-sm font-semibold text-green-600';
                    const sd = JSON.parse(localStorage.getItem('currentStudent'));
                    if(sd && sd.id == studentId) {
                        if (!sd.lessons) sd.lessons = {};
                        if (!sd.lessons[lessonId] || sd.lessons[lessonId].grade < grade) {
                            sd.lessons[lessonId] = { grade: grade, attempts: (sd.lessons[lessonId]?.attempts || 0) + 1 };
                        } else {
                            sd.lessons[lessonId].attempts++;
                        }
                        localStorage.setItem('currentStudent', JSON.stringify(sd));
                    }
                } else {
                    throw new Error(result.message);
                }
            }).catch(error => {
                ss.textContent = 'âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø­ÙØ¸ Ø§Ù„Ø¯Ø±Ø¬Ø©.';
                ss.className = 'mt-4 text-sm font-semibold text-red-600';
                console.error("Save Grade Error:", error);
            });
    }

    window.showExplanation = (i, type) => { const q = currentQuestions[i]; const m = document.getElementById('explanationModal'); const et = document.getElementById('explanationText'); if (!m || !et || !q) return; et.innerHTML = (type === 'smart' && q.smartExplanation) ? `<p>${q.smartExplanation}</p>` : `<p>${q.explanation}</p>`; m.classList.remove('hidden'); }
    function closeModal() { const m = document.getElementById('explanationModal'); if(m) m.classList.add('hidden'); }
    
    // ==================================================
    // Lesson Specific Code
    // ==================================================
    const LESSON_ID = 'c5_l1'; 
    
    function generateQuiz() {
        const questionBank = [
            { type: 'mcq', level: 'â­', text: 'Ø¹Ù†Ø¯Ù…Ø§ ÙŠÙƒÙˆÙ† Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø§Øª Ø­Ù„ ÙˆØ§Ø­Ø¯ ÙÙ‚Ø·ØŒ ÙƒÙŠÙ ØªØ¨Ø¯Ùˆ Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ…Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØŸ', options: [ { display: 'Ù…ØªÙˆØ§Ø²ÙŠØ©', value: 'A' }, { display: 'Ù…ØªÙ‚Ø§Ø·Ø¹Ø©', value: 'B' }, { display: 'Ù…ØªØ·Ø§Ø¨Ù‚Ø©', value: 'C' }, { display: 'Ù…ØªØ¹Ø§Ù…Ø¯Ø©', value: 'D' } ], correct: 'B', explanation: 'Ø§Ù„Ø­Ù„ Ø§Ù„ÙˆØ­ÙŠØ¯ Ù„Ù„Ù†Ø¸Ø§Ù… Ù‡Ùˆ Ù†Ù‚Ø·Ø© Ø§Ù„ØªÙ‚Ø§Ø·Ø¹ Ø¨ÙŠÙ† Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ…ÙŠÙ†.' },
            { type: 'mcq', level: 'â­', text: 'Ù…Ø§Ø°Ø§ ÙŠØ³Ù…Ù‰ Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø§Øª Ø§Ù„Ø°ÙŠ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù„Ù‡ Ø­Ù„ØŸ', options: [ { display: 'Ù…ØªØ³Ù‚ ÙˆÙ…Ø³ØªÙ‚Ù„', value: 'A' }, { display: 'Ù…ØªØ³Ù‚ ÙˆØºÙŠØ± Ù…Ø³ØªÙ‚Ù„', value: 'B' }, { display: 'ØºÙŠØ± Ù…ØªØ³Ù‚', value: 'C' }, { display: 'Ù…Ø³ØªÙ‚Ù„', value: 'D' } ], correct: 'C', explanation: 'Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø°ÙŠ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù„Ù‡ Ø­Ù„ (Ù…Ø³ØªÙ‚ÙŠÙ…Ø§Ù† Ù…ØªÙˆØ§Ø²ÙŠØ§Ù†) ÙŠØ³Ù…Ù‰ Ù†Ø¸Ø§Ù…Ø§Ù‹ ØºÙŠØ± Ù…ØªØ³Ù‚.' },
            { type: 'mcq', level: 'â­â­', text: 'ÙƒÙ… Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ù„ÙˆÙ„ Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø§Øª: Øµ = Ù£Ø³ + Ù¥ Ùˆ Øµ = Ù£Ø³ - Ù¡ ØŸ', options: [ { display: 'Ø­Ù„ ÙˆØ§Ø­Ø¯', value: 'A' }, { display: 'Ø­Ù„Ø§Ù†', value: 'B' }, { display: 'Ø¹Ø¯Ø¯ Ù„Ø§ Ù†Ù‡Ø§Ø¦ÙŠ', value: 'C' }, { display: 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø­Ù„', value: 'D' } ], correct: 'D', explanation: 'Ù„Ù„Ù…Ø¹Ø§Ø¯Ù„ØªÙŠÙ† Ù†ÙØ³ Ø§Ù„Ù…ÙŠÙ„ (Ù£) ÙˆÙ…Ù‚Ø·Ø¹ ØµØ§Ø¯ÙŠ Ù…Ø®ØªÙ„Ù. Ù‡Ø°Ø§ ÙŠØ¹Ù†ÙŠ Ø£Ù†Ù‡Ù…Ø§ Ù…ØªÙˆØ§Ø²ÙŠØ§Ù†ØŒ ÙˆØ¨Ø§Ù„ØªØ§Ù„ÙŠ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø­Ù„.', smartExplanation: 'Ø¨Ù…Ø§ Ø£Ù† Ø§Ù„Ù…ÙŠÙ„ Ù…ØªØ³Ø§ÙˆÙ ÙˆØ§Ù„Ù…Ù‚Ø·Ø¹ Ù…Ø®ØªÙ„ÙØŒ ÙØ§Ù„Ù…Ø³ØªÙ‚ÙŠÙ…Ø§Ù† Ù…ØªÙˆØ§Ø²ÙŠØ§Ù†. Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠØªÙ‚Ø§Ø·Ø¹Ø§.' },
            { type: 'mcq', level: 'â­â­', text: 'Ù…Ø§ Ù‡Ùˆ Ø­Ù„ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ù…Ø«Ù„ Ø¨Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„ØªÙŠÙ†: Øµ = Ø³ + Ù¢ Ùˆ Øµ = -Ø³ + Ù¤ ØŸ', options: [ { display: '(Ù¡ØŒ Ù£)', value: 'A' }, { display: '(Ù£ØŒ Ù¡)', value: 'B' }, { display: '(Ù¢ØŒ Ù¢)', value: 'C' }, { display: '(Ù ØŒ Ù¤)', value: 'D' } ], correct: 'A', explanation: 'Ø¨Ø§Ù„ØªØ¹ÙˆÙŠØ¶ Ø¨Ø§Ù„Ù†Ù‚Ø·Ø© (Ù¡ØŒ Ù£) ÙÙŠ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„ØªÙŠÙ†: Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰: Ù£ = Ù¡ + Ù¢ (ØµØ­ÙŠØ­Ø©). Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©: Ù£ = -Ù¡ + Ù¤ (ØµØ­ÙŠØ­Ø©). Ø¥Ø°Ù† (Ù¡ØŒ Ù£) Ù‡Ùˆ Ø§Ù„Ø­Ù„.' },
            { type: 'mcq', level: 'â­â­â­', text: 'Ø£ÙŠ Ù†Ø¸Ø§Ù… Ù…Ù† Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© Ù‡Ùˆ Ù†Ø¸Ø§Ù… Ù…ØªØ³Ù‚ ÙˆØºÙŠØ± Ù…Ø³ØªÙ‚Ù„ØŸ', options: [ { display: 'Øµ = Ø³ + Ù¡<br>Øµ = Ø³ + Ù¢', value: 'A' }, { display: 'Øµ = Ù¢Ø³<br>Øµ = -Ù¢Ø³', value: 'B' }, { display: 'Øµ = Ø³ + Ù£<br>Ù¢Øµ = Ù¢Ø³ + Ù¦', value: 'C' }, { display: 'Øµ = Ù¤Ø³<br>Øµ = Ø³ + Ù¤', value: 'D' } ], correct: 'C', explanation: 'Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØªØ³Ù‚ ÙˆØºÙŠØ± Ø§Ù„Ù…Ø³ØªÙ‚Ù„ Ù„Ù‡ Ø¹Ø¯Ø¯ Ù„Ø§ Ù†Ù‡Ø§Ø¦ÙŠ Ù…Ù† Ø§Ù„Ø­Ù„ÙˆÙ„ (Ù†ÙØ³ Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ…). Ø¥Ø°Ø§ Ù‚Ø³Ù…Ù†Ø§ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© (Ù¢Øµ = Ù¢Ø³ + Ù¦) Ø¹Ù„Ù‰ Ù¢ØŒ Ù†Ø­ØµÙ„ Ø¹Ù„Ù‰ Øµ = Ø³ + Ù£ØŒ ÙˆÙ‡ÙŠ Ù†ÙØ³ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰.' },
            { type: 'mcq', level: 'â­', text: 'Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ…Ø§Ù† Ù…ØªØ·Ø§Ø¨Ù‚ÙŠÙ†ØŒ ÙÙƒÙ… Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ù„ÙˆÙ„ Ù„Ù„Ù†Ø¸Ø§Ù…ØŸ', options: [ { display: 'ØµÙØ±', value: 'A' }, { display: 'ÙˆØ§Ø­Ø¯', value: 'B' }, { display: 'Ø§Ø«Ù†Ø§Ù†', value: 'C' }, { display: 'Ø¹Ø¯Ø¯ Ù„Ø§ Ù†Ù‡Ø§Ø¦ÙŠ', value: 'D' } ], correct: 'D', explanation: 'Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ…Ø§Ù† Ø§Ù„Ù…ØªØ·Ø§Ø¨Ù‚Ø§Ù† ÙŠØ´ØªØ±ÙƒØ§Ù† ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù†Ù‚Ø§Ø·ØŒ Ù„Ø°Ø§ ÙŠÙˆØ¬Ø¯ Ø¹Ø¯Ø¯ Ù„Ø§ Ù†Ù‡Ø§Ø¦ÙŠ Ù…Ù† Ø§Ù„Ø­Ù„ÙˆÙ„.' },
            { type: 'mcq', level: 'â­â­', text: 'Ø­Ù„ Ø§Ù„Ù†Ø¸Ø§Ù…: Ø³ + Øµ = Ù¥ Ùˆ Ø³ - Øµ = Ù¡', options: [ { display: '(Ù¢ØŒ Ù£)', value: 'A' }, { display: '(Ù£ØŒ Ù¢)', value: 'B' }, { display: '(Ù¤ØŒ Ù¡)', value: 'C' }, { display: '(Ù¡ØŒ Ù¤)', value: 'D' } ], correct: 'B', explanation: 'Ø¨ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„ØªÙŠÙ† Ø¥Ù„Ù‰ ØµÙŠØºØ© Ø§Ù„Ù…ÙŠÙ„ ÙˆØ§Ù„Ù…Ù‚Ø·Ø¹: Øµ = -Ø³ + Ù¥ Ùˆ Øµ = Ø³ - Ù¡. Ø¨Ø§Ù„ØªØ¹ÙˆÙŠØ¶ Ø¨Ø§Ù„Ù†Ù‚Ø·Ø© (Ù£ØŒ Ù¢): Ù¢ = -Ù£ + Ù¥ (ØµØ­ÙŠØ­)ØŒ Ù¢ = Ù£ - Ù¡ (ØµØ­ÙŠØ­).' },
            { type: 'mcq', level: 'â­â­â­', text: 'Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ… Ø§Ù„Ø£ÙˆÙ„ ÙŠØ³Ø§ÙˆÙŠ Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ… Ø§Ù„Ø«Ø§Ù†ÙŠØŒ ÙˆÙ„ÙƒÙ† Ø§Ù„Ù…Ù‚Ø·Ø¹ Ø§Ù„ØµØ§Ø¯ÙŠ Ù…Ø®ØªÙ„ÙØŒ ÙÙ…Ø§ Ù†ÙˆØ¹ Ø§Ù„Ø­Ù„ØŸ', options: [ { display: 'Ø­Ù„ ÙˆØ­ÙŠØ¯', value: 'A' }, { display: 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø­Ù„', value: 'B' }, { display: 'Ø¹Ø¯Ø¯ Ù„Ø§ Ù†Ù‡Ø§Ø¦ÙŠ Ù…Ù† Ø§Ù„Ø­Ù„ÙˆÙ„', value: 'C' }, { display: 'Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ­Ø¯ÙŠØ¯', value: 'D' } ], correct: 'B', explanation: 'Ù‡Ø°Ù‡ Ù‡ÙŠ Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ…ÙŠÙ† Ø§Ù„Ù…ØªÙˆØ§Ø²ÙŠÙŠÙ†ØŒ ÙˆÙ‡Ù…Ø§ Ù„Ø§ ÙŠØªÙ‚Ø§Ø·Ø¹Ø§Ù† Ø£Ø¨Ø¯Ø§Ù‹.' },
            { type: 'mcq', level: 'â­â­', text: 'Ù…Ø§ Ù‡ÙŠ Ù†Ù‚Ø·Ø© ØªÙ‚Ø§Ø·Ø¹ Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ…ÙŠÙ† Øµ = Ù¥ Ùˆ Ø³ = Ù¢ ØŸ', options: [ { display: '(Ù¥ØŒ Ù¢)', value: 'A' }, { display: '(Ù ØŒ Ù¥)', value: 'B' }, { display: '(Ù¢ØŒ Ù )', value: 'C' }, { display: '(Ù¢ØŒ Ù¥)', value: 'D' } ], correct: 'D', explanation: 'Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ… Øµ=Ù¥ Ù‡Ùˆ Ø®Ø· Ø£ÙÙ‚ÙŠØŒ ÙˆØ§Ù„Ù…Ø³ØªÙ‚ÙŠÙ… Ø³=Ù¢ Ù‡Ùˆ Ø®Ø· Ø±Ø£Ø³ÙŠ. ÙŠØªÙ‚Ø§Ø·Ø¹Ø§Ù† Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø·Ø© Ø§Ù„ØªÙŠ ÙŠÙƒÙˆÙ† ÙÙŠÙ‡Ø§ Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠ Ø§Ù„Ø³ÙŠÙ†ÙŠ Ù¢ ÙˆØ§Ù„ØµØ§Ø¯ÙŠ Ù¥.' },
            { type: 'mcq', level: 'â­', text: 'Ø£ÙŠ Ù…Ù…Ø§ ÙŠÙ„ÙŠ ÙŠØµÙ Ù†Ø¸Ø§Ù…Ø§Ù‹ Ù…ØªØ³Ù‚Ø§Ù‹ ÙˆÙ…Ø³ØªÙ‚Ù„Ø§Ù‹ØŸ', options: [ { display: 'Ù…Ø³ØªÙ‚ÙŠÙ…Ø§Ù† Ù…ØªÙˆØ§Ø²ÙŠØ§Ù†', value: 'A' }, { display: 'Ù…Ø³ØªÙ‚ÙŠÙ…Ø§Ù† Ù…ØªÙ‚Ø§Ø·Ø¹Ø§Ù†', value: 'B' }, { display: 'Ù…Ø³ØªÙ‚ÙŠÙ…Ø§Ù† Ù…ØªØ·Ø§Ø¨Ù‚Ø§Ù†', value: 'C' }, { display: 'Ù„Ø§ Ø´ÙŠØ¡ Ù…Ù…Ø§ Ø³Ø¨Ù‚', value: 'D' } ], correct: 'B', explanation: 'Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØªØ³Ù‚ ÙˆØ§Ù„Ù…Ø³ØªÙ‚Ù„ Ù„Ù‡ Ø­Ù„ ÙˆØ§Ø­Ø¯ ÙÙ‚Ø·ØŒ ÙˆÙ‡Ùˆ Ù…Ø§ ÙŠØ­Ø¯Ø« Ø¹Ù†Ø¯Ù…Ø§ ÙŠØªÙ‚Ø§Ø·Ø¹ Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ…Ø§Ù†.' },
            { type: 'mcq', level: 'â­â­â­', text: 'Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø§Øª Øµ = Ø£Ø³ + Ù£ Ùˆ Øµ = Ù¢Ø³ + Ø¨ Ù„Ù‡ Ø­Ù„ ÙˆØ­ÙŠØ¯. Ù…Ø§Ø°Ø§ ØªØ³ØªÙ†ØªØ¬ Ø¹Ù† Ù‚ÙŠÙ…Ø© Ø£ØŸ', options: [ { display: 'Ø£ = Ù¢', value: 'A' }, { display: 'Ø£ Ù„Ø§ ÙŠØ³Ø§ÙˆÙŠ Ù¢', value: 'B' }, { 'display': 'Ø£ = Ø¨', value: 'C' }, { display: 'Ø£ Ù„Ø§ ÙŠØ³Ø§ÙˆÙŠ Ø¨', value: 'D' } ], correct: 'B', explanation: 'Ù„ÙƒÙŠ ÙŠÙƒÙˆÙ† Ù‡Ù†Ø§Ùƒ Ø­Ù„ ÙˆØ­ÙŠØ¯ØŒ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù„Ù„Ù…Ø³ØªÙ‚ÙŠÙ…ÙŠÙ† Ù…ÙŠÙ„ Ù…Ø®ØªÙ„Ù. Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ… Ø§Ù„Ø«Ø§Ù†ÙŠ Ù‡Ùˆ Ù¢ØŒ Ù„Ø°Ø§ ÙŠØ¬Ø¨ Ø£Ù† Ù„Ø§ ÙŠØ³Ø§ÙˆÙŠ Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ… Ø§Ù„Ø£ÙˆÙ„ (Ø£) Ø§Ù„Ù‚ÙŠÙ…Ø© Ù¢.' },
            { type: 'mcq', level: 'â­â­', text: 'Ø£ÙŠ Ù†Ù‚Ø·Ø© ØªÙ‚Ø¹ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ… Ù¢Ø³ + Øµ = Ù¨ØŸ', options: [ { display: '(Ù¡ØŒ Ù¦)', value: 'A' }, { display: '(Ù¢ØŒ Ù¥)', value: 'B' }, { display: '(Ù¤ØŒ Ù¡)', value: 'C' }, { display: '(Ù¥ØŒ -Ù¡)', value: 'D' } ], correct: 'A', explanation: 'Ù†Ø¹ÙˆØ¶ Ø¨Ø§Ù„Ù†Ù‚Ø·Ø© (Ù¡ØŒ Ù¦) ÙÙŠ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø©: Ù¢(Ù¡) + Ù¦ = Ù¢ + Ù¦ = Ù¨. Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© ØµØ­ÙŠØ­Ø©.' }
        ];
        return [...questionBank].sort(() => 0.5 - Math.random()).slice(0, 5);
    }
    
    document.addEventListener('DOMContentLoaded', () => {
        const student = getStudentFromStorage();
        const lessonTitle = document.getElementById('lesson-title')?.textContent;
        buildHeader(student, lessonTitle);
        buildFooter();
        const questions = generateQuiz();
        initializeQuiz(LESSON_ID, questions, student);
        document.getElementById('retake-quiz-btn')?.addEventListener('click', () => window.location.reload());
        document.getElementById('closeModalBtn')?.addEventListener('click', closeModal);

        function createInteractiveSection(config) {
            let currentStep = 0; // 0 is the initial state, 1 is the first step
            const totalSteps = config.stepsContent.length;

            if(config.totalStepsCounter) config.totalStepsCounter.textContent = totalSteps;

            const renderStep = (step) => { // step is 0 for initial, 1 to totalSteps for content
                if (step === 0) {
                    if(config.stepCounter) config.stepCounter.textContent = 1;
                    config.explanationDiv.innerHTML = `<div class="explanation-step" style="opacity:1; border-color: transparent;">${config.initialText || ''}</div>`;
                    if(config.summaryContainerId) document.getElementById(config.summaryContainerId).innerHTML = '';
                    if (config.customRender) config.customRender(0);
                    if(config.backBtn) config.backBtn.disabled = true;
                    if(config.nextBtn) config.nextBtn.textContent = 'Ø§Ù„ØªØ§Ù„ÙŠ';
                    return;
                }

                if(config.stepCounter) config.stepCounter.textContent = step;

                const summaryContainer = document.getElementById(config.summaryContainerId);
                if (summaryContainer) {
                    summaryContainer.innerHTML = '';
                    if (config.summaries) {
                        config.summaries.forEach(s => {
                            if (step >= s.step) {
                                const summaryEl = document.createElement('div');
                                summaryEl.className = `summary-box ${s.colorClass}`;
                                summaryEl.innerHTML = s.html;
                                summaryContainer.appendChild(summaryEl);
                            }
                        });
                    }
                }

                config.explanationDiv.innerHTML = `<div class="explanation-step" style="opacity:1; border-color: #1d4ed8;">${config.stepsContent[step - 1] || ''}</div>`;
                
                if (config.customRender) config.customRender(step);
                if(config.backBtn) config.backBtn.disabled = (step === 1);
                if(config.nextBtn) config.nextBtn.textContent = (step === totalSteps) ? 'Ø¥Ø¹Ø§Ø¯Ø©' : 'Ø§Ù„ØªØ§Ù„ÙŠ';
            };

            config.nextBtn?.addEventListener('click', () => {
                currentStep = (currentStep < totalSteps) ? currentStep + 1 : 0;
                renderStep(currentStep);
            });
            config.backBtn?.addEventListener('click', () => {
                if (currentStep > 0) {
                    currentStep--;
                    renderStep(currentStep);
                }
            });

            renderStep(0); // Initial call
        }

        const unit = 20;

        function setupGraphElements(step, config) {
            const { p1, p2, line, riseLine, runLine, riseText, runText, p1_coords, p2_coords, riseVal, runVal, scaleX = 1, scaleY = 1, origin = {x: 50, y: 50} } = config;
            const getPos = (coords) => ({ x: (coords.x / scaleX) * unit, y: (coords.y / scaleY) * unit });
            const p1_pos = getPos(p1_coords);
            
            [p1, p2, line, riseLine, runLine, riseText, runText].forEach(el => { if(el) el.style.opacity = '0' });
            if(line) line.style.width = '0px';

            if (p1 && step >= config.p1_step) {
                p1.style.opacity = '1'; p1.style.top = `calc(${origin.y}% - ${p1_pos.y}px)`; p1.style.left = `calc(${origin.x}% + ${p1_pos.x}px)`;
            }
            if (p2 && step >= config.p2_step) {
                const p2_pos = getPos(p2_coords);
                if(riseLine) {
                    riseLine.style.opacity = '1';
                    riseLine.style.top = `calc(${origin.y}% - ${Math.max(p1_pos.y, p2_pos.y)}px)`;
                    riseLine.style.left = `calc(${origin.x}% + ${p1_pos.x}px)`;
                    riseLine.style.height = `${Math.abs(p1_pos.y - p2_pos.y)}px`;
                    riseLine.style.borderLeftWidth = '2px';
                }
                if(riseText) {
                    riseText.style.opacity = '1';
                    riseText.textContent = riseVal > 0 ? `+${riseVal}`: `${riseVal}`;
                    riseText.style.top = `calc(${origin.y}% - ${p1_pos.y + (p2_pos.y - p1_pos.y)/2}px)`;
                    riseText.style.left = `calc(${origin.x}% + ${p1_pos.x - 15}px)`;
                }
                if(runLine) {
                    runLine.style.opacity = '1';
                    runLine.style.top = `calc(${origin.y}% - ${p2_pos.y}px)`;
                    runLine.style.left = `calc(${origin.x}% + ${Math.min(p1_pos.x, p2_pos.x)}px)`;
                    runLine.style.width = `${Math.abs(p1_pos.x - p2_pos.x)}px`;
                    runLine.style.borderTopWidth = '2px';
                }
                if(runText) {
                    runText.style.opacity = '1';
                    runText.textContent = runVal > 0 ? `+${runVal}`: `${runVal}`;
                    runText.style.top = `calc(${origin.y}% - ${p2_pos.y - 15}px)`;
                    runText.style.left = `calc(${origin.x}% + ${p1_pos.x + (p2_pos.x - p1_pos.x)/2}px)`;
                }
                p2.style.opacity = '1';
                p2.style.top = `calc(${origin.y}% - ${p2_pos.y}px)`;
                p2.style.left = `calc(${origin.x}% + ${p2_pos.x}px)`;
            }
            if (line && step >= config.line_step) {
                const extended_p1 = getPos({x: p1_coords.x - runVal * 10, y: p1_coords.y - riseVal * 10});
                const extended_p2 = getPos({x: p1_coords.x + runVal * 10, y: p1_coords.y + riseVal * 10});
                const dx = extended_p2.x - extended_p1.x;
                const dy = extended_p2.y - extended_p1.y;
                const length = Math.sqrt(dx*dx + dy*dy);
                const angle = Math.atan2(dy, dx) * (180 / Math.PI);
                line.style.opacity = '1';
                line.style.width = `${length}px`;
                line.style.top = `calc(${origin.y}% - ${extended_p1.y}px)`;
                line.style.left = `calc(${origin.x}% + ${extended_p1.x}px)`;
                line.style.transform = `rotate(${-angle}deg)`;
            }
        }
        
        // Interactive Classification Setup
        function setupClassification(config) {
            const radioGroup = document.getElementById(config.groupId);
            radioGroup.addEventListener('change', (e) => {
                const userAnswer = e.target.value;
                const feedbackEl = document.getElementById(config.feedbackId);
                
                if (userAnswer === config.correctAnswer) {
                    feedbackEl.innerHTML = `âœ” ${config.correctMessage}`;
                    feedbackEl.className = 'feedback-box feedback-correct';
                } else {
                    feedbackEl.innerHTML = `âŒ ${config.incorrectMessage}`;
                    feedbackEl.className = 'feedback-box feedback-incorrect';
                }
                feedbackEl.classList.remove('hidden');
            });
        }

        setupClassification({
            groupId: 'q-classify-1',
            feedbackId: 'feedback-classify-1',
            correctAnswer: 'inconsistent',
            correctMessage: 'Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ (Ù¢) ÙŠØ³Ø§ÙˆÙŠ Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© (Ù¢)ØŒ ÙˆÙ„ÙƒÙ† Ø§Ù„Ù…Ù‚Ø·Ø¹ Ø§Ù„ØµØ§Ø¯ÙŠ Ù…Ø®ØªÙ„Ù (Ù¡ â‰  -Ù£). Ù„Ø°Ù„ÙƒØŒ Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ…Ø§Ù† Ù…ØªÙˆØ§Ø²ÙŠØ§Ù† ÙˆÙ„Ø§ ÙŠÙˆØ¬Ø¯ Ø­Ù„. Ø§Ù„Ù†Ø¸Ø§Ù… <b>ØºÙŠØ± Ù…ØªØ³Ù‚</b>.',
            incorrectMessage: 'Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰. Ù‚Ø§Ø±Ù† Ø§Ù„Ù…ÙŠÙ„ ÙˆØ§Ù„Ù…Ù‚Ø·Ø¹ Ø§Ù„ØµØ§Ø¯ÙŠ Ù„ÙƒÙ„ Ù…Ø¹Ø§Ø¯Ù„Ø©.'
        });

        setupClassification({
            groupId: 'q-classify-2',
            feedbackId: 'feedback-classify-2',
            correctAnswer: 'dependent',
            correctMessage: 'Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! Ù„Ù„Ù…Ù‚Ø§Ø±Ù†Ø©ØŒ ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† ÙƒÙ„ØªØ§ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„ØªÙŠÙ† Ø¨ØµÙŠØºØ© Ø§Ù„Ù…ÙŠÙ„ ÙˆØ§Ù„Ù…Ù‚Ø·Ø¹ (Øµ = Ù… Ø³ + Ø¨). Ù„Ø°Ù„ÙƒØŒ Ù†Ø¨Ø³Ø· Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© Ø¨Ù‚Ø³Ù…Ø© ÙƒÙ„ Ø§Ù„Ø­Ø¯ÙˆØ¯ Ø¹Ù„Ù‰ Ù¢ Ù„ØªØµØ¨Ø­ `Øµ` Ù„ÙˆØ­Ø¯Ù‡Ø§. Ù‡Ø°Ø§ ÙŠØ¹Ø·ÙŠÙ†Ø§ `Øµ = -Ù£Ø³ + Ù¢`. Ø§Ù„Ø¢Ù† Ù†Ø±Ù‰ Ø£Ù† Ø§Ù„Ù…ÙŠÙ„ ÙˆØ§Ù„Ù…Ù‚Ø·Ø¹ Ø§Ù„ØµØ§Ø¯ÙŠ Ù…ØªØ·Ø§Ø¨Ù‚Ø§Ù†. Ø§Ù„Ù†Ø¸Ø§Ù… <b>Ù…ØªØ³Ù‚ ÙˆØºÙŠØ± Ù…Ø³ØªÙ‚Ù„</b>.',
            incorrectMessage: 'Ø­Ø§ÙˆÙ„ ØªØ¨Ø³ÙŠØ· Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© Ø£ÙˆÙ„Ø§Ù‹ Ù„Ø¬Ø¹Ù„Ù‡Ø§ Ø¨ØµÙŠØºØ© (Øµ = ...)ØŒ Ø«Ù… Ù‚Ø§Ø±Ù† Ø§Ù„Ù…ÙŠÙ„ ÙˆØ§Ù„Ù…Ù‚Ø·Ø¹.'
        });

        setupClassification({
            groupId: 'q-classify-3',
            feedbackId: 'feedback-classify-3',
            correctAnswer: 'independent',
            correctMessage: 'Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©! Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ (Ù¤) ÙŠØ®ØªÙ„Ù Ø¹Ù† Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© (-Ù¡). Ù„Ø°Ù„ÙƒØŒ Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ…Ø§Ù† Ø³ÙŠØªÙ‚Ø§Ø·Ø¹Ø§Ù† ÙÙŠ Ù†Ù‚Ø·Ø© ÙˆØ§Ø­Ø¯Ø© ÙˆÙŠÙˆØ¬Ø¯ Ø­Ù„ ÙˆØ­ÙŠØ¯. Ø§Ù„Ù†Ø¸Ø§Ù… <b>Ù…ØªØ³Ù‚ ÙˆÙ…Ø³ØªÙ‚Ù„</b>.',
            incorrectMessage: 'Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰. Ù‡Ù„ Ø§Ù„Ù…ÙŠÙ„ Ù…ØªØ³Ø§ÙˆÙ Ø£Ù… Ù…Ø®ØªÙ„ÙØŸ'
        });


        // Example 1: One Solution
        createInteractiveSection({
            nextBtn: document.getElementById('graph-next-1'), backBtn: document.getElementById('graph-back-1'),
            stepCounter: document.getElementById('graph-counter-1'), 
            totalStepsCounter: document.getElementById('graph-total-1'),
            explanationDiv: document.getElementById('graph-exp-1'),
            summaryContainerId: 'summary-container-1',
            initialText: "Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ 'Ø§Ù„ØªØ§Ù„ÙŠ' Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø«Ø§Ù„.",
            stepsContent: [
                "<strong>1. Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© <span class='text-blue-600'>Øµ = -Ø³ + Ù£</span>:</strong><br>Ù†Ø­Ø¯Ø¯ Ø§Ù„Ù…Ù‚Ø·Ø¹ Ø§Ù„ØµØ§Ø¯ÙŠ (Ø¨ = Ù£) Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø·Ø© (Ù ØŒ Ù£).",
                "<strong>2. Ù†Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…ÙŠÙ„ <span class='text-blue-600'>Ù… = <span class='math-eq'><span class='fraction'><span>-Ù¡</span><span>Ù¡</span></span></span></span>:</strong><br>Ù†ØªØ­Ø±Ùƒ Ù„Ù„Ø£Ø³ÙÙ„ Ù¡ ÙˆÙ„Ù„ÙŠÙ…ÙŠÙ† Ù¡ Ù„Ù†Ø¬Ø¯ Ø§Ù„Ù†Ù‚Ø·Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© (Ù¡ØŒ Ù¢).",
                "<strong>3. Ù†Ø±Ø³Ù… Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ… Ø§Ù„Ø£ÙˆÙ„.</strong>",
                "", // Empty step for summary to appear
                "<strong>4. Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© <span class='text-red-600'>Øµ = Ù¢Ø³</span>:</strong><br>Ù†Ø­Ø¯Ø¯ Ø§Ù„Ù…Ù‚Ø·Ø¹ Ø§Ù„ØµØ§Ø¯ÙŠ (Ø¨ = Ù ) Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø·Ø© (Ù ØŒ Ù ).",
                "<strong>5. Ù†Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…ÙŠÙ„ <span class='text-red-600'>Ù… = <span class='math-eq'><span class='fraction'><span>+Ù¢</span><span>Ù¡</span></span></span></span>:</strong><br>Ù†ØªØ­Ø±Ùƒ Ù„Ù„Ø£Ø¹Ù„Ù‰ Ù¢ ÙˆÙ„Ù„ÙŠÙ…ÙŠÙ† Ù¡ Ù„Ù†Ø¬Ø¯ Ø§Ù„Ù†Ù‚Ø·Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© (Ù¡ØŒ Ù¢).",
                "<strong>6. Ù†Ø±Ø³Ù… Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ… Ø§Ù„Ø«Ø§Ù†ÙŠ.</strong>",
                "<strong>7. ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø­Ù„:</strong><br>Ø¨Ù…Ø§ Ø£Ù† Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ…Ø§Ù† Ù…ØªÙ‚Ø§Ø·Ø¹Ø§Ù†ØŒ ÙØ¥Ù† Ø­Ù„ Ø§Ù„Ù†Ø¸Ø§Ù… Ù‡Ùˆ Ù†Ù‚Ø·Ø© Ø§Ù„ØªÙ‚Ø§Ø·Ø¹ <span class='math-eq bg-amber-100'>(Ù¡ØŒ Ù¢)</span>."
            ],
            summaries: [
                { step: 4, colorClass: 'summary-box-blue', html: "<b>Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ… Ø§Ù„Ø£Ø²Ø±Ù‚:</b> Øµ = -Ø³ + <span class='highlight-num'>Ù£</span><br><b>Ø§Ù„Ù…ÙŠÙ„:</b> <span class='highlight-num'>-Ù¡</span> | <b>Ø§Ù„Ù…Ù‚Ø·Ø¹ Øµ:</b> <span class='highlight-num'>Ù£</span>" },
                { step: 8, colorClass: 'summary-box-red', html: "<b>Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ… Ø§Ù„Ø£Ø­Ù…Ø±:</b> Øµ = <span class='highlight-num'>Ù¢</span>Ø³ + <span class='highlight-num'>Ù </span><br><b>Ø§Ù„Ù…ÙŠÙ„:</b> <span class='highlight-num'>Ù¢</span> | <b>Ø§Ù„Ù…Ù‚Ø·Ø¹ Øµ:</b> <span class='highlight-num'>Ù </span>" }
            ],
            customRender: (step) => {
                const solPoint = document.getElementById('solution-point-1');
                solPoint.style.opacity = '0';
                setupGraphElements(step, { p1: document.getElementById('graph-point-1a1'), p2: document.getElementById('graph-point-1a2'), line: document.getElementById('graph-line-1a'), riseLine: document.getElementById('graph-rise-1a'), runLine: document.getElementById('graph-run-1a'), riseText: document.getElementById('graph-rise-text-1a'), runText: document.getElementById('graph-run-text-1a'), p1_coords: {x: 0, y: 3}, p2_coords: {x: 1, y: 2}, riseVal: -1, runVal: 1, p1_step: 1, p2_step: 2, line_step: 3 });
                setupGraphElements(step, { p1: document.getElementById('graph-point-1b1'), p2: document.getElementById('graph-point-1b2'), line: document.getElementById('graph-line-1b'), riseLine: document.getElementById('graph-rise-1b'), runLine: document.getElementById('graph-run-1b'), riseText: document.getElementById('graph-rise-text-1b'), runText: document.getElementById('graph-run-text-1b'), p1_coords: {x: 0, y: 0}, p2_coords: {x: 1, y: 2}, riseVal: 2, runVal: 1, p1_step: 5, p2_step: 6, line_step: 7 });
                if (step >= 8) { solPoint.style.opacity = '1'; solPoint.style.top = `calc(50% - ${2 * unit}px)`; solPoint.style.left = `calc(50% + ${1 * unit}px)`; }
            }
        });
        
        // Life Example
        createInteractiveSection({ 
            nextBtn: document.getElementById('life-next-1'), backBtn: document.getElementById('life-back-1'), 
            stepCounter: document.getElementById('life-counter-1'), 
            totalStepsCounter: document.getElementById('life-total-1'),
            explanationDiv: document.getElementById('life-exp-1'), 
            summaryContainerId: 'summary-container-life',
            initialText: "Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ 'Ø§Ù„ØªØ§Ù„ÙŠ' Ù„Ø¨Ø¯Ø¡ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø«Ø§Ù„.",
            stepsContent: [ 
                "<strong>1. Ù…Ø¹Ø§Ø¯Ù„Ø© ØµØ§Ù„Ø­:</strong><br>Ø¨Ø¯Ø£ Ø¨Ù€ Ù¦Ù¥ ØµÙØ­Ø© (Ø§Ù„Ù…Ù‚Ø·Ø¹ Ø§Ù„ØµØ§Ø¯ÙŠ) ÙˆÙŠÙ‚Ø±Ø£ Ù¢Ù  ØµÙØ­Ø© ÙŠÙˆÙ…ÙŠØ§Ù‹ (Ø§Ù„Ù…ÙŠÙ„).<br>Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ù‡ÙŠ <span class='math-eq text-blue-600'>Øµ = Ù¢Ù Ø³ + Ù¦Ù¥</span>",
                "<strong>2. Ù†Ù…Ø«Ù„ Ù…Ø¹Ø§Ø¯Ù„Ø© ØµØ§Ù„Ø­:</strong><br>Ù†Ø­Ø¯Ø¯ Ø§Ù„Ù…Ù‚Ø·Ø¹ Ø§Ù„ØµØ§Ø¯ÙŠ (Ø¨ = Ù¦Ù¥) Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø·Ø© (Ù ØŒ Ù¦Ù¥).",
                "<strong>3. Ù†Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…ÙŠÙ„ <span class='text-blue-600'>Ù… = <span class='math-eq'><span class='fraction'><span>+Ù¢Ù </span><span>Ù¡</span></span></span></span>:</strong><br>Ù†ØªØ­Ø±Ùƒ Ù„Ù„Ø£Ø¹Ù„Ù‰ Ù¢Ù  (Ù…Ù† Ù¦Ù¥ Ø¥Ù„Ù‰ Ù¨Ù¥) ÙˆÙ„Ù„ÙŠÙ…ÙŠÙ† Ù¡ Ù„Ù†Ø¬Ø¯ Ø§Ù„Ù†Ù‚Ø·Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© (Ù¡ØŒ Ù¨Ù¥).",
                "<strong>4. Ù†Ø±Ø³Ù… Ù…Ø³ØªÙ‚ÙŠÙ… ØµØ§Ù„Ø­.</strong>",
                "", // Empty step for summary to appear
                "<strong>5. Ù…Ø¹Ø§Ø¯Ù„Ø© Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡:</strong><br>Ø¨Ø¯Ø£ Ø¨Ù€ Ù¨Ù¥ ØµÙØ­Ø© (Ø§Ù„Ù…Ù‚Ø·Ø¹ Ø§Ù„ØµØ§Ø¯ÙŠ) ÙˆÙŠÙ‚Ø±Ø£ Ù¡Ù  ØµÙØ­Ø§Øª ÙŠÙˆÙ…ÙŠØ§Ù‹ (Ø§Ù„Ù…ÙŠÙ„).<br>Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ù‡ÙŠ <span class='math-eq text-green-600'>Øµ = Ù¡Ù Ø³ + Ù¨Ù¥</span>",
                "<strong>6. Ù†Ù…Ø«Ù„ Ù…Ø¹Ø§Ø¯Ù„Ø© Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡:</strong><br>Ù†Ø­Ø¯Ø¯ Ø§Ù„Ù…Ù‚Ø·Ø¹ Ø§Ù„ØµØ§Ø¯ÙŠ (Ø¨ = Ù¨Ù¥) Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø·Ø© (Ù ØŒ Ù¨Ù¥).",
                "<strong>7. Ù†Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…ÙŠÙ„ <span class='text-green-600'>Ù… = <span class='math-eq'><span class='fraction'><span>+Ù¡Ù </span><span>Ù¡</span></span></span></span>:</strong><br>Ù†ØªØ­Ø±Ùƒ Ù„Ù„Ø£Ø¹Ù„Ù‰ Ù¡Ù  (Ù…Ù† Ù¨Ù¥ Ø¥Ù„Ù‰ Ù©Ù¥) ÙˆÙ„Ù„ÙŠÙ…ÙŠÙ† Ù¡ Ù„Ù†Ø¬Ø¯ Ø§Ù„Ù†Ù‚Ø·Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© (Ù¡ØŒ Ù©Ù¥).",
                "<strong>8. Ù†Ø±Ø³Ù… Ù…Ø³ØªÙ‚ÙŠÙ… Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡.</strong>",
                "<strong>9. Ù†Ø­Ø¯Ø¯ Ù†Ù‚Ø·Ø© Ø§Ù„ØªÙ‚Ø§Ø·Ø¹.</strong><br>ÙŠØªÙ‚Ø§Ø·Ø¹ Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ…Ø§Ù† Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø·Ø© (Ù¢ØŒ Ù¡Ù Ù¥).",
                "<strong>10. ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø­Ù„:</strong><br>Ø§Ù„Ø­Ù„ <span class='math-eq bg-amber-100'>(Ù¢ØŒ Ù¡Ù Ù¥)</span> ÙŠØ¹Ù†ÙŠ Ø£Ù†Ù‡ Ø¨Ø¹Ø¯ ÙŠÙˆÙ…ÙŠÙ† (Ø³=Ù¢) Ø³ÙŠÙƒÙˆÙ† ÙƒÙ„Ø§Ù‡Ù…Ø§ Ù‚Ø¯ Ù‚Ø±Ø£ Ù¡Ù Ù¥ ØµÙØ­Ø§Øª."
            ],
            summaries: [
                { step: 5, colorClass: 'summary-box-blue', html: "<b>ØµØ§Ù„Ø­:</b> Øµ = Ù¢Ù Ø³ + Ù¦Ù¥<br><b>Ø§Ù„Ù…ÙŠÙ„:</b> <span class='highlight-num'>Ù¢Ù </span> | <b>Ø§Ù„Ù…Ù‚Ø·Ø¹ Øµ:</b> <span class='highlight-num'>Ù¦Ù¥</span>" },
                { step: 9, colorClass: 'summary-box-green', html: "<b>Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡:</b> Øµ = Ù¡Ù Ø³ + Ù¨Ù¥<br><b>Ø§Ù„Ù…ÙŠÙ„:</b> <span class='highlight-num'>Ù¡Ù </span> | <b>Ø§Ù„Ù…Ù‚Ø·Ø¹ Øµ:</b> <span class='highlight-num'>Ù¨Ù¥</span>" }
            ],
            customRender: (step) => { // step is 0 for initial, 1-10 for content
                const container = document.getElementById('life-graph-container');
                const xAxis = document.getElementById('life-x-axis');
                const yAxis = document.getElementById('life-y-axis');
                
                const origin = { x: 25, y: 85 };
                xAxis.style.top = `${origin.y}%`;
                yAxis.style.left = `${origin.x}%`;

                if (!container.dataset.labelsDrawn) {
                    const drawAxisLabels = () => {
                        container.querySelectorAll('.axis-label').forEach(el => el.remove());
                        const graphSize = 360;
                        for(let i = -5; i <= 12; i++) {
                            const val = i * 10;
                            const label = document.createElement('span');
                            label.className = 'axis-label';
                            label.textContent = val;
                            label.style.top = `${graphSize * (origin.y/100) - (val / 10) * unit - 8}px`; 
                            label.style.left = `${graphSize * (origin.x/100) + 5}px`;
                            container.appendChild(label);
                        }
                        for(let i = -4; i <= 14; i++) {
                            if (i === 0) continue;
                            const label = document.createElement('span');
                            label.className = 'axis-label';
                            label.textContent = i;
                            label.style.top = `${graphSize * (origin.y/100) + 5}px`; 
                            label.style.left = `${graphSize * (origin.x/100) + (i/1) * unit - 5}px`;
                            container.appendChild(label);
                        }
                    }
                    drawAxisLabels();
                    container.dataset.labelsDrawn = 'true';
                }

                const solPoint = document.getElementById('solution-point-life');
                solPoint.style.opacity = '0';
                const lifeConfig = { scaleX: 1, scaleY: 10, origin: origin };
                
                // Saleh's Line
                setupGraphElements(step, { ...lifeConfig, p1: document.getElementById('graph-point-life-a1'), p2: document.getElementById('graph-point-life-a2'), line: document.getElementById('graph-line-life-a'), riseLine: document.getElementById('graph-rise-life-a'), runLine: document.getElementById('graph-run-life-a'), riseText: document.getElementById('graph-rise-text-life-a'), runText: document.getElementById('graph-run-text-life-a'), p1_coords: {x: 0, y: 65}, p2_coords: {x: 1, y: 85}, riseVal: 20, runVal: 1, p1_step: 2, p2_step: 3, line_step: 4 });
                
                // Abdullah's Line
                setupGraphElements(step, { ...lifeConfig, p1: document.getElementById('graph-point-life-b1'), p2: document.getElementById('graph-point-life-b2'), line: document.getElementById('graph-line-life-b'), riseLine: document.getElementById('graph-rise-life-b'), runLine: document.getElementById('graph-run-life-b'), riseText: document.getElementById('graph-rise-text-life-b'), runText: document.getElementById('graph-run-text-life-b'), p1_coords: {x: 0, y: 85}, p2_coords: {x: 1, y: 95}, riseVal: 10, runVal: 1, p1_step: 6, p2_step: 7, line_step: 8 });
                
                if (step >= 9) {
                    solPoint.style.opacity = '1';
                    solPoint.style.top = `calc(${origin.y}% - ${(105 / 10) * unit}px)`;
                    solPoint.style.left = `calc(${origin.x}% + ${(2 / 1) * unit}px)`;
                }
            }
        });
    });
    </script>
</body>
</html>
