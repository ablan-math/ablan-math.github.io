<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงูุฏุฑุณ ูก-ูค: ุญู ุงููุนุงุฏูุงุช ุงูุชู ุชุญุชูู ูุชุบูุฑุงู ูู ุทุฑูููุง | ููุตุฉ ุงูุฑูุงุถูุงุช ุงูุชูุงุนููุฉ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; }
        .hidden { display: none; }
        .step-box { border-right: 4px solid #1d4ed8; }
        .vocab-term { background-color: #ffefc5; padding: 2px 6px; border-radius: 4px; font-weight: bold; }
        .option-label { display: block; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; cursor: pointer; transition: all 0.2s ease-in-out; }
        .option-label:hover { border-color: #3b82f6; background-color: #eff6ff; }
        input[type="radio"]:checked + .option-label { border-color: #2563eb; background-color: #dbeafe; box-shadow: 0 0 0 2px #bfdbfe; }
        input[type="radio"] { display: none; }
        .feedback-correct { color: #16a34a; }
        .feedback-incorrect { color: #dc2626; }
        .highlight-change { color: #ef4444; font-weight: bold; }
        
        /* === ุชุนุฏูู ุงูุฑููุฒ ุงูุฑูุงุถูุฉ === */
        .math-eq {
            font-family: "Courier New", monospace; /* ุฎุท ุนุฑูุถ ููุชุจุงุนุฏ */
            font-size: 1.1rem; /* ุชูุจูุฑ ุญุฌู ุงูุฎุท */
            font-weight: bold;
            color: #4338ca;
            background-color: #f3f4f6; /* ุฎูููุฉ ุฑูุงุฏูุฉ ูุงุชุญุฉ */
            border: 1px solid #d1d5db; /* ุฅุทุงุฑ ุฎููู */
            padding: 2px 8px; /* ููุงูุด ุฏุงุฎููุฉ */
            border-radius: 6px; /* ุฒูุงูุง ุฏุงุฆุฑูุฉ */
            display: inline-block;
            vertical-align: middle; /* ูุญุงุฐุงุฉ ุฃูุถู ูุน ุงููุต */
            white-space: nowrap;
        }
        
        /* ูุฌุนู ุงููุนุงุฏูุงุช ุฏุงุฎู ุญุงููุฉ ุงูุฎุทูุงุช ุชุธูุฑ ุจุดูู ุนููุฏู */
        .math-steps .math-eq {
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        .fraction { display: inline-flex; flex-direction: column; text-align: center; vertical-align: middle; margin: 0 0.2em; }
        .fraction > span { display: block; padding: 0 0.4em; }
        .fraction > .frac-bar { border-top: 2px solid #4338ca; }
        .step-interactive { display: none; opacity: 0; transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out; transform: translateY(10px); }
        .step-interactive.active { display: block; opacity: 1; transform: translateY(0); }
    </style>
</head>
<body class="bg-gray-100">
    <div id="app-container" class="grid grid-template-rows: auto 1fr auto; min-height: 100vh;">
        <header id="main-header" class="bg-white shadow-md sticky top-0 z-50"></header>
        <main class="container mx-auto max-w-5xl my-8">
            <div class="p-6 bg-white rounded-xl shadow-lg">
                <header class="flex justify-between items-center mb-8 border-b pb-4 border-gray-200">
                    <h1 id="lesson-title" class="text-3xl font-bold text-blue-800">ุงูุฏุฑุณ ูก-ูค: ุญู ุงููุนุงุฏูุงุช ุงูุชู ุชุญุชูู ูุชุบูุฑุงู ูู ุทุฑูููุง</h1>
                    <a href="../index.html" target="_top" class="text-sm text-blue-600 hover:underline">&larr; ุงูุนูุฏุฉ ุฅูู ุงูููุฑุณ</a>
                </header>
                <section class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">๐ก ุฃููุงู: ุงูููููู ุงูุฃุณุงุณู</h2>
                    <div class="p-4 bg-blue-50 rounded-lg space-y-3">
                        <p>ูุญู ูุนุงุฏูุฉ ุชุญุชูู ูุชุบูุฑุงู ูู ุทุฑูููุงุ ูุฏููุง ูู <strong class="text-red-600">ุฌูุน ุญุฏูุฏ ุงููุชุบูุฑุงุช ูู ุทุฑูุ ูุงูุฃุนุฏุงุฏ ุงูุซุงุจุชุฉ ูู ุงูุทุฑู ุงูุขุฎุฑ</strong>ุ ุซู ูุญู ุงููุนุงุฏูุฉ ููุง ุชุนูููุง ูู ุงูุฏุฑูุณ ุงูุณุงุจูุฉ.</p>
                    </div>
                </section>
                
                <!-- Part 2: Solving Basic Equations -->
                <section class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">๐ฏ ุซุงููุงู: ุญู ูุนุงุฏูุงุช ุจุณูุทุฉ</h2>
                    <div class="p-6 bg-gray-50 rounded-lg space-y-8">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 md:items-start">
                            <!-- Example 1 -->
                            <div id="interactive-container-1" class="p-4 bg-white rounded-lg shadow">
                                <p class="text-lg font-semibold mb-4 text-center">ูุซุงู ูก: ุญู ุงููุนุงุฏูุฉ <span class="math-eq">ูงุณ + ูกูข = ูฃุณ - ูค</span></p>
                                <div class="steps-container space-y-4 min-h-[250px]">
                                    <div class="interactive-placeholder text-center text-gray-500 p-4 pt-16"><p>ุงุถุบุท "ุงูุชุงูู" ูุจุฏุก ุฎุทูุงุช ุงูุญู</p></div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 1: ุฌูุน ุงููุชุบูุฑุงุช</h4><p>ูุทุฑุญ <span class="math-eq">ูฃุณ</span> ูู ููุง ุงูุทุฑููู.</p><div class="math-steps text-center mt-2 space-y-1"><div class="math-eq">ูงุณ <span class="highlight-change">- ูฃุณ</span> + ูกูข = ูฃุณ <span class="highlight-change">- ูฃุณ</span> - ูค</div><div class="math-eq">ูคุณ + ูกูข = -ูค</div></div></div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 2: ุฌูุน ุงูุซูุงุจุช</h4><p>ูุทุฑุญ <span class="math-eq">ูกูข</span> ูู ููุง ุงูุทุฑููู.</p><div class="math-steps text-center mt-2 space-y-1"><div class="math-eq">ูคุณ + ูกูข <span class="highlight-change">- ูกูข</span> = -ูค <span class="highlight-change">- ูกูข</span></div><div class="math-eq">ูคุณ = -ูกูฆ</div></div></div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 3: ุนุฒู ุงููุชุบูุฑ</h4><p>ููุณู ููุง ุงูุทุฑููู ุนูู <span class="math-eq">ูค</span>.</p><div class="math-steps text-center mt-2 flex justify-center items-center"><span class="fraction"><span>ูคุณ</span><span class="frac-bar"></span><span>ูค</span></span> = <span class="fraction"><span>-ูกูฆ</span><span class="frac-bar"></span><span>ูค</span></span></div></div>
                                    <div class="step-interactive p-4 bg-green-200 rounded-lg step-box border-green-600"><h4 class="font-bold">ุงูุฎุทูุฉ ุงูุฃุฎูุฑุฉ: ุงูุญู ุงูููุงุฆู</h4><p>ูุจุณุท ุงููุนุงุฏูุฉ ููุฌุฏ ุงูุญู: <span class="math-eq">ุณ = -ูค</span>.</p></div>
                                </div>
                                <div class="flex justify-between mt-6">
                                    <button data-example="1" class="prev-btn bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed">ุฑุฌูุน</button>
                                    <div>
                                        <button data-example="1" class="next-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">ุงูุชุงูู</button>
                                        <button data-example="1" class="reset-btn hidden bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700">ุฅุนุงุฏุฉ</button>
                                    </div>
                                </div>
                            </div>
                             <!-- Example 2 -->
                            <div id="interactive-container-2" class="p-4 bg-white rounded-lg shadow">
                                <p class="text-lg font-semibold mb-4 text-center">ูุซุงู ูข: ุญู ุงููุนุงุฏูุฉ <span class="math-eq">ูขู + ูจ = ูฅู + ูข</span></p>
                                <div class="steps-container space-y-4 min-h-[250px]">
                                     <div class="interactive-placeholder text-center text-gray-500 p-4 pt-16"><p>ุงุถุบุท "ุงูุชุงูู" ูุจุฏุก ุฎุทูุงุช ุงูุญู</p></div>
                                     <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 1: ุฌูุน ุงููุชุบูุฑุงุช</h4><p>ูุทุฑุญ <span class="math-eq">ูขู</span> ูู ููุง ุงูุทุฑููู.</p><div class="math-steps text-center mt-2 space-y-1"><div class="math-eq">ูขู <span class="highlight-change">- ูขู</span> + ูจ = ูฅู <span class="highlight-change">- ูขู</span> + ูข</div><div class="math-eq">ูจ = ูฃู + ูข</div></div></div>
                                     <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 2: ุฌูุน ุงูุซูุงุจุช</h4><p>ูุทุฑุญ <span class="math-eq">ูข</span> ูู ููุง ุงูุทุฑููู.</p><div class="math-steps text-center mt-2 space-y-1"><div class="math-eq">ูจ <span class="highlight-change">- ูข</span> = ูฃู + ูข <span class="highlight-change">- ูข</span></div><div class="math-eq">ูฆ = ูฃู</div></div></div>
                                     <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 3: ุนุฒู ุงููุชุบูุฑ</h4><p>ููุณู ููุง ุงูุทุฑููู ุนูู <span class="math-eq">ูฃ</span>.</p><div class="math-steps text-center mt-2 flex justify-center items-center"><span class="fraction"><span>ูฆ</span><span class="frac-bar"></span><span>ูฃ</span></span> = <span class="fraction"><span>ูฃู</span><span class="frac-bar"></span><span>ูฃ</span></span></div></div>
                                     <div class="step-interactive p-4 bg-green-200 rounded-lg step-box border-green-600"><h4 class="font-bold">ุงูุฎุทูุฉ ุงูุฃุฎูุฑุฉ: ุงูุญู ุงูููุงุฆู</h4><p>ูุจุณุท ุงููุนุงุฏูุฉ ููุฌุฏ ุงูุญู: <span class="math-eq">ูข = ู</span>.</p></div>
                                </div>
                                <div class="flex justify-between mt-6">
                                    <button data-example="2" class="prev-btn bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed">ุฑุฌูุน</button>
                                    <div>
                                        <button data-example="2" class="next-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">ุงูุชุงูู</button>
                                        <button data-example="2" class="reset-btn hidden bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700">ุฅุนุงุฏุฉ</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Part 3: Special Cases -->
                <section class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">๐ฏ ุซุงูุซุงู: ูุนุงุฏูุงุช ุฎุงุตุฉ (ุงููุชุทุงุจูุฉ ูุงููุณุชุญููุฉ)</h2>
                     <div class="p-6 bg-gray-50 rounded-lg space-y-8">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 md:items-start">
                             <!-- Example 3 -->
                            <div id="interactive-container-3" class="p-4 bg-white rounded-lg shadow">
                                <p class="text-lg font-semibold mb-4 text-center">ูุซุงู ูฃ (ูุชุทุงุจูุฉ): ุญู <span class="math-eq">ูฆ(ู + ูค) = ูข(ูกูข + ูฃู)</span></p>
                                <div class="steps-container space-y-4 min-h-[200px]">
                                     <div class="interactive-placeholder text-center text-gray-500 p-4 pt-16"><p>ุงุถุบุท "ุงูุชุงูู" ูุจุฏุก ุฎุทูุงุช ุงูุญู</p></div>
                                     <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 1: ูู ุงูุฃููุงุณ</h4><p>ููุฒุน ุงูุถุฑุจ ุนูู ุงูุฌูุน ูู ููุง ุงูุทุฑููู.</p><p class="math-eq text-center mt-2">ูฆู + ูขูค = ูขูค + ูฆู</p></div>
                                     <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 2: ุชุญููู ุงููุนุงุฏูุฉ</h4><p>ูุงุญุธ ุฃู ุงูุทุฑู ุงูุฃููู ูููุนุงุฏูุฉ ูุทุงุจู ุงูุทุฑู ุงูุฃูุณุฑ ุชูุงูุงู.</p></div>
                                     <div class="step-interactive p-4 bg-green-200 rounded-lg step-box border-green-600"><h4 class="font-bold">ุงูุฎุทูุฉ ุงูุฃุฎูุฑุฉ: ุงูุญู ุงูููุงุฆู</h4><p>ูุฐุง ูุนูู ุฃู ุงููุนุงุฏูุฉ ุตุญูุญุฉ ุฏุงุฆูุงู <strong class="text-red-600">ูุฃู ูููุฉ</strong> ูููุชุบูุฑ <span class="math-eq">ู</span>. ูุฌููุนุฉ ุงูุญู ูู <span class="vocab-term">ุฌููุน ุงูุฃุนุฏุงุฏ ุงูุญููููุฉ</span>.</p></div>
                                </div>
                                <div class="flex justify-between mt-6">
                                    <button data-example="3" class="prev-btn bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed">ุฑุฌูุน</button>
                                    <div>
                                        <button data-example="3" class="next-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">ุงูุชุงูู</button>
                                        <button data-example="3" class="reset-btn hidden bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700">ุฅุนุงุฏุฉ</button>
                                    </div>
                                </div>
                            </div>
                             <!-- Example 4 -->
                            <div id="interactive-container-4" class="p-4 bg-white rounded-lg shadow">
                                <p class="text-lg font-semibold mb-4 text-center">ูุซุงู ูค (ูุณุชุญููุฉ ุงูุญู): ุญู <span class="math-eq">ูฃ(ูขู - ูก) = ูฆู + ูฅ</span></p>
                                <div class="steps-container space-y-4 min-h-[200px]">
                                    <div class="interactive-placeholder text-center text-gray-500 p-4 pt-16"><p>ุงุถุบุท "ุงูุชุงูู" ูุจุฏุก ุฎุทูุงุช ุงูุญู</p></div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 1: ูู ุงูุฃููุงุณ</h4><p>ููุฒุน ุงูุถุฑุจ ุนูู ุงูุฌูุน ูู ุงูุทุฑู ุงูุฃููู.</p><p class="math-eq text-center mt-2">ูฆู - ูฃ = ูฆู + ูฅ</p></div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 2: ุฌูุน ุงููุชุบูุฑุงุช</h4><p>ูุทุฑุญ <span class="math-eq">ูฆู</span> ูู ููุง ุงูุทุฑููู.</p><div class="math-steps text-center mt-2 space-y-1"><div class="math-eq">ูฆู <span class="highlight-change">- ูฆู</span> - ูฃ = ูฆู <span class="highlight-change">- ูฆู</span> + ูฅ</div><div class="math-eq">-ูฃ = ูฅ</div></div></div>
                                    <div class="step-interactive p-4 bg-red-200 rounded-lg step-box border-red-600"><h4 class="font-bold">ุงูุฎุทูุฉ ุงูุฃุฎูุฑุฉ: ุงูุญู ุงูููุงุฆู</h4><p>ุงูุนุจุงุฑุฉ ุงููุงุชุฌุฉ <strong class="text-red-600">ุฎุงุทุฆุฉ ุฏุงุฆูุงู</strong>. ูุฐุง ูุนูู ุฃูู ูุง ุชูุฌุฏ ูููุฉ ูููุชุบูุฑ <span class="math-eq">ู</span> ุชุฌุนู ุงููุนุงุฏูุฉ ุตุญูุญุฉ. ูุฌููุนุฉ ุงูุญู ูู <span class="vocab-term">ุงููุฌููุนุฉ ุงูุฎุงููุฉ (โ)</span>.</p></div>
                                </div>
                                <div class="flex justify-between mt-6">
                                    <button data-example="4" class="prev-btn bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed">ุฑุฌูุน</button>
                                    <div>
                                        <button data-example="4" class="next-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">ุงูุชุงูู</button>
                                        <button data-example="4" class="reset-btn hidden bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700">ุฅุนุงุฏุฉ</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Part 4: Number Theory Applications -->
                <section class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">๐ฏ ุฑุงุจุนุงู: ุชุทุจููุงุช ุนูู ูุธุฑูุฉ ุงูุฃุนุฏุงุฏ</h2>
                    <div class="p-6 bg-gray-50 rounded-lg space-y-8">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 md:items-start">
                            <!-- Example 5 -->
                            <div id="interactive-container-5" class="p-4 bg-white rounded-lg shadow">
                                <p class="text-lg font-semibold mb-4 text-center">ูุซุงู ูฅ</p>
                                <p class="text-center mb-4">ุนุฏุฏุงู ุฒูุฌูุงู ูุชุชุงููุงูุ ููู ุฃุฑุจุนุฉ ุฃูุซุงู ุฃุตุบุฑููุง ุนู ูุซูู ุฃูุจุฑููุง ุจููุฏุงุฑ ูกูข. ููุง ุงูุนุฏุฏุงูุ</p>
                                <div class="steps-container space-y-4 min-h-[320px]">
                                    <div class="interactive-placeholder text-center text-gray-500 p-4 pt-16"><p>ุงุถุบุท "ุงูุชุงูู" ูุจุฏุก ุฎุทูุงุช ุงูุญู</p></div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 1: ุชุญุฏูุฏ ุงููุชุบูุฑุงุช</h4><p>ููุฑุถ ุฃู ุงูุนุฏุฏ ุงูุฃุตุบุฑ ูู <span class="math-eq">ู</span>ุ ูุงูุฃูุจุฑ ูู <span class="math-eq">ู + ูข</span>.</p></div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 2: ูุชุงุจุฉ ุงููุนุงุฏูุฉ</h4><p class="math-eq text-center mt-2">ูคู = ูข(ู + ูข) - ูกูข</p></div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 3: ุญู ุงููุนุงุฏูุฉ (ุฃ)</h4><p>ุฃููุงูุ ููู ุงูููุณ:</p><div class="math-steps text-center mt-2"><p class="math-eq">ูคู = ูขู + ูค - ูกูข</p></div></div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 3: ุญู ุงููุนุงุฏูุฉ (ุจ)</h4><p>ุซุงููุงูุ ูุจุณุท ุงูุทุฑู ุงูุฃูุณุฑ:</p><div class="math-steps text-center mt-2"><p class="math-eq">ูคู = ูขู - ูจ</p></div></div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 3: ุญู ุงููุนุงุฏูุฉ (ุฌ)</h4><p>ุซุงูุซุงูุ ูุทุฑุญ <span class="math-eq">ูขู</span> ูู ุงูุทุฑููู:</p><div class="math-steps text-center mt-2"><p class="math-eq">ูคู <span class="highlight-change">- ูขู</span> = ูขู - ูจ <span class="highlight-change">- ูขู</span></p><p class="math-eq">ูขู = -ูจ</p></div></div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 3: ุญู ุงููุนุงุฏูุฉ (ุฏ)</h4><p>ุฃุฎูุฑุงูุ ููุณู ุนูู <span class="math-eq">ูข</span>:</p><div class="math-steps text-center mt-2"><p class="math-eq">ู = -ูค</p></div></div>
                                    <div class="step-interactive p-4 bg-green-200 rounded-lg step-box border-green-600"><h4 class="font-bold">ุงูุฎุทูุฉ ุงูุฃุฎูุฑุฉ: ุงูุญู ุงูููุงุฆู</h4><p>ุงูุนุฏุฏ ุงูุฃุตุบุฑ ูู <span class="math-eq">-ูค</span>ุ ูุงูุฃูุจุฑ ูู <span class="math-eq">-ูข</span>.</p></div>
                                </div>
                                <div class="flex justify-between mt-6">
                                    <button data-example="5" class="prev-btn bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed">ุฑุฌูุน</button>
                                    <div>
                                        <button data-example="5" class="next-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">ุงูุชุงูู</button>
                                        <button data-example="5" class="reset-btn hidden bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700">ุฅุนุงุฏุฉ</button>
                                    </div>
                                </div>
                            </div>
                             <!-- Example 6 -->
                            <div id="interactive-container-6" class="p-4 bg-white rounded-lg shadow">
                                <p class="text-lg font-semibold mb-4 text-center">ูุซุงู ูฆ</p>
                                <p class="text-center mb-4">ุนูุฑ ุฃุญูุฏ ูุฒูุฏ ูฆ ุณููุงุช ุนู ุนูุฑ ุฃุฎูู ุนูู. ุจุนุฏ ูค ุณููุงุชุ ุณูุตุจุญ ูุฌููุน ุนูุฑูููุง ูคู ุณูุฉ. ููุง ุนูุฑ ูู ููููุง ุงูุขูุ</p>
                                <div class="steps-container space-y-4 min-h-[320px]">
                                    <div class="interactive-placeholder text-center text-gray-500 p-4 pt-16"><p>ุงุถุบุท "ุงูุชุงูู" ูุจุฏุก ุฎุทูุงุช ุงูุญู</p></div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 1: ุชุญุฏูุฏ ุงููุชุบูุฑุงุช</h4><div class="math-steps space-y-1"><p>ุนูุฑ ุนูู ุงูุขู = <span class="math-eq">ุณ</span></p><p>ุนูุฑ ุฃุญูุฏ ุงูุขู = <span class="math-eq">ุณ + ูฆ</span></p></div></div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 2: ูุชุงุจุฉ ุงููุนุงุฏูุฉ</h4><p>ุนูุฑ ุนูู ุจุนุฏ ูค ุณููุงุช: <span class="math-eq">ุณ + ูค</span></p><p>ุนูุฑ ุฃุญูุฏ ุจุนุฏ ูค ุณููุงุช: <span class="math-eq">(ุณ + ูฆ) + ูค</span></p><p class="math-eq text-center mt-2">(ุณ + ูค) + (ุณ + ูกู) = ูคู</p></div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 3: ุญู ุงููุนุงุฏูุฉ (ุฃ)</h4><p>ุฃููุงูุ ูุฌูุน ุงูุญุฏูุฏ ุงููุชุดุงุจูุฉ:</p><div class="math-steps text-center mt-2"><p class="math-eq">ูขุณ + ูกูค = ูคู</p></div></div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 3: ุญู ุงููุนุงุฏูุฉ (ุจ)</h4><p>ุซุงููุงูุ ูุทุฑุญ <span class="math-eq">ูกูค</span> ูู ุงูุทุฑููู:</p><div class="math-steps text-center mt-2"><p class="math-eq">ูขุณ = ูคู <span class="highlight-change">- ูกูค</span></p><p class="math-eq">ูขุณ = ูขูฆ</p></div></div>
                                    <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 3: ุญู ุงููุนุงุฏูุฉ (ุฌ)</h4><p>ุฃุฎูุฑุงูุ ููุณู ุนูู <span class="math-eq">ูข</span>:</p><div class="math-steps text-center mt-2"><p class="math-eq">ุณ = ูกูฃ</p></div></div>
                                    <div class="step-interactive p-4 bg-green-200 rounded-lg step-box border-green-600"><h4 class="font-bold">ุงูุฎุทูุฉ ุงูุฃุฎูุฑุฉ: ุงูุญู ุงูููุงุฆู</h4><p>ุนูุฑ ุนูู ุงูุขู <span class="math-eq">ูกูฃ</span> ุณูุฉุ ูุนูุฑ ุฃุญูุฏ <span class="math-eq">ูกูฉ</span> ุณูุฉ.</p></div>
                                </div>
                                <div class="flex justify-between mt-6">
                                    <button data-example="6" class="prev-btn bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed">ุฑุฌูุน</button>
                                    <div>
                                        <button data-example="6" class="next-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">ุงูุชุงูู</button>
                                        <button data-example="6" class="reset-btn hidden bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700">ุฅุนุงุฏุฉ</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Part 5: Geometry Application -->
                <section class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">๐ฏ ุฎุงูุณุงู: ุชุทุจููุงุช ุนูู ุงูููุฏุณุฉ</h2>
                    <div class="p-6 bg-gray-50 rounded-lg">
                        <div id="interactive-container-7" class="p-4 bg-white rounded-lg shadow max-w-lg mx-auto">
                            <p class="text-lg font-semibold mb-4 text-center">ูุซุงู ูง</p>
                            <p class="text-center mb-2">ุฃูุฌุฏ ูููุฉ <span class="math-eq">ุณ</span> ุงูุชู ุชุฌุนู ูุณุงุญุชู ุงููุณุชุทูููู ูุชุณุงููุชูู.</p>
                            <div class="flex flex-col md:flex-row items-center justify-center gap-16 py-8">
                                <div class="relative">
                                    <div class="w-40 h-32 bg-amber-300 border-2 border-amber-500 rounded-lg shadow-md"></div>
                                    <span class="absolute -bottom-7 left-1/2 -translate-x-1/2 text-lg font-bold text-gray-700">ุณ</span>
                                    <span class="absolute -right-7 top-1/2 -translate-y-1/2 text-lg font-bold text-gray-700">ูกูข</span>
                                </div>
                                <div class="relative">
                                    <div class="w-32 h-40 bg-amber-300 border-2 border-amber-500 rounded-lg shadow-md"></div>
                                    <span class="absolute -bottom-7 left-1/2 -translate-x-1/2 text-lg font-bold text-gray-700">ูกูฆ</span>
                                    <span class="absolute -right-12 top-1/2 -translate-y-1/2 text-lg font-bold text-gray-700">ุณ - ูข</span>
                                </div>
                            </div>
                            <div class="steps-container space-y-4 min-h-[250px]">
                                <div class="interactive-placeholder text-center text-gray-500 p-4 pt-12"><p>ุงุถุบุท "ุงูุชุงูู" ูุจุฏุก ุฎุทูุงุช ุงูุญู</p></div>
                                <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 1: ูุชุงุจุฉ ุงููุนุงุฏูุฉ</h4><p>ูุณุงุญุฉ ุฃ = ูุณุงุญุฉ ุจ</p><p class="text-center text-gray-600 text-sm my-2">ุงูุทูู ุฃ ร ุงูุนุฑุถ ุฃ = ุงูุทูู ุจ ร ุงูุนุฑุถ ุจ</p><p class="math-eq text-center mt-2">ูกูขุณ = ูกูฆ(ุณ - ูข)</p></div>
                                <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 2: ุญู ุงููุนุงุฏูุฉ (ุฃ)</h4><p>ุฃููุงูุ ููู ุงูููุณ:</p><div class="math-steps text-center mt-2"><p class="math-eq">ูกูขุณ = ูกูฆุณ - ูฃูข</p></div></div>
                                <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 2: ุญู ุงููุนุงุฏูุฉ (ุจ)</h4><p>ุซุงููุงูุ ูุทุฑุญ <span class="math-eq">ูกูฆุณ</span> ูู ุงูุทุฑููู:</p><div class="math-steps text-center mt-2"><p class="math-eq">ูกูขุณ <span class="highlight-change">- ูกูฆุณ</span> = ูกูฆุณ - ูฃูข <span class="highlight-change">- ูกูฆุณ</span></p><p class="math-eq">-ูคุณ = -ูฃูข</p></div></div>
                                <div class="step-interactive p-4 bg-gray-50 rounded-lg step-box"><h4 class="font-bold">ุงูุฎุทูุฉ 2: ุญู ุงููุนุงุฏูุฉ (ุฌ)</h4><p>ุฃุฎูุฑุงูุ ููุณู ุนูู <span class="math-eq">-ูค</span>:</p><div class="math-steps text-center mt-2"><p class="math-eq flex justify-center items-center"><span class="fraction"><span>-ูคุณ</span><span class="frac-bar"></span><span>-ูค</span></span> = <span class="fraction"><span>-ูฃูข</span><span class="frac-bar"></span><span>-ูค</span></span></p></div></div>
                                <div class="step-interactive p-4 bg-green-200 rounded-lg step-box border-green-600"><h4 class="font-bold">ุงูุฎุทูุฉ ุงูุฃุฎูุฑุฉ: ุงูุญู ุงูููุงุฆู</h4><p>ูููุฉ <span class="math-eq">ุณ</span> ูู <span class="math-eq">ูจ</span>.</p></div>
                            </div>
                            <div class="flex justify-between mt-6">
                                <button data-example="7" class="prev-btn bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed">ุฑุฌูุน</button>
                                <div>
                                    <button data-example="7" class="next-btn bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">ุงูุชุงูู</button>
                                    <button data-example="7" class="reset-btn hidden bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700">ุฅุนุงุฏุฉ</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Part 6: Interactive Quiz -->
                <section class="mt-12">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-2xl font-bold text-gray-800">โ๏ธ ุณุงุฏุณุงู: ุญุงู ุฏูุฑู! ุงุฎุชุจุฑ ูููู</h2>
                        <div id="attempts-counter" class="text-sm font-bold text-gray-600"></div>
                    </div>
                    <form id="quizForm" class="p-6 bg-gray-50 rounded-lg space-y-8"></form>
                    <div id="quiz-results" class="hidden mt-6 p-4 rounded-lg text-center">
                        <h3 class="text-xl font-bold">ูุชูุฌุชู ุงูููุงุฆูุฉ</h3>
                        <p id="quiz-score" class="text-4xl font-bold my-2"></p>
                        <div id="save-status" class="mt-4 text-sm font-semibold"></div>
                        <button id="retake-quiz-btn" class="hidden mt-4 bg-blue-600 text-white font-medium py-2 px-6 rounded-lg hover:bg-blue-700">ุฅุนุงุฏุฉ ุงูุงุฎุชุจุงุฑ</button>
                    </div>
                </section>
            </div>
        </main>
        <footer id="main-footer" class="bg-gray-200 py-4"></footer>
    </div>
    <div id="explanationModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-white rounded-lg shadow-2xl p-6 max-w-lg w-full">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold">๐ก ุดุฑุญ ุงูุฅุฌุงุจุฉ</h3>
                <button id="closeModalBtn" class="p-2 -m-2 rounded-full hover:bg-gray-200">
                    <svg class="h-6 w-6 text-gray-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
            </div>
            <div id="explanationText" class="text-gray-700 max-h-[60vh] overflow-y-auto"></div>
        </div>
    </div>
    <script>
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzrf1-At3Pq7i39bGV3F1iD3-b0G-WWyRi5cgpKeQjyn_N5fh2EmGhoyRKUsbLd-F_UJQ/exec";
    const MAX_ATTEMPTS = 3;
    let currentQuestions = []; 
    function getStudentFromStorage() { const studentDataString = localStorage.getItem('currentStudent'); if (studentDataString) { try { return JSON.parse(studentDataString); } catch (e) { return null; } } return null; }
    function buildHeader(studentData, lessonTitle = null) { const headerContainer = document.getElementById('main-header'); if (!headerContainer) return; let titleHtml; if (lessonTitle) { titleHtml = `<div><h2 class="text-sm text-gray-500 leading-tight">ููุตุฉ ุงูุฑูุงุถูุงุช ุงูุชูุงุนููุฉ</h2><h1 class="text-xl font-bold text-indigo-700 leading-tight">${lessonTitle}</h1></div>`; } else { titleHtml = `<a href="../index.html" target="_top"><h1 class="text-2xl font-bold text-blue-800">ููุตุฉ ุงูุฑูุงุถูุงุช ุงูุชูุงุนููุฉ</h1></a>`; } let userInfoHtml = ''; if (studentData) { userInfoHtml = `<div class="flex items-center gap-4"><span class="font-semibold">ุฃููุงูุ ${studentData.name}</span><a href="../index.html" target="_top" id="logout-link" class="bg-red-500 text-white py-1 px-3 rounded-lg hover:bg-red-600">ุฎุฑูุฌ</a></div>`; } else { userInfoHtml = `<p class="text-lg text-gray-600">ุฒุงุฆุฑ</p>`; } headerContainer.innerHTML = `<div class="container mx-auto px-6 py-4 flex justify-between items-center">${titleHtml}${userInfoHtml}</div>`; const logoutLink = headerContainer.querySelector('#logout-link'); if(logoutLink) { logoutLink.addEventListener('click', () => { localStorage.removeItem('currentStudent'); }); } }
    function buildFooter() { const footerContainer = document.getElementById('main-footer'); if (!footerContainer) return; footerContainer.innerHTML = `<div class="container mx-auto px-6"><p class="text-center text-gray-600 text-sm">ยฉ 2024 ุฌููุน ุงูุญููู ูุญููุธุฉ | ุชุตููู ูุชุทููุฑ: ุฃ. ุนุจุฏุงูุนุฒูุฒ ุฎุงูุฏ ุงูุนุจูุงู</p></div>`; }
    function initializeQuiz(lessonId, questions, studentData) { currentQuestions = questions; const quizForm = document.getElementById('quizForm'); if (!quizForm) return; if (questions.length === 0) { quizForm.innerHTML = `<p class="text-center text-gray-600">ูุง ุชูุฌุฏ ุฃุณุฆูุฉ ูุชุงุญุฉ ููุฐุง ุงูุฏุฑุณ ุญุงููุงู.</p>`; return; } let attemptsLeft; if (studentData) { const studentLessonData = studentData.lessons?.[lessonId] || { attempts: 0 }; attemptsLeft = MAX_ATTEMPTS - studentLessonData.attempts; } else { attemptsLeft = 1; } const attemptsCounter = document.getElementById('attempts-counter'); if (attemptsCounter) { attemptsCounter.innerHTML = `ุงููุญุงููุงุช ุงููุชุจููุฉ: <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full">${attemptsLeft}</span>`; } const quizHtml = questions.map((q, index) => { const optionsHTML = q.options.map((opt, optIndex) => `<div><input type="radio" name="q${index}" value="${opt.value}" id="q${index}_opt${optIndex}" class="hidden"><label for="q${index}_opt${optIndex}" class="option-label">${opt.display}</label></div>`).join(''); return `<div class="p-4 border-2 border-gray-200 rounded-lg"><p class="font-bold">${index + 1}. <span class="text-yellow-500">${q.level}</span> ${q.text}</p><div class="grid grid-cols-1 sm:grid-cols-2 gap-3 mt-3">${optionsHTML}</div><div id="feedback-q${index}" class="mt-2 text-sm font-bold"></div><div id="explanation-buttons-${index}" class="hidden mt-2 space-x-4"></div></div>`; }).join(''); quizForm.innerHTML = quizHtml + `<button type="submit" id="submit-quiz-btn" class="w-full text-white bg-green-600 hover:bg-green-700 font-medium rounded-lg text-lg px-5 py-3 mt-8">ุชุญูู ูู ุฅุฌุงุจุงุชู</button>`; if (attemptsLeft <= 0) { const submitBtn = quizForm.querySelector('#submit-quiz-btn'); submitBtn.disabled = true; submitBtn.textContent = 'ูุง ุชูุฌุฏ ูุญุงููุงุช ูุชุจููุฉ'; submitBtn.classList.add('bg-gray-400', 'hover:bg-gray-400'); } quizForm.onsubmit = (e) => { e.preventDefault(); let score = 0; questions.forEach((q, index) => { const userAnswer = e.target.elements[`q${index}`]?.value; const feedbackEl = document.getElementById(`feedback-q${index}`); if (userAnswer === q.correct) { score++; feedbackEl.textContent = 'โ ุฅุฌุงุจุฉ ุตุญูุญุฉ!'; feedbackEl.className = 'mt-2 text-sm font-bold text-green-600'; } else { feedbackEl.textContent = `โ ุฅุฌุงุจุฉ ุฎุงุทุฆุฉ.`; feedbackEl.className = 'mt-2 text-sm font-bold text-red-600'; } const explanationBtnsContainer = document.getElementById(`explanation-buttons-${index}`); explanationBtnsContainer.classList.remove('hidden'); explanationBtnsContainer.innerHTML = `<button type="button" class="text-xs text-blue-600 hover:underline" onclick="showExplanation(${index}, 'explanation')">ุงุนุฑู ููุงุฐุงุ</button>`; if (q.smartExplanation) { explanationBtnsContainer.innerHTML += `<button type="button" class="text-xs text-purple-600 hover:underline" onclick="showExplanation(${index}, 'smartExplanation')">ุงูุญู ุงูุฐูู ๐ง</button>`; } }); const finalGrade = Math.round((score / questions.length) * 10); const resultsDiv = document.getElementById('quiz-results'); resultsDiv.classList.remove('hidden'); document.getElementById('quiz-score').textContent = `${finalGrade} / 10`; if (studentData) { saveGrade(lessonId, finalGrade, studentData.id); if (attemptsLeft - 1 > 0) { document.getElementById('retake-quiz-btn').classList.remove('hidden'); } } else { document.getElementById('save-status').textContent = 'ุชู ุนุฑุถ ูุชูุฌุชู. ุณุฌู ุงูุฏุฎูู ูุญูุธ ุชูุฏูู.'; } e.target.querySelector('#submit-quiz-btn').disabled = true; }; }
    function saveGrade(lessonId, grade, studentId) { if (!studentId) return; const saveStatus = document.getElementById('save-status'); saveStatus.textContent = 'ุฌุงุฑู ุญูุธ ูุชูุฌุชู...'; const url = `${SCRIPT_URL}?action=saveGrade&studentId=${studentId}&lessonId=${lessonId}&grade=${grade}`; fetch(url) .then(res => res.json()) .then(result => { if (result.status === 'success') { saveStatus.textContent = 'โ ุชู ุญูุธ ูุชูุฌุชู ุจูุฌุงุญ! ุณุชุธูุฑ ูู ููุญุฉ ุงูุชุญูู ุนูุฏ ุงูุนูุฏุฉ.'; const studentData = JSON.parse(localStorage.getItem('currentStudent')); if (!studentData.lessons) studentData.lessons = {}; if (!studentData.lessons[lessonId] || studentData.lessons[lessonId].grade < grade) { studentData.lessons[lessonId] = { grade: grade, attempts: (studentData.lessons[lessonId]?.attempts || 0) + 1 }; } else { studentData.lessons[lessonId].attempts++; } localStorage.setItem('currentStudent', JSON.stringify(studentData)); } else { throw new Error(result.message); } }) .catch(error => { saveStatus.textContent = 'โ ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุญูุธ ุงูุฏุฑุฌุฉ.'; console.error("Save Grade Error:", error); }); }
    window.showExplanation = function(questionIndex, type) { const modal = document.getElementById('explanationModal'); const explanationText = document.getElementById('explanationText'); const question = currentQuestions[questionIndex]; if(modal && explanationText && question) { const explanationContent = question[type]; if (explanationContent) { explanationText.innerHTML = explanationContent; modal.classList.remove('hidden'); } } }
    function closeModal() { const modal = document.getElementById('explanationModal'); if(modal) modal.classList.add('hidden'); }
    
    // === ูุญุชูู ุงูุฏุฑุณ ุงููุญุฏุฏ ===
    const LESSON_ID = 'c1_l4'; 
    function generateQuiz() { 
        const questionBank = [
             { 
              id: 'number-theory-equation',
              type: 'mcq', 
              level: 'โญโญโญ', 
              topic: 'word-to-equation', 
              text: 'ุนุฏุฏุงู ูุฑุฏูุงู ูุชุชุงููุงูุ ููู ูุซูู ุฃุตุบุฑููุง ุนู ุซูุงุซุฉ ุฃูุซุงู ุฃูุจุฑููุง ุจููุฏุงุฑ ูฉ. ุฃู ุงููุนุงุฏูุงุช ุงูุชุงููุฉ ุชูุซู ูุฐู ุงููุณุฃูุฉุ (ุงูุฑุถ ุฃู ุฃุตุบุฑ ุนุฏุฏ ูู ู)', 
              options: [ 
                  { display: '<span class="math-eq">ูขู = ูฃ(ู+ูข) - ูฉ</span>', value: '2n = 3(n+2) - 9' }, 
                  { display: '<span class="math-eq">ูฃู = ูข(ู+ูข) + ูฉ</span>', value: '3n = 2(n+2) + 9' }, 
                  { display: '<span class="math-eq">ูขู = ูฃ(ู+ูก) - ูฉ</span>', value: '2n = 3(n+1) - 9' }, 
                  { display: '<span class="math-eq">ูขู = ูฃู + ูข - ูฉ</span>', value: '2n = 3n+2-9' } 
              ], 
              correct: '2n = 3(n+2) - 9', 
              explanation: `<p class='mb-2'>ูุชุฑุฌูุฉ ุงููุณุฃูุฉุ ูููููุง ูุงูุชุงูู:</p>
                          <ul class='list-disc list-inside text-right space-y-1'>
                            <li>ุงูุนุฏุฏ ุงููุฑุฏู ุงูุฃุตุบุฑ: <span class='math-eq'>ู</span></li>
                            <li>ุงูุนุฏุฏ ุงููุฑุฏู ุงูุฃูุจุฑ (ุงูุชุงูู ูู): <span class='math-eq'>ู + ูข</span></li>
                            <li>"ูุซูู ุฃุตุบุฑููุง": <span class='math-eq'>ูขู</span></li>
                            <li>"ุซูุงุซุฉ ุฃูุซุงู ุฃูุจุฑููุง": <span class='math-eq'>ูฃ(ู + ูข)</span></li>
                            <li>ุนุจุงุฑุฉ "ููู ุนู ... ุจููุฏุงุฑ ูฉ" ุชุนูู ุฃู ุงูุทุฑู ุงูุฃูู ูุณุงูู ุงูุทุฑู ุงูุซุงูู ูุทุฑูุญุงู ููู ูฉ.</li>
                          </ul>
                          <p class='mt-3 p-2 bg-green-100 rounded-md'>ุฅุฐูุ ุงููุนุงุฏูุฉ ุงูุตุญูุญุฉ ูู: <span class='math-eq'>ูขู = ูฃ(ู + ูข) - ูฉ</span>.</p>`,
              smartExplanation: `<p>ูููุฉ "ููู ุนู" ุชุนูู ุฃู ุงูุทุฑู ุงูุฃูู ูู ุงูุฃุตุบุฑ. "ูุซูู ุฃุตุบุฑููุง" (<span class='math-eq'>ูขู</span>) ูุฌุจ ุฃู ูุณุงูู "ุซูุงุซุฉ ุฃูุซุงู ุฃูุจุฑููุง" (<span class='math-eq'>ูฃ(ู+ูข)</span>) ุจุนุฏ ุฃู ูุทุฑุญ ููู ูฉ.</p>`
            },
            { 
              id: 'number-theory-equation-2',
              type: 'mcq', 
              level: 'โญโญโญ', 
              topic: 'word-to-equation', 
              text: 'ุนุฏุฏุงู ุฒูุฌูุงู ูุชุชุงููุงูุ ููู ุฎูุณุฉ ุฃูุซุงู ุฃูุจุฑููุง ุนู ุณุจุนุฉ ุฃูุซุงู ุฃุตุบุฑููุง ุจููุฏุงุฑ ูค. ุฃู ุงููุนุงุฏูุงุช ุงูุชุงููุฉ ุชูุซู ูุฐู ุงููุณุฃูุฉุ (ุงูุฑุถ ุฃู ุฃุตุบุฑ ุนุฏุฏ ูู ู)', 
              options: [ 
                  { display: '<span class="math-eq">ูฅ(ู+ูข) = ูงู - ูค</span>', value: '5(n+2) = 7n - 4' }, 
                  { display: '<span class="math-eq">ูฅ(ู+ูข) + ูค = ูงู</span>', value: '5(n+2) + 4 = 7n' }, 
                  { display: '<span class="math-eq">ูงู = ูฅ(ู+ูข) - ูค</span>', value: '7n = 5(n+2) - 4' }, 
                  { display: '<span class="math-eq">ูฅู = ูง(ู+ูข) - ูค</span>', value: '5n = 7(n+2) - 4' } 
              ], 
              correct: '5(n+2) = 7n - 4', 
              explanation: `<p class='mb-2'>ูุชุฑุฌูุฉ ุงููุณุฃูุฉุ ูููููุง ูุงูุชุงูู:</p>
                          <ul class='list-disc list-inside text-right space-y-1'>
                            <li>ุงูุนุฏุฏ ุงูุฒูุฌู ุงูุฃุตุบุฑ: <span class='math-eq'>ู</span></li>
                            <li>ุงูุนุฏุฏ ุงูุฒูุฌู ุงูุฃูุจุฑ (ุงูุชุงูู ูู): <span class='math-eq'>ู + ูข</span></li>
                            <li>"ุฎูุณุฉ ุฃูุซุงู ุฃูุจุฑููุง": <span class='math-eq'>ูฅ(ู + ูข)</span></li>
                            <li>"ุณุจุนุฉ ุฃูุซุงู ุฃุตุบุฑููุง": <span class='math-eq'>ูงู</span></li>
                            <li>ุนุจุงุฑุฉ "ููู ... ุนู ... ุจููุฏุงุฑ ูค" ุชุนูู ุฃู ุงูุทุฑู ุงูุฃูู (ุฎูุณุฉ ุฃูุซุงู ุฃูุจุฑููุง) ูุณุงูู ุงูุทุฑู ุงูุซุงูู (ุณุจุนุฉ ุฃูุซุงู ุฃุตุบุฑููุง) ูุทุฑูุญุงู ููู ูค.</li>
                          </ul>
                          <p class='mt-3 p-2 bg-green-100 rounded-md'>ุฅุฐูุ ุงููุนุงุฏูุฉ ุงูุตุญูุญุฉ ูู: <span class='math-eq'>ูฅ(ู + ูข) = ูงู - ูค</span>.</p>`,
              smartExplanation: `<p>ูููุฉ "ููู ุนู" ุชุนูู ุฃู ุงูุทุฑู ุงูุฃูู ูู ุงูุฃุตุบุฑ. "ุฎูุณุฉ ุฃูุซุงู ุฃูุจุฑููุง" (<span class='math-eq'>ูฅ(ู+ูข)</span>) ูุฌุจ ุฃู ูุณุงูู "ุณุจุนุฉ ุฃูุซุงู ุฃุตุบุฑููุง" (<span class='math-eq'>ูงู</span>) ุจุนุฏ ุฃู ูุทุฑุญ ููู ูค.</p>`
            },
            { type: 'mcq', level: 'โญ', topic: 'both-sides', text: 'ุญู ุงููุนุงุฏูุฉ: <span class="math-eq">ูฅุณ + ูข = ูขุณ + ูกูค</span>', 
              options: [ { display: '<span class="math-eq">ูค</span>', value: 'ูค' }, { display: '<span class="math-eq">ูฆ</span>', value: 'ูฆ' }, { display: '<span class="math-eq">ูฃ</span>', value: 'ูฃ' }, { display: '<span class="math-eq">ูกูข</span>', value: 'ูกูข' } ], 
              correct: 'ูค', 
              explanation: `<p class='mb-2'>ูุฌูุน ุงููุชุบูุฑุงุช ูู ุทุฑู ูุงูุซูุงุจุช ูู ุงูุทุฑู ุงูุขุฎุฑ.</p><div class='text-right space-y-2'><p>ุฃููุงู: ูุทุฑุญ ูขุณ ูู ุงูุทุฑููู: <span class='math-eq'>ูฅุณ <span class='highlight-change'>- ูขุณ</span> + ูข = ูขุณ <span class='highlight-change'>- ูขุณ</span> + ูกูค</span></p><p>ุซุงููุงู: ูุจุณุท: <span class='math-eq'>ูฃุณ + ูข = ูกูค</span></p><p>ุซุงูุซุงู: ูุทุฑุญ ูข ูู ุงูุทุฑููู: <span class='math-eq'>ูฃุณ + ูข <span class='highlight-change'>- ูข</span> = ูกูค <span class='highlight-change'>- ูข</span></span></p><p>ุฑุงุจุนุงู: ูุจุณุท: <span class='math-eq'>ูฃุณ = ูกูข</span></p><p>ุฎุงูุณุงู: ููุณู ุงูุทุฑููู ุนูู ูฃ: <span class='math-eq flex justify-center items-center'><span class="fraction"><span>ูฃุณ</span><span class="frac-bar"></span><span>ูฃ</span></span> = <span class="fraction"><span>ูกูข</span><span class="frac-bar"></span><span>ูฃ</span></span></span></p><p>ุงูุญู: <span class='math-eq'>ุณ = ูค</span></p></div>`,
              smartExplanation: `<p>ููุฌุฑุจ ุชุนููุถ ุงูุฎูุงุฑ ุงูุฃูู (ูค):</p><p>ุงูุทุฑู ุงูุฃููู: <span class='math-eq'>ูฅ(ูค) + ูข = ูขู + ูข = ูขูข</span></p><p>ุงูุทุฑู ุงูุฃูุณุฑ: <span class='math-eq'>ูข(ูค) + ูกูค = ูจ + ูกูค = ูขูข</span></p><p>ุจูุง ุฃู ุงูุทุฑููู ูุชุณุงููุงูุ ูุงูุฅุฌุงุจุฉ ุตุญูุญุฉ.</p>`
            },
            { type: 'mcq', level: 'โญโญ', topic: 'parentheses', text: 'ุญู ุงููุนุงุฏูุฉ: <span class="math-eq">ูฃ(ู - ูฅ) = ูข(ู + ูก)</span>', 
              options: [ { display: '<span class="math-eq">ูกูง</span>', value: 'ูกูง' }, { display: '<span class="math-eq">-ูกูฃ</span>', value: '-ูกูฃ' }, { display: '<span class="math-eq">ูกูฆ</span>', value: 'ูกูฆ' }, { display: '<span class="math-eq">ูค</span>', value: 'ูค' } ], 
              correct: 'ูกูง', 
              explanation: `<p class='mb-2'>ูุณุชุฎุฏู ุฎุงุตูุฉ ุงูุชูุฒูุน ุฃููุงู.</p><div class='text-right space-y-2'><p>ุฃููุงู: ูู ุงูุฃููุงุณ: <span class='math-eq'>ูฃู - ูกูฅ = ูขู + ูข</span></p><p>ุซุงููุงู: ูุทุฑุญ ูขู ูู ุงูุทุฑููู: <span class='math-eq'>ูฃู <span class='highlight-change'>- ูขู</span> - ูกูฅ = ูขู <span class='highlight-change'>- ูขู</span> + ูข</span></p><p>ุซุงูุซุงู: ูุจุณุท: <span class='math-eq'>ู - ูกูฅ = ูข</span></p><p>ุฑุงุจุนุงู: ูุถูู ูกูฅ ููุทุฑููู: <span class='math-eq'>ู - ูกูฅ <span class='highlight-change'>+ ูกูฅ</span> = ูข <span class='highlight-change'>+ ูกูฅ</span></span></p><p>ุฎุงูุณุงู: ุงูุญู ุงูููุงุฆู: <span class='math-eq'>ู = ูกูง</span></p></div>`,
              smartExplanation: `<p>ููุฌุฑุจ ุชุนููุถ ุงูุฎูุงุฑ (ูกูง):</p><p>ุงูุทุฑู ุงูุฃููู: <span class='math-eq'>ูฃ(ูกูง - ูฅ) = ูฃ(ูกูข) = ูฃูฆ</span></p><p>ุงูุทุฑู ุงูุฃูุณุฑ: <span class='math-eq'>ูข(ูกูง + ูก) = ูข(ูกูจ) = ูฃูฆ</span></p><p>ุงูุทุฑูุงู ูุชุณุงููุงูุ ุฅุฐู ุงูุฅุฌุงุจุฉ ุตุญูุญุฉ.</p>`
            },
            { type: 'mcq', level: 'โญโญโญ', topic: 'no-solution', text: 'ูุง ูู ุญู ุงููุนุงุฏูุฉ: <span class="math-eq">ูจ + ูคู = ูคู - ูก</span>ุ', 
              options: [ { display: '<span class="math-eq">ู = ูข</span>', value: '2' }, { display: '<span class="math-eq">ุฌููุน ุงูุฃุนุฏุงุฏ ุงูุญููููุฉ</span>', value: 'all' }, { display: '<span class="math-eq">ูุณุชุญููุฉ ุงูุญู (โ)</span>', value: 'none' }, { display: '<span class="math-eq">ู = -ูข</span>', value: '-2' } ], 
              correct: 'none', 
              explanation: `<p class='mb-2'>ูุญุงูู ุฌูุน ุงููุชุบูุฑุงุช ูู ุทุฑู.</p><div class='text-right space-y-2'><p>ุงููุนุงุฏูุฉ: <span class='math-eq'>ูจ + ูคู = ูคู - ูก</span></p><p>ูุทุฑุญ ูคู ูู ุงูุทุฑููู: <span class='math-eq'>ูจ + ูคู <span class='highlight-change'>- ูคู</span> = ูคู - ูก <span class='highlight-change'>- ูคู</span></span></p><p>ูุจุณุท ููุฌุฏ: <span class='math-eq'>ูจ = -ูก</span></p><p class='mt-2 p-2 bg-red-100 rounded-md'>ุจูุง ุฃู ุงูุนุจุงุฑุฉ "ูจ = -ูก" ุฎุงุทุฆุฉ ุฏุงุฆูุงูุ ููุฐู ุงููุนุงุฏูุฉ ููุณ ููุง ุญู. ูุชุณูู ูุนุงุฏูุฉ ูุณุชุญููุฉ ุงูุญู.</p></div>`,
              smartExplanation: `<p>ุจูุฌุฑุฏ ุงููุธุฑุ ููุงุญุธ ุฃู ุงููุชุบูุฑ <span class='math-eq'>ูคู</span> ููุฌูุฏ ูู ููุง ุงูุทุฑููู ุจููุณ ุงูุฅุดุงุฑุฉ. ุนูุฏ ุญุฐูููุงุ ูุชุจูู <span class='math-eq'>ูจ = -ูก</span> ููู ุนุจุงุฑุฉ ุฎุงุทุฆุฉุ ููุง ูุนูู ุฃู ุงูุญู ูู ุงููุฌููุนุฉ ุงูุฎุงููุฉ.</p>`
            },
            { type: 'mcq', level: 'โญโญ', topic: 'fractions', text: 'ุญู ุงููุนุงุฏูุฉ: <span class="math-eq flex justify-center items-center"><span class="fraction"><span>ูก</span><span class="frac-bar"></span><span>ูข</span></span>ุน - ูค = <span class="fraction"><span>ูฃ</span><span class="frac-bar"></span><span>ูค</span></span>ุน</span>', 
              options: [ { display: '<span class="math-eq">ุน = ูกูฆ</span>', value: '16' }, { display: '<span class="math-eq">ุน = -ูกูฆ</span>', value: '-16' }, { display: '<span class="math-eq">ุน = ูจ</span>', value: '8' }, { display: '<span class="math-eq">ุน = -ูจ</span>', value: '-8' } ], 
              correct: '-16', 
              explanation: `<p class='mb-2'>ููุชุฎูุต ูู ุงููุณูุฑุ ูุถุฑุจ ุทุฑูู ุงููุนุงุฏูุฉ ูู ุงููุถุงุนู ุงููุดุชุฑู ุงูุฃุตุบุฑ ููููุงูุงุช (ููู ูค).</p><div class='text-right space-y-2'><p>ุงููุนุงุฏูุฉ: <span class='math-eq'>ูค ร (<span class="fraction"><span>ูก</span><span class="frac-bar"></span><span>ูข</span></span>ุน - ูค ) = ูค ร ( <span class="fraction"><span>ูฃ</span><span class="frac-bar"></span><span>ูค</span></span>ุน )</span></p><p>ููุฒุน ุงูุถุฑุจ: <span class='math-eq'>ูขุน - ูกูฆ = ูฃุน</span></p><p>ูุทุฑุญ ูขุน ูู ุงูุทุฑููู: <span class='math-eq'>ูขุน <span class='highlight-change'>- ูขุน</span> - ูกูฆ = ูฃุน <span class='highlight-change'>- ูขุน</span></span></p><p>ูุจุณุท: <span class='math-eq'>-ูกูฆ = ุน</span></p></div>` 
            },
            { type: 'mcq', level: 'โญโญ', topic: 'parentheses-2', text: 'ุญู ุงููุนุงุฏูุฉ: <span class="math-eq">ูง(ุฃ - ูข) = ูค(ุฃ + ูก)</span>', 
              options: [ { display: '<span class="math-eq">ุฃ = ูฆ</span>', value: '6' }, { display: '<span class="math-eq">ุฃ = -ูฆ</span>', value: '-6' }, { display: '<span class="math-eq">ุฃ = ูฃ</span>', value: '3' }, { display: '<span class="math-eq">ุฃ = ูกูจ</span>', value: '18' } ], 
              correct: '6', 
              explanation: `<p class='mb-2'>ูุจุฏุฃ ุจูู ุงูุฃููุงุณ ูู ุงูุทุฑููู.</p><div class='text-right space-y-2'><p>ุงููุนุงุฏูุฉ: <span class='math-eq'>ูงุฃ - ูกูค = ูคุฃ + ูค</span></p><p>ูุทุฑุญ ูคุฃ ูู ุงูุทุฑููู: <span class='math-eq'>ูฃุฃ - ูกูค = ูค</span></p><p>ูุถูู ูกูค ููุทุฑููู: <span class='math-eq'>ูฃุฃ = ูกูจ</span></p><p>ููุณู ุงูุทุฑููู ุนูู ูฃ: <span class='math-eq flex justify-center items-center'><span class="fraction"><span>ูฃุฃ</span><span class="frac-bar"></span><span>ูฃ</span></span> = <span class="fraction"><span>ูกูจ</span><span class="frac-bar"></span><span>ูฃ</span></span></span></p><p>ุงูุญู: <span class='math-eq'>ุฃ = ูฆ</span></p></div>`,
              smartExplanation: `<p>ููุฌุฑุจ ุชุนููุถ ุงูุฎูุงุฑ (ูฆ):</p><p>ุงูุทุฑู ุงูุฃููู: <span class='math-eq'>ูง(ูฆ - ูข) = ูง(ูค) = ูขูจ</span></p><p>ุงูุทุฑู ุงูุฃูุณุฑ: <span class='math-eq'>ูค(ูฆ + ูก) = ูค(ูง) = ูขูจ</span></p><p>ุงูุทุฑูุงู ูุชุณุงููุงูุ ุฅุฐู ุงูุฅุฌุงุจุฉ ุตุญูุญุฉ.</p>`
            },
            { type: 'mcq', level: 'โญโญโญ', topic: 'identity', text: 'ูุง ูู ุญู ุงููุนุงุฏูุฉ: <span class="math-eq">ูฃ(ูขุจ - ูก) - ูฅ = ูฆุจ - ูจ</span>ุ', 
              options: [ { display: '<span class="math-eq">ุจ = ูก</span>', value: '1' }, { display: '<span class="math-eq">ุฌููุน ุงูุฃุนุฏุงุฏ ุงูุญููููุฉ</span>', value: 'all' }, { display: '<span class="math-eq">ูุณุชุญููุฉ ุงูุญู (โ)</span>', value: 'none' }, { display: '<span class="math-eq">ุจ = ู</span>', value: '0' } ], 
              correct: 'all', 
              explanation: `<p class='mb-2'>ูุจุฏุฃ ุจูู ุงูููุณ ูุชุจุณูุท ุงูุทุฑู ุงูุฃูุณุฑ.</p><div class='text-right space-y-2'><p>ุงููุนุงุฏูุฉ: <span class='math-eq'>ูฃ(ูขุจ - ูก) - ูฅ = ูฆุจ - ูจ</span></p><p>ููู ุงูููุณ: <span class='math-eq'>ูฆุจ - ูฃ - ูฅ = ูฆุจ - ูจ</span></p><p>ูุจุณุท ุงูุทุฑู ุงูุฃูุณุฑ: <span class='math-eq'>ูฆุจ - ูจ = ูฆุจ - ูจ</span></p><p class='mt-2 p-2 bg-green-100 rounded-md'>ุจูุง ุฃู ุงูุทุฑููู ูุชุทุงุจูุงูุ ูุงููุนุงุฏูุฉ ุตุญูุญุฉ ูุฃู ูููุฉ ูููุชุบูุฑ ุจ. ูุฐู ุงููุนุงุฏูุฉ ูู ูุชุทุงุจูุฉ.</p></div>`,
              smartExplanation: `<p>ุจูุฌุฑุฏ ูู ุงูููุณ ูู ุงูุทุฑู ุงูุฃูุณุฑ (<span class='math-eq'>ูฆุจ - ูฃ</span>) ุซู ุทุฑุญ ูฅุ ูุฌุฏ ุฃูู ูุตุจุญ <span class='math-eq'>ูฆุจ - ูจ</span>ุ ููู ูุทุงุจู ุชูุงูุงู ููุทุฑู ุงูุฃููู. ูุฐุง ูุนูู ุฃููุง ูุชุทุงุจูุฉ ูุญููุง ุฌููุน ุงูุฃุนุฏุงุฏ ุงูุญููููุฉ.</p>`
            },
            { type: 'mcq', level: 'โญ', topic: 'simple-negatives', text: 'ุญู ุงููุนุงุฏูุฉ: <span class="math-eq">ูฃ - ูคุณ = ูกูจ + ุณ</span>', 
              options: [ { display: '<span class="math-eq">-ูฃ</span>', value: '-3' }, { display: '<span class="math-eq">ูฃ</span>', value: '3' }, { display: '<span class="math-eq">-ูฅ</span>', value: '-5' }, { display: '<span class="math-eq">ูง</span>', value: '7' } ], 
              correct: '-3', 
              explanation: `<p class='mb-2'>ูุฌูุน ุงููุชุบูุฑุงุช ูู ุทุฑู ูุงูุซูุงุจุช ูู ุงูุทุฑู ุงูุขุฎุฑ.</p><div class='text-right space-y-2'><p>ูุถูู ูคุณ ููุทุฑููู: <span class='math-eq'>ูฃ - ูคุณ <span class='highlight-change'>+ ูคุณ</span> = ูกูจ + ุณ <span class='highlight-change'>+ ูคุณ</span></span></p><p>ูุจุณุท: <span class='math-eq'>ูฃ = ูกูจ + ูฅุณ</span></p><p>ูุทุฑุญ ูกูจ ูู ุงูุทุฑููู: <span class='math-eq'>ูฃ <span class='highlight-change'>- ูกูจ</span> = ูกูจ + ูฅุณ <span class='highlight-change'>- ูกูจ</span></span></p><p>ูุจุณุท: <span class='math-eq'>-ูกูฅ = ูฅุณ</span></p><p>ููุณู ุนูู ูฅ: <span class='math-eq'>-ูฃ = ุณ</span></p></div>` 
            },
            { type: 'mcq', level: 'โญโญ', topic: 'parentheses-negatives', text: 'ุญู ุงููุนุงุฏูุฉ: <span class="math-eq">ูข(ุต - ูฆ) = ูฃ(ุต - ูค)</span>', 
              options: [ { display: '<span class="math-eq">ุต = ู</span>', value: '0' }, { display: '<span class="math-eq">ุต = ูขูค</span>', value: '24' }, { display: '<span class="math-eq">ุต = -ูขูค</span>', value: '-24' }, { display: '<span class="math-eq">ุต = ูค</span>', value: '4' } ], 
              correct: '0', 
              explanation: `<p class='mb-2'>ูุจุฏุฃ ุจูู ุงูุฃููุงุณ.</p><div class='text-right space-y-2'><p>ุงููุนุงุฏูุฉ: <span class='math-eq'>ูขุต - ูกูข = ูฃุต - ูกูข</span></p><p>ูุทุฑุญ ูขุต ูู ุงูุทุฑููู: <span class='math-eq'>-ูกูข = ุต - ูกูข</span></p><p>ูุถูู ูกูข ููุทุฑููู: <span class='math-eq'>-ูกูข <span class='highlight-change'>+ ูกูข</span> = ุต - ูกูข <span class='highlight-change'>+ ูกูข</span></span></p><p>ุงูุญู: <span class='math-eq'>ู = ุต</span></p></div>`,
              smartExplanation: `<p>ุจูุฌุฑุฏ ูู ุงูุฃููุงุณ ูุฌุฏ <span class='math-eq'>ูขุต - ูกูข = ูฃุต - ูกูข</span>. ุจูุง ุฃู <span class='math-eq'>-ูกูข</span> ููุฌูุฏ ูู ุงูุทุฑูููุ ูููู ุญุฐูููุงุ ููุชุจูู <span class='math-eq'>ูขุต = ูฃุต</span>. ูุฐุง ูุง ูุชุญูู ุฅูุง ุฅุฐุง ูุงูุช <span class='math-eq'>ุต = ู</span>.</p>`
            },
            { type: 'mcq', level: 'โญโญโญ', topic: 'geometry-perimeter', text: 'ูุณุชุทูู ููุฑุจุน ูููุง ููุณ ุงููุญูุท. ุทูู ุงููุณุชุทูู ูกู ุณู ูุนุฑุถู (ุณ) ุณู. ุทูู ุถูุน ุงููุฑุจุน (ุณ+ูข) ุณู. ูุง ูููุฉ ุณุ', 
              options: [ { display: '<span class="math-eq">ุณ = ูฆ</span>', value: '6' }, { display: '<span class="math-eq">ุณ = ูค</span>', value: '4' }, { display: '<span class="math-eq">ุณ = ูจ</span>', value: '8' }, { display: '<span class="math-eq">ุณ = ูกูข</span>', value: '12' } ], 
              correct: '6', 
              explanation: `<p class='mb-2'>ูุญูุท ุงููุณุชุทูู = ูข(ุงูุทูู + ุงูุนุฑุถ). ูุญูุท ุงููุฑุจุน = ูค ร ุทูู ุงูุถูุน.</p><div class='text-right space-y-2'><p>ูุญูุท ุงููุณุชุทูู: <span class='math-eq'>ูข(ูกู + ุณ)</span></p><p>ูุญูุท ุงููุฑุจุน: <span class='math-eq'>ูค(ุณ + ูข)</span></p><p>ุงููุนุงุฏูุฉ: <span class='math-eq'>ูข(ูกู + ุณ) = ูค(ุณ + ูข)</span></p><p>ููู ุงูุฃููุงุณ: <span class='math-eq'>ูขู + ูขุณ = ูคุณ + ูจ</span></p><p>ูุทุฑุญ ูขุณ: <span class='math-eq'>ูขู = ูขุณ + ูจ</span></p><p>ูุทุฑุญ ูจ: <span class='math-eq'>ูกูข = ูขุณ</span></p><p>ููุณู ุนูู ูข: <span class='math-eq'>ูฆ = ุณ</span></p></div>` 
            },
            { type: 'mcq', level: 'โญโญ', topic: 'decimals-2', text: 'ุญู ุงููุนุงุฏูุฉ: <span class="math-eq">ูก.ูฅู + ูฉ = ูฃู</span>', 
              options: [ { display: '<span class="math-eq">ู = ูฆ</span>', value: '6' }, { display: '<span class="math-eq">ู = ูฃ</span>', value: '3' }, { display: '<span class="math-eq">ู = -ูฆ</span>', value: '-6' }, { display: '<span class="math-eq">ู = ูค.ูฅ</span>', value: '4.5' } ], 
              correct: '6', 
              explanation: `<p class='mb-2'>ูุฌูุน ุงููุชุบูุฑุงุช ูู ุทุฑู.</p><div class='text-right space-y-2'><p>ูุทุฑุญ ูก.ูฅู ูู ุงูุทุฑููู: <span class='math-eq'>ูก.ูฅู <span class='highlight-change'>- ูก.ูฅู</span> + ูฉ = ูฃู <span class='highlight-change'>- ูก.ูฅู</span></span></p><p>ูุจุณุท: <span class='math-eq'>ูฉ = ูก.ูฅู</span></p><p>ููุณู ุงูุทุฑููู ุนูู ูก.ูฅ: <span class='math-eq flex justify-center items-center'><span class="fraction"><span>ูฉ</span><span class="frac-bar"></span><span>ูก.ูฅ</span></span> = <span class="fraction"><span>ูก.ูฅู</span><span class="frac-bar"></span><span>ูก.ูฅ</span></span></span></p><p>ุงูุญู: <span class='math-eq'>ูฆ = ู</span></p></div>`,
              smartExplanation: `<p>ุฐูููุงูุ ุฅุฐุง ููููุง <span class='math-eq'>ูก.ูฅู</span> ููุทุฑู ุงูุขุฎุฑุ ุณูุชุจูู <span class='math-eq'>ูก.ูฅู</span>. ุงููุนุงุฏูุฉ ุชุตุจุญ: ูุง ูู ุงูุนุฏุฏ ุงูุฐู ุฅุฐุง ุถุฑุจ ูู ูก.ูฅ ูุนุทู ูฉุ ุงูุฌูุงุจ ูู ูฆ.</p>`
            }
        ];
        const shuffled = [...questionBank].sort(() => 0.5 - Math.random()); 
        const questionCount = Math.min(shuffled.length, 5); 
        return shuffled.slice(0, questionCount); 
    }

    document.addEventListener('DOMContentLoaded', () => {
        const exampleContainers = document.querySelectorAll('[id^="interactive-container-"]');
        const state = {};
        exampleContainers.forEach(container => {
            const exampleId = container.id.split('-')[2];
            state[exampleId] = { currentIndex: -1, steps: container.querySelectorAll('.step-interactive'), placeholder: container.querySelector('.interactive-placeholder'), prevBtn: container.querySelector('.prev-btn'), nextBtn: container.querySelector('.next-btn'), resetBtn: container.querySelector('.reset-btn') };
            const resetExample = () => { state[exampleId].steps.forEach(step => step.classList.remove('active')); state[exampleId].currentIndex = -1; if (state[exampleId].placeholder) { state[exampleId].placeholder.classList.remove('hidden'); } updateButtons(); };
            const updateButtons = () => { const isFirstStep = state[exampleId].currentIndex <= -1; const isLastStep = state[exampleId].currentIndex >= state[exampleId].steps.length - 1; state[exampleId].prevBtn.disabled = isFirstStep; if (isLastStep) { state[exampleId].nextBtn.classList.add('hidden'); state[exampleId].resetBtn.classList.remove('hidden'); } else { state[exampleId].nextBtn.classList.remove('hidden'); state[exampleId].resetBtn.classList.add('hidden'); } };
            
            state[exampleId].nextBtn.addEventListener('click', () => {
                if (state[exampleId].currentIndex < state[exampleId].steps.length - 1) {
                    if (state[exampleId].currentIndex === -1 && state[exampleId].placeholder) {
                        state[exampleId].placeholder.classList.add('hidden');
                    }
                    state[exampleId].currentIndex++;
                    state[exampleId].steps[state[exampleId].currentIndex].classList.add('active');
                    updateButtons();
                }
            });
            state[exampleId].prevBtn.addEventListener('click', () => {
                if (state[exampleId].currentIndex > -1) {
                    state[exampleId].steps[state[exampleId].currentIndex].classList.remove('active');
                    state[exampleId].currentIndex--;
                     if (state[exampleId].currentIndex === -1 && state[exampleId].placeholder) {
                        state[exampleId].placeholder.classList.remove('hidden');
                    }
                    updateButtons();
                }
            });

            if(state[exampleId].resetBtn) { state[exampleId].resetBtn.addEventListener('click', resetExample); }
            updateButtons();
        });

        const student = getStudentFromStorage();
        const lessonTitleElement = document.getElementById('lesson-title');
        const lessonTitle = lessonTitleElement ? lessonTitleElement.textContent : null;
        buildHeader(student, lessonTitle);
        buildFooter();
        const questions = generateQuiz();
        initializeQuiz(LESSON_ID, questions, student);
        const retakeBtn = document.getElementById('retake-quiz-btn');
        if(retakeBtn) { retakeBtn.addEventListener('click', () => { window.location.reload(); }); }
        const closeModalBtn = document.getElementById('closeModalBtn');
        if(closeModalBtn) { closeModalBtn.addEventListener('click', closeModal); }
    });
    </script>
</body>
</html>
