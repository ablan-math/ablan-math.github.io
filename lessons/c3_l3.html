<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงูุฏุฑุณ ูฃ-ูฃ: ูุชุงุจุฉ ุงููุนุงุฏูุงุช ุจุตูุบุฉ ุงูููู ูููุทุฉ | ููุตุฉ ุงูุฑูุงุถูุงุช ุงูุชูุงุนููุฉ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; }
        .hidden { display: none; }
        .step-box { border-right: 4px solid #1d4ed8; }
        .vocab-term { background-color: #ffefc5; padding: 2px 6px; border-radius: 4px; font-weight: bold; }
        .option-label { display: block; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; cursor: pointer; transition: all 0.2s ease-in-out; }
        .option-label:hover { border-color: #3b82f6; background-color: #eff6ff; }
        input[type="radio"]:checked + .option-label { border-color: #2563eb; background-color: #dbeafe; box-shadow: 0 0 0 2px #bfdbfe; }
        input[type="radio"] { display: none; }
        .feedback-correct { color: #16a34a; }
        .feedback-incorrect { color: #dc2626; }
        .highlight-change { color: #ef4444; font-weight: bold; }
        .math-eq { font-family: "Courier New", monospace; font-size: 1.1rem; font-weight: bold; color: #4338ca; background-color: #f3f4f6; border: 1px solid #d1d5db; padding: 2px 8px; border-radius: 6px; display: inline-block; vertical-align: middle; }
        .fraction { display: inline-flex; flex-direction: column; text-align: center; vertical-align: middle; margin: 0 0.2em; }
        .fraction > span { display: block; padding: 0 0.4em; }
        .fraction > .frac-bar { border-top: 2px solid #4338ca; }
        .explanation-step { padding-right: 12px; margin-bottom: 1rem; border-right: 3px solid #1d4ed8; transition: opacity 0.5s ease-in-out; }
        .explanation-step:last-child { margin-bottom: 0; }
        .nav-btn:disabled { background-color: #9ca3af; cursor: not-allowed; }
        .highlight-val { color: #c026d3; font-weight: 700; } /* Style for highlighted numbers */
    </style>
</head>
<body class="bg-gray-100">
    <div id="app-container" class="grid grid-template-rows: auto 1fr auto; min-height: 100vh;">
        <header id="main-header" class="bg-white shadow-md sticky top-0 z-50"></header>
        <main class="container mx-auto max-w-4xl my-8">
            <div class="p-6 bg-white rounded-xl shadow-lg">
                <header class="flex justify-between items-center mb-8 border-b pb-4 border-gray-200">
                    <h1 id="lesson-title" class="text-3xl font-bold text-blue-800">ุงูุฏุฑุณ ูฃ-ูฃ: ูุชุงุจุฉ ุงููุนุงุฏูุงุช ุจุตูุบุฉ ุงูููู ูููุทุฉ</h1>
                    <a href="../index.html" target="_top" class="text-sm text-blue-600 hover:underline">&larr; ุงูุนูุฏุฉ ุฅูู ุงูููุฑุณ</a>
                </header>
                <section class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">๐ก ุฃููุงู: ุงูููููู ุงูุฃุณุงุณู</h2>
                    <div class="p-6 bg-blue-50 rounded-lg space-y-6">
                        <div>
                            <h3 class="text-xl font-semibold text-blue-700 mb-2">ุตูุบุฉ ุงูููู ูููุทุฉ</h3>
                            <p>ุชูุณุชุฎุฏู <span class="vocab-term">ุตูุบุฉ ุงูููู ูููุทุฉ</span> ููุชุงุจุฉ ูุนุงุฏูุฉ ุฎุท ูุณุชููู ุฅุฐุง ุนููู ูููู (ู) ูุฅุญุฏุงุซูุงุช ููุทุฉ ููุฑ ุจูุง (ุณโุ ุตโ).</p>
                            <div class="mt-4 p-4 bg-white rounded-lg border">
                                 <p class="text-center my-2 p-3 bg-indigo-50 rounded-md text-xl math-eq">ุต - ุตโ = ู (ุณ - ุณโ)</p>
                            </div>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-blue-700 mb-2">ุงูุตูุฑุฉ ุงูููุงุณูุฉ ูููุนุงุฏูุฉ ุงูุฎุทูุฉ</h3>
                            <p>ูููู ุฅุนุงุฏุฉ ูุชุงุจุฉ ุฃู ูุนุงุฏูุฉ ุฎุทูุฉ ุนูู <span class="vocab-term">ุงูุตูุฑุฉ ุงูููุงุณูุฉ</span>. ููู ูููุฏุฉ ูุชุญุฏูุฏ ุชูุงุทุนุงุช ุงููุญุงูุฑ ุจุณูููุฉ.</p>
                             <div class="mt-4 p-4 bg-white rounded-lg border space-y-2">
                                 <p class="text-center my-2 p-3 bg-indigo-50 rounded-md text-xl math-eq">ุฃ ุณ + ุจ ุต = ุฌ</p>
                                 <p class="text-sm text-gray-600">ุญูุซ ุฃุ ุจุ ุฌ ุฃุนุฏุงุฏ ุตุญูุญุฉุ ุฃ โฅ ูุ ู ุฃุ ุจ ููุณุง ูุนูุง ุตูุฑูุง.</p>
                             </div>
                        </div>
                         <div>
                            <h3 class="text-xl font-semibold text-blue-700 mb-2">ุงูุชุญููู ุจูู ุงูุตูุบ</h3>
                            <p>ููููู ุงูุชุญููู ูู ุตูุบุฉ ุงูููู ูููุทุฉ ุฅูู ุตูุบ ุฃุฎุฑู ูุซู ุตูุบุฉ ุงูููู ูุงูููุทุน (ุงูุฏุฑุณ ุงูุณุงุจู) ุฃู ุงูุตูุฑุฉ ุงูููุงุณูุฉ ุนู ุทุฑูู ุงูุชุจุณูุท ุงูุฌุจุฑู.</p>
                        </div>
                    </div>
                </section>
                <section class="mb-12">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">๐ฏ ุซุงููุงู: ุฃูุซูุฉ ุชูุงุนููุฉ</h2>
                    <div class="p-6 bg-gray-50 rounded-lg">
                        <!-- ุงูููุน ุงูุฃูู: ูุชุงุจุฉ ุงููุนุงุฏูุฉ ุจุตูุบุฉ ุงูููู ูููุทุฉ -->
                        <div class="p-6 bg-white rounded-lg space-y-4 mb-8 shadow">
                            <h3 class="text-xl font-bold text-gray-700 mb-4 border-b pb-2">ุงูููุน ุงูุฃูู: ูุชุงุจุฉ ุงููุนุงุฏูุฉ ุจุตูุบุฉ ุงูููู ูููุทุฉ</h3>
                            <div class="flex flex-col md:flex-row gap-6">
                                <div class="flex-1">
                                    <p class="mb-2"><b>ูุซุงู ูก (ุฃ):</b> ุงูุชุจ ูุนุงุฏูุฉ ุงููุณุชููู ุงูุฐู ูููู ูง ูููุฑ ุจุงูููุทุฉ (-ูฃุ ูฅ).</p>
                                    <div class="border p-4 rounded-lg bg-white h-full flex flex-col">
                                        <div class="bg-gray-100 p-4 rounded-lg border flex-grow min-h-[150px]">
                                            <div id="interactive-explanation-1a" class="text-right"></div>
                                        </div>
                                        <div class="mt-4 flex justify-between items-center">
                                            <button id="interactive-back-1a" class="nav-btn bg-gray-500 text-white font-medium py-2 px-4 rounded-lg hover:bg-gray-600 text-sm">ุฑุฌูุน</button>
                                            <span class="text-sm font-bold text-gray-600">ุงูุฎุทูุฉ <span id="interactive-step-counter-1a">0</span> / 2</span>
                                            <button id="interactive-next-1a" class="nav-btn bg-indigo-600 text-white font-medium py-2 px-4 rounded-lg hover:bg-indigo-700 text-sm">ุงูุชุงูู</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex-1">
                                    <p class="mb-2"><b>ูุซุงู ูก (ุจ):</b> ุงูุชุจ ูุนุงุฏูุฉ ุงููุณุชููู ุงูุฐู ูููู <span class="math-eq">-<span class="fraction"><span>ูก</span><span class="frac-bar"></span><span>ูฃ</span></span></span> ูููุฑ ุจุงูููุทุฉ (ูุ -ูข).</p>
                                    <div class="border p-4 rounded-lg bg-white h-full flex flex-col">
                                        <div class="bg-gray-100 p-4 rounded-lg border flex-grow min-h-[150px]">
                                            <div id="interactive-explanation-1b" class="text-right"></div>
                                        </div>
                                        <div class="mt-4 flex justify-between items-center">
                                            <button id="interactive-back-1b" class="nav-btn bg-gray-500 text-white font-medium py-2 px-4 rounded-lg hover:bg-gray-600 text-sm">ุฑุฌูุน</button>
                                            <span class="text-sm font-bold text-gray-600">ุงูุฎุทูุฉ <span id="interactive-step-counter-1b">0</span> / 2</span>
                                            <button id="interactive-next-1b" class="nav-btn bg-indigo-600 text-white font-medium py-2 px-4 rounded-lg hover:bg-indigo-700 text-sm">ุงูุชุงูู</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- ุงูููุน ุงูุซุงูู: ุงูุชุญููู ุฅูู ุงูุตูุฑุฉ ุงูููุงุณูุฉ -->
                        <div class="p-6 bg-white rounded-lg space-y-4 mb-8 shadow">
                            <h3 class="text-xl font-bold text-gray-700 mb-4 border-b pb-2">ุงูููุน ุงูุซุงูู: ุงูุชุญููู ุฅูู ุงูุตูุฑุฉ ุงูููุงุณูุฉ</h3>
                            <div class="flex flex-col md:flex-row gap-6">
                                <div class="flex-1">
                                    <p class="mb-2"><b>ูุซุงู ูข (ุฃ):</b> ุงูุชุจ ุงููุนุงุฏูุฉ <span class="math-eq">ุต - ูกู = ูข(ุณ - ูจ)</span> ุจุงูุตูุฑุฉ ุงูููุงุณูุฉ.</p>
                                    <div class="border p-4 rounded-lg bg-white h-full flex flex-col">
                                        <div class="bg-gray-100 p-4 rounded-lg border flex-grow min-h-[200px]">
                                            <div id="interactive-explanation-2a" class="text-right"></div>
                                        </div>
                                        <div class="mt-4 flex justify-between items-center">
                                            <button id="interactive-back-2a" class="nav-btn bg-gray-500 text-white font-medium py-2 px-4 rounded-lg hover:bg-gray-600 text-sm">ุฑุฌูุน</button>
                                            <span class="text-sm font-bold text-gray-600">ุงูุฎุทูุฉ <span id="interactive-step-counter-2a">0</span> / 3</span>
                                            <button id="interactive-next-2a" class="nav-btn bg-indigo-600 text-white font-medium py-2 px-4 rounded-lg hover:bg-indigo-700 text-sm">ุงูุชุงูู</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex-1">
                                    <p class="mb-2"><b>ูุซุงู ูข (ุจ):</b> ุงูุชุจ ุงููุนุงุฏูุฉ <span class="math-eq">ุต - ูฆ = -ูฃ(ุณ + ูข)</span> ุจุงูุตูุฑุฉ ุงูููุงุณูุฉ.</p>
                                    <div class="border p-4 rounded-lg bg-white h-full flex flex-col">
                                        <div class="bg-gray-100 p-4 rounded-lg border flex-grow min-h-[200px]">
                                            <div id="interactive-explanation-2b" class="text-right"></div>
                                        </div>
                                        <div class="mt-4 flex justify-between items-center">
                                            <button id="interactive-back-2b" class="nav-btn bg-gray-500 text-white font-medium py-2 px-4 rounded-lg hover:bg-gray-600 text-sm">ุฑุฌูุน</button>
                                            <span class="text-sm font-bold text-gray-600">ุงูุฎุทูุฉ <span id="interactive-step-counter-2b">0</span> / 2</span>
                                            <button id="interactive-next-2b" class="nav-btn bg-indigo-600 text-white font-medium py-2 px-4 rounded-lg hover:bg-indigo-700 text-sm">ุงูุชุงูู</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- ุงูููุน ุงูุซุงูุซ: ุงูุชุญููู ุฅูู ุตูุบุฉ ุงูููู ูุงูููุทุน -->
                        <div class="p-6 bg-white rounded-lg space-y-4 shadow">
                            <h3 class="text-xl font-bold text-gray-700 mb-4 border-b pb-2">ุงูููุน ุงูุซุงูุซ: ุงูุชุญููู ุฅูู ุตูุบุฉ ุงูููู ูุงูููุทุน</h3>
                            <div class="flex flex-col md:flex-row gap-6">
                                <div class="flex-1">
                                    <p class="mb-2"><b>ูุซุงู ูฃ (ุฃ):</b> ุงูุชุจ ุงููุนุงุฏูุฉ <span class="math-eq">ุต - ูฆ = -ูข(ุณ - ูง)</span> ุจุตูุบุฉ ุงูููู ูุงูููุทุน.</p>
                                    <div class="border p-4 rounded-lg bg-white h-full">
                                        <div class="bg-gray-100 p-4 rounded-lg border min-h-[150px]">
                                            <div id="interactive-explanation-3a" class="text-right"></div>
                                        </div>
                                        <div class="mt-4 flex justify-between items-center">
                                            <button id="interactive-back-3a" class="nav-btn bg-gray-500 text-white font-medium py-2 px-4 rounded-lg hover:bg-gray-600 text-sm">ุฑุฌูุน</button>
                                            <span class="text-sm font-bold text-gray-600">ุงูุฎุทูุฉ <span id="interactive-step-counter-3a">0</span> / 3</span>
                                            <button id="interactive-next-3a" class="nav-btn bg-indigo-600 text-white font-medium py-2 px-4 rounded-lg hover:bg-indigo-700 text-sm">ุงูุชุงูู</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex-1">
                                    <p class="mb-2"><b>ูุซุงู ูฃ (ุจ):</b> ุงูุชุจ ุงููุนุงุฏูุฉ <span class="math-eq">ูฃุต + ูฅ = ูข(ุณ + ูง)</span> ุจุตูุบุฉ ุงูููู ูุงูููุทุน.</p>
                                    <div class="border p-4 rounded-lg bg-white h-full">
                                        <div class="bg-gray-100 p-4 rounded-lg border min-h-[150px]">
                                            <div id="interactive-explanation-3b" class="text-right"></div>
                                        </div>
                                        <div class="mt-4 flex justify-between items-center">
                                            <button id="interactive-back-3b" class="nav-btn bg-gray-500 text-white font-medium py-2 px-4 rounded-lg hover:bg-gray-600 text-sm">ุฑุฌูุน</button>
                                            <span class="text-sm font-bold text-gray-600">ุงูุฎุทูุฉ <span id="interactive-step-counter-3b">0</span> / 4</span>
                                            <button id="interactive-next-3b" class="nav-btn bg-indigo-600 text-white font-medium py-2 px-4 rounded-lg hover:bg-indigo-700 text-sm">ุงูุชุงูู</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <section class="mt-12">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-2xl font-bold text-gray-800">โ๏ธ ุฑุงุจุนุงู: ุญุงู ุฏูุฑู! ุงุฎุชุจุฑ ูููู</h2>
                        <div id="attempts-counter" class="text-sm font-bold text-gray-600"></div>
                    </div>
                    <form id="quizForm" class="p-6 bg-gray-50 rounded-lg space-y-8"></form>
                    <div id="quiz-results" class="hidden mt-6 p-4 rounded-lg text-center">
                        <h3 class="text-xl font-bold">ูุชูุฌุชู ุงูููุงุฆูุฉ</h3>
                        <p id="quiz-score" class="text-4xl font-bold my-2"></p>
                        <div id="save-status" class="mt-4 text-sm font-semibold"></div>
                        <button id="retake-quiz-btn" class="hidden mt-4 bg-blue-600 text-white font-medium py-2 px-6 rounded-lg hover:bg-blue-700">ุฅุนุงุฏุฉ ุงูุงุฎุชุจุงุฑ</button>
                    </div>
                </section>
            </div>
        </main>
        <footer id="main-footer" class="bg-gray-200 py-4"></footer>
    </div>
    <div id="explanationModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-white rounded-lg shadow-2xl p-6 max-w-lg w-full">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold">๐ก ุดุฑุญ ุงูุฅุฌุงุจุฉ</h3>
                <button id="closeModalBtn" class="p-2 -m-2 rounded-full hover:bg-gray-200">
                    <svg class="h-6 w-6 text-gray-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
            </div>
            <div id="explanationText" class="text-gray-700 max-h-[60vh] overflow-y-auto"></div>
        </div>
    </div>
    <div id="smartExplanationModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-white rounded-lg shadow-2xl p-6 max-w-lg w-full border-t-4 border-purple-500">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-purple-800">๐ง ุงูุญู ุงูุฐูู</h3>
                <button id="closeSmartModalBtn" class="p-2 -m-2 rounded-full hover:bg-gray-200">
                    <svg class="h-6 w-6 text-gray-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
            </div>
            <div id="smartExplanationText" class="text-gray-700 max-h-[60vh] overflow-y-auto"></div>
        </div>
    </div>
    <script>
    // --- START: NEW TEMPLATE SCRIPT ---
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzrf1-At3Pq7i39bGV3F1iD3-b0G-WWyRi5cgpKeQjyn_N5fh2EmGhoyRKUsbLd-F_UJQ/exec";
    const MAX_ATTEMPTS = 3;
    let currentQuestions = []; 
    function getStudentFromStorage() { const studentDataString = localStorage.getItem('currentStudent'); if (studentDataString) { try { return JSON.parse(studentDataString); } catch (e) { return null; } } return null; }
    function buildHeader(studentData, lessonTitle = null) { const headerContainer = document.getElementById('main-header'); if (!headerContainer) return; let titleHtml; if (lessonTitle) { titleHtml = `<div><h2 class="text-sm text-gray-500 leading-tight">ููุตุฉ ุงูุฑูุงุถูุงุช ุงูุชูุงุนููุฉ</h2><h1 class="text-xl font-bold text-indigo-700 leading-tight">${lessonTitle}</h1></div>`; } else { titleHtml = `<a href="../index.html" target="_top"><h1 class="text-2xl font-bold text-blue-800">ููุตุฉ ุงูุฑูุงุถูุงุช ุงูุชูุงุนููุฉ</h1></a>`; } let userInfoHtml = ''; if (studentData) { userInfoHtml = `<div class="flex items-center gap-4"><span class="font-semibold">ุฃููุงูุ ${studentData.name}</span><a href="../index.html" target="_top" id="logout-link" class="bg-red-500 text-white py-1 px-3 rounded-lg hover:bg-red-600">ุฎุฑูุฌ</a></div>`; } else { userInfoHtml = `<p class="text-lg text-gray-600">ุฒุงุฆุฑ</p>`; } headerContainer.innerHTML = `<div class="container mx-auto px-6 py-4 flex justify-between items-center">${titleHtml}${userInfoHtml}</div>`; const logoutLink = headerContainer.querySelector('#logout-link'); if(logoutLink) { logoutLink.addEventListener('click', () => { localStorage.removeItem('currentStudent'); }); } }
    function buildFooter() { const footerContainer = document.getElementById('main-footer'); if (!footerContainer) return; footerContainer.innerHTML = `<div class="container mx-auto px-6"><p class="text-center text-gray-600 text-sm">ยฉ 2024 ุฌููุน ุงูุญููู ูุญููุธุฉ | ุชุตููู ูุชุทููุฑ: ุฃ. ุนุจุฏุงูุนุฒูุฒ ุฎุงูุฏ ุงูุนุจูุงู</p></div>`; }
    function initializeQuiz(lessonId, questions, studentData) { currentQuestions = questions; const quizForm = document.getElementById('quizForm'); if (!quizForm) return; if (questions.length === 0) { quizForm.innerHTML = `<p class="text-center text-gray-600">ูุง ุชูุฌุฏ ุฃุณุฆูุฉ ูุชุงุญุฉ ููุฐุง ุงูุฏุฑุณ ุญุงููุงู.</p>`; return; } let attemptsLeft; if (studentData) { const studentLessonData = studentData.lessons?.[lessonId] || { attempts: 0 }; attemptsLeft = MAX_ATTEMPTS - studentLessonData.attempts; } else { attemptsLeft = 1; } const attemptsCounter = document.getElementById('attempts-counter'); if (attemptsCounter) { attemptsCounter.innerHTML = `ุงููุญุงููุงุช ุงููุชุจููุฉ: <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full">${attemptsLeft}</span>`; } const quizHtml = questions.map((q, index) => { const optionsHTML = q.options.map((opt, optIndex) => `<div><input type="radio" name="q${index}" value="${opt.value}" id="q${index}_opt${optIndex}" class="hidden"><label for="q${index}_opt${optIndex}" class="option-label">${opt.display}</label></div>`).join(''); const smartButtonHTML = q.smartExplanation ? `<button type="button" id="smart-explain-btn-${index}" class="hidden mt-2 text-xs text-purple-600 hover:underline font-semibold">๐ง ุงูุญู ุงูุฐูู</button>` : ''; return `<div class="p-4 border-2 border-gray-200 rounded-lg"><p class="font-bold">${index + 1}. <span class="text-yellow-500">${q.level}</span> ${q.text}</p><div class="grid grid-cols-1 sm:grid-cols-2 gap-3 mt-3">${optionsHTML}</div><div id="feedback-q${index}" class="mt-2 text-sm font-bold"></div><div class="flex items-center space-x-4 space-x-reverse">${smartButtonHTML}<button type="button" id="explain-btn-${index}" class="hidden mt-2 text-xs text-blue-600 hover:underline">ุงุนุฑู ููุงุฐุงุ</button></div></div>`; }).join(''); quizForm.innerHTML = quizHtml + `<button type="submit" id="submit-quiz-btn" class="w-full text-white bg-green-600 hover:bg-green-700 font-medium rounded-lg text-lg px-5 py-3 mt-8">ุชุญูู ูู ุฅุฌุงุจุงุชู</button>`; questions.forEach((q, index) => { const explainBtn = document.getElementById(`explain-btn-${index}`); if(explainBtn) explainBtn.addEventListener('click', () => showExplanation(index)); if (q.smartExplanation) { const smartExplainBtn = document.getElementById(`smart-explain-btn-${index}`); if(smartExplainBtn) smartExplainBtn.addEventListener('click', () => showSmartExplanation(index)); } }); if (attemptsLeft <= 0) { const submitBtn = quizForm.querySelector('#submit-quiz-btn'); submitBtn.disabled = true; submitBtn.textContent = 'ูุง ุชูุฌุฏ ูุญุงููุงุช ูุชุจููุฉ'; submitBtn.classList.add('bg-gray-400', 'hover:bg-gray-400'); } quizForm.onsubmit = (e) => { e.preventDefault(); let score = 0; questions.forEach((q, index) => { const userAnswer = e.target.elements[`q${index}`]?.value; const feedbackEl = document.getElementById(`feedback-q${index}`); if (userAnswer === q.correct) { score++; feedbackEl.textContent = 'โ ุฅุฌุงุจุฉ ุตุญูุญุฉ!'; feedbackEl.className = 'mt-2 text-sm font-bold text-green-600'; } else { feedbackEl.textContent = `โ ุฅุฌุงุจุฉ ุฎุงุทุฆุฉ.`; feedbackEl.className = 'mt-2 text-sm font-bold text-red-600'; } document.getElementById(`explain-btn-${index}`).classList.remove('hidden'); if (q.smartExplanation) { document.getElementById(`smart-explain-btn-${index}`).classList.remove('hidden'); } }); const finalGrade = Math.round((score / questions.length) * 10); const resultsDiv = document.getElementById('quiz-results'); resultsDiv.classList.remove('hidden'); document.getElementById('quiz-score').textContent = `${finalGrade} / 10`; if (studentData) { saveGrade(lessonId, finalGrade, studentData.id); if (attemptsLeft - 1 > 0) { document.getElementById('retake-quiz-btn').classList.remove('hidden'); } } else { document.getElementById('save-status').textContent = 'ุชู ุนุฑุถ ูุชูุฌุชู. ุณุฌู ุงูุฏุฎูู ูุญูุธ ุชูุฏูู.'; } e.target.querySelector('#submit-quiz-btn').disabled = true; }; }
    function saveGrade(lessonId, grade, studentId) { if (!studentId) return; const saveStatus = document.getElementById('save-status'); saveStatus.textContent = 'ุฌุงุฑู ุญูุธ ูุชูุฌุชู...'; const url = `${SCRIPT_URL}?action=saveGrade&studentId=${studentId}&lessonId=${lessonId}&grade=${grade}`; fetch(url) .then(res => res.json()) .then(result => { if (result.status === 'success') { saveStatus.textContent = 'โ ุชู ุญูุธ ูุชูุฌุชู ุจูุฌุงุญ! ุณุชุธูุฑ ูู ููุญุฉ ุงูุชุญูู ุนูุฏ ุงูุนูุฏุฉ.'; const studentData = JSON.parse(localStorage.getItem('currentStudent')); if (!studentData.lessons) studentData.lessons = {}; if (!studentData.lessons[lessonId] || studentData.lessons[lessonId].grade < grade) { studentData.lessons[lessonId] = { grade: grade, attempts: (studentData.lessons[lessonId]?.attempts || 0) + 1 }; } else { studentData.lessons[lessonId].attempts++; } localStorage.setItem('currentStudent', JSON.stringify(studentData)); } else { throw new Error(result.message); } }) .catch(error => { saveStatus.textContent = 'โ ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุญูุธ ุงูุฏุฑุฌุฉ.'; console.error("Save Grade Error:", error); }); }
    function showExplanation(questionIndex) { const modal = document.getElementById('explanationModal'); const explanationText = document.getElementById('explanationText'); if(modal && explanationText && currentQuestions[questionIndex] && currentQuestions[questionIndex].explanation) { explanationText.innerHTML = currentQuestions[questionIndex].explanation; modal.classList.remove('hidden'); } }
    function closeModal() { const modal = document.getElementById('explanationModal'); if(modal) modal.classList.add('hidden'); }
    function showSmartExplanation(questionIndex) { const modal = document.getElementById('smartExplanationModal'); const explanationText = document.getElementById('smartExplanationText'); if(modal && explanationText && currentQuestions[questionIndex] && currentQuestions[questionIndex].smartExplanation) { explanationText.innerHTML = currentQuestions[questionIndex].smartExplanation; modal.classList.remove('hidden'); } }
    function closeSmartModal() { const modal = document.getElementById('smartExplanationModal'); if(modal) modal.classList.add('hidden'); }
    // --- END: NEW TEMPLATE SCRIPT ---

    // --- START: OLD INTERACTIVE EXAMPLES SCRIPT (as requested) ---
    const configs = {
        "1a": {
            totalSteps: 2,
            introText: `ูุจุฏุฃ ุจุตูุบุฉ ุงูููู ูููุทุฉ: <br><span class='math-eq'>ุต - ุตโ = ู (ุณ - ุณโ)</span>.`,
            stepsContent: [
                { text: `<strong>1. ูุนูุถ ุจุงููุนุทูุงุช:</strong><br>ุงูููู <span class='math-eq'>ู = ูง</span>ุ ูุงูููุทุฉ (<span class="text-red-600">-ูฃ</span>ุ <span class="text-blue-600">ูฅ</span>).<br><span class='math-eq'>ุต - <span class="text-blue-600">ูฅ</span> = ูง(ุณ - (<span class="text-red-600">-ูฃ</span>))</span>` },
                { text: `<strong>2. ูุจุณุท ุงููุนุงุฏูุฉ:</strong><br>ุนูุฏ ุทุฑุญ ุนุฏุฏ ุณุงูุจุ ูุฅููุง ูุฌูุน.<br><div class='text-center mt-2 p-2 bg-green-100 rounded-md'><span class='math-eq'>ุต - ูฅ = ูง(ุณ + ูฃ)</span></div>` }
            ]
        },
        "1b": {
            totalSteps: 2,
            introText: `ูุจุฏุฃ ุจุตูุบุฉ ุงูููู ูููุทุฉ: <br><span class='math-eq'>ุต - ุตโ = ู (ุณ - ุณโ)</span>.`,
            stepsContent: [
                { text: `<strong>1. ูุนูุถ ุจุงููุนุทูุงุช:</strong><br>ุงูููู <span class='math-eq'>ู = -<span class="fraction"><span>ูก</span><span class="frac-bar"></span><span>ูฃ</span></span></span>ุ ูุงูููุทุฉ (<span class="text-red-600">ู</span>ุ <span class="text-blue-600">-ูข</span>).<br><span class='math-eq'>ุต - (<span class="text-blue-600">-ูข</span>) = -<span class="fraction"><span>ูก</span><span class="frac-bar"></span><span>ูฃ</span></span>(ุณ - <span class="text-red-600">ู</span>)</span>` },
                { text: `<strong>2. ูุจุณุท ุงููุนุงุฏูุฉ:</strong><br><div class='text-center mt-2 p-2 bg-green-100 rounded-md'><span class='math-eq'>ุต + ูข = -<span class="fraction"><span>ูก</span><span class="frac-bar"></span><span>ูฃ</span></span>ุณ</span></div>` }
            ]
        },
        "2a": {
            totalSteps: 3, 
            introText: `ุงููุนุงุฏูุฉ ุงูุฃุตููุฉ: <span class='math-eq'>ุต - ูกู = ูข(ุณ - ูจ)</span><br>ุงููุฏู ูู ุงููุตูู ููุตูุฑุฉ ุงูููุงุณูุฉ: <span class='math-eq'>ุฃ ุณ + ุจ ุต = ุฌ</span>.`,
            stepsContent: [
                { text: `<strong>ุงูุฎุทูุฉ 1: ูู ุงูุฃููุงุณ (ุฎุงุตูุฉ ุงูุชูุฒูุน)</strong><br><span class='math-eq'>ุต - ูกู = ูขุณ - ูกูฆ</span>` },
                { text: `<strong>ุงูุฎุทูุฉ 2: ูุฌูุน <span style='color: #4f46e5;'>ุงููุชุบูุฑุงุช</span> ู <span style='color: #db2777;'>ุงูุซูุงุจุช</span></strong><br>ูููู ุงููุชุบูุฑุงุช ุฅูู ุทุฑู ูุงูุซูุงุจุช ุฅูู ุงูุทุฑู ุงูุขุฎุฑ.<br><span class='math-eq'><span style='color: #4f46e5;'>-ูขุณ + ุต</span> = <span style='color: #db2777;'>-ูกูฆ + ูกู</span></span><br><span class='math-eq'>-ูขุณ + ุต = -ูฆ</span>` },
                { text: `<strong>ุงูุฎุทูุฉ 3: ูุฌุนู ูุนุงูู 'ุณ' ููุฌุจูุง</strong><br>ูุถุฑุจ ุงููุนุงุฏูุฉ ูููุง ูู -ูก.<br><div class="text-center mt-2 p-2 bg-green-100 rounded-md"><span class='math-eq'>ูขุณ - ุต = ูฆ</span></div>` }
            ]
        },
        "2b": {
            totalSteps: 2,
            introText: `ุงููุนุงุฏูุฉ ุงูุฃุตููุฉ: <span class='math-eq'>ุต - ูฆ = -ูฃ(ุณ + ูข)</span><br>ุงููุฏู ูู ุงููุตูู ููุตูุฑุฉ ุงูููุงุณูุฉ: <span class='math-eq'>ุฃ ุณ + ุจ ุต = ุฌ</span>.`,
            stepsContent: [
                { text: `<strong>ุงูุฎุทูุฉ 1: ูู ุงูุฃููุงุณ (ุฎุงุตูุฉ ุงูุชูุฒูุน)</strong><br><span class='math-eq'>ุต - ูฆ = -ูฃุณ - ูฆ</span>` },
                { text: `<strong>ุงูุฎุทูุฉ 2: ูุฌูุน <span style='color: #4f46e5;'>ุงููุชุบูุฑุงุช</span> ู <span style='color: #db2777;'>ุงูุซูุงุจุช</span></strong><br>ูููู ุงููุชุบูุฑุงุช ุฅูู ุทุฑู ูุงูุซูุงุจุช ุฅูู ุงูุทุฑู ุงูุขุฎุฑ.<br><span class='math-eq'><span style='color: #4f46e5;'>ูฃุณ + ุต</span> = <span style='color: #db2777;'>-ูฆ + ูฆ</span></span><br><div class="text-center mt-2 p-2 bg-green-100 rounded-md"><span class='math-eq'>ูฃุณ + ุต = ู</span></div>` }
            ]
        },
        "3a": {
            totalSteps: 3,
            introText: `ุงููุนุงุฏูุฉ ุงูุฃุตููุฉ: <span class='math-eq'>ุต - ูฆ = -ูข(ุณ - ูง)</span><br>ุงููุฏู ูู ุงููุตูู ูุตูุบุฉ ุงูููู ูุงูููุทุน: <span class='math-eq'>ุต = ู ุณ + ุจ</span>.`,
            stepsContent: [
                { text: `<strong>ุงูุฎุทูุฉ 1: ูู ุงูุฃููุงุณ (ุฎุงุตูุฉ ุงูุชูุฒูุน)</strong><br><span class='math-eq'>ุต - ูฆ = -ูขุณ + ูกูค</span>` },
                { text: `<strong>ุงูุฎุทูุฉ 2: ูุนุฒู ุงููุชุบูุฑ 'ุต'</strong><br>ูููู -ูฆ ุฅูู ุงูุทุฑู ุงูุขุฎุฑ.<br><span class='math-eq'>ุต = -ูขุณ + ูกูค + ูฆ</span>` },
                { text: `<strong>ุงูุฎุทูุฉ 3: ูุจุณุท ุงููุนุงุฏูุฉ</strong><br><div class="text-center mt-2 p-2 bg-green-100 rounded-md"><span class='math-eq'>ุต = -ูขุณ + ูขู</span></div>` }
            ]
        },
        "3b": {
            totalSteps: 4,
            introText: `ุงููุนุงุฏูุฉ ุงูุฃุตููุฉ: <span class='math-eq'>ูฃุต + ูฅ = ูข(ุณ + ูง)</span><br>ุงููุฏู ูู ุงููุตูู ูุตูุบุฉ ุงูููู ูุงูููุทุน: <span class='math-eq'>ุต = ู ุณ + ุจ</span>.`,
            stepsContent: [
                { text: `<strong>ุงูุฎุทูุฉ 1: ูู ุงูุฃููุงุณ (ุฎุงุตูุฉ ุงูุชูุฒูุน)</strong><br><span class='math-eq'>ูฃุต + ูฅ = ูขุณ + ูกูค</span>` },
                { text: `<strong>ุงูุฎุทูุฉ 2: ูุนุฒู ุงูุญุฏ 'ูฃุต'</strong><br>ูููู +ูฅ ุฅูู ุงูุทุฑู ุงูุขุฎุฑ.<br><span class='math-eq'>ูฃุต = ูขุณ + ูกูค - ูฅ</span><br><span class='math-eq'>ูฃุต = ูขุณ + ูฉ</span>` },
                { text: `<strong>ุงูุฎุทูุฉ 3: ูุนุฒู ุงููุชุบูุฑ 'ุต'</strong><br>ููุณู ุทุฑูู ุงููุนุงุฏูุฉ ุนูู ูฃ.<br><span class='math-eq'>ุต = <span class="fraction"><span>ูขุณ + ูฉ</span><span class="frac-bar"></span><span>ูฃ</span></span></span>`},
                { text: `<strong>ุงูุฎุทูุฉ 4: ูุจุณุท ุงููุนุงุฏูุฉ</strong><br><div class="text-center mt-2 p-2 bg-green-100 rounded-md"><span class='math-eq'>ุต = <span class="fraction"><span>ูข</span><span class="frac-bar"></span><span>ูฃ</span></span>ุณ + ูฃ</span></div>` }
            ]
        }
    };
    function createInteractiveSection(config) {
        let currentStep = 0;
        const renderStep = (step) => {
            if(config.stepCounter) config.stepCounter.textContent = step;
            let cumulativeHTML = `<div class="explanation-step" style="opacity:1; border: none; padding-right: 0;">${config.introText}</div>`;
            for (let i = 0; i < step; i++) {
                if(config.stepsContent[i]) {
                    cumulativeHTML += `<div class="explanation-step" style="opacity:1;">${config.stepsContent[i].text}</div>`;
                }
            }
            if(config.explanationDiv) config.explanationDiv.innerHTML = cumulativeHTML;
            if(config.backBtn) config.backBtn.disabled = (step === 0);
            if(config.nextBtn) config.nextBtn.textContent = (step === config.totalSteps) ? 'ุฅุนุงุฏุฉ' : 'ุงูุชุงูู';
        };
        if(config.nextBtn) config.nextBtn.addEventListener('click', () => {
            currentStep = (currentStep < config.totalSteps) ? currentStep + 1 : 0;
            renderStep(currentStep);
        });
        if(config.backBtn) config.backBtn.addEventListener('click', () => {
            if (currentStep > 0) {
                currentStep--;
                renderStep(currentStep);
            }
        });
        renderStep(0);
    }
    // --- END: OLD INTERACTIVE EXAMPLES SCRIPT ---

    // --- START: MAIN SCRIPT INITIALIZATION ---
    const LESSON_ID = 'c3_l3'; 
    function generateQuiz() {
        const questionBank = [
            { 
                type: 'mcq',
                level: 'โญ',
                text: `ูุง ูุนุงุฏูุฉ ุงููุณุชููู ุงูุฐู ูููู <span class="highlight-val">ูฅ</span> ูููุฑ ุจุงูููุทุฉ (<span class="highlight-val">ูข</span>ุ <span class="highlight-val">ูฃ</span>) ุจุตูุบุฉ ุงูููู ูููุทุฉุ`,
                options: [ 
                    { display: 'ุต - ูข = ูฅ(ุณ - ูฃ)', value: 'A' }, 
                    { display: 'ุต - ูฃ = ูฅ(ุณ - ูข)', value: 'B' }, 
                    { display: 'ุต + ูฃ = ูฅ(ุณ + ูข)', value: 'C' }, 
                    { display: 'ุต = ูฅุณ + ูฃ', value: 'D' }
                ], 
                correct: 'B',
                explanation: `<p><b>ุงููุฏู:</b> ูุชุงุจุฉ ุงููุนุงุฏูุฉ ุจุตูุบุฉ <span class="math-eq">ุต - ุตโ = ู (ุณ - ุณโ)</span>.</p>
                              <p><b>ุงููุนุทูุงุช:</b> ุงูููู <span class="math-eq">ู=ูฅ</span>ุ ูุงูููุทุฉ (<span class="text-red-600">ูข</span>ุ <span class="text-blue-600">ูฃ</span>).</p>
                              <p><b>ุงูุชุนููุถ ุงููุจุงุดุฑ:</b></p>
                              <p class="text-center p-2 bg-green-100 rounded-md"><span class="math-eq">ุต - <span class="text-blue-600">ูฃ</span> = ูฅ(ุณ - <span class="text-red-600">ูข</span>)</span></p>`,
                smartExplanation: `<h4>ุงุณุชุฑุงุชูุฌูุฉ ุงููุทุงุจูุฉ ุงูุณุฑูุนุฉ:</h4><p>ุงูุตูุบุฉ ุงูุนุงูุฉ ูู <span class="math-eq">ุต - (ุฑูู) = ุงูููู (ุณ - (ุฑูู))</span>. ุจูุง ุฃู ุงูููุทุฉ ูู (ูขุ ูฃ)ุ ููุฌุจ ุฃู ุชููู ุงููุนุงุฏูุฉ ุนูู ุดูู <span class="math-eq">ุต - ูฃ = ... (ุณ - ูข)</span>. ุงูุฎูุงุฑ (B) ูู ุงููุญูุฏ ุงูุฐู ูุทุงุจู ูุฐุง ุงูุดูู ุชูุงูุงู.</p>`
            },
            { 
                type: 'mcq', 
                level: 'โญโญ', 
                text: `ุงูุชุจ ุงููุนุงุฏูุฉ <span class="math-eq">ุต - ูก = ูค(ุณ + ูข)</span> ุจุงูุตูุฑุฉ ุงูููุงุณูุฉ.`, 
                options: [ 
                    { display: 'ูคุณ - ุต = -ูฉ', value: 'A' }, 
                    { display: 'ูคุณ + ุต = ูฉ', value: 'B' }, 
                    { display: 'ุต = ูคุณ + ูฉ', value: 'C' }, 
                    { display: 'ูคุณ - ุต = ูง', value: 'D' }
                ], 
                correct: 'A', 
                explanation: `<p><b>ุงููุนุงุฏูุฉ ุงูุฃุตููุฉ:</b> <span class="math-eq">ุต - ูก = ูค(ุณ + ูข)</span></p>
                               <p><b>1. ูู ุงูุฃููุงุณ:</b> <span class="math-eq">ุต - ูก = ูคุณ + ูจ</span></p>
                               <p><b>2. ููู ุงููุชุบูุฑุงุช ูุทุฑู:</b> <span class="math-eq">-ูคุณ + ุต - ูก = ูจ</span></p>
                               <p><b>3. ููู ุงูุซูุงุจุช ููุทุฑู ุงูุขุฎุฑ:</b> <span class="math-eq">-ูคุณ + ุต = ูฉ</span></p>
                               <p><b>4. ุฌุนู ูุนุงูู 'ุณ' ููุฌุจูุง:</b> ูุถุฑุจ ูู -ูก.</p>
                               <p class="text-center p-2 bg-green-100 rounded-md"><span class="math-eq">ูคุณ - ุต = -ูฉ</span></p>`,
                smartExplanation: `<h4>ุงุณุชุฑุงุชูุฌูุฉ ุงูุชุญูู ุจุงูุชุนููุถ:</h4><p>ุงุฎุชุฑ ุฑููุงู ุณููุงู ูู 'ุณ'ุ ููููู <span class="math-eq">ุณ = ู</span>. ุนูุถ ุจู ูู ุงููุนุงุฏูุฉ ุงูุฃุตููุฉ: <span class="math-eq">ุต - ูก = ูค(ู + ูข)</span> ูุชุตุจุญ <span class="math-eq">ุต - ูก = ูจ</span>ุ ุฅุฐู <span class="math-eq">ุต = ูฉ</span>. ุฅุฐู ุงูููุทุฉ (ูุ ูฉ) ูุฌุจ ุฃู ุชุญูู ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ.</p><p>ููุฌุฑุจ ุงูููุทุฉ (ูุ ูฉ) ูู ุงูุฎูุงุฑุงุช:</p><ul><li>(A): <span class="math-eq">ูค(ู) - ูฉ = -ูฉ</span> (ุตุญูุญ)</li><li>(B): <span class="math-eq">ูค(ู) + ูฉ = ูฉ</span> (ุตุญูุญ)</li></ul><p>ุจูุง ุฃู ุฎูุงุฑูู ุตุญูุญููุ ูุฌุฑุจ ููุทุฉ ุฃุฎุฑู ูู ุงููุนุงุฏูุฉ ุงูุฃุตููุฉุ ููู (-ูขุ ูก). ููุฌุฑุจูุง:</p><ul><li>(A): <span class="math-eq">ูค(-ูข) - ูก = -ูฉ</span> (ุตุญูุญ)</li><li>(B): <span class="math-eq">ูค(-ูข) + ูก = -ูง</span> (ุฎุงุทุฆ)</li></ul><p>ุงูุฎูุงุฑ (A) ูู ุงููุญูุฏ ุงูุฐู ุญูู ุงูููุทุชูู.</p>`
            },
            { 
                type: 'mcq', 
                level: 'โญโญ', 
                text: `ุงูุชุจ ุงููุนุงุฏูุฉ <span class="math-eq">ุต + ูฅ = -ูข(ุณ - ูก)</span> ุจุตูุบุฉ ุงูููู ูุงูููุทุน.`, 
                options: [ 
                    { display: 'ุต = -ูขุณ + ูง', value: 'A' }, 
                    { display: 'ุต = -ูขุณ - ูฃ', value: 'B' }, 
                    { display: 'ุต = ูขุณ - ูฃ', value: 'C' }, 
                    { display: 'ูขุณ + ุต = -ูฃ', value: 'D' }
                ], 
                correct: 'B', 
                explanation: `<p><b>ุงููุนุงุฏูุฉ ุงูุฃุตููุฉ:</b> <span class="math-eq">ุต + ูฅ = -ูข(ุณ - ูก)</span></p>
                               <p><b>1. ูู ุงูุฃููุงุณ:</b> <span class="math-eq">ุต + ูฅ = -ูขุณ + ูข</span></p>
                               <p><b>2. ุนุฒู 'ุต':</b> ูููู +ูฅ ููุทุฑู ุงูุขุฎุฑ.</p>
                               <p><span class="math-eq">ุต = -ูขุณ + ูข - ูฅ</span></p>
                               <p><b>3. ุงูุชุจุณูุท:</b></p>
                               <p class="text-center p-2 bg-green-100 rounded-md"><span class="math-eq">ุต = -ูขุณ - ูฃ</span></p>`,
                smartExplanation: `<h4>ุงุณุชุฑุงุชูุฌูุฉ ุชุญุฏูุฏ ุงูููุทุน ุงูุตุงุฏู:</h4><p>ุงูููุทุน ุงูุตุงุฏู ูู ูููุฉ 'ุต' ุนูุฏูุง ุชููู <span class="math-eq">ุณ = ู</span>. ููุนูุถ <span class="math-eq">ุณ = ู</span> ูู ุงููุนุงุฏูุฉ ุงูุฃุตููุฉ:</p><p><span class="math-eq">ุต + ูฅ = -ูข(ู - ูก)</span></p><p><span class="math-eq">ุต + ูฅ = ูข</span></p><p><span class="math-eq">ุต = -ูฃ</span></p><p>ุงูุฎูุงุฑ ุงููุญูุฏ ุงูุฐู ููู ุงูููุทุน ุงูุตุงุฏู (ุงูุฑูู ุงูุซุงุจุช) ูู -ูฃ ูู ุงูุฎูุงุฑ (B).</p>`
            },
            {
                type: 'mcq',
                level: 'โญ',
                text: `ูุนุงุฏูุฉ ุงููุณุชููู <span class="math-eq">ุต + ูก = ูฃ(ุณ - ูค)</span> ุชูุฑ ุจุฃู ููุทุฉ ูู ุงูููุงุท ุงูุชุงููุฉุ`,
                options: [
                    { display: '(-ูกุ ูค)', value: 'A' },
                    { display: '(-ูคุ ูก)', value: 'B' },
                    { display: '(ูคุ -ูก)', value: 'C' },
                    { display: '(ูฃุ ูค)', value: 'D' }
                ],
                correct: 'C',
                explanation: `<p>ุงูุตูุบุฉ ูู <span class="math-eq">ุต - ุตโ = ู (ุณ - ุณโ)</span>.</p>
                              <p>ุงููุนุงุฏูุฉ ุงููุนุทุงุฉ: <span class="math-eq">ุต + ูก = ูฃ(ุณ - ูค)</span>.</p>
                              <p>ูููููุง ุฅุนุงุฏุฉ ูุชุงุจุชูุง ูุชุทุงุจู ุงูุตูุบุฉ: <span class="math-eq">ุต - (-ูก) = ูฃ(ุณ - ูค)</span>.</p>
                              <p>ุจุงูููุงุฑูุฉุ ูุฌุฏ ุฃู <span class="math-eq">ุณโ = ูค</span> ู <span class="math-eq">ุตโ = -ูก</span>.</p>
                              <p>ุฅุฐูุ ุงูููุทุฉ ูู <span class="math-eq">(ูคุ -ูก)</span>.</p>`,
                smartExplanation: `<h4>ุงุณุชุฑุงุชูุฌูุฉ ุงููุฑุงุกุฉ ุงููุจุงุดุฑุฉ:</h4><p>ูุงุณุชุฎุฑุงุฌ ุงูููุทุฉ ุจุณุฑุนุฉุ ุงุนูุณ ุฅุดุงุฑุฉ ุงูุฑูู ุจุฌุงูุจ 'ุณ' ูุชุญุตู ุนูู ุงูุฅุญุฏุงุซู ุงูุณูููุ ูุงุนูุณ ุฅุดุงุฑุฉ ุงูุฑูู ุจุฌุงูุจ 'ุต' ูุชุญุตู ุนูู ุงูุฅุญุฏุงุซู ุงูุตุงุฏู.</p><p>ูู ุงููุนุงุฏูุฉ <span class="math-eq">ุต + ูก = ูฃ(ุณ - ูค)</span>:</p><ul><li>ุนูุณ (-ูค) ูู ูค &larr; (ุณ)</li><li>ุนูุณ (+ูก) ูู -ูก &larr; (ุต)</li></ul><p>ุฅุฐู ุงูููุทุฉ ูู (ูคุ -ูก).</p>`
            },
            {
                type: 'mcq',
                level: 'โญโญโญ',
                text: `ูุง ูุนุงุฏูุฉ ุงููุณุชููู ุงููุงุฑ ุจุงูููุทุชูู (<span class="highlight-val">ูก</span>ุ <span class="highlight-val">ูฆ</span>) ู (<span class="highlight-val">ูฃ</span>ุ <span class="highlight-val">ูกู</span>) ุจุตูุบุฉ ุงูููู ูููุทุฉุ`,
                options: [
                    { display: 'ุต - ูฆ = ูข(ุณ - ูก)', value: 'A' },
                    { display: 'ุต - ูก = ูข(ุณ - ูฆ)', value: 'B' },
                    { display: 'ุต - ูกู = -ูข(ุณ - ูฃ)', value: 'C' },
                    { display: 'ุต = ูขุณ + ูค', value: 'D' }
                ],
                correct: 'A',
                explanation: `<p><b>ุงูุฎุทูุฉ 1: ุฅูุฌุงุฏ ุงูููู (ู)</b></p>
                              <p><span class="math-eq">ู = <span class="fraction"><span>ูกู - ูฆ</span><span class="frac-bar"></span><span>ูฃ - ูก</span></span> = <span class="fraction"><span>ูค</span><span class="frac-bar"></span><span>ูข</span></span> = ูข</span></p>
                              <p><b>ุงูุฎุทูุฉ 2: ุงุณุชุฎุฏุงู ุตูุบุฉ ุงูููู ูููุทุฉ</b></p>
                              <p>ูุณุชุฎุฏู ุงูููู <span class="math-eq">ู=ูข</span> ูุฅุญุฏู ุงูููุทุชููุ ููุชูู (<span class="text-red-600">ูก</span>ุ <span class="text-blue-600">ูฆ</span>).</p>
                              <p class="text-center p-2 bg-green-100 rounded-md"><span class="math-eq">ุต - ูฆ = ูข(ุณ - ูก)</span></p>
                              <p class="text-sm text-gray-600">(ููุงุญุธุฉ: ุงุณุชุฎุฏุงู ุงูููุทุฉ ุงูุฃุฎุฑู (ูฃุ ูกู) ุณูุนุทู ูุนุงุฏูุฉ ููุงูุฆุฉ: ุต - ูกู = ูข(ุณ - ูฃ))</p>`,
                smartExplanation: `<h4>ุงุณุชุฑุงุชูุฌูุฉ ุงูููู ุฃููุงู:</h4><p>ุฃููุงูุ ุงุญุณุจ ุงูููู ุจูู ุงูููุทุชูู (ูกุ ูฆ) ู (ูฃุ ูกู):</p><p><span class="math-eq">ุงูููู = <span class="fraction"><span>ูุฑู ุงูุตุงุฏุงุช</span><span class="frac-bar"></span><span>ูุฑู ุงูุณููุงุช</span></span> = <span class="fraction"><span>ูกู - ูฆ</span><span class="frac-bar"></span><span>ูฃ - ูก</span></span> = <span class="fraction"><span>ูค</span><span class="frac-bar"></span><span>ูข</span></span> = ูข</span></p><p>ุจูุง ุฃู ุงูููู ูู ูขุ ูุณุชุจุนุฏ ุงูุฎูุงุฑ (C) ูุฃู ูููู -ูข. ุงูุขูุ ููุฌุฑุจ ุงูููุทุฉ (ูกุ ูฆ) ูู ุงูุฎูุงุฑ (A):</p><p><span class="math-eq">ุต - ูฆ = ูข(ุณ - ูก)</span> &larr; <span class="math-eq">ูฆ - ูฆ = ูข(ูก - ูก)</span> &larr; <span class="math-eq">ู = ู</span></p><p>ุงููุนุงุฏูุฉ ุตุญูุญุฉ.</p>`
            },
            { 
                type: 'mcq', 
                level: 'โญโญ', 
                text: `ุงูุชุจ ุงููุนุงุฏูุฉ <span class="math-eq">ุต - ูฅ = -ูก(ุณ + ูฃ)</span> ุจุงูุตูุฑุฉ ุงูููุงุณูุฉ.`, 
                options: [ 
                    { display: 'ุณ + ุต = ูข', value: 'A' }, 
                    { display: 'ุณ - ุต = ูข', value: 'B' }, 
                    { display: 'ุต = -ุณ + ูข', value: 'C' }, 
                    { display: 'ุณ + ุต = -ูจ', value: 'D' }
                ], 
                correct: 'A', 
                explanation: `<p><b>ุงููุนุงุฏูุฉ ุงูุฃุตููุฉ:</b> <span class="math-eq">ุต - ูฅ = -ูก(ุณ + ูฃ)</span></p>
                               <p><b>1. ูู ุงูุฃููุงุณ:</b> <span class="math-eq">ุต - ูฅ = -ุณ - ูฃ</span></p>
                               <p><b>2. ููู ุงููุชุบูุฑุงุช ูุทุฑู:</b> <span class="math-eq">ุณ + ุต - ูฅ = -ูฃ</span></p>
                               <p><b>3. ููู ุงูุซูุงุจุช ููุทุฑู ุงูุขุฎุฑ:</b> <span class="math-eq">ุณ + ุต = -ูฃ + ูฅ</span></p>
                               <p class="text-center p-2 bg-green-100 rounded-md"><span class="math-eq">ุณ + ุต = ูข</span></p>`
            },
            {
                type: 'mcq',
                level: 'โญ',
                text: `ูุง ูุนุงุฏูุฉ ุงููุณุชููู ุงูุฐู ูููู <span class="highlight-val">ุบูุฑ ูุนุฑู</span> ูููุฑ ุจุงูููุทุฉ (<span class="highlight-val">ูค</span>ุ <span class="highlight-val">-ูฆ</span>)ุ`,
                options: [
                    { display: 'ุต = -ูฆ', value: 'A' },
                    { display: 'ุณ = ูค', value: 'B' },
                    { display: 'ุต = ูค', value: 'C' },
                    { display: 'ุณ = -ูฆ', value: 'D' }
                ],
                correct: 'B',
                explanation: `<p><b>1. ุตูุบุฉ ุงูููู ูููุทุฉ:</b></p>
                              <p>ูุจุฏุฃ ุจุตูุบุฉ ุงูููู ูููุทุฉ: <span class="math-eq">ุต - ุตโ = ู (ุณ - ุณโ)</span>.</p>
                              <p><b>2. ููู ุงูููู ุบูุฑ ุงููุนุฑู:</b></p>
                              <p>ุงูููู ุบูุฑ ุงููุนุฑู ูุนูู ุฃู ุงูููุงู ูู ุตูุบุฉ ุงูููู (<span class="fraction"><span>ูุฑู ุงูุตุงุฏุงุช</span><span class="frac-bar"></span><span>ูุฑู ุงูุณููุงุช</span></span>) ูุณุงูู ุตูุฑุงู. ูููููุง ุงูุชุนุจูุฑ ุนู ูุฐุง ุงูููู ุฑูุฒูุงู ุจุงููุณุฑ <span class="math-eq"><span class="fraction"><span>ูก</span><span class="frac-bar"></span><span>ู</span></span></span> ูุฃุบุฑุงุถ ุงูุญู.</p>
                              <p><b>3. ุงูุชุนููุถ ูู ุงููุนุงุฏูุฉ:</b></p>
                              <p>ูุนูุถ ุจุงูููุทุฉ (<span class="text-red-600">ูค</span>ุ <span class="text-blue-600">-ูฆ</span>) ูุงูููู ูู ุงูุตูุบุฉ:</p>
                              <p class="text-center"><span class="math-eq">ุต - (-ูฆ) = <span class="fraction"><span>ูก</span><span class="frac-bar"></span><span>ู</span></span> (ุณ - ูค)</span></p>
                              <p class="text-center"><span class="math-eq">ุต + ูฆ = <span class="fraction"><span>ูก</span><span class="frac-bar"></span><span>ู</span></span> (ุณ - ูค)</span></p>
                              <p><b>4. ุงูุชุจุณูุท ูุฅูุฌุงุฏ ุงููุนุงุฏูุฉ:</b></p>
                              <p>ููุชุฎูุต ูู ุงูููุงูุ ูุถุฑุจ ุทุฑูู ุงููุนุงุฏูุฉ ูู ู:</p>
                              <p class="text-center"><span class="math-eq">ู ร (ุต + ูฆ) = ูก ร (ุณ - ูค)</span></p>
                              <p>ููุชุฌ ุนู ุฐูู:</p>
                              <p class="text-center"><span class="math-eq">ู = ุณ - ูค</span></p>
                              <p>ูุจุชุฑุชูุจ ุงููุนุงุฏูุฉ ูุญุตู ุนูู ุงูุญู ุงูููุงุฆู:</p>
                              <p class="text-center p-2 bg-green-100 rounded-md"><span class="math-eq">ุณ = ูค</span></p>`,
                smartExplanation: `<h4>ุงุณุชุฑุงุชูุฌูุฉ ุงูุญุงูุฉ ุงูุฎุงุตุฉ:</h4><p>ูููุฉ "ููู ุบูุฑ ูุนุฑู" ุชุนูู ูุจุงุดุฑุฉ ุฃู ุงููุณุชููู ุฑุฃุณู. ูุนุงุฏูุฉ ุฃู ูุณุชููู ุฑุฃุณู ุชููู ุฏุงุฆูุงู ุนูู ุงูุตูุฑุฉ <span class="math-eq">ุณ = ุฑูู</span>. ุจูุง ุฃู ุงูููุทุฉ ูู (ูคุ -ูฆ)ุ ูุฅู ูููุฉ 'ุณ' ุงูุซุงุจุชุฉ ูู ูค. ุฅุฐู ุงููุนุงุฏูุฉ ูู <span class="math-eq">ุณ = ูค</span>.</p>`
            },
            { 
                type: 'mcq', 
                level: 'โญโญ', 
                text: `ูุง ูู ุตูุบุฉ ุงูููู ูุงูููุทุน ูููุนุงุฏูุฉ <span class="math-eq">ุต - ูจ = ูฃ(ุณ - ูข)</span>ุ`, 
                options: [ 
                    { display: 'ุต = ูฃุณ + ูข', value: 'A' }, 
                    { display: 'ุต = ูฃุณ + ูกูค', value: 'B' }, 
                    { display: 'ุต = ูฃุณ - ูกูค', value: 'C' }, 
                    { display: 'ูฃุณ - ุต = -ูข', value: 'D' }
                ], 
                correct: 'A', 
                explanation: `<p><b>ุงููุนุงุฏูุฉ ุงูุฃุตููุฉ:</b> <span class="math-eq">ุต - ูจ = ูฃ(ุณ - ูข)</span></p>
                               <p><b>1. ูู ุงูุฃููุงุณ:</b> <span class="math-eq">ุต - ูจ = ูฃุณ - ูฆ</span></p>
                               <p><b>2. ุนุฒู 'ุต':</b> <span class="math-eq">ุต = ูฃุณ - ูฆ + ูจ</span></p>
                               <p class="text-center p-2 bg-green-100 rounded-md"><span class="math-eq">ุต = ูฃุณ + ูข</span></p>`
            },
            {
                type: 'mcq',
                level: 'โญ',
                text: `ูุง ุงูููุทุฉ ุงูุชู ููุฑ ุจูุง ุงููุณุชููู <span class="math-eq">ุต + ูง = -ูค(ุณ - ูฉ)</span>ุ`,
                options: [
                    { display: '(ูฉุ -ูง)', value: 'A' },
                    { display: '(-ูฉุ ูง)', value: 'B' },
                    { display: '(ูฉุ ูง)', value: 'C' },
                    { display: '(-ูคุ -ูง)', value: 'D' }
                ],
                correct: 'A',
                explanation: `<p>ุงูุตูุบุฉ ูู <span class="math-eq">ุต - ุตโ = ู (ุณ - ุณโ)</span>.</p>
                              <p>ูููุนุงุฏูุฉ <span class="math-eq">ุต + ูง = -ูค(ุณ - ูฉ)</span>ุ ููุชุจูุง ุนูู ุงูุตูุฑุฉ <span class="math-eq">ุต - (-ูง) = -ูค(ุณ - ูฉ)</span>.</p>
                              <p>ุจุงูููุงุฑูุฉุ ูุฌุฏ ุฃู <span class="math-eq">ุณโ = ูฉ</span> ู <span class="math-eq">ุตโ = -ูง</span>.</p>
                              <p>ุฅุฐูุ ุงูููุทุฉ ูู <span class="math-eq">(ูฉุ -ูง)</span>.</p>`,
                smartExplanation: `<h4>ุงุณุชุฑุงุชูุฌูุฉ ุงููุฑุงุกุฉ ุงููุจุงุดุฑุฉ:</h4><p>ูุงุณุชุฎุฑุงุฌ ุงูููุทุฉ ุจุณุฑุนุฉุ ุงุนูุณ ุฅุดุงุฑุฉ ุงูุฑูู ุจุฌุงูุจ 'ุณ' ูุชุญุตู ุนูู ุงูุฅุญุฏุงุซู ุงูุณูููุ ูุงุนูุณ ุฅุดุงุฑุฉ ุงูุฑูู ุจุฌุงูุจ 'ุต' ูุชุญุตู ุนูู ุงูุฅุญุฏุงุซู ุงูุตุงุฏู.</p><p>ูู ุงููุนุงุฏูุฉ <span class="math-eq">ุต + ูง = -ูค(ุณ - ูฉ)</span>:</p><ul><li>ุนูุณ (-ูฉ) ูู ูฉ &larr; (ุณ)</li><li>ุนูุณ (+ูง) ูู -ูง &larr; (ุต)</li></ul><p>ุฅุฐู ุงูููุทุฉ ูู (ูฉุ -ูง).</p>`
            },
            {
                type: 'mcq',
                level: 'โญ',
                text: `ูุง ูุนุงุฏูุฉ ุงููุณุชููู ุงูุฐู ูููู <span class="highlight-val">ู</span> ูููุฑ ุจุงูููุทุฉ (<span class="highlight-val">ูค</span>ุ <span class="highlight-val">-ูฆ</span>)ุ`,
                options: [
                    { display: 'ุต = -ูฆ', value: 'A' },
                    { display: 'ุณ = ูค', value: 'B' },
                    { display: 'ุต = ูค', value: 'C' },
                    { display: 'ุณ = -ูฆ', value: 'D' }
                ],
                correct: 'A',
                explanation: `<p>ุงูููู ูุณุงูู ุตูุฑ ูุนูู ุฃู ุงูุฎุท ุฃููู.</p>
                              <p>ูุนุงุฏูุฉ ุงูุฎุท ุงูุฃููู ูู ุฏุงุฆูุงู <span class="math-eq">ุต = ูููุฉ ุซุงุจุชุฉ</span>.</p>
                              <p>ุจูุง ุฃู ุงูุฎุท ููุฑ ุจุงูููุทุฉ (ูคุ -ูฆ)ุ ูุฅู ูููุฉ 'ุต' ุงูุซุงุจุชุฉ ูู -ูฆ.</p>
                              <p>ุฅุฐูุ ุงููุนุงุฏูุฉ ูู <span class="math-eq">ุต = -ูฆ</span>.</p>`,
                smartExplanation: `<h4>ุงุณุชุฑุงุชูุฌูุฉ ุงูุญุงูุฉ ุงูุฎุงุตุฉ:</h4><p>ุงูููู ุตูุฑ ูุนูู ุฃู ุงูุฎุท ุฃููู ุชูุงูุงู. ูุนุงุฏูุฉ ุฃู ุฎุท ุฃููู ุชููู ุฏุงุฆูุงู ุนูู ุงูุตูุฑุฉ <span class="math-eq">ุต = ุฑูู</span>. ุจูุง ุฃู ุงูุฎุท ููุฑ ุจุงูููุทุฉ (ูคุ -ูฆ)ุ ูุฅู ูููุฉ 'ุต' ุซุงุจุชุฉ ุนูุฏ -ูฆ. ุฅุฐู ุงููุนุงุฏูุฉ ูู <span class="math-eq">ุต = -ูฆ</span>.</p>`
            },
            {
                type: 'mcq',
                level: 'โญโญโญ',
                text: `ุงูุชุจ ูุนุงุฏูุฉ ุงููุณุชููู ุงููุงุฑ ุจุงูููุทุชูู (<span class="highlight-val">ูข</span>ุ <span class="highlight-val">-ูก</span>) ู (<span class="highlight-val">ูค</span>ุ <span class="highlight-val">ูฅ</span>) ุจุงูุตูุฑุฉ ุงูููุงุณูุฉ.`,
                options: [
                    { display: 'ูฃุณ - ุต = ูง', value: 'A' },
                    { display: 'ูฃุณ + ุต = ูง', value: 'B' },
                    { display: 'ุต = ูฃุณ - ูง', value: 'C' },
                    { display: 'ุณ - ูฃุต = ูฅ', value: 'D' }
                ],
                correct: 'A',
                explanation: `<p><b>1. ูุฌุฏ ุงูููู:</b> <span class="math-eq">ู = <span class="fraction"><span>ูฅ - (-ูก)</span><span class="frac-bar"></span><span>ูค - ูข</span></span> = <span class="fraction"><span>ูฆ</span><span class="frac-bar"></span><span>ูข</span></span> = ูฃ</span>.</p>
                              <p><b>2. ูุณุชุฎุฏู ุตูุบุฉ ุงูููู ูููุทุฉ (ุจุงุณุชุฎุฏุงู ุงูููุทุฉ (ูคุ ูฅ)):</b> <span class="math-eq">ุต - ูฅ = ูฃ(ุณ - ูค)</span>.</p>
                              <p><b>3. ูู ุงูุฃููุงุณ:</b> <span class="math-eq">ุต - ูฅ = ูฃุณ - ูกูข</span>.</p>
                              <p><b>4. ูุญูู ููุตูุฑุฉ ุงูููุงุณูุฉ:</b> <span class="math-eq">-ูฃุณ + ุต = -ูกูข + ูฅ</span> &rarr; <span class="math-eq">-ูฃุณ + ุต = -ูง</span>.</p>
                              <p><b>5. ูุฌุนู ูุนุงูู 'ุณ' ููุฌุจูุง:</b> <span class="math-eq">ูฃุณ - ุต = ูง</span>.</p>`,
                smartExplanation: `<h4>ุงุณุชุฑุงุชูุฌูุฉ ุงูุชุญูู ุจุงูุชุนููุถ:</h4><p>ุฃุณูู ุทุฑููุฉ ูู ุชุฌุฑุจุฉ ุงูููุทุชูู ูู ุงูุฎูุงุฑุงุช. ููุจุฏุฃ ุจุงูููุทุฉ (ูขุ -ูก):</p><ul><li>(A): <span class="math-eq">ูฃ(ูข) - (-ูก) = ูง</span> (ุตุญูุญ)</li><li>(B): <span class="math-eq">ูฃ(ูข) + (-ูก) = ูฅ</span> (ุฎุงุทุฆ)</li></ul><p>ููุฏ ุงุณุชุจุนุฏูุง ุงูุฎูุงุฑ (B). ุงูุขู ูุฌุฑุจ ุงูููุทุฉ ุงูุซุงููุฉ (ูคุ ูฅ) ูู ุงูุฎูุงุฑ (A):</p><ul><li>(A): <span class="math-eq">ูฃ(ูค) - ูฅ = ูกูข - ูฅ = ูง</span> (ุตุญูุญ)</li></ul><p>ุจูุง ุฃู ุงูุฎูุงุฑ (A) ุญูู ุงูููุทุชููุ ููู ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ.</p>`
            },
            {
                type: 'mcq',
                level: 'โญโญโญ',
                text: `ูุง ูู ูุนุงุฏูุฉ ุงููุณุชููู ุงูุฐู ููุทุน ุงููุญูุฑ ุงูุณููู ุนูุฏ ุณ = <span class="highlight-val">ูฅ</span> ูุงููุญูุฑ ุงูุตุงุฏู ุนูุฏ ุต = <span class="highlight-val">-ูข</span>ุ`,
                options: [
                    { display: 'ุต = <span class="fraction"><span>ูข</span><span class="frac-bar"></span><span>ูฅ</span></span>ุณ - ูข', value: 'A' },
                    { display: 'ุต = <span class="fraction"><span>ูฅ</span><span class="frac-bar"></span><span>ูข</span></span>ุณ - ูข', value: 'B' },
                    { display: 'ุต = -ูขุณ + ูฅ', value: 'C' },
                    { display: 'ูขุณ - ูฅุต = ูกู', value: 'D' }
                ],
                correct: 'A',
                explanation: `<p>ุงูุชูุงุทุน ูุน ุงููุญูุฑ ุงูุณููู ุนูุฏ ูฅ ูุนูู ุงูููุทุฉ (ูฅุ ู).</p>
                              <p>ุงูุชูุงุทุน ูุน ุงููุญูุฑ ุงูุตุงุฏู ุนูุฏ -ูข ูุนูู ุงูููุทุฉ (ูุ -ูข). ููุฐุง ูู ุงูููุทุน ุงูุตุงุฏู <span class="math-eq">ุจ = -ูข</span>.</p>
                              <p><b>1. ูุฌุฏ ุงูููู:</b> <span class="math-eq">ู = <span class="fraction"><span>-ูข - ู</span><span class="frac-bar"></span><span>ู - ูฅ</span></span> = <span class="fraction"><span>-ูข</span><span class="frac-bar"></span><span>-ูฅ</span></span> = <span class="fraction"><span>ูข</span><span class="frac-bar"></span><span>ูฅ</span></span></span>.</p>
                              <p><b>2. ููุชุจ ุจุตูุบุฉ ุงูููู ูุงูููุทุน (ุต = ู ุณ + ุจ):</b></p>
                              <p class="text-center p-2 bg-green-100 rounded-md"><span class="math-eq">ุต = <span class="fraction"><span>ูข</span><span class="frac-bar"></span><span>ูฅ</span></span>ุณ - ูข</span></p>`,
                smartExplanation: `<h4>ุงุณุชุฑุงุชูุฌูุฉ ุงุณุชุบูุงู ุงูููุทุน ุงูุตุงุฏู:</h4><p>ูุนูููุฉ "ููุทุน ุงููุญูุฑ ุงูุตุงุฏู ุนูุฏ ุต = -ูข" ุชุนูู ุฃู ุงูููุทุน (ุจ) ูู -ูข. ูุฐุง ูุณุชุจุนุฏ ุงูุฎูุงุฑ (C).<br>ุงูุขู ูุญุณุจ ุงูููู ุจุงุณุชุฎุฏุงู ุงูููุทุชูู (ูฅุ ู) ู (ูุ -ูข):</p><p><span class="math-eq">ุงูููู = <span class="fraction"><span>ูุฑู ุงูุตุงุฏุงุช</span><span class="frac-bar"></span><span>ูุฑู ุงูุณููุงุช</span></span> = <span class="fraction"><span>-ูข - ู</span><span class="frac-bar"></span><span>ู - ูฅ</span></span> = <span class="fraction"><span>-ูข</span><span class="frac-bar"></span><span>-ูฅ</span></span></span></p><p>ุณุงูุจ ุนูู ุณุงูุจ ูุนุทู ููุฌุจุ ุฅุฐู ุงูููู ูู <span class="math-eq"><span class="fraction"><span>ูข</span><span class="frac-bar"></span><span>ูฅ</span></span></span>. ุงูุฎูุงุฑ (A) ูู ุงููุญูุฏ ุงูุฐู ูููู <span class="math-eq"><span class="fraction"><span>ูข</span><span class="frac-bar"></span><span>ูฅ</span></span></span> ูููุทุนู -ูข.</p>`
            },
            {
                type: 'mcq',
                level: 'โญโญโญ',
                text: `ุชุจุฏุฃ ุฏุฑุฌุฉ ุญุฑุงุฑุฉ ุณุงุฆู ุนูุฏ <span class="highlight-val">ูขูฅ</span>ยฐูุ ูุชูุฎูุถ ุจูุนุฏู <span class="highlight-val">ูฃ</span>ยฐู ูู ุฏูููุฉ. ูุง ุงููุนุงุฏูุฉ ุงูุชู ุชูุซู ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ (ุต) ุจุนุฏ (ุณ) ุฏูููุฉ ุจุตูุบุฉ ุงูููู ูุงูููุทุนุ`,
                options: [
                    { display: 'ุต = -ูฃุณ + ูขูฅ', value: 'A' },
                    { display: 'ุต = ูฃุณ + ูขูฅ', value: 'B' },
                    { display: 'ุต = ูขูฅุณ - ูฃ', value: 'C' },
                    { display: 'ุต = -ูฃุณ - ูขูฅ', value: 'D' }
                ],
                correct: 'A',
                explanation: `<p><b>ุงูููุทุน ุงูุตุงุฏู (ุจ):</b> ูู ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ุงูุงุจุชุฏุงุฆูุฉุ ุฅุฐู <span class="math-eq">ุจ = ูขูฅ</span>.</p>
                              <p><b>ุงูููู (ู):</b> ูู ูุนุฏู ุงูุชุบูุฑ. ุจูุง ุฃู ุงูุญุฑุงุฑุฉ "ุชูุฎูุถ"ุ ูุงูููู ุณุงูุจ. ุฅุฐู <span class="math-eq">ู = -ูฃ</span>.</p>
                              <p><b>ุงููุนุงุฏูุฉ (ุต = ู ุณ + ุจ):</b></p>
                              <p class="text-center p-2 bg-green-100 rounded-md"><span class="math-eq">ุต = -ูฃุณ + ูขูฅ</span></p>`,
                smartExplanation: `<h4>ุงุณุชุฑุงุชูุฌูุฉ ุงูุชุฑุฌูุฉ ุงููุจุงุดุฑุฉ:</h4><p>ููุญูู ุงููููุงุช ุฅูู ุฃุฑูุงู:</p><ul><li><b>"ุชุจุฏุฃ ุฏุฑุฌุฉ ุญุฑุงุฑุฉ ... ุนูุฏ ูขูฅยฐ"</b>: ูุฐู ูู ููุทุฉ ุงูุจุฏุงูุฉ ุฃู ุงูููุทุน ุงูุตุงุฏู (ุจ). ุฅุฐู <span class="math-eq">ุจ = ูขูฅ</span>.</li><li><b>"ุชูุฎูุถ ุจูุนุฏู ูฃยฐ"</b>: ูููุฉ "ูุนุฏู" ุชุนูู ุงูููู (ู)ุ ููููุฉ "ุชูุฎูุถ" ุชุนูู ุฃู ุงูููู ุณุงูุจ. ุฅุฐู <span class="math-eq">ู = -ูฃ</span>.</li></ul><p>ุจุชุฑููุจูุง ูู ุตูุบุฉ <span class="math-eq">ุต = ู ุณ + ุจ</span>ุ ูุญุตู ุนูู <span class="math-eq">ุต = -ูฃุณ + ูขูฅ</span>.</p>`
            }
        ];
        const shuffled = [...questionBank].sort(() => 0.5 - Math.random());
        const questionCount = Math.min(shuffled.length, 5);
        return shuffled.slice(0, questionCount);
    }

    document.addEventListener('DOMContentLoaded', () => {
        // --- Initialize Old Interactive Examples ---
        Object.keys(configs).forEach(key => {
            createInteractiveSection({
                nextBtn: document.getElementById(`interactive-next-${key}`),
                backBtn: document.getElementById(`interactive-back-${key}`),
                stepCounter: document.getElementById(`interactive-step-counter-${key}`),
                explanationDiv: document.getElementById(`interactive-explanation-${key}`),
                ...configs[key]
            });
        });

        // --- Initialize New Template Features ---
        const student = getStudentFromStorage();
        const lessonTitleElement = document.getElementById('lesson-title');
        const lessonTitle = lessonTitleElement ? lessonTitleElement.textContent : null;
        buildHeader(student, lessonTitle);
        buildFooter();
        const questions = generateQuiz();
        initializeQuiz(LESSON_ID, questions, student);
        
        const retakeBtn = document.getElementById('retake-quiz-btn');
        if(retakeBtn) { retakeBtn.addEventListener('click', () => { window.location.reload(); }); }
        
        const closeModalBtn = document.getElementById('closeModalBtn');
        if(closeModalBtn) closeModalBtn.addEventListener('click', closeModal);
        
        const closeSmartModalBtn = document.getElementById('closeSmartModalBtn');
        if(closeSmartModalBtn) closeSmartModalBtn.addEventListener('click', closeSmartModal);
    });
    // --- END: MAIN SCRIPT INITIALIZATION ---
    </script>
</body>
</html>
