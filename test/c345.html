<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙØµÙˆÙ„ 3-4-5 | Ø±ÙŠØ§Ø¶ÙŠØ§Øª (ØªÙ‚ÙŠÙŠÙ… Ø°Ø§ØªÙŠ)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Cairo', sans-serif;
            background-color: #e0e0e0;
            margin: 0;
            padding: 20px 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.6); display: flex;
            justify-content: center; align-items: center; z-index: 2000;
        }
        .modal-content {
            background-color: white; padding: 30px 40px; border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3); text-align: center;
            width: 450px; max-width: 90%;
        }
        .modal-content h2 { margin: 0 0 20px 0; font-size: 22px; }
        .modal-content .form-group { margin-bottom: 15px; text-align: right; }
        .modal-content label { display: block; margin-bottom: 5px; font-weight: bold; }
        .modal-content input, .modal-content select {
            width: 100%; padding: 10px; font-family: 'Cairo', sans-serif;
            font-size: 16px; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box;
        }
        .modal-validation-message { color: #dc3545; font-size: 14px; margin-top: 10px; min-height: 20px; }
        
        #result-modal .result-grid {
            display: grid; grid-template-columns: auto 1fr; gap: 8px 15px;
            text-align: right; margin: 20px 0; align-items: center;
        }
        #result-modal .result-grid strong { font-weight: bold; }
        #result-modal .result-score {
            grid-column: 1 / -1; text-align: center; font-size: 28px; font-weight: bold;
            color: #28a745; margin-top: 10px; border-top: 1px solid #eee; padding-top: 15px;
        }
        #result-modal .submission-note {
            margin-top: 20px; padding: 10px; background-color: #e9f7ec;
            border: 1px solid #28a745; border-radius: 5px; font-size: 14px;
        }
        .modal-buttons { display: flex; justify-content: center; gap: 15px; margin-top: 25px; flex-wrap: wrap;}

        .page {
            background: white; width: 210mm; min-height: 297mm; padding: 15mm;
            margin-bottom: 20px; box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
            box-sizing: border-box; position: relative; display: flex; flex-direction: column;
        }
        .page-content { flex-grow: 1; }
        .page-footer { text-align: center; font-size: 12px; color: #888; padding-top: 10px; }

        .test-header {
            text-align: center; border-bottom: 2px solid #333; padding-bottom: 15px; margin-bottom: 25px;
        }
        .test-header h1 { margin: 0; font-size: 24px; }
        .test-header h2 { margin: 5px 0 0 0; font-size: 20px; font-weight: normal; color: #555; }
        .test-header .info { display: flex; justify-content: space-around; align-items: center; margin-top: 15px; font-size: 14px; }

        .questions-grid { display: grid; grid-template-columns: 1fr; gap: 12px; }
        .question-block {
            border: 1px solid #e0e0e0; padding: 10px 15px; border-radius: 8px;
            background-color: #fafafa; display: flex; flex-direction: column;
        }
        
        .question-prompt {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            margin: 0 0 10px 0;
            font-size: 15px;
            font-weight: bold;
            line-height: 1.6;
        }
        .question-number {
            background-color: #e9e9e9;
            padding: 2px 8px;
            border-radius: 5px;
            flex-shrink: 0;
            margin-top: 3px;
        }
        .question-title { flex-grow: 1; font-weight: normal; color: #000; }
        
        /* Style for Lesson/Level Meta Info */
        .meta-info {
            float: left;
            display: inline-block;
            font-size: 11px;
            color: #666;
            background-color: #eee;
            padding: 2px 6px;
            border-radius: 4px;
            margin-top: 2px;
            margin-right: 10px; 
            font-weight: normal;
            border: 1px solid #ddd;
        }

        .options-container { display: flex; flex-wrap: nowrap; justify-content: space-between; gap: 8px; }
        .option {
            background-color: #ffffff; border: 1px solid #ccc; border-radius: 5px; padding: 5px 10px;
            font-size: 13px; flex-grow: 1; white-space: nowrap; display: flex;
            align-items: center; cursor: pointer; transition: background-color 0.2s, border-color 0.2s;
        }
        .option:hover { background-color: #f0f8ff; border-color: #007bff; }
        .option input[type="radio"] { display: none; }
        .option input[type="radio"]:checked + .option-label {
            background-color: #007bff; color: white; border-color: #0056b3;
        }
        .option-label {
            display: inline-flex; align-items: center; justify-content: center; width: 22px;
            height: 22px; border: 1.5px solid #555; border-radius: 50%;
            font-weight: bold; color: #333; margin-left: 8px; flex-shrink: 0;
            transition: background-color 0.2s, color 0.2s; font-size: 12px;
        }
        .option-text { flex-grow: 1; text-align: center; }
        .fraction {
            display: inline-flex; flex-direction: column; vertical-align: middle;
            margin: 0 0.2em; text-align: center; position: relative; top: -0.3em; font-size: 0.9em;
        }
        .numerator { padding: 0 0.2em; }
        .denominator { border-top: 1.5px solid currentColor; padding: 0 0.2em; }
        
        .controls {
            position: fixed; top: 20px; left: 20px; display: flex;
            flex-direction: column; gap: 10px; z-index: 1000;
        }
        .btn {
            background-color: #007bff; color: white; border: none; padding: 12px 24px;
            border-radius: 5px; cursor: pointer; font-size: 16px; font-family: 'Cairo', sans-serif;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2); text-align: center; transition: background-color 0.2s;
        }
        .btn:hover { background-color: #0056b3; }
        .correct-button { background-color: #28a745; }
        .correct-button:hover { background-color: #218838; }
        .final-submit-button { background-color: #6610f2; animation: pulse 2s infinite; }
        .final-submit-button:hover { background-color: #520dc2; }
        
        /* Whatsapp Button Style */
        .whatsapp-button { 
            background-color: #25D366; 
            color: white; 
            width: 100%; 
            font-weight: bold;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        .whatsapp-button:hover { background-color: #128C7E; }

        .retry-button { background-color: #6c757d; }
        .retry-button:hover { background-color: #5a6268; }
        .review-button { background-color: #17a2b8; }
        .review-button:hover { background-color: #138496; }
        .option.correct { border-color: #28a745; background-color: #e9f7ec; }
        .option.incorrect { border-color: #dc3545; background-color: #fdeeee; }

        .section-title {
            font-size: 18px; font-weight: bold; margin-top: 20px; margin-bottom: 10px;
            border-bottom: 1px solid #eee; padding-bottom: 5px;
        }
        .essay-questions-container { display: flex; flex-direction: column; gap: 15px; }
        .essay-question-block {
            border: 1px solid #e0e0e0; padding: 15px; border-radius: 8px;
            background-color: #fdfdfd; display: flex; flex-direction: column;
        }

        .answer-space {
            min-height: 80px; border: 1px solid #ccc; border-radius: 5px; margin-top: 5px;
            padding: 8px; flex-grow: 1; font-size: 15px; font-family: 'Cairo', sans-serif;
            resize: vertical; width: 100%; box-sizing: border-box;
        }
        
        /* SELF GRADING STYLES */
        .self-grading-section {
            margin-top: 15px;
            border-top: 2px dashed #bbb;
            padding-top: 10px;
            display: none; /* Hidden by default */
            background-color: #f0f8ff;
            padding: 15px;
            border-radius: 5px;
        }

        .model-answer-box {
            background-color: #fff;
            border-right: 4px solid #28a745;
            padding: 10px;
            margin-bottom: 15px;
            font-size: 14px;
            color: #333;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .model-answer-title {
            color: #28a745;
            font-weight: bold;
            display: block;
            margin-bottom: 5px;
        }

        .grading-input-box {
            display: flex;
            align-items: center;
            gap: 10px;
            background-color: #fff;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ddd;
        }

        .grading-input-box input {
            width: 70px;
            padding: 5px;
            text-align: center;
            font-weight: bold;
            font-size: 16px;
            border: 2px solid #007bff;
            border-radius: 4px;
        }

        .grading-note {
            font-size: 12px;
            color: #666;
            margin-right: 10px;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        /* Print Specifics */
        @media (max-width: 768px) {
            body { padding: 0; }
            .page {
                width: 100%; min-height: auto; height: auto; padding: 15px;
                margin-bottom: 0; box-shadow: none; border-bottom: 5px solid #e0e0e0;
            }
             .page:last-of-type { border-bottom: none; }
            .test-header .info { flex-direction: column; align-items: flex-start; gap: 8px; }
            .options-container { flex-wrap: wrap; gap: 10px; }
            .option { flex-basis: calc(50% - 20px); }
            .controls { top: 10px; left: 10px; }
            .btn { padding: 10px 18px; font-size: 14px; }
        }

        @media print {
            body { background-color: white; padding: 0; margin: 0; }
            .page {
                box-shadow: none; margin: 0; width: auto; min-height: 0;
                height: auto; padding: 0; display: block; border-bottom: none;
            }
            .page:not(:last-of-type) { page-break-after: always; }
            .controls, .page-footer, .self-grading-section, .modal-overlay, .option input[type="radio"] { display: none !important; }
            
            .test-header .info {
                display: flex !important; flex-direction: row !important;
                justify-content: space-around !important; align-items: center !important;
                font-size: 12px !important;
            }
            .questions-grid { gap: 8px !important; }
            .question-block { padding: 8px 10px !important; border: 1px solid #ccc !important; }
            .options-container { display: flex !important; flex-wrap: nowrap !important; gap: 5px !important; }
            .option { flex: 1; border: 1px solid #ccc !important; padding: 3px 6px !important; font-size: 11px !important; }
            .option-label { border: 1px solid #555 !important; width: 18px !important; height: 18px !important; font-size: 10px !important; }
            .question-block, .essay-question-block { page-break-inside: avoid; }
            .essay-question-block { border: 1px solid #ccc !important; }
            .answer-space, textarea { border: 1px dotted #999 !important; background-color: #f9f9f9 !important; -webkit-print-color-adjust: exact; }
            .meta-info { border: 1px solid #ccc !important; background-color: #f0f0f0 !important; }
            @page { size: A4; margin: 15mm; }
        }
    </style>
</head>
<body>

    <div id="login-modal" class="modal-overlay">
        <div class="modal-content">
            <h2>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±</h2>
            <div class="form-group">
                <label for="student-id-input">Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ© / Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ù…Ø¯Ù†ÙŠ:</label>
                <input type="number" id="student-id-input" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ù‡ÙˆÙŠØªÙƒ" required>
            </div>
            <div class="form-group">
                <label for="student-class-input">Ø§Ù„ØµÙ:</label>
                <select id="student-class-input" required>
                    <option value="" disabled selected>Ø§Ø®ØªØ± ØµÙÙƒ...</option>
                    <option value="3-1">Ù£/Ø£ÙˆÙ„</option>
                    <option value="3-2">Ù£/Ø«Ø§Ù†ÙŠ</option>
                    <option value="3-3">Ù£/Ø«Ø§Ù„Ø«</option>
                </select>
            </div>
            <p id="login-status" class="modal-validation-message"></p>
            <button class="btn correct-button" onclick="loginWithId()">Ø¯Ø®ÙˆÙ„</button>
        </div>
    </div>
    
    <div id="result-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2>Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</h2>
            <div class="result-grid">
                <strong>Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨:</strong> <span id="result-student-name"></span>
                <strong>Ø§Ù„ØµÙ:</strong> <span id="result-student-class"></span>
                <strong>Ù…Ø¯Ø© Ø§Ù„Ø­Ù„:</strong> <span id="result-duration"></span>
                <strong>Ø¯Ø±Ø¬Ø© Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±Ø§Øª (Ø¢Ù„ÙŠ):</strong> <span id="result-mcq-score"></span>
                <strong>Ø¯Ø±Ø¬Ø© Ø§Ù„Ù…Ù‚Ø§Ù„ÙŠ (Ø°Ø§ØªÙŠ):</strong> <span id="result-essay-score"></span>
                <div class="result-score">Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„ÙƒÙ„ÙŠØ©: <span id="result-total-score"></span></div>
            </div>
            
            <!-- Ø²Ø± ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯ -->
            <button class="btn whatsapp-button" onclick="sendToWhatsApp()">
                <span>ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ù„Ù„Ù…Ø¹Ù„Ù… (ÙˆØ§ØªØ³Ø§Ø¨)</span>
            </button>
            
            <p style="font-size:12px; color:#666; margin-top:5px;">Ø³ÙŠØªÙ… ÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨ ÙˆØ¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¯Ø±Ø¬Ø© Ù„Ø±Ù‚Ù… Ø§Ù„Ù…Ø¹Ù„Ù… ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹</p>

            <div class="modal-buttons">
                <button class="btn review-button" onclick="reviewAnswers()">Ø¥ØºÙ„Ø§Ù‚ ÙˆÙ…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„ÙˆØ±Ù‚Ø©</button>
                <button class="btn retry-button" onclick="retryTest()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
            </div>
        </div>
    </div>

    <div class="controls" style="display: none;">
        <button class="btn print-button" onclick="window.print()">Ø·Ø¨Ø§Ø¹Ø©</button>
        <!-- Ø§Ù„Ø²Ø± Ø§Ù„Ø£ÙˆÙ„: ØªØµØ­ÙŠØ­ Ø¢Ù„ÙŠ ÙˆØ¨Ø¯Ø¡ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø°Ø§ØªÙŠ -->
        <button id="start-grading-btn" class="btn correct-button" onclick="startSelfGrading()">ØªØµØ­ÙŠØ­ ÙˆØ§Ù„Ø¨Ø¯Ø¡ Ø¨Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø°Ø§ØªÙŠ</button>
        
        <!-- Ø§Ù„Ø²Ø± Ø§Ù„Ø«Ø§Ù†ÙŠ: ÙŠØ¸Ù‡Ø± Ø¨Ø¹Ø¯ Ø§Ù„ØªØµØ­ÙŠØ­ Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© -->
        <button id="submit-final-btn" class="btn final-submit-button" onclick="submitFinalGrade()" style="display: none;">Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© ÙˆØ§Ø¹ØªÙ…Ø§Ø¯Ù‡Ø§</button>
        
        <button id="retry-btn-main" class="btn retry-button" onclick="retryTest()" style="display: none;">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
    </div>

    <div id="test-container" style="display: none;">
        <!-- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ -->
        <div class="page">
            <div class="page-content">
                <div class="test-header">
                    <h1>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª (Ø§Ù„ÙØµÙˆÙ„ 3ØŒ 4ØŒ 5)</h1>
                    <h2>Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ø®Ø·ÙŠØ© | Ø§Ù„Ù…ØªØ¨Ø§ÙŠÙ†Ø§Øª | Ø§Ù„Ø£Ù†Ø¸Ù…Ø©</h2>
                    <div class="info">
                        <span><strong>Ø§Ù„Ø·Ø§Ù„Ø¨:</strong> <span id="display-student-name"></span></span>
                        <span><strong>Ø§Ù„ØµÙ:</strong> <span id="display-student-class"></span></span>
                        <span><strong>Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> <span id="display-test-date"></span></span>
                    </div>
                </div>

                <div class="questions-grid">
                    <!-- Ø³Ø¤Ø§Ù„ 1 -->
                    <div class="question-block" data-question-id="q1">
                        <p class="question-prompt">
                            <span class="question-number">Ù¡</span>
                            <span class="question-title">Ø§Ù„ØµÙŠØºØ© Ø§Ù„Ù‚ÙŠØ§Ø³ÙŠØ© Ù„Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ø®Ø·ÙŠØ© Ù‡ÙŠ: <span class="meta-info">ØªØ°ÙƒØ± - Ø¯Ø±Ø³ Ù£-Ù¢</span></span>
                        </p>
                        <div class="options-container">
                            <label class="option"><input type="radio" name="q1"><span class="option-label"></span><span class="option-text">Øµ = Ù… Ø³ + Ø¨</span></label>
                            <label class="option" data-correct="true"><input type="radio" name="q1"><span class="option-label"></span><span class="option-text">Ø£ Ø³ + Ø¨ Øµ = Ø¬Ù€</span></label>
                            <label class="option"><input type="radio" name="q1"><span class="option-label"></span><span class="option-text">Øµ - ØµÙ¡ = Ù…(Ø³ - Ø³Ù¡)</span></label>
                            <label class="option"><input type="radio" name="q1"><span class="option-label"></span><span class="option-text">Øµ = Ø£ Ø³</span></label>
                        </div>
                    </div>

                    <!-- Ø³Ø¤Ø§Ù„ 2 -->
                    <div class="question-block" data-question-id="q2">
                        <p class="question-prompt">
                            <span class="question-number">Ù¢</span>
                            <span class="question-title">Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ… ÙÙŠ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Øµ = Ù¥Ø³ - Ù£ Ù‡Ùˆ: <span class="meta-info">ÙÙ‡Ù… - Ø¯Ø±Ø³ Ù£-Ù¡</span></span>
                        </p>
                        <div class="options-container">
                            <label class="option"><input type="radio" name="q2"><span class="option-label"></span><span class="option-text">-Ù£</span></label>
                            <label class="option"><input type="radio" name="q2"><span class="option-label"></span><span class="option-text">Ù£</span></label>
                            <label class="option" data-correct="true"><input type="radio" name="q2"><span class="option-label"></span><span class="option-text">Ù¥</span></label>
                            <label class="option"><input type="radio" name="q2"><span class="option-label"></span><span class="option-text">-Ù¥</span></label>
                        </div>
                    </div>

                    <!-- Ø³Ø¤Ø§Ù„ 3 -->
                    <div class="question-block" data-question-id="q3">
                        <p class="question-prompt">
                            <span class="question-number">Ù£</span>
                            <span class="question-title">Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ… Ø§Ù„Ø°ÙŠ Ù…ÙŠÙ„Ù‡ Ù¢ ÙˆÙ…Ù‚Ø·Ø¹Ù‡ Ø§Ù„ØµØ§Ø¯ÙŠ Ù¤ Ù‡ÙŠ: <span class="meta-info">ØªØ·Ø¨ÙŠÙ‚ - Ø¯Ø±Ø³ Ù£-Ù¢</span></span>
                        </p>
                        <div class="options-container">
                            <label class="option" data-correct="true"><input type="radio" name="q3"><span class="option-label"></span><span class="option-text">Øµ = Ù¢Ø³ + Ù¤</span></label>
                            <label class="option"><input type="radio" name="q3"><span class="option-label"></span><span class="option-text">Øµ = Ù¤Ø³ + Ù¢</span></label>
                            <label class="option"><input type="radio" name="q3"><span class="option-label"></span><span class="option-text">Øµ = Ù¢Ø³ - Ù¤</span></label>
                            <label class="option"><input type="radio" name="q3"><span class="option-label"></span><span class="option-text">Ù¢Ø³ + Øµ = Ù¤</span></label>
                        </div>
                    </div>

                    <!-- Ø³Ø¤Ø§Ù„ 4 -->
                    <div class="question-block" data-question-id="q4">
                        <p class="question-prompt">
                            <span class="question-number">Ù¤</span>
                            <span class="question-title">Ø¥Ø°Ø§ ÙƒØ§Ù† Ù†Ø§ØªØ¬ Ø¶Ø±Ø¨ Ù…ÙŠÙ„ÙŠ Ù…Ø³ØªÙ‚ÙŠÙ…ÙŠÙ† ÙŠØ³Ø§ÙˆÙŠ -Ù¡ØŒ ÙØ¥Ù† Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ…ÙŠÙ†: <span class="meta-info">ØªØ­Ù„ÙŠÙ„ - Ø¯Ø±Ø³ Ù£-Ù¤</span></span>
                        </p>
                        <div class="options-container">
                            <label class="option"><input type="radio" name="q4"><span class="option-label"></span><span class="option-text">Ù…ØªÙˆØ§Ø²ÙŠØ§Ù†</span></label>
                            <label class="option" data-correct="true"><input type="radio" name="q4"><span class="option-label"></span><span class="option-text">Ù…ØªØ¹Ø§Ù…Ø¯Ø§Ù†</span></label>
                            <label class="option"><input type="radio" name="q4"><span class="option-label"></span><span class="option-text">Ù…ØªØ·Ø§Ø¨Ù‚Ø§Ù†</span></label>
                            <label class="option"><input type="radio" name="q4"><span class="option-label"></span><span class="option-text">Ù…ØªÙ‚Ø§Ø·Ø¹Ø§Ù† ÙˆØºÙŠØ± Ù…ØªØ¹Ø§Ù…Ø¯ÙŠÙ†</span></label>
                        </div>
                    </div>

                    <!-- Ø³Ø¤Ø§Ù„ 5 -->
                    <div class="question-block" data-question-id="q5">
                        <p class="question-prompt">
                            <span class="question-number">Ù¥</span>
                            <span class="question-title">Ø­Ù„ Ø§Ù„Ù…ØªØ¨Ø§ÙŠÙ†Ø© Ø³ - Ù£ < Ù§ Ù‡Ùˆ: <span class="meta-info">ØªØ·Ø¨ÙŠÙ‚ - Ø¯Ø±Ø³ Ù¤-Ù¡</span></span>
                        </p>
                        <div class="options-container">
                            <label class="option" data-correct="true"><input type="radio" name="q5"><span class="option-label"></span><span class="option-text">Ø³ < Ù¡Ù </span></label>
                            <label class="option"><input type="radio" name="q5"><span class="option-label"></span><span class="option-text">Ø³ > Ù¡Ù </span></label>
                            <label class="option"><input type="radio" name="q5"><span class="option-label"></span><span class="option-text">Ø³ < Ù¤</span></label>
                            <label class="option"><input type="radio" name="q5"><span class="option-label"></span><span class="option-text">Ø³ > -Ù¤</span></label>
                        </div>
                    </div>

                     <!-- Ø³Ø¤Ø§Ù„ 6 -->
                    <div class="question-block" data-question-id="q6">
                        <p class="question-prompt">
                            <span class="question-number">Ù¦</span>
                            <span class="question-title">Ø¹Ù†Ø¯ Ø¶Ø±Ø¨ Ø£Ùˆ Ù‚Ø³Ù…Ø© Ø·Ø±ÙÙŠ Ø§Ù„Ù…ØªØ¨Ø§ÙŠÙ†Ø© ÙÙŠ Ø¹Ø¯Ø¯ Ø³Ø§Ù„Ø¨ØŒ ÙØ¥Ù†Ù†Ø§: <span class="meta-info">ØªØ°ÙƒØ± - Ø¯Ø±Ø³ Ù¤-Ù¢</span></span>
                        </p>
                        <div class="options-container">
                            <label class="option"><input type="radio" name="q6"><span class="option-label"></span><span class="option-text">Ù†Ø¨Ù‚ÙŠ Ø§Ù„Ø¥Ø´Ø§Ø±Ø© ÙƒÙ…Ø§ Ù‡ÙŠ</span></label>
                            <label class="option" data-correct="true"><input type="radio" name="q6"><span class="option-label"></span><span class="option-text">Ù†Ù‚Ù„Ø¨ Ø¥Ø´Ø§Ø±Ø© Ø§Ù„Ù…ØªØ¨Ø§ÙŠÙ†Ø©</span></label>
                            <label class="option"><input type="radio" name="q6"><span class="option-label"></span><span class="option-text">Ù†Ø³Ø§ÙˆÙŠ Ø§Ù„Ø·Ø±ÙÙŠÙ† Ø¨Ø§Ù„ØµÙØ±</span></label>
                            <label class="option"><input type="radio" name="q6"><span class="option-label"></span><span class="option-text">Ù†Ø­Ø°Ù Ø§Ù„Ù…ØªØºÙŠØ±</span></label>
                        </div>
                    </div>

                    <!-- Ø³Ø¤Ø§Ù„ 7 -->
                    <div class="question-block" data-question-id="q7">
                        <p class="question-prompt">
                            <span class="question-number">Ù§</span>
                            <span class="question-title">Ø­Ù„ Ø§Ù„Ù…ØªØ¨Ø§ÙŠÙ†Ø© Ø§Ù„Ù…Ø±ÙƒØ¨Ø© (Ø³ > Ù¥ Ùˆ Ø³ < Ù¢) Ù‡Ùˆ: <span class="meta-info">ÙÙ‡Ù… - Ø¯Ø±Ø³ Ù¤-Ù¤</span></span>
                        </p>
                        <div class="options-container">
                            <label class="option" data-correct="true"><input type="radio" name="q7"><span class="option-label"></span><span class="option-text">Ù…Ø¬Ù…ÙˆØ¹Ø© Ø®Ø§Ù„ÙŠØ© (âˆ…)</span></label>
                            <label class="option"><input type="radio" name="q7"><span class="option-label"></span><span class="option-text">ÙƒØ§Ù…Ù„ Ø®Ø· Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¯ (Ø­)</span></label>
                            <label class="option"><input type="radio" name="q7"><span class="option-label"></span><span class="option-text">{Ø³ | Ù¢ < Ø³ < Ù¥}</span></label>
                            <label class="option"><input type="radio" name="q7"><span class="option-label"></span><span class="option-text">{Ø³ | Ø³ > Ù¢}</span></label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="page-footer">ØµÙØ­Ø© Ù¡ Ù…Ù† Ù£</div>
        </div>

        <!-- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© -->
        <div class="page">
            <div class="page-content">
                <div class="questions-grid">

                    <!-- Ø³Ø¤Ø§Ù„ 8 -->
                    <div class="question-block" data-question-id="q8">
                        <p class="question-prompt">
                            <span class="question-number">Ù¨</span>
                            <span class="question-title">Ù…Ø¬Ù…ÙˆØ¹Ø© Ø­Ù„ Ø§Ù„Ù…ØªØ¨Ø§ÙŠÙ†Ø© |Ø³| < -Ù£ Ù‡ÙŠ: <span class="meta-info">ØªØ­Ù„ÙŠÙ„ - Ø¯Ø±Ø³ Ù¤-Ù¥</span></span>
                        </p>
                        <div class="options-container">
                            <label class="option"><input type="radio" name="q8"><span class="option-label"></span><span class="option-text">{Ù£}</span></label>
                            <label class="option"><input type="radio" name="q8"><span class="option-label"></span><span class="option-text">{-Ù£}</span></label>
                            <label class="option"><input type="radio" name="q8"><span class="option-label"></span><span class="option-text">Ø­ (Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©)</span></label>
                            <label class="option" data-correct="true"><input type="radio" name="q8"><span class="option-label"></span><span class="option-text">âˆ… (Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø®Ø§Ù„ÙŠØ©)</span></label>
                        </div>
                    </div>

                    <!-- Ø³Ø¤Ø§Ù„ 9 -->
                    <div class="question-block" data-question-id="q9">
                        <p class="question-prompt">
                            <span class="question-number">Ù©</span>
                            <span class="question-title">Ù…Ø§ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù‚ÙŠØ§Ø³ÙŠØ© Ù„Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Øµ + Ù¡ = <span class="fraction"><span class="numerator">Ù¢</span><span class="denominator">Ù¥</span></span> (Ø³ - Ù¢)ØŸ <span class="meta-info">ØªØ­Ù„ÙŠÙ„ - Ø¯Ø±Ø³ Ù£-Ù¢</span></span>
                        </p>
                        <div class="options-container">
                            <label class="option" data-correct="true"><input type="radio" name="q9"><span class="option-label"></span><span class="option-text">Ù¢Ø³ - Ù¥Øµ = Ù©</span></label>
                            <label class="option"><input type="radio" name="q9"><span class="option-label"></span><span class="option-text"><span class="fraction"><span class="numerator">Ù¢</span><span class="denominator">Ù¥</span></span>Ø³ - Øµ = <span class="fraction"><span class="numerator">Ù©</span><span class="denominator">Ù¥</span></span></span></label>
                            <label class="option"><input type="radio" name="q9"><span class="option-label"></span><span class="option-text">-Ù¢Ø³ + Ù¥Øµ = -Ù©</span></label>
                            <label class="option"><input type="radio" name="q9"><span class="option-label"></span><span class="option-text">Ù¢Ø³ + Ù¥Øµ = Ù©</span></label>
                        </div>
                    </div>

                    <!-- Ø³Ø¤Ø§Ù„ 10 -->
                    <div class="question-block" data-question-id="q10">
                        <p class="question-prompt">
                            <span class="question-number">Ù¡Ù </span>
                            <span class="question-title">Ø¹Ø¯Ø¯ Ø­Ù„ÙˆÙ„ Ù†Ø¸Ø§Ù… Ù…Ø¹Ø§Ø¯Ù„ØªÙŠÙ† Ø®Ø·ÙŠØªÙŠÙ† Ù…Ù…Ø«Ù„ Ø¨Ù…Ø³ØªÙ‚ÙŠÙ…ÙŠÙ† Ù…ØªÙˆØ§Ø²ÙŠÙŠÙ† Ù‡Ùˆ: <span class="meta-info">ÙÙ‡Ù… - Ø¯Ø±Ø³ Ù¥-Ù¡</span></span>
                        </p>
                        <div class="options-container">
                            <label class="option"><input type="radio" name="q10"><span class="option-label"></span><span class="option-text">Ø­Ù„ ÙˆØ§Ø­Ø¯</span></label>
                            <label class="option" data-correct="true"><input type="radio" name="q10"><span class="option-label"></span><span class="option-text">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø­Ù„</span></label>
                            <label class="option"><input type="radio" name="q10"><span class="option-label"></span><span class="option-text">Ø¹Ø¯Ø¯ Ù„Ø§ Ù†Ù‡Ø§Ø¦ÙŠ Ù…Ù† Ø§Ù„Ø­Ù„ÙˆÙ„</span></label>
                            <label class="option"><input type="radio" name="q10"><span class="option-label"></span><span class="option-text">Ø­Ù„Ø§Ù†</span></label>
                        </div>
                    </div>

                    <!-- Ø³Ø¤Ø§Ù„ 11 -->
                    <div class="question-block" data-question-id="q11">
                        <p class="question-prompt">
                            <span class="question-number">Ù¡Ù¡</span>
                            <span class="question-title">Ø£ÙØ¶Ù„ Ø·Ø±ÙŠÙ‚Ø© Ù„Ø­Ù„ Ø§Ù„Ù†Ø¸Ø§Ù…: Ù£Ø³ + Ù¤Øµ = Ù¡Ù¢ Ùˆ Ù£Ø³ - Ù¦Øµ = Ù¡Ù¨ Ù‡ÙŠ: <span class="meta-info">ØªØ­Ù„ÙŠÙ„ - Ø¯Ø±Ø³ Ù¥-Ù£</span></span>
                        </p>
                        <div class="options-container">
                            <label class="option"><input type="radio" name="q11"><span class="option-label"></span><span class="option-text">Ø§Ù„ØªØ¹ÙˆÙŠØ¶</span></label>
                            <label class="option" data-correct="true"><input type="radio" name="q11"><span class="option-label"></span><span class="option-text">Ø§Ù„Ø­Ø°Ù Ø¨Ø§Ù„Ø·Ø±Ø­</span></label>
                            <label class="option"><input type="radio" name="q11"><span class="option-label"></span><span class="option-text">Ø§Ù„ØªÙ…Ø«ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ</span></label>
                            <label class="option"><input type="radio" name="q11"><span class="option-label"></span><span class="option-text">Ø§Ù„Ø­Ø°Ù Ø¨Ø§Ù„Ø¬Ù…Ø¹</span></label>
                        </div>
                    </div>

                    <!-- Ø³Ø¤Ø§Ù„ 12 -->
                    <div class="question-block" data-question-id="q12">
                        <p class="question-prompt">
                            <span class="question-number">Ù¡Ù¢</span>
                            <span class="question-title">Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ… Ø§Ù„Ù…Ø§Ø± Ø¨Ø§Ù„Ù†Ù‚Ø·Ø© (Ù¡ØŒ Ù¢) ÙˆÙ…ÙŠÙ„Ù‡ Ù£ Ø¨ØµÙŠØºØ© Ø§Ù„Ù…ÙŠÙ„ ÙˆÙ†Ù‚Ø·Ø©: <span class="meta-info">ØªØ·Ø¨ÙŠÙ‚ - Ø¯Ø±Ø³ Ù£-Ù£</span></span>
                        </p>
                        <div class="options-container">
                            <label class="option" data-correct="true"><input type="radio" name="q12"><span class="option-label"></span><span class="option-text">Øµ - Ù¢ = Ù£(Ø³ - Ù¡)</span></label>
                            <label class="option"><input type="radio" name="q12"><span class="option-label"></span><span class="option-text">Øµ - Ù¡ = Ù£(Ø³ - Ù¢)</span></label>
                            <label class="option"><input type="radio" name="q12"><span class="option-label"></span><span class="option-text">Øµ + Ù¢ = Ù£(Ø³ + Ù¡)</span></label>
                            <label class="option"><input type="radio" name="q12"><span class="option-label"></span><span class="option-text">Øµ = Ù£Ø³ + Ù¡</span></label>
                        </div>
                    </div>
                    
                    <!-- Ø³Ø¤Ø§Ù„ 13 -->
                    <div class="question-block" data-question-id="q13">
                        <p class="question-prompt">
                            <span class="question-number">Ù¡Ù£</span>
                            <span class="question-title">Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø³ = Ù£Øµ + Ù¡ ØŒ Ù¢Ø³ + Øµ = Ù© ØŒ ÙØ¥Ù† Ù‚ÙŠÙ…Ø© Øµ ØªØ³Ø§ÙˆÙŠ: <span class="meta-info">ØªØ·Ø¨ÙŠÙ‚ - Ø¯Ø±Ø³ Ù¥-Ù¢</span></span>
                        </p>
                        <div class="options-container">
                            <label class="option" data-correct="true"><input type="radio" name="q13"><span class="option-label"></span><span class="option-text">Ù¡</span></label>
                            <label class="option"><input type="radio" name="q13"><span class="option-label"></span><span class="option-text">Ù¢</span></label>
                            <label class="option"><input type="radio" name="q13"><span class="option-label"></span><span class="option-text">Ù£</span></label>
                            <label class="option"><input type="radio" name="q13"><span class="option-label"></span><span class="option-text">Ù¤</span></label>
                        </div>
                    </div>

                    <!-- Ø³Ø¤Ø§Ù„ 14 -->
                    <div class="question-block" data-question-id="q14">
                        <p class="question-prompt">
                            <span class="question-number">Ù¡Ù¤</span>
                            <span class="question-title">Ø§Ù„Ù…ØªØ¨Ø§ÙŠÙ†Ø© Ø§Ù„ØªÙŠ ØªÙ…Ø«Ù„ Ø§Ù„Ø¹Ø¨Ø§Ø±Ø© "Ø¹Ø¯Ø¯ Ø²Ø§Ø¦Ø¯ Ù¤ Ù„Ø§ ÙŠÙ‚Ù„ Ø¹Ù† Ù¡Ù ": <span class="meta-info">ÙÙ‡Ù… - Ø¯Ø±Ø³ Ù¤-Ù¡</span></span>
                        </p>
                        <div class="options-container">
                            <label class="option" data-correct="true"><input type="radio" name="q14"><span class="option-label"></span><span class="option-text">Ø³ + Ù¤ â‰¥ Ù¡Ù </span></label>
                            <label class="option"><input type="radio" name="q14"><span class="option-label"></span><span class="option-text">Ø³ + Ù¤ â‰¤ Ù¡Ù </span></label>
                            <label class="option"><input type="radio" name="q14"><span class="option-label"></span><span class="option-text">Ø³ + Ù¤ > Ù¡Ù </span></label>
                            <label class="option"><input type="radio" name="q14"><span class="option-label"></span><span class="option-text">Ø³ + Ù¤ < Ù¡Ù </span></label>
                        </div>
                    </div>
                     <!-- Ø³Ø¤Ø§Ù„ 15 -->
                     <div class="question-block" data-question-id="q15">
                        <p class="question-prompt">
                            <span class="question-number">Ù¡Ù¥</span>
                            <span class="question-title">Ø¹Ù†Ø¯ Ø­Ù„ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© |Ø³ + Ù¢| = Ù¥ØŒ ÙØ¥Ù† Ù‚ÙŠÙ… Ø³ Ù‡ÙŠ: <span class="meta-info">ØªØ·Ø¨ÙŠÙ‚ - Ø¯Ø±Ø³ Ù¤-Ù¥</span></span>
                        </p>
                        <div class="options-container">
                            <label class="option"><input type="radio" name="q15"><span class="option-label"></span><span class="option-text">Ù£ØŒ Ù§</span></label>
                            <label class="option" data-correct="true"><input type="radio" name="q15"><span class="option-label"></span><span class="option-text">Ù£ØŒ -Ù§</span></label>
                            <label class="option"><input type="radio" name="q15"><span class="option-label"></span><span class="option-text">-Ù£ØŒ Ù§</span></label>
                            <label class="option"><input type="radio" name="q15"><span class="option-label"></span><span class="option-text">-Ù£ØŒ -Ù§</span></label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="page-footer">ØµÙØ­Ø© Ù¢ Ù…Ù† Ù£</div>
        </div>

        <!-- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø© -->
        <div class="page">
            <div class="page-content">
                <h2 class="section-title">Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…Ù‚Ø§Ù„ÙŠØ© (Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø°Ø§ØªÙŠ - Ù¥ Ø¯Ø±Ø¬Ø§Øª)</h2>
                
                <div class="essay-questions-container">
                    <!-- Ø³Ø¤Ø§Ù„ Ù…Ù‚Ø§Ù„ÙŠ 1 -->
                    <div class="essay-question-block" id="essay-block-q16">
                        <p class="question-prompt">
                            <span class="question-number">Ù¡Ù¦</span>
                            <span class="question-title">Ø³Ø¤Ø§Ù„ Ù„ÙØ¸ÙŠ: Ø§Ø´ØªØ±Ù‰ Ø·Ø§Ù„Ø¨ Ù‚Ù„Ù…ÙŠÙ† ÙˆÙ£ Ø¯ÙØ§ØªØ± Ø¨Ù…Ø¨Ù„Øº Ù¡Ù£ Ø±ÙŠØ§Ù„Ø§Ù‹. Ø¥Ø°Ø§ ÙƒØ§Ù† Ø³Ø¹Ø± Ù‚Ù„Ù…ÙŠÙ† ÙˆØ¯ÙØªØ± ÙˆØ§Ø­Ø¯ Ù‡Ùˆ Ù§ Ø±ÙŠØ§Ù„Ø§ØªØŒ ÙÙ…Ø§ Ø³Ø¹Ø± Ø§Ù„Ù‚Ù„Ù… ÙˆØ³Ø¹Ø± Ø§Ù„Ø¯ÙØªØ±ØŸ (Ø¯Ø±Ø¬ØªØ§Ù†) 
                                <span class="meta-info">ØªØ·Ø¨ÙŠÙ‚ - Ø¯Ø±Ø³ Ù¥-Ù¤</span>
                            </span>
                        </p>
                        <textarea class="answer-space" id="q16-answer" placeholder="Ø§ÙƒØªØ¨ Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø§Øª ÙˆØ­Ù„Ù‘Ù‡ Ù‡Ù†Ø§..."></textarea>
                        
                        <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø°Ø§ØªÙŠ Ù…Ø®ÙÙŠØ© -->
                        <div class="self-grading-section" id="q16-grading">
                            <div class="model-answer-box">
                                <span class="model-answer-title">Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ÙŠØ©:</span>
                                1) Ù†ÙØ±Ø¶ Ø§Ù„Ù‚Ù„Ù… (Ù‚) ÙˆØ§Ù„Ø¯ÙØªØ± (Ø¯).<br>
                                2) Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰: 2Ù‚ + 3Ø¯ = 13<br>
                                3) Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©: 2Ù‚ + Ø¯ = 7<br>
                                4) Ø¨Ø·Ø±Ø­ Ø§Ù„Ø«Ø§Ù†ÙŠØ© Ù…Ù† Ø§Ù„Ø£ÙˆÙ„Ù‰: 2Ø¯ = 6 â† Ø¥Ø°Ù† Ø³Ø¹Ø± Ø§Ù„Ø¯ÙØªØ± (Ø¯) = 3 Ø±ÙŠØ§Ù„Ø§Øª.<br>
                                5) Ø¨Ø§Ù„ØªØ¹ÙˆÙŠØ¶: 2Ù‚ + 3 = 7 â† 2Ù‚ = 4 â† Ø³Ø¹Ø± Ø§Ù„Ù‚Ù„Ù… (Ù‚) = 2 Ø±ÙŠØ§Ù„.
                            </div>
                            <div class="grading-input-box">
                                <label for="q16-score">ÙƒÙ… ØªØ¹Ø·ÙŠ Ù†ÙØ³Ùƒ Ù…Ù† 2ØŸ</label>
                                <input type="text" inputmode="decimal" id="q16-score" placeholder="0">
                                <span class="grading-note">(Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ù‚ØµÙˆÙ‰: 2)</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Ø³Ø¤Ø§Ù„ Ù…Ù‚Ø§Ù„ÙŠ 2 -->
                    <div class="essay-question-block" id="essay-block-q17">
                        <p class="question-prompt">
                            <span class="question-number">Ù¡Ù§</span>
                            <span class="question-title">Ø­Ù„ Ù…ØªØ¨Ø§ÙŠÙ†Ø© Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø·Ù„Ù‚Ø© Ø§Ù„ØªØ§Ù„ÙŠØ© ÙˆÙ…Ø«Ù„ Ø§Ù„Ø­Ù„: |Ø³ - Ù£| â‰¤ Ù¢ (Ø¯Ø±Ø¬Ø© ÙˆÙ†ØµÙ) 
                                <span class="meta-info">ØªØ·Ø¨ÙŠÙ‚ - Ø¯Ø±Ø³ Ù¤-Ù¥</span>
                            </span>
                        </p>
                        <textarea class="answer-space" id="q17-answer" placeholder="Ø§ÙƒØªØ¨ Ø®Ø·ÙˆØ§Øª Ø§Ù„Ø­Ù„..."></textarea>
                        
                        <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø°Ø§ØªÙŠ Ù…Ø®ÙÙŠØ© -->
                        <div class="self-grading-section" id="q17-grading">
                            <div class="model-answer-box">
                                <span class="model-answer-title">Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ÙŠØ©:</span>
                                1) Ø¨Ù…Ø§ Ø£Ù† Ø§Ù„Ø¹Ù„Ø§Ù…Ø© (â‰¤) Ù†ÙƒØªØ¨Ù‡Ø§ Ù…ØªØ¨Ø§ÙŠÙ†Ø© Ù…Ø±ÙƒØ¨Ø© Ø¨Ù€ "Ùˆ".<br>
                                2) -2 â‰¤ Ø³ - 3 â‰¤ 2<br>
                                3) Ù†Ø¶ÙŠÙ 3 Ù„ÙƒÙ„ Ø§Ù„Ø£Ø·Ø±Ø§Ù: 1 â‰¤ Ø³ â‰¤ 5<br>
                                4) Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø­Ù„: {Ø³ | 1 â‰¤ Ø³ â‰¤ 5}
                            </div>
                            <div class="grading-input-box">
                                <label for="q17-score">ÙƒÙ… ØªØ¹Ø·ÙŠ Ù†ÙØ³Ùƒ Ù…Ù† 1.5ØŸ</label>
                                <input type="text" inputmode="decimal" id="q17-score" placeholder="0">
                                <span class="grading-note">(Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ù‚ØµÙˆÙ‰: 1.5)</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Ø³Ø¤Ø§Ù„ Ù…Ù‚Ø§Ù„ÙŠ 3 -->
                    <div class="essay-question-block" id="essay-block-q18">
                        <p class="question-prompt">
                            <span class="question-number">Ù¡Ù¨</span>
                            <span class="question-title">Ø§ÙƒØªØ¨ Ø¨ØµÙŠØºØ© Ø§Ù„Ù…ÙŠÙ„ ÙˆØ§Ù„Ù…Ù‚Ø·Ø¹ Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ… Ø§Ù„Ù…Ø§Ø± Ø¨Ø§Ù„Ù†Ù‚Ø·Ø© (Ù£ØŒ Ù¤) ÙˆÙŠÙˆØ§Ø²ÙŠ Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ… Øµ = Ù¢Ø³ - Ù¥. (Ø¯Ø±Ø¬Ø© ÙˆÙ†ØµÙ)
                                <span class="meta-info">ØªØ­Ù„ÙŠÙ„ - Ø¯Ø±Ø³ Ù£-Ù¤</span>
                            </span>
                        </p>
                        <textarea class="answer-space" id="q18-answer" placeholder="Ø§ÙƒØªØ¨ Ø®Ø·ÙˆØ§Øª Ø§Ù„Ø­Ù„ ÙˆØ§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©..."></textarea>
                        
                         <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø°Ø§ØªÙŠ Ù…Ø®ÙÙŠØ© -->
                         <div class="self-grading-section" id="q18-grading">
                            <div class="model-answer-box">
                                <span class="model-answer-title">Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ÙŠØ©:</span>
                                1) Ø¨Ù…Ø§ Ø£Ù† Ø§Ù„Ù…Ø³ØªÙ‚ÙŠÙ… ÙŠÙˆØ§Ø²ÙŠØŒ Ø¥Ø°Ù† Ø§Ù„Ù…ÙŠÙ„ = 2.<br>
                                2) Ù†Ø³ØªØ®Ø¯Ù… ØµÙŠØºØ© Ø§Ù„Ù…ÙŠÙ„ ÙˆØ§Ù„Ù…Ù‚Ø·Ø¹: Øµ = Ù… Ø³ + Ø¨<br>
                                3) Ù†Ø¹ÙˆØ¶ Ø¨Ø§Ù„Ù†Ù‚Ø·Ø© (3ØŒ 4): 4 = 2(3) + Ø¨ â† 4 = 6 + Ø¨<br>
                                4) Ù†Ø·Ø±Ø­ 6 Ù…Ù† Ø§Ù„Ø·Ø±ÙÙŠÙ†: Ø¨ = -2<br>
                                5) Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©: Øµ = 2Ø³ - 2
                            </div>
                            <div class="grading-input-box">
                                <label for="q18-score">ÙƒÙ… ØªØ¹Ø·ÙŠ Ù†ÙØ³Ùƒ Ù…Ù† 1.5ØŸ</label>
                                <input type="text" inputmode="decimal" id="q18-score" placeholder="0">
                                <span class="grading-note">(Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ù‚ØµÙˆÙ‰: 1.5)</span>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div class="page-footer">ØµÙØ­Ø© Ù£ Ù…Ù† Ù£</div>
        </div>
    </div>

    <script>
        // Global variables
        let studentName = '', studentClass = '', startTime, attemptCount = 1;
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzrf1-At3Pq7i39bGV3F1iD3-b0G-WWyRi5cgpKeQjyn_N5fh2EmGhoyRKUsbLd-F_UJQ/exec";
        let mcqScore = 0; // Store MCQ score globally after grading

        document.addEventListener('DOMContentLoaded', () => {
            const savedStudent = localStorage.getItem('currentStudent');
            if (savedStudent) {
                startTest(JSON.parse(savedStudent));
            }
        });

        async function loginWithId() {
            const studentId = document.getElementById('student-id-input').value.trim();
            const classId = document.getElementById('student-class-input').value;
            const statusElement = document.getElementById('login-status');
            
            if (!studentId || !classId) {
                statusElement.textContent = 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ© ÙˆØ§Ø®ØªÙŠØ§Ø± Ø§Ù„ØµÙ.';
                return;
            }
            statusElement.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...';
            
            const url = `${SCRIPT_URL}?action=getStudentData&studentId=${studentId}&classId=${classId}`;
            try {
                const response = await fetch(url);
                const result = await response.json();
                if (result.status === 'success' && result.data) {
                    localStorage.setItem('currentStudent', JSON.stringify(result.data));
                    startTest(result.data);
                } else {
                    throw new Error(result.message || 'Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ© Ø£Ùˆ Ø§Ù„ØµÙ ØºÙŠØ± ØµØ­ÙŠØ­.');
                }
            } catch (error) {
                console.error("Fetch Student Error:", error);
                statusElement.textContent = `Ø®Ø·Ø£: ${error.message}`;
            }
        }

        function startTest(student) {
            studentName = student.name;
            studentClass = student.class;
            document.getElementById('login-modal').style.display = 'none';
            document.getElementById('test-container').style.display = 'block';
            document.querySelector('.controls').style.display = 'flex';
            let storedAttempts = localStorage.getItem('mathTestAttempts_U2');
            attemptCount = storedAttempts ? parseInt(storedAttempts) + 1 : 1;
            localStorage.setItem('mathTestAttempts_U2', attemptCount);
            document.getElementById('display-student-name').textContent = studentName;
            document.getElementById('display-student-class').textContent = studentClass;
            const today = new Date();
            const hijriDate = new Intl.DateTimeFormat('ar-SA-u-ca-islamic-nu-arab', { day: 'numeric', month: 'long', year: 'numeric' }).format(today);
            document.getElementById('display-test-date').textContent = hijriDate;
            startTime = Date.now();
            shuffleOptions();
        }

        function shuffleOptions() {
            const questions = document.querySelectorAll('.question-block[data-question-id]');
            const optionLabels = ['Ø£', 'Ø¨', 'Ø¬', 'Ø¯'];
            questions.forEach(question => {
                const container = question.querySelector('.options-container');
                if (container) {
                    const options = Array.from(container.children);
                    for (let i = options.length - 1; i > 0; i--) {
                        const j = Math.floor(Math.random() * (i + 1));
                        [options[i], options[j]] = [options[j], options[i]];
                    }
                    container.innerHTML = '';
                    options.forEach((option, index) => {
                        option.querySelector('.option-label').textContent = optionLabels[index];
                        container.appendChild(option);
                    });
                }
            });
        }
        
        function startSelfGrading() {
            if (!studentName || !studentClass) { console.error('Student data not found.'); return; }
            
            mcqScore = 0;
            const questions = document.querySelectorAll('.question-block[data-question-id]');
            document.querySelectorAll('.option').forEach(label => {
                label.classList.remove('correct', 'incorrect');
            });
            
            questions.forEach(question => {
                const questionId = question.dataset.questionId;
                const userAnswerNode = document.querySelector(`input[name="${questionId}"]:checked`);
                const correctAnswerNode = question.querySelector('.option[data-correct="true"]');
                
                if (correctAnswerNode) correctAnswerNode.classList.add('correct');
                
                if (userAnswerNode) {
                    const selectedLabel = userAnswerNode.parentElement;
                    if (selectedLabel.dataset.correct) {
                        mcqScore++;
                    } else {
                        selectedLabel.classList.add('incorrect');
                    }
                }
                
                const radios = question.querySelectorAll('input[type="radio"]');
                radios.forEach(r => r.disabled = true);
            });

            document.querySelectorAll('.self-grading-section').forEach(div => {
                div.style.display = 'block';
            });
            
            document.querySelectorAll('.answer-space').forEach(txt => {
                txt.readOnly = true;
                txt.style.backgroundColor = "#e9e9e9";
            });

            document.getElementById('start-grading-btn').style.display = 'none';
            document.getElementById('submit-final-btn').style.display = 'block';
            
            alert(`ØªÙ… ØªØµØ­ÙŠØ­ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ÙŠØ©. Ø­ØµÙ„Øª Ø¹Ù„Ù‰ ${mcqScore} Ù…Ù† 15.\nØ§Ù„Ø¢Ù†: Ù‚Ø§Ø±Ù† Ø¥Ø¬Ø§Ø¨Ø§ØªÙƒ Ø§Ù„Ù…Ù‚Ø§Ù„ÙŠØ© Ø¨Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ÙŠØ© ÙˆØ¶Ø¹ Ø¯Ø±Ø¬ØªÙƒ Ø¨Ù†ÙØ³Ùƒ.`);
            
            document.getElementById('essay-block-q16').scrollIntoView({behavior: "smooth"});
        }

        // --- Helper function to parse Arabic/English numbers ---
        function parseLocalNum(str) {
            if (!str) return NaN;
            // Map Arabic numerals to English numerals
            var ar = 'Ù Ù¡Ù¢Ù£Ù¤Ù¥Ù¦Ù§Ù¨Ù©';
            var en = '0123456789';
            var res = '';
            for (var i = 0; i < str.length; i++) {
                var c = str[i];
                var idx = ar.indexOf(c);
                if (idx >= 0) res += en[idx];
                else res += c;
            }
            // Also handle commas as decimals if user types 1,5
            res = res.replace(/,/g, '.');
            return parseFloat(res);
        }

        // 2. ÙˆØ¸ÙŠÙØ© Ø§Ø¹ØªÙ…Ø§Ø¯ Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© (Robust Version)
        function submitFinalGrade() {
            try {
                const score16Input = document.getElementById('q16-score');
                const score17Input = document.getElementById('q17-score');
                const score18Input = document.getElementById('q18-score');

                // Reset styles
                score16Input.style.border = '2px solid #007bff';
                score17Input.style.border = '2px solid #007bff';
                score18Input.style.border = '2px solid #007bff';

                // Robust parsing using the helper function
                let s16 = parseLocalNum(score16Input.value);
                let s17 = parseLocalNum(score17Input.value);
                let s18 = parseLocalNum(score18Input.value);

                // Validation with specific alerts
                if (isNaN(s16)) {
                    alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¯Ø±Ø¬Ø© Ø§Ù„Ø³Ø¤Ø§Ù„ Ù¡Ù¦ (Ø¶Ø¹ 0 Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø®Ø·Ø£).");
                    score16Input.style.border = '2px solid red';
                    score16Input.scrollIntoView({behavior: 'smooth', block: 'center'});
                    score16Input.focus();
                    return;
                }
                if (isNaN(s17)) {
                    alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¯Ø±Ø¬Ø© Ø§Ù„Ø³Ø¤Ø§Ù„ Ù¡Ù§ (Ø¶Ø¹ 0 Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø®Ø·Ø£).");
                    score17Input.style.border = '2px solid red';
                    score17Input.scrollIntoView({behavior: 'smooth', block: 'center'});
                    score17Input.focus();
                    return;
                }
                if (isNaN(s18)) {
                    alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¯Ø±Ø¬Ø© Ø§Ù„Ø³Ø¤Ø§Ù„ Ù¡Ù¨ (Ø¶Ø¹ 0 Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø®Ø·Ø£).");
                    score18Input.style.border = '2px solid red';
                    score18Input.scrollIntoView({behavior: 'smooth', block: 'center'});
                    score18Input.focus();
                    return;
                }

                if (s16 > 2 || s16 < 0) { 
                    alert("Ø¯Ø±Ø¬Ø© Ø§Ù„Ø³Ø¤Ø§Ù„ 16 ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø¨ÙŠÙ† 0 Ùˆ 2"); 
                    score16Input.style.border = '2px solid red';
                    score16Input.focus(); 
                    return; 
                }
                if (s17 > 1.5 || s17 < 0) { 
                    alert("Ø¯Ø±Ø¬Ø© Ø§Ù„Ø³Ø¤Ø§Ù„ 17 ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø¨ÙŠÙ† 0 Ùˆ 1.5"); 
                    score17Input.style.border = '2px solid red';
                    score17Input.focus(); 
                    return; 
                }
                if (s18 > 1.5 || s18 < 0) { 
                    alert("Ø¯Ø±Ø¬Ø© Ø§Ù„Ø³Ø¤Ø§Ù„ 18 ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø¨ÙŠÙ† 0 Ùˆ 1.5"); 
                    score18Input.style.border = '2px solid red';
                    score18Input.focus(); 
                    return; 
                }

                // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ
                const essayTotal = s16 + s17 + s18;
                // Ensure mcqScore is a number
                const finalMcq = (typeof mcqScore === 'number') ? mcqScore : 0;
                const finalScore = finalMcq + essayTotal;
                
                // Calculate duration safely
                let duration = 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';
                if (startTime) {
                    duration = Math.floor((Date.now() - startTime) / 60000) + ' Ø¯Ù‚ÙŠÙ‚Ø©';
                }

                // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©
                document.getElementById('result-student-name').textContent = studentName || '---';
                document.getElementById('result-student-class').textContent = studentClass || '---';
                document.getElementById('result-duration').textContent = duration;
                document.getElementById('result-mcq-score').textContent = `${finalMcq} / 15`;
                document.getElementById('result-essay-score').textContent = `${essayTotal} / 5`;
                document.getElementById('result-total-score').textContent = `${finalScore} / 20`;

                document.getElementById('result-modal').style.display = 'flex';
                document.getElementById('submit-final-btn').style.display = 'none';
                document.getElementById('retry-btn-main').style.display = 'block';

            } catch (e) {
                alert("Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ØªÙ‚Ù†ÙŠ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹: " + e.message);
                console.error(e);
            }
        }
        
        // 3. ÙˆØ¸ÙŠÙØ© Ø¥Ø±Ø³Ø§Ù„ ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
        function sendToWhatsApp() {
            // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¹Ù„Ù…
            const teacherPhone = "966532763225"; 
            
            // Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ù…ÙˆØ¯Ø§Ù„
            const name = document.getElementById('result-student-name').textContent;
            const className = document.getElementById('result-student-class').textContent;
            const finalScore = document.getElementById('result-total-score').textContent;
            
            // ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ø±Ø³Ø§Ù„Ø©
            const message = `Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒÙ… ÙˆØ±Ø­Ù…Ø© Ø§Ù„Ù„Ù‡ØŒ\n\nØ¥Ù„ÙŠÙƒ Ù†ØªÙŠØ¬Ø© Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø·Ø§Ù„Ø¨:\n\nğŸ‘¤ Ø§Ù„Ø§Ø³Ù…: ${name}\nğŸ« Ø§Ù„ØµÙ: ${className}\nğŸ“Š Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©: ${finalScore}\n\nØ´ÙƒØ±Ø§Ù‹ Ù„Ùƒ.`;
            
            // ØªØ´ÙÙŠØ± Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ø±Ø§Ø¨Ø·
            const encodedMessage = encodeURIComponent(message);
            
            // ÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨ ÙÙŠ Ù†Ø§ÙØ°Ø© Ø¬Ø¯ÙŠØ¯Ø©
            const whatsappUrl = `https://wa.me/${teacherPhone}?text=${encodedMessage}`;
            window.open(whatsappUrl, '_blank');
        }

        function reviewAnswers() { document.getElementById('result-modal').style.display = 'none'; }

        function retryTest() {
            location.reload(); 
        }
    </script>
</body>
</html>
